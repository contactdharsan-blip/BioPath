(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function C(G){return G===null||typeof G!="object"?null:(G=w&&G[w]||G["@@iterator"],typeof G=="function"?G:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,E={};function f(G,te,ue){this.props=G,this.context=te,this.refs=E,this.updater=ue||R}f.prototype.isReactComponent={},f.prototype.setState=function(G,te){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,te,"setState")},f.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function g(){}g.prototype=f.prototype;function S(G,te,ue){this.props=G,this.context=te,this.refs=E,this.updater=ue||R}var O=S.prototype=new g;O.constructor=S,T(O,f.prototype),O.isPureReactComponent=!0;var D=Array.isArray,M=Object.prototype.hasOwnProperty,_={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function j(G,te,ue){var de,xe={},ve=null,Se=null;if(te!=null)for(de in te.ref!==void 0&&(Se=te.ref),te.key!==void 0&&(ve=""+te.key),te)M.call(te,de)&&!A.hasOwnProperty(de)&&(xe[de]=te[de]);var Ee=arguments.length-2;if(Ee===1)xe.children=ue;else if(1<Ee){for(var he=Array(Ee),Re=0;Re<Ee;Re++)he[Re]=arguments[Re+2];xe.children=he}if(G&&G.defaultProps)for(de in Ee=G.defaultProps,Ee)xe[de]===void 0&&(xe[de]=Ee[de]);return{$$typeof:e,type:G,key:ve,ref:Se,props:xe,_owner:_.current}}function L(G,te){return{$$typeof:e,type:G.type,key:te,ref:G.ref,props:G.props,_owner:G._owner}}function $(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function F(G){var te={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ue){return te[ue]})}var W=/\/+/g;function U(G,te){return typeof G=="object"&&G!==null&&G.key!=null?F(""+G.key):te.toString(36)}function q(G,te,ue,de,xe){var ve=typeof G;(ve==="undefined"||ve==="boolean")&&(G=null);var Se=!1;if(G===null)Se=!0;else switch(ve){case"string":case"number":Se=!0;break;case"object":switch(G.$$typeof){case e:case t:Se=!0}}if(Se)return Se=G,xe=xe(Se),G=de===""?"."+U(Se,0):de,D(xe)?(ue="",G!=null&&(ue=G.replace(W,"$&/")+"/"),q(xe,te,ue,"",function(Re){return Re})):xe!=null&&($(xe)&&(xe=L(xe,ue+(!xe.key||Se&&Se.key===xe.key?"":(""+xe.key).replace(W,"$&/")+"/")+G)),te.push(xe)),1;if(Se=0,de=de===""?".":de+":",D(G))for(var Ee=0;Ee<G.length;Ee++){ve=G[Ee];var he=de+U(ve,Ee);Se+=q(ve,te,ue,he,xe)}else if(he=C(G),typeof he=="function")for(G=he.call(G),Ee=0;!(ve=G.next()).done;)ve=ve.value,he=de+U(ve,Ee++),Se+=q(ve,te,ue,he,xe);else if(ve==="object")throw te=String(G),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Se}function H(G,te,ue){if(G==null)return G;var de=[],xe=0;return q(G,de,"","",function(ve){return te.call(ue,ve,xe++)}),de}function Y(G){if(G._status===-1){var te=G._result;te=te(),te.then(function(ue){(G._status===0||G._status===-1)&&(G._status=1,G._result=ue)},function(ue){(G._status===0||G._status===-1)&&(G._status=2,G._result=ue)}),G._status===-1&&(G._status=0,G._result=te)}if(G._status===1)return G._result.default;throw G._result}var Z={current:null},X={transition:null},J={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:X,ReactCurrentOwner:_};function Q(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:H,forEach:function(G,te,ue){H(G,function(){te.apply(this,arguments)},ue)},count:function(G){var te=0;return H(G,function(){te++}),te},toArray:function(G){return H(G,function(te){return te})||[]},only:function(G){if(!$(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},react_production_min.Component=f,react_production_min.Fragment=n,react_production_min.Profiler=o,react_production_min.PureComponent=S,react_production_min.StrictMode=i,react_production_min.Suspense=m,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,react_production_min.act=Q,react_production_min.cloneElement=function(G,te,ue){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var de=T({},G.props),xe=G.key,ve=G.ref,Se=G._owner;if(te!=null){if(te.ref!==void 0&&(ve=te.ref,Se=_.current),te.key!==void 0&&(xe=""+te.key),G.type&&G.type.defaultProps)var Ee=G.type.defaultProps;for(he in te)M.call(te,he)&&!A.hasOwnProperty(he)&&(de[he]=te[he]===void 0&&Ee!==void 0?Ee[he]:te[he])}var he=arguments.length-2;if(he===1)de.children=ue;else if(1<he){Ee=Array(he);for(var Re=0;Re<he;Re++)Ee[Re]=arguments[Re+2];de.children=Ee}return{$$typeof:e,type:G.type,key:xe,ref:ve,props:de,_owner:Se}},react_production_min.createContext=function(G){return G={$$typeof:h,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:l,_context:G},G.Consumer=G},react_production_min.createElement=j,react_production_min.createFactory=function(G){var te=j.bind(null,G);return te.type=G,te},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(G){return{$$typeof:d,render:G}},react_production_min.isValidElement=$,react_production_min.lazy=function(G){return{$$typeof:v,_payload:{_status:-1,_result:G},_init:Y}},react_production_min.memo=function(G,te){return{$$typeof:b,type:G,compare:te===void 0?null:te}},react_production_min.startTransition=function(G){var te=X.transition;X.transition={};try{G()}finally{X.transition=te}},react_production_min.unstable_act=Q,react_production_min.useCallback=function(G,te){return Z.current.useCallback(G,te)},react_production_min.useContext=function(G){return Z.current.useContext(G)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(G){return Z.current.useDeferredValue(G)},react_production_min.useEffect=function(G,te){return Z.current.useEffect(G,te)},react_production_min.useId=function(){return Z.current.useId()},react_production_min.useImperativeHandle=function(G,te,ue){return Z.current.useImperativeHandle(G,te,ue)},react_production_min.useInsertionEffect=function(G,te){return Z.current.useInsertionEffect(G,te)},react_production_min.useLayoutEffect=function(G,te){return Z.current.useLayoutEffect(G,te)},react_production_min.useMemo=function(G,te){return Z.current.useMemo(G,te)},react_production_min.useReducer=function(G,te,ue){return Z.current.useReducer(G,te,ue)},react_production_min.useRef=function(G){return Z.current.useRef(G)},react_production_min.useState=function(G){return Z.current.useState(G)},react_production_min.useSyncExternalStore=function(G,te,ue){return Z.current.useSyncExternalStore(G,te,ue)},react_production_min.useTransition=function(){return Z.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var e=requireReact(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,m,b){var v,w={},C=null,R=null;b!==void 0&&(C=""+b),m.key!==void 0&&(C=""+m.key),m.ref!==void 0&&(R=m.ref);for(v in m)i.call(m,v)&&!l.hasOwnProperty(v)&&(w[v]=m[v]);if(d&&d.defaultProps)for(v in m=d.defaultProps,m)w[v]===void 0&&(w[v]=m[v]);return{$$typeof:t,type:d,key:C,ref:R,props:w,_owner:o.current}}return reactJsxRuntime_production_min.Fragment=n,reactJsxRuntime_production_min.jsx=h,reactJsxRuntime_production_min.jsxs=h,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(e){function t(X,J){var Q=X.length;X.push(J);e:for(;0<Q;){var G=Q-1>>>1,te=X[G];if(0<o(te,J))X[G]=J,X[Q]=te,Q=G;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var J=X[0],Q=X.pop();if(Q!==J){X[0]=Q;e:for(var G=0,te=X.length,ue=te>>>1;G<ue;){var de=2*(G+1)-1,xe=X[de],ve=de+1,Se=X[ve];if(0>o(xe,Q))ve<te&&0>o(Se,xe)?(X[G]=Se,X[ve]=Q,G=ve):(X[G]=xe,X[de]=Q,G=de);else if(ve<te&&0>o(Se,Q))X[G]=Se,X[ve]=Q,G=ve;else break e}}return J}function o(X,J){var Q=X.sortIndex-J.sortIndex;return Q!==0?Q:X.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();e.unstable_now=function(){return h.now()-d}}var m=[],b=[],v=1,w=null,C=3,R=!1,T=!1,E=!1,f=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(X){for(var J=n(b);J!==null;){if(J.callback===null)i(b);else if(J.startTime<=X)i(b),J.sortIndex=J.expirationTime,t(m,J);else break;J=n(b)}}function D(X){if(E=!1,O(X),!T)if(n(m)!==null)T=!0,Y(M);else{var J=n(b);J!==null&&Z(D,J.startTime-X)}}function M(X,J){T=!1,E&&(E=!1,g(j),j=-1),R=!0;var Q=C;try{for(O(J),w=n(m);w!==null&&(!(w.expirationTime>J)||X&&!F());){var G=w.callback;if(typeof G=="function"){w.callback=null,C=w.priorityLevel;var te=G(w.expirationTime<=J);J=e.unstable_now(),typeof te=="function"?w.callback=te:w===n(m)&&i(m),O(J)}else i(m);w=n(m)}if(w!==null)var ue=!0;else{var de=n(b);de!==null&&Z(D,de.startTime-J),ue=!1}return ue}finally{w=null,C=Q,R=!1}}var _=!1,A=null,j=-1,L=5,$=-1;function F(){return!(e.unstable_now()-$<L)}function W(){if(A!==null){var X=e.unstable_now();$=X;var J=!0;try{J=A(!0,X)}finally{J?U():(_=!1,A=null)}}else _=!1}var U;if(typeof S=="function")U=function(){S(W)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,H=q.port2;q.port1.onmessage=W,U=function(){H.postMessage(null)}}else U=function(){f(W,0)};function Y(X){A=X,_||(_=!0,U())}function Z(X,J){j=f(function(){X(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){T||R||(T=!0,Y(M))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return n(m)},e.unstable_next=function(X){switch(C){case 1:case 2:case 3:var J=3;break;default:J=C}var Q=C;C=J;try{return X()}finally{C=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,J){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Q=C;C=X;try{return J()}finally{C=Q}},e.unstable_scheduleCallback=function(X,J,Q){var G=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?G+Q:G):Q=G,X){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Q+te,X={id:v++,callback:J,priorityLevel:X,startTime:Q,expirationTime:te,sortIndex:-1},Q>G?(X.sortIndex=Q,t(b,X),n(m)===null&&X===n(b)&&(E?(g(j),j=-1):E=!0,Z(D,Q-G))):(X.sortIndex=te,t(m,X),T||R||(T=!0,Y(M))),X},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(X){var J=C;return function(){var Q=C;C=J;try{return X.apply(this,arguments)}finally{C=Q}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var e=requireReact(),t=requireScheduler();function n(u){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+u,I=1;I<arguments.length;I++)p+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+u+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(u,p){h(u,p),h(u+"Capture",p)}function h(u,p){for(o[u]=p,u=0;u<p.length;u++)i.add(p[u])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function C(u){return m.call(w,u)?!0:m.call(v,u)?!1:b.test(u)?w[u]=!0:(v[u]=!0,!1)}function R(u,p,I,B){if(I!==null&&I.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return B?!1:I!==null?!I.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function T(u,p,I,B){if(p===null||typeof p>"u"||R(u,p,I,B))return!0;if(B)return!1;if(I!==null)switch(I.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function E(u,p,I,B,V,ee,se){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=B,this.attributeNamespace=V,this.mustUseProperty=I,this.propertyName=u,this.type=p,this.sanitizeURL=ee,this.removeEmptyString=se}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){f[u]=new E(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var p=u[0];f[p]=new E(p,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){f[u]=new E(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){f[u]=new E(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){f[u]=new E(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){f[u]=new E(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){f[u]=new E(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){f[u]=new E(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){f[u]=new E(u,5,!1,u.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function S(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var p=u.replace(g,S);f[p]=new E(p,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var p=u.replace(g,S);f[p]=new E(p,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var p=u.replace(g,S);f[p]=new E(p,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){f[u]=new E(u,1,!1,u.toLowerCase(),null,!1,!1)}),f.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){f[u]=new E(u,1,!1,u.toLowerCase(),null,!0,!0)});function O(u,p,I,B){var V=f.hasOwnProperty(p)?f[p]:null;(V!==null?V.type!==0:B||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(T(p,I,V,B)&&(I=null),B||V===null?C(p)&&(I===null?u.removeAttribute(p):u.setAttribute(p,""+I)):V.mustUseProperty?u[V.propertyName]=I===null?V.type===3?!1:"":I:(p=V.attributeName,B=V.attributeNamespace,I===null?u.removeAttribute(p):(V=V.type,I=V===3||V===4&&I===!0?"":""+I,B?u.setAttributeNS(B,p,I):u.setAttribute(p,I))))}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),F=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),X=Symbol.iterator;function J(u){return u===null||typeof u!="object"?null:(u=X&&u[X]||u["@@iterator"],typeof u=="function"?u:null)}var Q=Object.assign,G;function te(u){if(G===void 0)try{throw Error()}catch(I){var p=I.stack.trim().match(/\n( *(at )?)/);G=p&&p[1]||""}return`
`+G+u}var ue=!1;function de(u,p){if(!u||ue)return"";ue=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Xe){var B=Xe}Reflect.construct(u,[],p)}else{try{p.call()}catch(Xe){B=Xe}u.call(p.prototype)}else{try{throw Error()}catch(Xe){B=Xe}u()}}catch(Xe){if(Xe&&B&&typeof Xe.stack=="string"){for(var V=Xe.stack.split(`
`),ee=B.stack.split(`
`),se=V.length-1,be=ee.length-1;1<=se&&0<=be&&V[se]!==ee[be];)be--;for(;1<=se&&0<=be;se--,be--)if(V[se]!==ee[be]){if(se!==1||be!==1)do if(se--,be--,0>be||V[se]!==ee[be]){var Oe=`
`+V[se].replace(" at new "," at ");return u.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",u.displayName)),Oe}while(1<=se&&0<=be);break}}}finally{ue=!1,Error.prepareStackTrace=I}return(u=u?u.displayName||u.name:"")?te(u):""}function xe(u){switch(u.tag){case 5:return te(u.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return u=de(u.type,!1),u;case 11:return u=de(u.type.render,!1),u;case 1:return u=de(u.type,!0),u;default:return""}}function ve(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case A:return"Fragment";case _:return"Portal";case L:return"Profiler";case j:return"StrictMode";case U:return"Suspense";case q:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case F:return(u.displayName||"Context")+".Consumer";case $:return(u._context.displayName||"Context")+".Provider";case W:var p=u.render;return u=u.displayName,u||(u=p.displayName||p.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case H:return p=u.displayName||null,p!==null?p:ve(u.type)||"Memo";case Y:p=u._payload,u=u._init;try{return ve(u(p))}catch{}}return null}function Se(u){var p=u.type;switch(u.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=p.render,u=u.displayName||u.name||"",p.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(p);case 8:return p===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function Ee(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function he(u){var p=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Re(u){var p=he(u)?"checked":"value",I=Object.getOwnPropertyDescriptor(u.constructor.prototype,p),B=""+u[p];if(!u.hasOwnProperty(p)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var V=I.get,ee=I.set;return Object.defineProperty(u,p,{configurable:!0,get:function(){return V.call(this)},set:function(se){B=""+se,ee.call(this,se)}}),Object.defineProperty(u,p,{enumerable:I.enumerable}),{getValue:function(){return B},setValue:function(se){B=""+se},stopTracking:function(){u._valueTracker=null,delete u[p]}}}}function je(u){u._valueTracker||(u._valueTracker=Re(u))}function Ce(u){if(!u)return!1;var p=u._valueTracker;if(!p)return!0;var I=p.getValue(),B="";return u&&(B=he(u)?u.checked?"true":"false":u.value),u=B,u!==I?(p.setValue(u),!0):!1}function Le(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function me(u,p){var I=p.checked;return Q({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:I??u._wrapperState.initialChecked})}function Ie(u,p){var I=p.defaultValue==null?"":p.defaultValue,B=p.checked!=null?p.checked:p.defaultChecked;I=Ee(p.value!=null?p.value:I),u._wrapperState={initialChecked:B,initialValue:I,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Ve(u,p){p=p.checked,p!=null&&O(u,"checked",p,!1)}function nt(u,p){Ve(u,p);var I=Ee(p.value),B=p.type;if(I!=null)B==="number"?(I===0&&u.value===""||u.value!=I)&&(u.value=""+I):u.value!==""+I&&(u.value=""+I);else if(B==="submit"||B==="reset"){u.removeAttribute("value");return}p.hasOwnProperty("value")?ot(u,p.type,I):p.hasOwnProperty("defaultValue")&&ot(u,p.type,Ee(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(u.defaultChecked=!!p.defaultChecked)}function it(u,p,I){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var B=p.type;if(!(B!=="submit"&&B!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+u._wrapperState.initialValue,I||p===u.value||(u.value=p),u.defaultValue=p}I=u.name,I!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,I!==""&&(u.name=I)}function ot(u,p,I){(p!=="number"||Le(u.ownerDocument)!==u)&&(I==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+I&&(u.defaultValue=""+I))}var at=Array.isArray;function Je(u,p,I,B){if(u=u.options,p){p={};for(var V=0;V<I.length;V++)p["$"+I[V]]=!0;for(I=0;I<u.length;I++)V=p.hasOwnProperty("$"+u[I].value),u[I].selected!==V&&(u[I].selected=V),V&&B&&(u[I].defaultSelected=!0)}else{for(I=""+Ee(I),p=null,V=0;V<u.length;V++){if(u[V].value===I){u[V].selected=!0,B&&(u[V].defaultSelected=!0);return}p!==null||u[V].disabled||(p=u[V])}p!==null&&(p.selected=!0)}}function rt(u,p){if(p.dangerouslySetInnerHTML!=null)throw Error(n(91));return Q({},p,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function et(u,p){var I=p.value;if(I==null){if(I=p.children,p=p.defaultValue,I!=null){if(p!=null)throw Error(n(92));if(at(I)){if(1<I.length)throw Error(n(93));I=I[0]}p=I}p==null&&(p=""),I=p}u._wrapperState={initialValue:Ee(I)}}function Qe(u,p){var I=Ee(p.value),B=Ee(p.defaultValue);I!=null&&(I=""+I,I!==u.value&&(u.value=I),p.defaultValue==null&&u.defaultValue!==I&&(u.defaultValue=I)),B!=null&&(u.defaultValue=""+B)}function ct(u){var p=u.textContent;p===u._wrapperState.initialValue&&p!==""&&p!==null&&(u.value=p)}function pt(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(u,p){return u==null||u==="http://www.w3.org/1999/xhtml"?pt(p):u==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var fe,pe=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,I,B,V){MSApp.execUnsafeLocalFunction(function(){return u(p,I,B,V)})}:u})(function(u,p){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=p;else{for(fe=fe||document.createElement("div"),fe.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=fe.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;p.firstChild;)u.appendChild(p.firstChild)}});function Be(u,p){if(p){var I=u.firstChild;if(I&&I===u.lastChild&&I.nodeType===3){I.nodeValue=p;return}}u.textContent=p}var ke={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ke=["Webkit","ms","Moz","O"];Object.keys(ke).forEach(function(u){Ke.forEach(function(p){p=p+u.charAt(0).toUpperCase()+u.substring(1),ke[p]=ke[u]})});function Ye(u,p,I){return p==null||typeof p=="boolean"||p===""?"":I||typeof p!="number"||p===0||ke.hasOwnProperty(u)&&ke[u]?(""+p).trim():p+"px"}function ie(u,p){u=u.style;for(var I in p)if(p.hasOwnProperty(I)){var B=I.indexOf("--")===0,V=Ye(I,p[I],B);I==="float"&&(I="cssFloat"),B?u.setProperty(I,V):u[I]=V}}var Ae=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ne(u,p){if(p){if(Ae[u]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(n(137,u));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(n(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(n(61))}if(p.style!=null&&typeof p.style!="object")throw Error(n(62))}}function Ze(u,p){if(u.indexOf("-")===-1)return typeof p.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function Ge(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var ae=null,He=null,tt=null;function K(u){if(u=wi(u)){if(typeof ae!="function")throw Error(n(280));var p=u.stateNode;p&&(p=Tn(p),ae(u.stateNode,u.type,p))}}function Me(u){He?tt?tt.push(u):tt=[u]:He=u}function Te(){if(He){var u=He,p=tt;if(tt=He=null,K(u),p)for(u=0;u<p.length;u++)K(p[u])}}function le(u,p){return u(p)}function we(){}var Fe=!1;function yt(u,p,I){if(Fe)return u(p,I);Fe=!0;try{return le(u,p,I)}finally{Fe=!1,(He!==null||tt!==null)&&(we(),Te())}}function mt(u,p){var I=u.stateNode;if(I===null)return null;var B=Tn(I);if(B===null)return null;I=B[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(u=u.type,B=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!B;break e;default:u=!1}if(u)return null;if(I&&typeof I!="function")throw Error(n(231,p,typeof I));return I}var ft=!1;if(d)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){ft=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch{ft=!1}function nr(u,p,I,B,V,ee,se,be,Oe){var Xe=Array.prototype.slice.call(arguments,3);try{p.apply(I,Xe)}catch(ut){this.onError(ut)}}var Pt=!1,At=null,Ct=!1,Ut=null,Ft={onError:function(u){Pt=!0,At=u}};function fr(u,p,I,B,V,ee,se,be,Oe){Pt=!1,At=null,nr.apply(Ft,arguments)}function Qt(u,p,I,B,V,ee,se,be,Oe){if(fr.apply(this,arguments),Pt){if(Pt){var Xe=At;Pt=!1,At=null}else throw Error(n(198));Ct||(Ct=!0,Ut=Xe)}}function Dt(u){var p=u,I=u;if(u.alternate)for(;p.return;)p=p.return;else{u=p;do p=u,(p.flags&4098)!==0&&(I=p.return),u=p.return;while(u)}return p.tag===3?I:null}function Lt(u){if(u.tag===13){var p=u.memoizedState;if(p===null&&(u=u.alternate,u!==null&&(p=u.memoizedState)),p!==null)return p.dehydrated}return null}function It(u){if(Dt(u)!==u)throw Error(n(188))}function Jt(u){var p=u.alternate;if(!p){if(p=Dt(u),p===null)throw Error(n(188));return p!==u?null:u}for(var I=u,B=p;;){var V=I.return;if(V===null)break;var ee=V.alternate;if(ee===null){if(B=V.return,B!==null){I=B;continue}break}if(V.child===ee.child){for(ee=V.child;ee;){if(ee===I)return It(V),u;if(ee===B)return It(V),p;ee=ee.sibling}throw Error(n(188))}if(I.return!==B.return)I=V,B=ee;else{for(var se=!1,be=V.child;be;){if(be===I){se=!0,I=V,B=ee;break}if(be===B){se=!0,B=V,I=ee;break}be=be.sibling}if(!se){for(be=ee.child;be;){if(be===I){se=!0,I=ee,B=V;break}if(be===B){se=!0,B=ee,I=V;break}be=be.sibling}if(!se)throw Error(n(189))}}if(I.alternate!==B)throw Error(n(190))}if(I.tag!==3)throw Error(n(188));return I.stateNode.current===I?u:p}function rr(u){return u=Jt(u),u!==null?cr(u):null}function cr(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var p=cr(u);if(p!==null)return p;u=u.sibling}return null}var vr=t.unstable_scheduleCallback,xr=t.unstable_cancelCallback,en=t.unstable_shouldYield,ti=t.unstable_requestPaint,lr=t.unstable_now,sa=t.unstable_getCurrentPriorityLevel,ri=t.unstable_ImmediatePriority,oa=t.unstable_UserBlockingPriority,la=t.unstable_NormalPriority,Ko=t.unstable_LowPriority,Bs=t.unstable_IdlePriority,ua=null,Nt=null;function Sn(u){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(ua,u,void 0,(u.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:Va,Xo=Math.log,ni=Math.LN2;function Va(u){return u>>>=0,u===0?32:31-(Xo(u)/ni|0)|0}var ii=64,ai=4194304;function kn(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function si(u,p){var I=u.pendingLanes;if(I===0)return 0;var B=0,V=u.suspendedLanes,ee=u.pingedLanes,se=I&268435455;if(se!==0){var be=se&~V;be!==0?B=kn(be):(ee&=se,ee!==0&&(B=kn(ee)))}else se=I&~V,se!==0?B=kn(se):ee!==0&&(B=kn(ee));if(B===0)return 0;if(p!==0&&p!==B&&(p&V)===0&&(V=B&-B,ee=p&-p,V>=ee||V===16&&(ee&4194240)!==0))return p;if((B&4)!==0&&(B|=I&16),p=u.entangledLanes,p!==0)for(u=u.entanglements,p&=B;0<p;)I=31-pr(p),V=1<<I,B|=u[I],p&=~V;return B}function Nn(u,p){switch(u){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ki(u,p){for(var I=u.suspendedLanes,B=u.pingedLanes,V=u.expirationTimes,ee=u.pendingLanes;0<ee;){var se=31-pr(ee),be=1<<se,Oe=V[se];Oe===-1?((be&I)===0||(be&B)!==0)&&(V[se]=Nn(be,p)):Oe<=p&&(u.expiredLanes|=be),ee&=~be}}function br(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function $n(){var u=ii;return ii<<=1,(ii&4194240)===0&&(ii=64),u}function fn(u){for(var p=[],I=0;31>I;I++)p.push(u);return p}function tn(u,p,I){u.pendingLanes|=p,p!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,p=31-pr(p),u[p]=I}function Yo(u,p){var I=u.pendingLanes&~p;u.pendingLanes=p,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=p,u.mutableReadLanes&=p,u.entangledLanes&=p,p=u.entanglements;var B=u.eventTimes;for(u=u.expirationTimes;0<I;){var V=31-pr(I),ee=1<<V;p[V]=0,B[V]=-1,u[V]=-1,I&=~ee}}function dn(u,p){var I=u.entangledLanes|=p;for(u=u.entanglements;I;){var B=31-pr(I),V=1<<B;V&p|u[B]&p&&(u[B]|=p),I&=~V}}var er=0;function hn(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var Fs,zs,pn,Mr,jr,Kt=!1,An=[],rn=null,mn=null,zr=null,oi=new Map,Bn=new Map,Ur=[],Zo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Us(u,p){switch(u){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":oi.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bn.delete(p.pointerId)}}function Dr(u,p,I,B,V,ee){return u===null||u.nativeEvent!==ee?(u={blockedOn:p,domEventName:I,eventSystemFlags:B,nativeEvent:ee,targetContainers:[V]},p!==null&&(p=wi(p),p!==null&&zs(p)),u):(u.eventSystemFlags|=B,p=u.targetContainers,V!==null&&p.indexOf(V)===-1&&p.push(V),u)}function Ni(u,p,I,B,V){switch(p){case"focusin":return rn=Dr(rn,u,p,I,B,V),!0;case"dragenter":return mn=Dr(mn,u,p,I,B,V),!0;case"mouseover":return zr=Dr(zr,u,p,I,B,V),!0;case"pointerover":var ee=V.pointerId;return oi.set(ee,Dr(oi.get(ee)||null,u,p,I,B,V)),!0;case"gotpointercapture":return ee=V.pointerId,Bn.set(ee,Dr(Bn.get(ee)||null,u,p,I,B,V)),!0}return!1}function Ws(u){var p=qn(u.target);if(p!==null){var I=Dt(p);if(I!==null){if(p=I.tag,p===13){if(p=Lt(I),p!==null){u.blockedOn=p,jr(u.priority,function(){pn(I)});return}}else if(p===3&&I.stateNode.current.memoizedState.isDehydrated){u.blockedOn=I.tag===3?I.stateNode.containerInfo:null;return}}}u.blockedOn=null}function ca(u){if(u.blockedOn!==null)return!1;for(var p=u.targetContainers;0<p.length;){var I=Xa(u.domEventName,u.eventSystemFlags,p[0],u.nativeEvent);if(I===null){I=u.nativeEvent;var B=new I.constructor(I.type,I);_e=B,I.target.dispatchEvent(B),_e=null}else return p=wi(I),p!==null&&zs(p),u.blockedOn=I,!1;p.shift()}return!0}function li(u,p,I){ca(u)&&I.delete(p)}function Gs(){Kt=!1,rn!==null&&ca(rn)&&(rn=null),mn!==null&&ca(mn)&&(mn=null),zr!==null&&ca(zr)&&(zr=null),oi.forEach(li),Bn.forEach(li)}function ui(u,p){u.blockedOn===p&&(u.blockedOn=null,Kt||(Kt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gs)))}function $i(u){function p(V){return ui(V,u)}if(0<An.length){ui(An[0],u);for(var I=1;I<An.length;I++){var B=An[I];B.blockedOn===u&&(B.blockedOn=null)}}for(rn!==null&&ui(rn,u),mn!==null&&ui(mn,u),zr!==null&&ui(zr,u),oi.forEach(p),Bn.forEach(p),I=0;I<Ur.length;I++)B=Ur[I],B.blockedOn===u&&(B.blockedOn=null);for(;0<Ur.length&&(I=Ur[0],I.blockedOn===null);)Ws(I),I.blockedOn===null&&Ur.shift()}var Fn=D.ReactCurrentBatchConfig,fa=!0;function Qo(u,p,I,B){var V=er,ee=Fn.transition;Fn.transition=null;try{er=1,Ka(u,p,I,B)}finally{er=V,Fn.transition=ee}}function Jo(u,p,I,B){var V=er,ee=Fn.transition;Fn.transition=null;try{er=4,Ka(u,p,I,B)}finally{er=V,Fn.transition=ee}}function Ka(u,p,I,B){if(fa){var V=Xa(u,p,I,B);if(V===null)Ma(u,p,B,da,I),Us(u,B);else if(Ni(V,u,p,I,B))B.stopPropagation();else if(Us(u,B),p&4&&-1<Zo.indexOf(u)){for(;V!==null;){var ee=wi(V);if(ee!==null&&Fs(ee),ee=Xa(u,p,I,B),ee===null&&Ma(u,p,B,da,I),ee===V)break;V=ee}V!==null&&B.stopPropagation()}else Ma(u,p,B,null,I)}}var da=null;function Xa(u,p,I,B){if(da=null,u=Ge(B),u=qn(u),u!==null)if(p=Dt(u),p===null)u=null;else if(I=p.tag,I===13){if(u=Lt(p),u!==null)return u;u=null}else if(I===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;u=null}else p!==u&&(u=null);return da=u,null}function qs(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sa()){case ri:return 1;case oa:return 4;case la:case Ko:return 16;case Bs:return 536870912;default:return 16}default:return 16}}var Cn=null,Ya=null,ha=null;function Hs(){if(ha)return ha;var u,p=Ya,I=p.length,B,V="value"in Cn?Cn.value:Cn.textContent,ee=V.length;for(u=0;u<I&&p[u]===V[u];u++);var se=I-u;for(B=1;B<=se&&p[I-B]===V[ee-B];B++);return ha=V.slice(u,1<B?1-B:void 0)}function pa(u){var p=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&p===13&&(u=13)):u=p,u===10&&(u=13),32<=u||u===13?u:0}function ma(){return!0}function ci(){return!1}function Wr(u){function p(I,B,V,ee,se){this._reactName=I,this._targetInst=V,this.type=B,this.nativeEvent=ee,this.target=se,this.currentTarget=null;for(var be in u)u.hasOwnProperty(be)&&(I=u[be],this[be]=I?I(ee):ee[be]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?ma:ci,this.isPropagationStopped=ci,this}return Q(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var I=this.nativeEvent;I&&(I.preventDefault?I.preventDefault():typeof I.returnValue!="unknown"&&(I.returnValue=!1),this.isDefaultPrevented=ma)},stopPropagation:function(){var I=this.nativeEvent;I&&(I.stopPropagation?I.stopPropagation():typeof I.cancelBubble!="unknown"&&(I.cancelBubble=!0),this.isPropagationStopped=ma)},persist:function(){},isPersistent:ma}),p}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Za=Wr(fi),On=Q({},fi,{view:0,detail:0}),Vs=Wr(On),zn,Qa,Bi,ga=Q({},On,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ui,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Bi&&(Bi&&u.type==="mousemove"?(zn=u.screenX-Bi.screenX,Qa=u.screenY-Bi.screenY):Qa=zn=0,Bi=u),zn)},movementY:function(u){return"movementY"in u?u.movementY:Qa}}),Ks=Wr(ga),Fi=Q({},ga,{dataTransfer:0}),el=Wr(Fi),Xs=Q({},On,{relatedTarget:0}),ya=Wr(Xs),tl=Q({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),rl=Wr(tl),nl=Q({},fi,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),il=Wr(nl),va=Q({},fi,{data:0}),Ys=Wr(va),al={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ol={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zi(u){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(u):(u=ol[u])?!!p[u]:!1}function Ui(){return zi}var ll=Q({},On,{key:function(u){if(u.key){var p=al[u.key]||u.key;if(p!=="Unidentified")return p}return u.type==="keypress"?(u=pa(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?sl[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ui,charCode:function(u){return u.type==="keypress"?pa(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?pa(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),ul=Wr(ll),cl=Q({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zs=Wr(cl),fl=Q({},On,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ui}),dl=Wr(fl),hl=Q({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),xa=Wr(hl),pl=Q({},ga,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),ml=Wr(pl),di=[9,13,27,32],_a=d&&"CompositionEvent"in window,hi=null;d&&"documentMode"in document&&(hi=document.documentMode);var Qs=d&&"TextEvent"in window&&!hi,ba=d&&(!_a||hi&&8<hi&&11>=hi),Ja=" ",Js=!1;function eo(u,p){switch(u){case"keyup":return di.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function to(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var mi=!1;function _u(u,p){switch(u){case"compositionend":return to(p);case"keypress":return p.which!==32?null:(Js=!0,Ja);case"textInput":return u=p.data,u===Ja&&Js?null:u;default:return null}}function Wi(u,p){if(mi)return u==="compositionend"||!_a&&eo(u,p)?(u=Hs(),ha=Ya=Cn=null,mi=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return ba&&p.locale!=="ko"?null:p.data;default:return null}}var gl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function es(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p==="input"?!!gl[u.type]:p==="textarea"}function ts(u,p,I,B){Me(B),p=_i(p,"onChange"),0<p.length&&(I=new Za("onChange","change",null,I,B),u.push({event:I,listeners:p}))}var gi=null,Gi=null;function Ea(u){Pn(u,0)}function nn(u){var p=Si(u);if(Ce(p))return u}function yl(u,p){if(u==="change")return p}var ro=!1;if(d){var Ir;if(d){var wa="oninput"in document;if(!wa){var rs=document.createElement("div");rs.setAttribute("oninput","return;"),wa=typeof rs.oninput=="function"}Ir=wa}else Ir=!1;ro=Ir&&(!document.documentMode||9<document.documentMode)}function no(){gi&&(gi.detachEvent("onpropertychange",ns),Gi=gi=null)}function ns(u){if(u.propertyName==="value"&&nn(Gi)){var p=[];ts(p,Gi,u,Ge(u)),yt(Ea,p)}}function Sa(u,p,I){u==="focusin"?(no(),gi=p,Gi=I,gi.attachEvent("onpropertychange",ns)):u==="focusout"&&no()}function io(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return nn(Gi)}function ao(u,p){if(u==="click")return nn(p)}function so(u,p){if(u==="input"||u==="change")return nn(p)}function oo(u,p){return u===p&&(u!==0||1/u===1/p)||u!==u&&p!==p}var Hr=typeof Object.is=="function"?Object.is:oo;function yi(u,p){if(Hr(u,p))return!0;if(typeof u!="object"||u===null||typeof p!="object"||p===null)return!1;var I=Object.keys(u),B=Object.keys(p);if(I.length!==B.length)return!1;for(B=0;B<I.length;B++){var V=I[B];if(!m.call(p,V)||!Hr(u[V],p[V]))return!1}return!0}function is(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function as(u,p){var I=is(u);u=0;for(var B;I;){if(I.nodeType===3){if(B=u+I.textContent.length,u<=p&&B>=p)return{node:I,offset:p-u};u=B}e:{for(;I;){if(I.nextSibling){I=I.nextSibling;break e}I=I.parentNode}I=void 0}I=is(I)}}function ss(u,p){return u&&p?u===p?!0:u&&u.nodeType===3?!1:p&&p.nodeType===3?ss(u,p.parentNode):"contains"in u?u.contains(p):u.compareDocumentPosition?!!(u.compareDocumentPosition(p)&16):!1:!1}function qi(){for(var u=window,p=Le();p instanceof u.HTMLIFrameElement;){try{var I=typeof p.contentWindow.location.href=="string"}catch{I=!1}if(I)u=p.contentWindow;else break;p=Le(u.document)}return p}function Zr(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p&&(p==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||p==="textarea"||u.contentEditable==="true")}function os(u){var p=qi(),I=u.focusedElem,B=u.selectionRange;if(p!==I&&I&&I.ownerDocument&&ss(I.ownerDocument.documentElement,I)){if(B!==null&&Zr(I)){if(p=B.start,u=B.end,u===void 0&&(u=p),"selectionStart"in I)I.selectionStart=p,I.selectionEnd=Math.min(u,I.value.length);else if(u=(p=I.ownerDocument||document)&&p.defaultView||window,u.getSelection){u=u.getSelection();var V=I.textContent.length,ee=Math.min(B.start,V);B=B.end===void 0?ee:Math.min(B.end,V),!u.extend&&ee>B&&(V=B,B=ee,ee=V),V=as(I,ee);var se=as(I,B);V&&se&&(u.rangeCount!==1||u.anchorNode!==V.node||u.anchorOffset!==V.offset||u.focusNode!==se.node||u.focusOffset!==se.offset)&&(p=p.createRange(),p.setStart(V.node,V.offset),u.removeAllRanges(),ee>B?(u.addRange(p),u.extend(se.node,se.offset)):(p.setEnd(se.node,se.offset),u.addRange(p)))}}for(p=[],u=I;u=u.parentNode;)u.nodeType===1&&p.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<p.length;I++)u=p[I],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var lo=d&&"documentMode"in document&&11>=document.documentMode,Rn=null,Aa=null,vi=null,Ca=!1;function ls(u,p,I){var B=I.window===I?I.document:I.nodeType===9?I:I.ownerDocument;Ca||Rn==null||Rn!==Le(B)||(B=Rn,"selectionStart"in B&&Zr(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),vi&&yi(vi,B)||(vi=B,B=_i(Aa,"onSelect"),0<B.length&&(p=new Za("onSelect","select",null,p,I),u.push({event:p,listeners:B}),p.target=Rn)))}function Un(u,p){var I={};return I[u.toLowerCase()]=p.toLowerCase(),I["Webkit"+u]="webkit"+p,I["Moz"+u]="moz"+p,I}var gn={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionend:Un("Transition","TransitionEnd")},Oa={},us={};d&&(us=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);function Hi(u){if(Oa[u])return Oa[u];if(!gn[u])return u;var p=gn[u],I;for(I in p)if(p.hasOwnProperty(I)&&I in us)return Oa[u]=p[I];return u}var cs=Hi("animationend"),fs=Hi("animationiteration"),Ra=Hi("animationstart"),ds=Hi("transitionend"),hs=new Map,sr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(u,p){hs.set(u,p),l(p,[u])}for(var Pa=0;Pa<sr.length;Pa++){var ps=sr[Pa],vl=ps.toLowerCase(),bu=ps[0].toUpperCase()+ps.slice(1);yn(vl,"on"+bu)}yn(cs,"onAnimationEnd"),yn(fs,"onAnimationIteration"),yn(Ra,"onAnimationStart"),yn("dblclick","onDoubleClick"),yn("focusin","onFocus"),yn("focusout","onBlur"),yn(ds,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uo=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function co(u,p,I){var B=u.type||"unknown-event";u.currentTarget=I,Qt(B,p,void 0,u),u.currentTarget=null}function Pn(u,p){p=(p&4)!==0;for(var I=0;I<u.length;I++){var B=u[I],V=B.event;B=B.listeners;e:{var ee=void 0;if(p)for(var se=B.length-1;0<=se;se--){var be=B[se],Oe=be.instance,Xe=be.currentTarget;if(be=be.listener,Oe!==ee&&V.isPropagationStopped())break e;co(V,be,Xe),ee=Oe}else for(se=0;se<B.length;se++){if(be=B[se],Oe=be.instance,Xe=be.currentTarget,be=be.listener,Oe!==ee&&V.isPropagationStopped())break e;co(V,be,Xe),ee=Oe}}}if(Ct)throw u=Ut,Ct=!1,Ut=null,u}function ir(u,p){var I=p[Gn];I===void 0&&(I=p[Gn]=new Set);var B=u+"__bubble";I.has(B)||(fo(p,u,2,!1),I.add(B))}function Ta(u,p,I){var B=0;p&&(B|=4),fo(I,u,B,p)}var Ki="_reactListening"+Math.random().toString(36).slice(2);function xi(u){if(!u[Ki]){u[Ki]=!0,i.forEach(function(I){I!=="selectionchange"&&(uo.has(I)||Ta(I,!1,u),Ta(I,!0,u))});var p=u.nodeType===9?u:u.ownerDocument;p===null||p[Ki]||(p[Ki]=!0,Ta("selectionchange",!1,p))}}function fo(u,p,I,B){switch(qs(p)){case 1:var V=Qo;break;case 4:V=Jo;break;default:V=Ka}I=V.bind(null,p,I,u),V=void 0,!ft||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(V=!0),B?V!==void 0?u.addEventListener(p,I,{capture:!0,passive:V}):u.addEventListener(p,I,!0):V!==void 0?u.addEventListener(p,I,{passive:V}):u.addEventListener(p,I,!1)}function Ma(u,p,I,B,V){var ee=B;if((p&1)===0&&(p&2)===0&&B!==null)e:for(;;){if(B===null)return;var se=B.tag;if(se===3||se===4){var be=B.stateNode.containerInfo;if(be===V||be.nodeType===8&&be.parentNode===V)break;if(se===4)for(se=B.return;se!==null;){var Oe=se.tag;if((Oe===3||Oe===4)&&(Oe=se.stateNode.containerInfo,Oe===V||Oe.nodeType===8&&Oe.parentNode===V))return;se=se.return}for(;be!==null;){if(se=qn(be),se===null)return;if(Oe=se.tag,Oe===5||Oe===6){B=ee=se;continue e}be=be.parentNode}}B=B.return}yt(function(){var Xe=ee,ut=Ge(I),dt=[];e:{var lt=hs.get(u);if(lt!==void 0){var xt=Za,Et=u;switch(u){case"keypress":if(pa(I)===0)break e;case"keydown":case"keyup":xt=ul;break;case"focusin":Et="focus",xt=ya;break;case"focusout":Et="blur",xt=ya;break;case"beforeblur":case"afterblur":xt=ya;break;case"click":if(I.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xt=Ks;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xt=el;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xt=dl;break;case cs:case fs:case Ra:xt=rl;break;case ds:xt=xa;break;case"scroll":xt=Vs;break;case"wheel":xt=ml;break;case"copy":case"cut":case"paste":xt=il;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xt=Zs}var wt=(p&4)!==0,yr=!wt&&u==="scroll",Ue=wt?lt!==null?lt+"Capture":null:lt;wt=[];for(var De=Xe,qe;De!==null;){qe=De;var gt=qe.stateNode;if(qe.tag===5&&gt!==null&&(qe=gt,Ue!==null&&(gt=mt(De,Ue),gt!=null&&wt.push(Wn(De,gt,qe)))),yr)break;De=De.return}0<wt.length&&(lt=new xt(lt,Et,null,I,ut),dt.push({event:lt,listeners:wt}))}}if((p&7)===0){e:{if(lt=u==="mouseover"||u==="pointerover",xt=u==="mouseout"||u==="pointerout",lt&&I!==_e&&(Et=I.relatedTarget||I.fromElement)&&(qn(Et)||Et[vn]))break e;if((xt||lt)&&(lt=ut.window===ut?ut:(lt=ut.ownerDocument)?lt.defaultView||lt.parentWindow:window,xt?(Et=I.relatedTarget||I.toElement,xt=Xe,Et=Et?qn(Et):null,Et!==null&&(yr=Dt(Et),Et!==yr||Et.tag!==5&&Et.tag!==6)&&(Et=null)):(xt=null,Et=Xe),xt!==Et)){if(wt=Ks,gt="onMouseLeave",Ue="onMouseEnter",De="mouse",(u==="pointerout"||u==="pointerover")&&(wt=Zs,gt="onPointerLeave",Ue="onPointerEnter",De="pointer"),yr=xt==null?lt:Si(xt),qe=Et==null?lt:Si(Et),lt=new wt(gt,De+"leave",xt,I,ut),lt.target=yr,lt.relatedTarget=qe,gt=null,qn(ut)===Xe&&(wt=new wt(Ue,De+"enter",Et,I,ut),wt.target=qe,wt.relatedTarget=yr,gt=wt),yr=gt,xt&&Et)t:{for(wt=xt,Ue=Et,De=0,qe=wt;qe;qe=bi(qe))De++;for(qe=0,gt=Ue;gt;gt=bi(gt))qe++;for(;0<De-qe;)wt=bi(wt),De--;for(;0<qe-De;)Ue=bi(Ue),qe--;for(;De--;){if(wt===Ue||Ue!==null&&wt===Ue.alternate)break t;wt=bi(wt),Ue=bi(Ue)}wt=null}else wt=null;xt!==null&&ms(dt,lt,xt,wt,!1),Et!==null&&yr!==null&&ms(dt,yr,Et,wt,!0)}}e:{if(lt=Xe?Si(Xe):window,xt=lt.nodeName&&lt.nodeName.toLowerCase(),xt==="select"||xt==="input"&&lt.type==="file")var St=yl;else if(es(lt))if(ro)St=so;else{St=io;var Mt=Sa}else(xt=lt.nodeName)&&xt.toLowerCase()==="input"&&(lt.type==="checkbox"||lt.type==="radio")&&(St=ao);if(St&&(St=St(u,Xe))){ts(dt,St,I,ut);break e}Mt&&Mt(u,lt,Xe),u==="focusout"&&(Mt=lt._wrapperState)&&Mt.controlled&&lt.type==="number"&&ot(lt,"number",lt.value)}switch(Mt=Xe?Si(Xe):window,u){case"focusin":(es(Mt)||Mt.contentEditable==="true")&&(Rn=Mt,Aa=Xe,vi=null);break;case"focusout":vi=Aa=Rn=null;break;case"mousedown":Ca=!0;break;case"contextmenu":case"mouseup":case"dragend":Ca=!1,ls(dt,I,ut);break;case"selectionchange":if(lo)break;case"keydown":case"keyup":ls(dt,I,ut)}var jt;if(_a)e:{switch(u){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else mi?eo(u,I)&&(kt="onCompositionEnd"):u==="keydown"&&I.keyCode===229&&(kt="onCompositionStart");kt&&(ba&&I.locale!=="ko"&&(mi||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&mi&&(jt=Hs()):(Cn=ut,Ya="value"in Cn?Cn.value:Cn.textContent,mi=!0)),Mt=_i(Xe,kt),0<Mt.length&&(kt=new Ys(kt,u,null,I,ut),dt.push({event:kt,listeners:Mt}),jt?kt.data=jt:(jt=to(I),jt!==null&&(kt.data=jt)))),(jt=Qs?_u(u,I):Wi(u,I))&&(Xe=_i(Xe,"onBeforeInput"),0<Xe.length&&(ut=new Ys("onBeforeInput","beforeinput",null,I,ut),dt.push({event:ut,listeners:Xe}),ut.data=jt))}Pn(dt,p)})}function Wn(u,p,I){return{instance:u,listener:p,currentTarget:I}}function _i(u,p){for(var I=p+"Capture",B=[];u!==null;){var V=u,ee=V.stateNode;V.tag===5&&ee!==null&&(V=ee,ee=mt(u,I),ee!=null&&B.unshift(Wn(u,ee,V)),ee=mt(u,p),ee!=null&&B.push(Wn(u,ee,V))),u=u.return}return B}function bi(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function ms(u,p,I,B,V){for(var ee=p._reactName,se=[];I!==null&&I!==B;){var be=I,Oe=be.alternate,Xe=be.stateNode;if(Oe!==null&&Oe===B)break;be.tag===5&&Xe!==null&&(be=Xe,V?(Oe=mt(I,ee),Oe!=null&&se.unshift(Wn(I,Oe,be))):V||(Oe=mt(I,ee),Oe!=null&&se.push(Wn(I,Oe,be)))),I=I.return}se.length!==0&&u.push({event:p,listeners:se})}var xl=/\r\n?/g,_l=/\u0000|\uFFFD/g;function ho(u){return(typeof u=="string"?u:""+u).replace(xl,`
`).replace(_l,"")}function ja(u,p,I){if(p=ho(p),ho(u)!==p&&I)throw Error(n(425))}function Da(){}var gs=null,ys=null;function vs(u,p){return u==="textarea"||u==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var xs=typeof setTimeout=="function"?setTimeout:void 0,bl=typeof clearTimeout=="function"?clearTimeout:void 0,po=typeof Promise=="function"?Promise:void 0,El=typeof queueMicrotask=="function"?queueMicrotask:typeof po<"u"?function(u){return po.resolve(null).then(u).catch(wl)}:xs;function wl(u){setTimeout(function(){throw u})}function _s(u,p){var I=p,B=0;do{var V=I.nextSibling;if(u.removeChild(I),V&&V.nodeType===8)if(I=V.data,I==="/$"){if(B===0){u.removeChild(V),$i(p);return}B--}else I!=="$"&&I!=="$?"&&I!=="$!"||B++;I=V}while(I);$i(p)}function Sr(u){for(;u!=null;u=u.nextSibling){var p=u.nodeType;if(p===1||p===3)break;if(p===8){if(p=u.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return u}function mo(u){u=u.previousSibling;for(var p=0;u;){if(u.nodeType===8){var I=u.data;if(I==="$"||I==="$!"||I==="$?"){if(p===0)return u;p--}else I==="/$"&&p++}u=u.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Ei,Xi="__reactProps$"+Ei,vn="__reactContainer$"+Ei,Gn="__reactEvents$"+Ei,bs="__reactListeners$"+Ei,Es="__reactHandles$"+Ei;function qn(u){var p=u[Qr];if(p)return p;for(var I=u.parentNode;I;){if(p=I[vn]||I[Qr]){if(I=p.alternate,p.child!==null||I!==null&&I.child!==null)for(u=mo(u);u!==null;){if(I=u[Qr])return I;u=mo(u)}return p}u=I,I=u.parentNode}return null}function wi(u){return u=u[Qr]||u[vn],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Si(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(n(33))}function Tn(u){return u[Xi]||null}var Yi=[],Ai=-1;function Mn(u){return{current:u}}function or(u){0>Ai||(u.current=Yi[Ai],Yi[Ai]=null,Ai--)}function ar(u,p){Ai++,Yi[Ai]=u.current,u.current=p}var jn={},Ar=Mn(jn),Lr=Mn(!1),Hn=jn;function Ci(u,p){var I=u.type.contextTypes;if(!I)return jn;var B=u.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===p)return B.__reactInternalMemoizedMaskedChildContext;var V={},ee;for(ee in I)V[ee]=p[ee];return B&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=p,u.__reactInternalMemoizedMaskedChildContext=V),V}function Nr(u){return u=u.childContextTypes,u!=null}function Ia(){or(Lr),or(Ar)}function go(u,p,I){if(Ar.current!==jn)throw Error(n(168));ar(Ar,p),ar(Lr,I)}function yo(u,p,I){var B=u.stateNode;if(p=p.childContextTypes,typeof B.getChildContext!="function")return I;B=B.getChildContext();for(var V in B)if(!(V in p))throw Error(n(108,Se(u)||"Unknown",V));return Q({},I,B)}function La(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||jn,Hn=Ar.current,ar(Ar,u),ar(Lr,Lr.current),!0}function ws(u,p,I){var B=u.stateNode;if(!B)throw Error(n(169));I?(u=yo(u,p,Hn),B.__reactInternalMemoizedMergedChildContext=u,or(Lr),or(Ar),ar(Ar,u)):or(Lr),ar(Lr,I)}var an=null,Zi=!1,Na=!1;function Ss(u){an===null?an=[u]:an.push(u)}function vo(u){Zi=!0,Ss(u)}function xn(){if(!Na&&an!==null){Na=!0;var u=0,p=er;try{var I=an;for(er=1;u<I.length;u++){var B=I[u];do B=B(!0);while(B!==null)}an=null,Zi=!1}catch(V){throw an!==null&&(an=an.slice(u+1)),vr(ri,xn),V}finally{er=p,Na=!1}}return null}var Vn=[],Kn=0,$a=null,N=0,ne=[],z=0,ce=null,ye=1,ge="";function We(u,p){Vn[Kn++]=N,Vn[Kn++]=$a,$a=u,N=p}function $e(u,p,I){ne[z++]=ye,ne[z++]=ge,ne[z++]=ce,ce=u;var B=ye;u=ge;var V=32-pr(B)-1;B&=~(1<<V),I+=1;var ee=32-pr(p)+V;if(30<ee){var se=V-V%5;ee=(B&(1<<se)-1).toString(32),B>>=se,V-=se,ye=1<<32-pr(p)+V|I<<V|B,ge=ee+u}else ye=1<<ee|I<<V|B,ge=u}function _t(u){u.return!==null&&(We(u,1),$e(u,1,0))}function Pe(u){for(;u===$a;)$a=Vn[--Kn],Vn[Kn]=null,N=Vn[--Kn],Vn[Kn]=null;for(;u===ce;)ce=ne[--z],ne[z]=null,ge=ne[--z],ne[z]=null,ye=ne[--z],ne[z]=null}var ze=null,$t=null,ht=!1,st=null;function Rt(u,p){var I=cn(5,null,null,0);I.elementType="DELETED",I.stateNode=p,I.return=u,p=u.deletions,p===null?(u.deletions=[I],u.flags|=16):p.push(I)}function ur(u,p){switch(u.tag){case 5:var I=u.type;return p=p.nodeType!==1||I.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(u.stateNode=p,ze=u,$t=Sr(p.firstChild),!0):!1;case 6:return p=u.pendingProps===""||p.nodeType!==3?null:p,p!==null?(u.stateNode=p,ze=u,$t=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(I=ce!==null?{id:ye,overflow:ge}:null,u.memoizedState={dehydrated:p,treeContext:I,retryLane:1073741824},I=cn(18,null,null,0),I.stateNode=p,I.return=u,u.child=I,ze=u,$t=null,!0):!1;default:return!1}}function qt(u){return(u.mode&1)!==0&&(u.flags&128)===0}function zt(u){if(ht){var p=$t;if(p){var I=p;if(!ur(u,p)){if(qt(u))throw Error(n(418));p=Sr(I.nextSibling);var B=ze;p&&ur(u,p)?Rt(B,I):(u.flags=u.flags&-4097|2,ht=!1,ze=u)}}else{if(qt(u))throw Error(n(418));u.flags=u.flags&-4097|2,ht=!1,ze=u}}}function Xt(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;ze=u}function Wt(u){if(u!==ze)return!1;if(!ht)return Xt(u),ht=!0,!1;var p;if((p=u.tag!==3)&&!(p=u.tag!==5)&&(p=u.type,p=p!=="head"&&p!=="body"&&!vs(u.type,u.memoizedProps)),p&&(p=$t)){if(qt(u))throw vt(),Error(n(418));for(;p;)Rt(u,p),p=Sr(p.nextSibling)}if(Xt(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,p=0;u;){if(u.nodeType===8){var I=u.data;if(I==="/$"){if(p===0){$t=Sr(u.nextSibling);break e}p--}else I!=="$"&&I!=="$!"&&I!=="$?"||p++}u=u.nextSibling}$t=null}}else $t=ze?Sr(u.stateNode.nextSibling):null;return!0}function vt(){for(var u=$t;u;)u=Sr(u.nextSibling)}function Ht(){$t=ze=null,ht=!1}function mr(u){st===null?st=[u]:st.push(u)}var Tt=D.ReactCurrentBatchConfig;function Yt(u,p,I){if(u=I.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(n(309));var B=I.stateNode}if(!B)throw Error(n(147,u));var V=B,ee=""+u;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===ee?p.ref:(p=function(se){var be=V.refs;se===null?delete be[ee]:be[ee]=se},p._stringRef=ee,p)}if(typeof u!="string")throw Error(n(284));if(!I._owner)throw Error(n(290,u))}return u}function Gt(u,p){throw u=Object.prototype.toString.call(p),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":u))}function Bt(u){var p=u._init;return p(u._payload)}function Vt(u){function p(Ue,De){if(u){var qe=Ue.deletions;qe===null?(Ue.deletions=[De],Ue.flags|=16):qe.push(De)}}function I(Ue,De){if(!u)return null;for(;De!==null;)p(Ue,De),De=De.sibling;return null}function B(Ue,De){for(Ue=new Map;De!==null;)De.key!==null?Ue.set(De.key,De):Ue.set(De.index,De),De=De.sibling;return Ue}function V(Ue,De){return Ue=Ii(Ue,De),Ue.index=0,Ue.sibling=null,Ue}function ee(Ue,De,qe){return Ue.index=qe,u?(qe=Ue.alternate,qe!==null?(qe=qe.index,qe<De?(Ue.flags|=2,De):qe):(Ue.flags|=2,De)):(Ue.flags|=1048576,De)}function se(Ue){return u&&Ue.alternate===null&&(Ue.flags|=2),Ue}function be(Ue,De,qe,gt){return De===null||De.tag!==6?(De=pu(qe,Ue.mode,gt),De.return=Ue,De):(De=V(De,qe),De.return=Ue,De)}function Oe(Ue,De,qe,gt){var St=qe.type;return St===A?ut(Ue,De,qe.props.children,gt,qe.key):De!==null&&(De.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Y&&Bt(St)===De.type)?(gt=V(De,qe.props),gt.ref=Yt(Ue,De,qe),gt.return=Ue,gt):(gt=Fo(qe.type,qe.key,qe.props,null,Ue.mode,gt),gt.ref=Yt(Ue,De,qe),gt.return=Ue,gt)}function Xe(Ue,De,qe,gt){return De===null||De.tag!==4||De.stateNode.containerInfo!==qe.containerInfo||De.stateNode.implementation!==qe.implementation?(De=mu(qe,Ue.mode,gt),De.return=Ue,De):(De=V(De,qe.children||[]),De.return=Ue,De)}function ut(Ue,De,qe,gt,St){return De===null||De.tag!==7?(De=aa(qe,Ue.mode,gt,St),De.return=Ue,De):(De=V(De,qe),De.return=Ue,De)}function dt(Ue,De,qe){if(typeof De=="string"&&De!==""||typeof De=="number")return De=pu(""+De,Ue.mode,qe),De.return=Ue,De;if(typeof De=="object"&&De!==null){switch(De.$$typeof){case M:return qe=Fo(De.type,De.key,De.props,null,Ue.mode,qe),qe.ref=Yt(Ue,null,De),qe.return=Ue,qe;case _:return De=mu(De,Ue.mode,qe),De.return=Ue,De;case Y:var gt=De._init;return dt(Ue,gt(De._payload),qe)}if(at(De)||J(De))return De=aa(De,Ue.mode,qe,null),De.return=Ue,De;Gt(Ue,De)}return null}function lt(Ue,De,qe,gt){var St=De!==null?De.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number")return St!==null?null:be(Ue,De,""+qe,gt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case M:return qe.key===St?Oe(Ue,De,qe,gt):null;case _:return qe.key===St?Xe(Ue,De,qe,gt):null;case Y:return St=qe._init,lt(Ue,De,St(qe._payload),gt)}if(at(qe)||J(qe))return St!==null?null:ut(Ue,De,qe,gt,null);Gt(Ue,qe)}return null}function xt(Ue,De,qe,gt,St){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return Ue=Ue.get(qe)||null,be(De,Ue,""+gt,St);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case M:return Ue=Ue.get(gt.key===null?qe:gt.key)||null,Oe(De,Ue,gt,St);case _:return Ue=Ue.get(gt.key===null?qe:gt.key)||null,Xe(De,Ue,gt,St);case Y:var Mt=gt._init;return xt(Ue,De,qe,Mt(gt._payload),St)}if(at(gt)||J(gt))return Ue=Ue.get(qe)||null,ut(De,Ue,gt,St,null);Gt(De,gt)}return null}function Et(Ue,De,qe,gt){for(var St=null,Mt=null,jt=De,kt=De=0,Rr=null;jt!==null&&kt<qe.length;kt++){jt.index>kt?(Rr=jt,jt=null):Rr=jt.sibling;var tr=lt(Ue,jt,qe[kt],gt);if(tr===null){jt===null&&(jt=Rr);break}u&&jt&&tr.alternate===null&&p(Ue,jt),De=ee(tr,De,kt),Mt===null?St=tr:Mt.sibling=tr,Mt=tr,jt=Rr}if(kt===qe.length)return I(Ue,jt),ht&&We(Ue,kt),St;if(jt===null){for(;kt<qe.length;kt++)jt=dt(Ue,qe[kt],gt),jt!==null&&(De=ee(jt,De,kt),Mt===null?St=jt:Mt.sibling=jt,Mt=jt);return ht&&We(Ue,kt),St}for(jt=B(Ue,jt);kt<qe.length;kt++)Rr=xt(jt,Ue,kt,qe[kt],gt),Rr!==null&&(u&&Rr.alternate!==null&&jt.delete(Rr.key===null?kt:Rr.key),De=ee(Rr,De,kt),Mt===null?St=Rr:Mt.sibling=Rr,Mt=Rr);return u&&jt.forEach(function(Li){return p(Ue,Li)}),ht&&We(Ue,kt),St}function wt(Ue,De,qe,gt){var St=J(qe);if(typeof St!="function")throw Error(n(150));if(qe=St.call(qe),qe==null)throw Error(n(151));for(var Mt=St=null,jt=De,kt=De=0,Rr=null,tr=qe.next();jt!==null&&!tr.done;kt++,tr=qe.next()){jt.index>kt?(Rr=jt,jt=null):Rr=jt.sibling;var Li=lt(Ue,jt,tr.value,gt);if(Li===null){jt===null&&(jt=Rr);break}u&&jt&&Li.alternate===null&&p(Ue,jt),De=ee(Li,De,kt),Mt===null?St=Li:Mt.sibling=Li,Mt=Li,jt=Rr}if(tr.done)return I(Ue,jt),ht&&We(Ue,kt),St;if(jt===null){for(;!tr.done;kt++,tr=qe.next())tr=dt(Ue,tr.value,gt),tr!==null&&(De=ee(tr,De,kt),Mt===null?St=tr:Mt.sibling=tr,Mt=tr);return ht&&We(Ue,kt),St}for(jt=B(Ue,jt);!tr.done;kt++,tr=qe.next())tr=xt(jt,Ue,kt,tr.value,gt),tr!==null&&(u&&tr.alternate!==null&&jt.delete(tr.key===null?kt:tr.key),De=ee(tr,De,kt),Mt===null?St=tr:Mt.sibling=tr,Mt=tr);return u&&jt.forEach(function(wf){return p(Ue,wf)}),ht&&We(Ue,kt),St}function yr(Ue,De,qe,gt){if(typeof qe=="object"&&qe!==null&&qe.type===A&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case M:e:{for(var St=qe.key,Mt=De;Mt!==null;){if(Mt.key===St){if(St=qe.type,St===A){if(Mt.tag===7){I(Ue,Mt.sibling),De=V(Mt,qe.props.children),De.return=Ue,Ue=De;break e}}else if(Mt.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===Y&&Bt(St)===Mt.type){I(Ue,Mt.sibling),De=V(Mt,qe.props),De.ref=Yt(Ue,Mt,qe),De.return=Ue,Ue=De;break e}I(Ue,Mt);break}else p(Ue,Mt);Mt=Mt.sibling}qe.type===A?(De=aa(qe.props.children,Ue.mode,gt,qe.key),De.return=Ue,Ue=De):(gt=Fo(qe.type,qe.key,qe.props,null,Ue.mode,gt),gt.ref=Yt(Ue,De,qe),gt.return=Ue,Ue=gt)}return se(Ue);case _:e:{for(Mt=qe.key;De!==null;){if(De.key===Mt)if(De.tag===4&&De.stateNode.containerInfo===qe.containerInfo&&De.stateNode.implementation===qe.implementation){I(Ue,De.sibling),De=V(De,qe.children||[]),De.return=Ue,Ue=De;break e}else{I(Ue,De);break}else p(Ue,De);De=De.sibling}De=mu(qe,Ue.mode,gt),De.return=Ue,Ue=De}return se(Ue);case Y:return Mt=qe._init,yr(Ue,De,Mt(qe._payload),gt)}if(at(qe))return Et(Ue,De,qe,gt);if(J(qe))return wt(Ue,De,qe,gt);Gt(Ue,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"?(qe=""+qe,De!==null&&De.tag===6?(I(Ue,De.sibling),De=V(De,qe),De.return=Ue,Ue=De):(I(Ue,De),De=pu(qe,Ue.mode,gt),De.return=Ue,Ue=De),se(Ue)):I(Ue,De)}return yr}var Vr=Vt(!0),As=Vt(!1),Xn=Mn(null),Yn=null,Ba=null,Sl=null;function Al(){Sl=Ba=Yn=null}function Cl(u){var p=Xn.current;or(Xn),u._currentValue=p}function Ol(u,p,I){for(;u!==null;){var B=u.alternate;if((u.childLanes&p)!==p?(u.childLanes|=p,B!==null&&(B.childLanes|=p)):B!==null&&(B.childLanes&p)!==p&&(B.childLanes|=p),u===I)break;u=u.return}}function Fa(u,p){Yn=u,Sl=Ba=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&p)!==0&&(Kr=!0),u.firstContext=null)}function sn(u){var p=u._currentValue;if(Sl!==u)if(u={context:u,memoizedValue:p,next:null},Ba===null){if(Yn===null)throw Error(n(308));Ba=u,Yn.dependencies={lanes:0,firstContext:u}}else Ba=Ba.next=u;return p}var Qi=null;function Rl(u){Qi===null?Qi=[u]:Qi.push(u)}function Eu(u,p,I,B){var V=p.interleaved;return V===null?(I.next=I,Rl(p)):(I.next=V.next,V.next=I),p.interleaved=I,Zn(u,B)}function Zn(u,p){u.lanes|=p;var I=u.alternate;for(I!==null&&(I.lanes|=p),I=u,u=u.return;u!==null;)u.childLanes|=p,I=u.alternate,I!==null&&(I.childLanes|=p),I=u,u=u.return;return I.tag===3?I.stateNode:null}var Oi=!1;function Pl(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wu(u,p){u=u.updateQueue,p.updateQueue===u&&(p.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Qn(u,p){return{eventTime:u,lane:p,tag:0,payload:null,callback:null,next:null}}function Ri(u,p,I){var B=u.updateQueue;if(B===null)return null;if(B=B.shared,(Zt&2)!==0){var V=B.pending;return V===null?p.next=p:(p.next=V.next,V.next=p),B.pending=p,Zn(u,I)}return V=B.interleaved,V===null?(p.next=p,Rl(B)):(p.next=V.next,V.next=p),B.interleaved=p,Zn(u,I)}function xo(u,p,I){if(p=p.updateQueue,p!==null&&(p=p.shared,(I&4194240)!==0)){var B=p.lanes;B&=u.pendingLanes,I|=B,p.lanes=I,dn(u,I)}}function Su(u,p){var I=u.updateQueue,B=u.alternate;if(B!==null&&(B=B.updateQueue,I===B)){var V=null,ee=null;if(I=I.firstBaseUpdate,I!==null){do{var se={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};ee===null?V=ee=se:ee=ee.next=se,I=I.next}while(I!==null);ee===null?V=ee=p:ee=ee.next=p}else V=ee=p;I={baseState:B.baseState,firstBaseUpdate:V,lastBaseUpdate:ee,shared:B.shared,effects:B.effects},u.updateQueue=I;return}u=I.lastBaseUpdate,u===null?I.firstBaseUpdate=p:u.next=p,I.lastBaseUpdate=p}function _o(u,p,I,B){var V=u.updateQueue;Oi=!1;var ee=V.firstBaseUpdate,se=V.lastBaseUpdate,be=V.shared.pending;if(be!==null){V.shared.pending=null;var Oe=be,Xe=Oe.next;Oe.next=null,se===null?ee=Xe:se.next=Xe,se=Oe;var ut=u.alternate;ut!==null&&(ut=ut.updateQueue,be=ut.lastBaseUpdate,be!==se&&(be===null?ut.firstBaseUpdate=Xe:be.next=Xe,ut.lastBaseUpdate=Oe))}if(ee!==null){var dt=V.baseState;se=0,ut=Xe=Oe=null,be=ee;do{var lt=be.lane,xt=be.eventTime;if((B&lt)===lt){ut!==null&&(ut=ut.next={eventTime:xt,lane:0,tag:be.tag,payload:be.payload,callback:be.callback,next:null});e:{var Et=u,wt=be;switch(lt=p,xt=I,wt.tag){case 1:if(Et=wt.payload,typeof Et=="function"){dt=Et.call(xt,dt,lt);break e}dt=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=wt.payload,lt=typeof Et=="function"?Et.call(xt,dt,lt):Et,lt==null)break e;dt=Q({},dt,lt);break e;case 2:Oi=!0}}be.callback!==null&&be.lane!==0&&(u.flags|=64,lt=V.effects,lt===null?V.effects=[be]:lt.push(be))}else xt={eventTime:xt,lane:lt,tag:be.tag,payload:be.payload,callback:be.callback,next:null},ut===null?(Xe=ut=xt,Oe=dt):ut=ut.next=xt,se|=lt;if(be=be.next,be===null){if(be=V.shared.pending,be===null)break;lt=be,be=lt.next,lt.next=null,V.lastBaseUpdate=lt,V.shared.pending=null}}while(!0);if(ut===null&&(Oe=dt),V.baseState=Oe,V.firstBaseUpdate=Xe,V.lastBaseUpdate=ut,p=V.shared.interleaved,p!==null){V=p;do se|=V.lane,V=V.next;while(V!==p)}else ee===null&&(V.shared.lanes=0);ta|=se,u.lanes=se,u.memoizedState=dt}}function Au(u,p,I){if(u=p.effects,p.effects=null,u!==null)for(p=0;p<u.length;p++){var B=u[p],V=B.callback;if(V!==null){if(B.callback=null,B=I,typeof V!="function")throw Error(n(191,V));V.call(B)}}}var Cs={},Dn=Mn(Cs),Os=Mn(Cs),Rs=Mn(Cs);function Ji(u){if(u===Cs)throw Error(n(174));return u}function Tl(u,p){switch(ar(Rs,p),ar(Os,u),ar(Dn,Cs),u=p.nodeType,u){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:oe(null,"");break;default:u=u===8?p.parentNode:p,p=u.namespaceURI||null,u=u.tagName,p=oe(p,u)}or(Dn),ar(Dn,p)}function za(){or(Dn),or(Os),or(Rs)}function Cu(u){Ji(Rs.current);var p=Ji(Dn.current),I=oe(p,u.type);p!==I&&(ar(Os,u),ar(Dn,I))}function Ml(u){Os.current===u&&(or(Dn),or(Os))}var dr=Mn(0);function bo(u){for(var p=u;p!==null;){if(p.tag===13){var I=p.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||I.data==="$?"||I.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var jl=[];function Dl(){for(var u=0;u<jl.length;u++)jl[u]._workInProgressVersionPrimary=null;jl.length=0}var Eo=D.ReactCurrentDispatcher,Il=D.ReactCurrentBatchConfig,ea=0,hr=null,Er=null,Cr=null,wo=!1,Ps=!1,Ts=0,Gc=0;function $r(){throw Error(n(321))}function Ll(u,p){if(p===null)return!1;for(var I=0;I<p.length&&I<u.length;I++)if(!Hr(u[I],p[I]))return!1;return!0}function kl(u,p,I,B,V,ee){if(ea=ee,hr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Eo.current=u===null||u.memoizedState===null?Kc:Xc,u=I(B,V),Ps){ee=0;do{if(Ps=!1,Ts=0,25<=ee)throw Error(n(301));ee+=1,Cr=Er=null,p.updateQueue=null,Eo.current=Yc,u=I(B,V)}while(Ps)}if(Eo.current=Co,p=Er!==null&&Er.next!==null,ea=0,Cr=Er=hr=null,wo=!1,p)throw Error(n(300));return u}function Nl(){var u=Ts!==0;return Ts=0,u}function In(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cr===null?hr.memoizedState=Cr=u:Cr=Cr.next=u,Cr}function on(){if(Er===null){var u=hr.alternate;u=u!==null?u.memoizedState:null}else u=Er.next;var p=Cr===null?hr.memoizedState:Cr.next;if(p!==null)Cr=p,Er=u;else{if(u===null)throw Error(n(310));Er=u,u={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},Cr===null?hr.memoizedState=Cr=u:Cr=Cr.next=u}return Cr}function Ms(u,p){return typeof p=="function"?p(u):p}function $l(u){var p=on(),I=p.queue;if(I===null)throw Error(n(311));I.lastRenderedReducer=u;var B=Er,V=B.baseQueue,ee=I.pending;if(ee!==null){if(V!==null){var se=V.next;V.next=ee.next,ee.next=se}B.baseQueue=V=ee,I.pending=null}if(V!==null){ee=V.next,B=B.baseState;var be=se=null,Oe=null,Xe=ee;do{var ut=Xe.lane;if((ea&ut)===ut)Oe!==null&&(Oe=Oe.next={lane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),B=Xe.hasEagerState?Xe.eagerState:u(B,Xe.action);else{var dt={lane:ut,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null};Oe===null?(be=Oe=dt,se=B):Oe=Oe.next=dt,hr.lanes|=ut,ta|=ut}Xe=Xe.next}while(Xe!==null&&Xe!==ee);Oe===null?se=B:Oe.next=be,Hr(B,p.memoizedState)||(Kr=!0),p.memoizedState=B,p.baseState=se,p.baseQueue=Oe,I.lastRenderedState=B}if(u=I.interleaved,u!==null){V=u;do ee=V.lane,hr.lanes|=ee,ta|=ee,V=V.next;while(V!==u)}else V===null&&(I.lanes=0);return[p.memoizedState,I.dispatch]}function Bl(u){var p=on(),I=p.queue;if(I===null)throw Error(n(311));I.lastRenderedReducer=u;var B=I.dispatch,V=I.pending,ee=p.memoizedState;if(V!==null){I.pending=null;var se=V=V.next;do ee=u(ee,se.action),se=se.next;while(se!==V);Hr(ee,p.memoizedState)||(Kr=!0),p.memoizedState=ee,p.baseQueue===null&&(p.baseState=ee),I.lastRenderedState=ee}return[ee,B]}function Ou(){}function Ru(u,p){var I=hr,B=on(),V=p(),ee=!Hr(B.memoizedState,V);if(ee&&(B.memoizedState=V,Kr=!0),B=B.queue,Fl(Mu.bind(null,I,B,u),[u]),B.getSnapshot!==p||ee||Cr!==null&&Cr.memoizedState.tag&1){if(I.flags|=2048,js(9,Tu.bind(null,I,B,V,p),void 0,null),Or===null)throw Error(n(349));(ea&30)!==0||Pu(I,p,V)}return V}function Pu(u,p,I){u.flags|=16384,u={getSnapshot:p,value:I},p=hr.updateQueue,p===null?(p={lastEffect:null,stores:null},hr.updateQueue=p,p.stores=[u]):(I=p.stores,I===null?p.stores=[u]:I.push(u))}function Tu(u,p,I,B){p.value=I,p.getSnapshot=B,ju(p)&&Du(u)}function Mu(u,p,I){return I(function(){ju(p)&&Du(u)})}function ju(u){var p=u.getSnapshot;u=u.value;try{var I=p();return!Hr(u,I)}catch{return!0}}function Du(u){var p=Zn(u,1);p!==null&&wn(p,u,1,-1)}function Iu(u){var p=In();return typeof u=="function"&&(u=u()),p.memoizedState=p.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:u},p.queue=u,u=u.dispatch=Vc.bind(null,hr,u),[p.memoizedState,u]}function js(u,p,I,B){return u={tag:u,create:p,destroy:I,deps:B,next:null},p=hr.updateQueue,p===null?(p={lastEffect:null,stores:null},hr.updateQueue=p,p.lastEffect=u.next=u):(I=p.lastEffect,I===null?p.lastEffect=u.next=u:(B=I.next,I.next=u,u.next=B,p.lastEffect=u)),u}function Lu(){return on().memoizedState}function So(u,p,I,B){var V=In();hr.flags|=u,V.memoizedState=js(1|p,I,void 0,B===void 0?null:B)}function Ao(u,p,I,B){var V=on();B=B===void 0?null:B;var ee=void 0;if(Er!==null){var se=Er.memoizedState;if(ee=se.destroy,B!==null&&Ll(B,se.deps)){V.memoizedState=js(p,I,ee,B);return}}hr.flags|=u,V.memoizedState=js(1|p,I,ee,B)}function ku(u,p){return So(8390656,8,u,p)}function Fl(u,p){return Ao(2048,8,u,p)}function Nu(u,p){return Ao(4,2,u,p)}function $u(u,p){return Ao(4,4,u,p)}function Bu(u,p){if(typeof p=="function")return u=u(),p(u),function(){p(null)};if(p!=null)return u=u(),p.current=u,function(){p.current=null}}function Fu(u,p,I){return I=I!=null?I.concat([u]):null,Ao(4,4,Bu.bind(null,p,u),I)}function zl(){}function zu(u,p){var I=on();p=p===void 0?null:p;var B=I.memoizedState;return B!==null&&p!==null&&Ll(p,B[1])?B[0]:(I.memoizedState=[u,p],u)}function Uu(u,p){var I=on();p=p===void 0?null:p;var B=I.memoizedState;return B!==null&&p!==null&&Ll(p,B[1])?B[0]:(u=u(),I.memoizedState=[u,p],u)}function Wu(u,p,I){return(ea&21)===0?(u.baseState&&(u.baseState=!1,Kr=!0),u.memoizedState=I):(Hr(I,p)||(I=$n(),hr.lanes|=I,ta|=I,u.baseState=!0),p)}function qc(u,p){var I=er;er=I!==0&&4>I?I:4,u(!0);var B=Il.transition;Il.transition={};try{u(!1),p()}finally{er=I,Il.transition=B}}function Gu(){return on().memoizedState}function Hc(u,p,I){var B=ji(u);if(I={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null},qu(u))Hu(p,I);else if(I=Eu(u,p,I,B),I!==null){var V=qr();wn(I,u,B,V),Vu(I,p,B)}}function Vc(u,p,I){var B=ji(u),V={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null};if(qu(u))Hu(p,V);else{var ee=u.alternate;if(u.lanes===0&&(ee===null||ee.lanes===0)&&(ee=p.lastRenderedReducer,ee!==null))try{var se=p.lastRenderedState,be=ee(se,I);if(V.hasEagerState=!0,V.eagerState=be,Hr(be,se)){var Oe=p.interleaved;Oe===null?(V.next=V,Rl(p)):(V.next=Oe.next,Oe.next=V),p.interleaved=V;return}}catch{}I=Eu(u,p,V,B),I!==null&&(V=qr(),wn(I,u,B,V),Vu(I,p,B))}}function qu(u){var p=u.alternate;return u===hr||p!==null&&p===hr}function Hu(u,p){Ps=wo=!0;var I=u.pending;I===null?p.next=p:(p.next=I.next,I.next=p),u.pending=p}function Vu(u,p,I){if((I&4194240)!==0){var B=p.lanes;B&=u.pendingLanes,I|=B,p.lanes=I,dn(u,I)}}var Co={readContext:sn,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useInsertionEffect:$r,useLayoutEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useMutableSource:$r,useSyncExternalStore:$r,useId:$r,unstable_isNewReconciler:!1},Kc={readContext:sn,useCallback:function(u,p){return In().memoizedState=[u,p===void 0?null:p],u},useContext:sn,useEffect:ku,useImperativeHandle:function(u,p,I){return I=I!=null?I.concat([u]):null,So(4194308,4,Bu.bind(null,p,u),I)},useLayoutEffect:function(u,p){return So(4194308,4,u,p)},useInsertionEffect:function(u,p){return So(4,2,u,p)},useMemo:function(u,p){var I=In();return p=p===void 0?null:p,u=u(),I.memoizedState=[u,p],u},useReducer:function(u,p,I){var B=In();return p=I!==void 0?I(p):p,B.memoizedState=B.baseState=p,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:p},B.queue=u,u=u.dispatch=Hc.bind(null,hr,u),[B.memoizedState,u]},useRef:function(u){var p=In();return u={current:u},p.memoizedState=u},useState:Iu,useDebugValue:zl,useDeferredValue:function(u){return In().memoizedState=u},useTransition:function(){var u=Iu(!1),p=u[0];return u=qc.bind(null,u[1]),In().memoizedState=u,[p,u]},useMutableSource:function(){},useSyncExternalStore:function(u,p,I){var B=hr,V=In();if(ht){if(I===void 0)throw Error(n(407));I=I()}else{if(I=p(),Or===null)throw Error(n(349));(ea&30)!==0||Pu(B,p,I)}V.memoizedState=I;var ee={value:I,getSnapshot:p};return V.queue=ee,ku(Mu.bind(null,B,ee,u),[u]),B.flags|=2048,js(9,Tu.bind(null,B,ee,I,p),void 0,null),I},useId:function(){var u=In(),p=Or.identifierPrefix;if(ht){var I=ge,B=ye;I=(B&~(1<<32-pr(B)-1)).toString(32)+I,p=":"+p+"R"+I,I=Ts++,0<I&&(p+="H"+I.toString(32)),p+=":"}else I=Gc++,p=":"+p+"r"+I.toString(32)+":";return u.memoizedState=p},unstable_isNewReconciler:!1},Xc={readContext:sn,useCallback:zu,useContext:sn,useEffect:Fl,useImperativeHandle:Fu,useInsertionEffect:Nu,useLayoutEffect:$u,useMemo:Uu,useReducer:$l,useRef:Lu,useState:function(){return $l(Ms)},useDebugValue:zl,useDeferredValue:function(u){var p=on();return Wu(p,Er.memoizedState,u)},useTransition:function(){var u=$l(Ms)[0],p=on().memoizedState;return[u,p]},useMutableSource:Ou,useSyncExternalStore:Ru,useId:Gu,unstable_isNewReconciler:!1},Yc={readContext:sn,useCallback:zu,useContext:sn,useEffect:Fl,useImperativeHandle:Fu,useInsertionEffect:Nu,useLayoutEffect:$u,useMemo:Uu,useReducer:Bl,useRef:Lu,useState:function(){return Bl(Ms)},useDebugValue:zl,useDeferredValue:function(u){var p=on();return Er===null?p.memoizedState=u:Wu(p,Er.memoizedState,u)},useTransition:function(){var u=Bl(Ms)[0],p=on().memoizedState;return[u,p]},useMutableSource:Ou,useSyncExternalStore:Ru,useId:Gu,unstable_isNewReconciler:!1};function _n(u,p){if(u&&u.defaultProps){p=Q({},p),u=u.defaultProps;for(var I in u)p[I]===void 0&&(p[I]=u[I]);return p}return p}function Ul(u,p,I,B){p=u.memoizedState,I=I(B,p),I=I==null?p:Q({},p,I),u.memoizedState=I,u.lanes===0&&(u.updateQueue.baseState=I)}var Oo={isMounted:function(u){return(u=u._reactInternals)?Dt(u)===u:!1},enqueueSetState:function(u,p,I){u=u._reactInternals;var B=qr(),V=ji(u),ee=Qn(B,V);ee.payload=p,I!=null&&(ee.callback=I),p=Ri(u,ee,V),p!==null&&(wn(p,u,V,B),xo(p,u,V))},enqueueReplaceState:function(u,p,I){u=u._reactInternals;var B=qr(),V=ji(u),ee=Qn(B,V);ee.tag=1,ee.payload=p,I!=null&&(ee.callback=I),p=Ri(u,ee,V),p!==null&&(wn(p,u,V,B),xo(p,u,V))},enqueueForceUpdate:function(u,p){u=u._reactInternals;var I=qr(),B=ji(u),V=Qn(I,B);V.tag=2,p!=null&&(V.callback=p),p=Ri(u,V,B),p!==null&&(wn(p,u,B,I),xo(p,u,B))}};function Ku(u,p,I,B,V,ee,se){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(B,ee,se):p.prototype&&p.prototype.isPureReactComponent?!yi(I,B)||!yi(V,ee):!0}function Xu(u,p,I){var B=!1,V=jn,ee=p.contextType;return typeof ee=="object"&&ee!==null?ee=sn(ee):(V=Nr(p)?Hn:Ar.current,B=p.contextTypes,ee=(B=B!=null)?Ci(u,V):jn),p=new p(I,ee),u.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Oo,u.stateNode=p,p._reactInternals=u,B&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=V,u.__reactInternalMemoizedMaskedChildContext=ee),p}function Yu(u,p,I,B){u=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(I,B),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(I,B),p.state!==u&&Oo.enqueueReplaceState(p,p.state,null)}function Wl(u,p,I,B){var V=u.stateNode;V.props=I,V.state=u.memoizedState,V.refs={},Pl(u);var ee=p.contextType;typeof ee=="object"&&ee!==null?V.context=sn(ee):(ee=Nr(p)?Hn:Ar.current,V.context=Ci(u,ee)),V.state=u.memoizedState,ee=p.getDerivedStateFromProps,typeof ee=="function"&&(Ul(u,p,ee,I),V.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(p=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),p!==V.state&&Oo.enqueueReplaceState(V,V.state,null),_o(u,I,V,B),V.state=u.memoizedState),typeof V.componentDidMount=="function"&&(u.flags|=4194308)}function Ua(u,p){try{var I="",B=p;do I+=xe(B),B=B.return;while(B);var V=I}catch(ee){V=`
Error generating stack: `+ee.message+`
`+ee.stack}return{value:u,source:p,stack:V,digest:null}}function Gl(u,p,I){return{value:u,source:null,stack:I??null,digest:p??null}}function ql(u,p){try{console.error(p.value)}catch(I){setTimeout(function(){throw I})}}var Zc=typeof WeakMap=="function"?WeakMap:Map;function Zu(u,p,I){I=Qn(-1,I),I.tag=3,I.payload={element:null};var B=p.value;return I.callback=function(){Io||(Io=!0,su=B),ql(u,p)},I}function Qu(u,p,I){I=Qn(-1,I),I.tag=3;var B=u.type.getDerivedStateFromError;if(typeof B=="function"){var V=p.value;I.payload=function(){return B(V)},I.callback=function(){ql(u,p)}}var ee=u.stateNode;return ee!==null&&typeof ee.componentDidCatch=="function"&&(I.callback=function(){ql(u,p),typeof B!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var se=p.stack;this.componentDidCatch(p.value,{componentStack:se!==null?se:""})}),I}function Ju(u,p,I){var B=u.pingCache;if(B===null){B=u.pingCache=new Zc;var V=new Set;B.set(p,V)}else V=B.get(p),V===void 0&&(V=new Set,B.set(p,V));V.has(I)||(V.add(I),u=df.bind(null,u,p,I),p.then(u,u))}function ec(u){do{var p;if((p=u.tag===13)&&(p=u.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return u;u=u.return}while(u!==null);return null}function tc(u,p,I,B,V){return(u.mode&1)===0?(u===p?u.flags|=65536:(u.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(p=Qn(-1,1),p.tag=2,Ri(I,p,1))),I.lanes|=1),u):(u.flags|=65536,u.lanes=V,u)}var Qc=D.ReactCurrentOwner,Kr=!1;function Gr(u,p,I,B){p.child=u===null?As(p,null,I,B):Vr(p,u.child,I,B)}function rc(u,p,I,B,V){I=I.render;var ee=p.ref;return Fa(p,V),B=kl(u,p,I,B,ee,V),I=Nl(),u!==null&&!Kr?(p.updateQueue=u.updateQueue,p.flags&=-2053,u.lanes&=~V,Jn(u,p,V)):(ht&&I&&_t(p),p.flags|=1,Gr(u,p,B,V),p.child)}function nc(u,p,I,B,V){if(u===null){var ee=I.type;return typeof ee=="function"&&!hu(ee)&&ee.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(p.tag=15,p.type=ee,ic(u,p,ee,B,V)):(u=Fo(I.type,null,B,p,p.mode,V),u.ref=p.ref,u.return=p,p.child=u)}if(ee=u.child,(u.lanes&V)===0){var se=ee.memoizedProps;if(I=I.compare,I=I!==null?I:yi,I(se,B)&&u.ref===p.ref)return Jn(u,p,V)}return p.flags|=1,u=Ii(ee,B),u.ref=p.ref,u.return=p,p.child=u}function ic(u,p,I,B,V){if(u!==null){var ee=u.memoizedProps;if(yi(ee,B)&&u.ref===p.ref)if(Kr=!1,p.pendingProps=B=ee,(u.lanes&V)!==0)(u.flags&131072)!==0&&(Kr=!0);else return p.lanes=u.lanes,Jn(u,p,V)}return Hl(u,p,I,B,V)}function ac(u,p,I){var B=p.pendingProps,V=B.children,ee=u!==null?u.memoizedState:null;if(B.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},ar(Ga,Jr),Jr|=I;else{if((I&1073741824)===0)return u=ee!==null?ee.baseLanes|I:I,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:u,cachePool:null,transitions:null},p.updateQueue=null,ar(Ga,Jr),Jr|=u,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=ee!==null?ee.baseLanes:I,ar(Ga,Jr),Jr|=B}else ee!==null?(B=ee.baseLanes|I,p.memoizedState=null):B=I,ar(Ga,Jr),Jr|=B;return Gr(u,p,V,I),p.child}function sc(u,p){var I=p.ref;(u===null&&I!==null||u!==null&&u.ref!==I)&&(p.flags|=512,p.flags|=2097152)}function Hl(u,p,I,B,V){var ee=Nr(I)?Hn:Ar.current;return ee=Ci(p,ee),Fa(p,V),I=kl(u,p,I,B,ee,V),B=Nl(),u!==null&&!Kr?(p.updateQueue=u.updateQueue,p.flags&=-2053,u.lanes&=~V,Jn(u,p,V)):(ht&&B&&_t(p),p.flags|=1,Gr(u,p,I,V),p.child)}function oc(u,p,I,B,V){if(Nr(I)){var ee=!0;La(p)}else ee=!1;if(Fa(p,V),p.stateNode===null)Po(u,p),Xu(p,I,B),Wl(p,I,B,V),B=!0;else if(u===null){var se=p.stateNode,be=p.memoizedProps;se.props=be;var Oe=se.context,Xe=I.contextType;typeof Xe=="object"&&Xe!==null?Xe=sn(Xe):(Xe=Nr(I)?Hn:Ar.current,Xe=Ci(p,Xe));var ut=I.getDerivedStateFromProps,dt=typeof ut=="function"||typeof se.getSnapshotBeforeUpdate=="function";dt||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(be!==B||Oe!==Xe)&&Yu(p,se,B,Xe),Oi=!1;var lt=p.memoizedState;se.state=lt,_o(p,B,se,V),Oe=p.memoizedState,be!==B||lt!==Oe||Lr.current||Oi?(typeof ut=="function"&&(Ul(p,I,ut,B),Oe=p.memoizedState),(be=Oi||Ku(p,I,be,B,lt,Oe,Xe))?(dt||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(p.flags|=4194308)):(typeof se.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=B,p.memoizedState=Oe),se.props=B,se.state=Oe,se.context=Xe,B=be):(typeof se.componentDidMount=="function"&&(p.flags|=4194308),B=!1)}else{se=p.stateNode,wu(u,p),be=p.memoizedProps,Xe=p.type===p.elementType?be:_n(p.type,be),se.props=Xe,dt=p.pendingProps,lt=se.context,Oe=I.contextType,typeof Oe=="object"&&Oe!==null?Oe=sn(Oe):(Oe=Nr(I)?Hn:Ar.current,Oe=Ci(p,Oe));var xt=I.getDerivedStateFromProps;(ut=typeof xt=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(be!==dt||lt!==Oe)&&Yu(p,se,B,Oe),Oi=!1,lt=p.memoizedState,se.state=lt,_o(p,B,se,V);var Et=p.memoizedState;be!==dt||lt!==Et||Lr.current||Oi?(typeof xt=="function"&&(Ul(p,I,xt,B),Et=p.memoizedState),(Xe=Oi||Ku(p,I,Xe,B,lt,Et,Oe)||!1)?(ut||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(B,Et,Oe),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(B,Et,Oe)),typeof se.componentDidUpdate=="function"&&(p.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof se.componentDidUpdate!="function"||be===u.memoizedProps&&lt===u.memoizedState||(p.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||be===u.memoizedProps&&lt===u.memoizedState||(p.flags|=1024),p.memoizedProps=B,p.memoizedState=Et),se.props=B,se.state=Et,se.context=Oe,B=Xe):(typeof se.componentDidUpdate!="function"||be===u.memoizedProps&&lt===u.memoizedState||(p.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||be===u.memoizedProps&&lt===u.memoizedState||(p.flags|=1024),B=!1)}return Vl(u,p,I,B,ee,V)}function Vl(u,p,I,B,V,ee){sc(u,p);var se=(p.flags&128)!==0;if(!B&&!se)return V&&ws(p,I,!1),Jn(u,p,ee);B=p.stateNode,Qc.current=p;var be=se&&typeof I.getDerivedStateFromError!="function"?null:B.render();return p.flags|=1,u!==null&&se?(p.child=Vr(p,u.child,null,ee),p.child=Vr(p,null,be,ee)):Gr(u,p,be,ee),p.memoizedState=B.state,V&&ws(p,I,!0),p.child}function lc(u){var p=u.stateNode;p.pendingContext?go(u,p.pendingContext,p.pendingContext!==p.context):p.context&&go(u,p.context,!1),Tl(u,p.containerInfo)}function uc(u,p,I,B,V){return Ht(),mr(V),p.flags|=256,Gr(u,p,I,B),p.child}var Kl={dehydrated:null,treeContext:null,retryLane:0};function Xl(u){return{baseLanes:u,cachePool:null,transitions:null}}function cc(u,p,I){var B=p.pendingProps,V=dr.current,ee=!1,se=(p.flags&128)!==0,be;if((be=se)||(be=u!==null&&u.memoizedState===null?!1:(V&2)!==0),be?(ee=!0,p.flags&=-129):(u===null||u.memoizedState!==null)&&(V|=1),ar(dr,V&1),u===null)return zt(p),u=p.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((p.mode&1)===0?p.lanes=1:u.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(se=B.children,u=B.fallback,ee?(B=p.mode,ee=p.child,se={mode:"hidden",children:se},(B&1)===0&&ee!==null?(ee.childLanes=0,ee.pendingProps=se):ee=zo(se,B,0,null),u=aa(u,B,I,null),ee.return=p,u.return=p,ee.sibling=u,p.child=ee,p.child.memoizedState=Xl(I),p.memoizedState=Kl,u):Yl(p,se));if(V=u.memoizedState,V!==null&&(be=V.dehydrated,be!==null))return Jc(u,p,se,B,be,V,I);if(ee){ee=B.fallback,se=p.mode,V=u.child,be=V.sibling;var Oe={mode:"hidden",children:B.children};return(se&1)===0&&p.child!==V?(B=p.child,B.childLanes=0,B.pendingProps=Oe,p.deletions=null):(B=Ii(V,Oe),B.subtreeFlags=V.subtreeFlags&14680064),be!==null?ee=Ii(be,ee):(ee=aa(ee,se,I,null),ee.flags|=2),ee.return=p,B.return=p,B.sibling=ee,p.child=B,B=ee,ee=p.child,se=u.child.memoizedState,se=se===null?Xl(I):{baseLanes:se.baseLanes|I,cachePool:null,transitions:se.transitions},ee.memoizedState=se,ee.childLanes=u.childLanes&~I,p.memoizedState=Kl,B}return ee=u.child,u=ee.sibling,B=Ii(ee,{mode:"visible",children:B.children}),(p.mode&1)===0&&(B.lanes=I),B.return=p,B.sibling=null,u!==null&&(I=p.deletions,I===null?(p.deletions=[u],p.flags|=16):I.push(u)),p.child=B,p.memoizedState=null,B}function Yl(u,p){return p=zo({mode:"visible",children:p},u.mode,0,null),p.return=u,u.child=p}function Ro(u,p,I,B){return B!==null&&mr(B),Vr(p,u.child,null,I),u=Yl(p,p.pendingProps.children),u.flags|=2,p.memoizedState=null,u}function Jc(u,p,I,B,V,ee,se){if(I)return p.flags&256?(p.flags&=-257,B=Gl(Error(n(422))),Ro(u,p,se,B)):p.memoizedState!==null?(p.child=u.child,p.flags|=128,null):(ee=B.fallback,V=p.mode,B=zo({mode:"visible",children:B.children},V,0,null),ee=aa(ee,V,se,null),ee.flags|=2,B.return=p,ee.return=p,B.sibling=ee,p.child=B,(p.mode&1)!==0&&Vr(p,u.child,null,se),p.child.memoizedState=Xl(se),p.memoizedState=Kl,ee);if((p.mode&1)===0)return Ro(u,p,se,null);if(V.data==="$!"){if(B=V.nextSibling&&V.nextSibling.dataset,B)var be=B.dgst;return B=be,ee=Error(n(419)),B=Gl(ee,B,void 0),Ro(u,p,se,B)}if(be=(se&u.childLanes)!==0,Kr||be){if(B=Or,B!==null){switch(se&-se){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}V=(V&(B.suspendedLanes|se))!==0?0:V,V!==0&&V!==ee.retryLane&&(ee.retryLane=V,Zn(u,V),wn(B,u,V,-1))}return du(),B=Gl(Error(n(421))),Ro(u,p,se,B)}return V.data==="$?"?(p.flags|=128,p.child=u.child,p=hf.bind(null,u),V._reactRetry=p,null):(u=ee.treeContext,$t=Sr(V.nextSibling),ze=p,ht=!0,st=null,u!==null&&(ne[z++]=ye,ne[z++]=ge,ne[z++]=ce,ye=u.id,ge=u.overflow,ce=p),p=Yl(p,B.children),p.flags|=4096,p)}function fc(u,p,I){u.lanes|=p;var B=u.alternate;B!==null&&(B.lanes|=p),Ol(u.return,p,I)}function Zl(u,p,I,B,V){var ee=u.memoizedState;ee===null?u.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:B,tail:I,tailMode:V}:(ee.isBackwards=p,ee.rendering=null,ee.renderingStartTime=0,ee.last=B,ee.tail=I,ee.tailMode=V)}function dc(u,p,I){var B=p.pendingProps,V=B.revealOrder,ee=B.tail;if(Gr(u,p,B.children,I),B=dr.current,(B&2)!==0)B=B&1|2,p.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=p.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&fc(u,I,p);else if(u.tag===19)fc(u,I,p);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===p)break e;for(;u.sibling===null;){if(u.return===null||u.return===p)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}B&=1}if(ar(dr,B),(p.mode&1)===0)p.memoizedState=null;else switch(V){case"forwards":for(I=p.child,V=null;I!==null;)u=I.alternate,u!==null&&bo(u)===null&&(V=I),I=I.sibling;I=V,I===null?(V=p.child,p.child=null):(V=I.sibling,I.sibling=null),Zl(p,!1,V,I,ee);break;case"backwards":for(I=null,V=p.child,p.child=null;V!==null;){if(u=V.alternate,u!==null&&bo(u)===null){p.child=V;break}u=V.sibling,V.sibling=I,I=V,V=u}Zl(p,!0,I,null,ee);break;case"together":Zl(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Po(u,p){(p.mode&1)===0&&u!==null&&(u.alternate=null,p.alternate=null,p.flags|=2)}function Jn(u,p,I){if(u!==null&&(p.dependencies=u.dependencies),ta|=p.lanes,(I&p.childLanes)===0)return null;if(u!==null&&p.child!==u.child)throw Error(n(153));if(p.child!==null){for(u=p.child,I=Ii(u,u.pendingProps),p.child=I,I.return=p;u.sibling!==null;)u=u.sibling,I=I.sibling=Ii(u,u.pendingProps),I.return=p;I.sibling=null}return p.child}function ef(u,p,I){switch(p.tag){case 3:lc(p),Ht();break;case 5:Cu(p);break;case 1:Nr(p.type)&&La(p);break;case 4:Tl(p,p.stateNode.containerInfo);break;case 10:var B=p.type._context,V=p.memoizedProps.value;ar(Xn,B._currentValue),B._currentValue=V;break;case 13:if(B=p.memoizedState,B!==null)return B.dehydrated!==null?(ar(dr,dr.current&1),p.flags|=128,null):(I&p.child.childLanes)!==0?cc(u,p,I):(ar(dr,dr.current&1),u=Jn(u,p,I),u!==null?u.sibling:null);ar(dr,dr.current&1);break;case 19:if(B=(I&p.childLanes)!==0,(u.flags&128)!==0){if(B)return dc(u,p,I);p.flags|=128}if(V=p.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),ar(dr,dr.current),B)break;return null;case 22:case 23:return p.lanes=0,ac(u,p,I)}return Jn(u,p,I)}var hc,Ql,pc,mc;hc=function(u,p){for(var I=p.child;I!==null;){if(I.tag===5||I.tag===6)u.appendChild(I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},Ql=function(){},pc=function(u,p,I,B){var V=u.memoizedProps;if(V!==B){u=p.stateNode,Ji(Dn.current);var ee=null;switch(I){case"input":V=me(u,V),B=me(u,B),ee=[];break;case"select":V=Q({},V,{value:void 0}),B=Q({},B,{value:void 0}),ee=[];break;case"textarea":V=rt(u,V),B=rt(u,B),ee=[];break;default:typeof V.onClick!="function"&&typeof B.onClick=="function"&&(u.onclick=Da)}Ne(I,B);var se;I=null;for(Xe in V)if(!B.hasOwnProperty(Xe)&&V.hasOwnProperty(Xe)&&V[Xe]!=null)if(Xe==="style"){var be=V[Xe];for(se in be)be.hasOwnProperty(se)&&(I||(I={}),I[se]="")}else Xe!=="dangerouslySetInnerHTML"&&Xe!=="children"&&Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&Xe!=="autoFocus"&&(o.hasOwnProperty(Xe)?ee||(ee=[]):(ee=ee||[]).push(Xe,null));for(Xe in B){var Oe=B[Xe];if(be=V?.[Xe],B.hasOwnProperty(Xe)&&Oe!==be&&(Oe!=null||be!=null))if(Xe==="style")if(be){for(se in be)!be.hasOwnProperty(se)||Oe&&Oe.hasOwnProperty(se)||(I||(I={}),I[se]="");for(se in Oe)Oe.hasOwnProperty(se)&&be[se]!==Oe[se]&&(I||(I={}),I[se]=Oe[se])}else I||(ee||(ee=[]),ee.push(Xe,I)),I=Oe;else Xe==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,be=be?be.__html:void 0,Oe!=null&&be!==Oe&&(ee=ee||[]).push(Xe,Oe)):Xe==="children"?typeof Oe!="string"&&typeof Oe!="number"||(ee=ee||[]).push(Xe,""+Oe):Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&(o.hasOwnProperty(Xe)?(Oe!=null&&Xe==="onScroll"&&ir("scroll",u),ee||be===Oe||(ee=[])):(ee=ee||[]).push(Xe,Oe))}I&&(ee=ee||[]).push("style",I);var Xe=ee;(p.updateQueue=Xe)&&(p.flags|=4)}},mc=function(u,p,I,B){I!==B&&(p.flags|=4)};function Ds(u,p){if(!ht)switch(u.tailMode){case"hidden":p=u.tail;for(var I=null;p!==null;)p.alternate!==null&&(I=p),p=p.sibling;I===null?u.tail=null:I.sibling=null;break;case"collapsed":I=u.tail;for(var B=null;I!==null;)I.alternate!==null&&(B=I),I=I.sibling;B===null?p||u.tail===null?u.tail=null:u.tail.sibling=null:B.sibling=null}}function Br(u){var p=u.alternate!==null&&u.alternate.child===u.child,I=0,B=0;if(p)for(var V=u.child;V!==null;)I|=V.lanes|V.childLanes,B|=V.subtreeFlags&14680064,B|=V.flags&14680064,V.return=u,V=V.sibling;else for(V=u.child;V!==null;)I|=V.lanes|V.childLanes,B|=V.subtreeFlags,B|=V.flags,V.return=u,V=V.sibling;return u.subtreeFlags|=B,u.childLanes=I,p}function tf(u,p,I){var B=p.pendingProps;switch(Pe(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(p),null;case 1:return Nr(p.type)&&Ia(),Br(p),null;case 3:return B=p.stateNode,za(),or(Lr),or(Ar),Dl(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(u===null||u.child===null)&&(Wt(p)?p.flags|=4:u===null||u.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,st!==null&&(uu(st),st=null))),Ql(u,p),Br(p),null;case 5:Ml(p);var V=Ji(Rs.current);if(I=p.type,u!==null&&p.stateNode!=null)pc(u,p,I,B,V),u.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!B){if(p.stateNode===null)throw Error(n(166));return Br(p),null}if(u=Ji(Dn.current),Wt(p)){B=p.stateNode,I=p.type;var ee=p.memoizedProps;switch(B[Qr]=p,B[Xi]=ee,u=(p.mode&1)!==0,I){case"dialog":ir("cancel",B),ir("close",B);break;case"iframe":case"object":case"embed":ir("load",B);break;case"video":case"audio":for(V=0;V<Vi.length;V++)ir(Vi[V],B);break;case"source":ir("error",B);break;case"img":case"image":case"link":ir("error",B),ir("load",B);break;case"details":ir("toggle",B);break;case"input":Ie(B,ee),ir("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!ee.multiple},ir("invalid",B);break;case"textarea":et(B,ee),ir("invalid",B)}Ne(I,ee),V=null;for(var se in ee)if(ee.hasOwnProperty(se)){var be=ee[se];se==="children"?typeof be=="string"?B.textContent!==be&&(ee.suppressHydrationWarning!==!0&&ja(B.textContent,be,u),V=["children",be]):typeof be=="number"&&B.textContent!==""+be&&(ee.suppressHydrationWarning!==!0&&ja(B.textContent,be,u),V=["children",""+be]):o.hasOwnProperty(se)&&be!=null&&se==="onScroll"&&ir("scroll",B)}switch(I){case"input":je(B),it(B,ee,!0);break;case"textarea":je(B),ct(B);break;case"select":case"option":break;default:typeof ee.onClick=="function"&&(B.onclick=Da)}B=V,p.updateQueue=B,B!==null&&(p.flags|=4)}else{se=V.nodeType===9?V:V.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=pt(I)),u==="http://www.w3.org/1999/xhtml"?I==="script"?(u=se.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof B.is=="string"?u=se.createElement(I,{is:B.is}):(u=se.createElement(I),I==="select"&&(se=u,B.multiple?se.multiple=!0:B.size&&(se.size=B.size))):u=se.createElementNS(u,I),u[Qr]=p,u[Xi]=B,hc(u,p,!1,!1),p.stateNode=u;e:{switch(se=Ze(I,B),I){case"dialog":ir("cancel",u),ir("close",u),V=B;break;case"iframe":case"object":case"embed":ir("load",u),V=B;break;case"video":case"audio":for(V=0;V<Vi.length;V++)ir(Vi[V],u);V=B;break;case"source":ir("error",u),V=B;break;case"img":case"image":case"link":ir("error",u),ir("load",u),V=B;break;case"details":ir("toggle",u),V=B;break;case"input":Ie(u,B),V=me(u,B),ir("invalid",u);break;case"option":V=B;break;case"select":u._wrapperState={wasMultiple:!!B.multiple},V=Q({},B,{value:void 0}),ir("invalid",u);break;case"textarea":et(u,B),V=rt(u,B),ir("invalid",u);break;default:V=B}Ne(I,V),be=V;for(ee in be)if(be.hasOwnProperty(ee)){var Oe=be[ee];ee==="style"?ie(u,Oe):ee==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&pe(u,Oe)):ee==="children"?typeof Oe=="string"?(I!=="textarea"||Oe!=="")&&Be(u,Oe):typeof Oe=="number"&&Be(u,""+Oe):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(o.hasOwnProperty(ee)?Oe!=null&&ee==="onScroll"&&ir("scroll",u):Oe!=null&&O(u,ee,Oe,se))}switch(I){case"input":je(u),it(u,B,!1);break;case"textarea":je(u),ct(u);break;case"option":B.value!=null&&u.setAttribute("value",""+Ee(B.value));break;case"select":u.multiple=!!B.multiple,ee=B.value,ee!=null?Je(u,!!B.multiple,ee,!1):B.defaultValue!=null&&Je(u,!!B.multiple,B.defaultValue,!0);break;default:typeof V.onClick=="function"&&(u.onclick=Da)}switch(I){case"button":case"input":case"select":case"textarea":B=!!B.autoFocus;break e;case"img":B=!0;break e;default:B=!1}}B&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Br(p),null;case 6:if(u&&p.stateNode!=null)mc(u,p,u.memoizedProps,B);else{if(typeof B!="string"&&p.stateNode===null)throw Error(n(166));if(I=Ji(Rs.current),Ji(Dn.current),Wt(p)){if(B=p.stateNode,I=p.memoizedProps,B[Qr]=p,(ee=B.nodeValue!==I)&&(u=ze,u!==null))switch(u.tag){case 3:ja(B.nodeValue,I,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&ja(B.nodeValue,I,(u.mode&1)!==0)}ee&&(p.flags|=4)}else B=(I.nodeType===9?I:I.ownerDocument).createTextNode(B),B[Qr]=p,p.stateNode=B}return Br(p),null;case 13:if(or(dr),B=p.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(ht&&$t!==null&&(p.mode&1)!==0&&(p.flags&128)===0)vt(),Ht(),p.flags|=98560,ee=!1;else if(ee=Wt(p),B!==null&&B.dehydrated!==null){if(u===null){if(!ee)throw Error(n(318));if(ee=p.memoizedState,ee=ee!==null?ee.dehydrated:null,!ee)throw Error(n(317));ee[Qr]=p}else Ht(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Br(p),ee=!1}else st!==null&&(uu(st),st=null),ee=!0;if(!ee)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=I,p):(B=B!==null,B!==(u!==null&&u.memoizedState!==null)&&B&&(p.child.flags|=8192,(p.mode&1)!==0&&(u===null||(dr.current&1)!==0?wr===0&&(wr=3):du())),p.updateQueue!==null&&(p.flags|=4),Br(p),null);case 4:return za(),Ql(u,p),u===null&&xi(p.stateNode.containerInfo),Br(p),null;case 10:return Cl(p.type._context),Br(p),null;case 17:return Nr(p.type)&&Ia(),Br(p),null;case 19:if(or(dr),ee=p.memoizedState,ee===null)return Br(p),null;if(B=(p.flags&128)!==0,se=ee.rendering,se===null)if(B)Ds(ee,!1);else{if(wr!==0||u!==null&&(u.flags&128)!==0)for(u=p.child;u!==null;){if(se=bo(u),se!==null){for(p.flags|=128,Ds(ee,!1),B=se.updateQueue,B!==null&&(p.updateQueue=B,p.flags|=4),p.subtreeFlags=0,B=I,I=p.child;I!==null;)ee=I,u=B,ee.flags&=14680066,se=ee.alternate,se===null?(ee.childLanes=0,ee.lanes=u,ee.child=null,ee.subtreeFlags=0,ee.memoizedProps=null,ee.memoizedState=null,ee.updateQueue=null,ee.dependencies=null,ee.stateNode=null):(ee.childLanes=se.childLanes,ee.lanes=se.lanes,ee.child=se.child,ee.subtreeFlags=0,ee.deletions=null,ee.memoizedProps=se.memoizedProps,ee.memoizedState=se.memoizedState,ee.updateQueue=se.updateQueue,ee.type=se.type,u=se.dependencies,ee.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),I=I.sibling;return ar(dr,dr.current&1|2),p.child}u=u.sibling}ee.tail!==null&&lr()>qa&&(p.flags|=128,B=!0,Ds(ee,!1),p.lanes=4194304)}else{if(!B)if(u=bo(se),u!==null){if(p.flags|=128,B=!0,I=u.updateQueue,I!==null&&(p.updateQueue=I,p.flags|=4),Ds(ee,!0),ee.tail===null&&ee.tailMode==="hidden"&&!se.alternate&&!ht)return Br(p),null}else 2*lr()-ee.renderingStartTime>qa&&I!==1073741824&&(p.flags|=128,B=!0,Ds(ee,!1),p.lanes=4194304);ee.isBackwards?(se.sibling=p.child,p.child=se):(I=ee.last,I!==null?I.sibling=se:p.child=se,ee.last=se)}return ee.tail!==null?(p=ee.tail,ee.rendering=p,ee.tail=p.sibling,ee.renderingStartTime=lr(),p.sibling=null,I=dr.current,ar(dr,B?I&1|2:I&1),p):(Br(p),null);case 22:case 23:return fu(),B=p.memoizedState!==null,u!==null&&u.memoizedState!==null!==B&&(p.flags|=8192),B&&(p.mode&1)!==0?(Jr&1073741824)!==0&&(Br(p),p.subtreeFlags&6&&(p.flags|=8192)):Br(p),null;case 24:return null;case 25:return null}throw Error(n(156,p.tag))}function rf(u,p){switch(Pe(p),p.tag){case 1:return Nr(p.type)&&Ia(),u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 3:return za(),or(Lr),or(Ar),Dl(),u=p.flags,(u&65536)!==0&&(u&128)===0?(p.flags=u&-65537|128,p):null;case 5:return Ml(p),null;case 13:if(or(dr),u=p.memoizedState,u!==null&&u.dehydrated!==null){if(p.alternate===null)throw Error(n(340));Ht()}return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 19:return or(dr),null;case 4:return za(),null;case 10:return Cl(p.type._context),null;case 22:case 23:return fu(),null;case 24:return null;default:return null}}var To=!1,Fr=!1,nf=typeof WeakSet=="function"?WeakSet:Set,bt=null;function Wa(u,p){var I=u.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(B){gr(u,p,B)}else I.current=null}function Jl(u,p,I){try{I()}catch(B){gr(u,p,B)}}var gc=!1;function af(u,p){if(gs=fa,u=qi(),Zr(u)){if("selectionStart"in u)var I={start:u.selectionStart,end:u.selectionEnd};else e:{I=(I=u.ownerDocument)&&I.defaultView||window;var B=I.getSelection&&I.getSelection();if(B&&B.rangeCount!==0){I=B.anchorNode;var V=B.anchorOffset,ee=B.focusNode;B=B.focusOffset;try{I.nodeType,ee.nodeType}catch{I=null;break e}var se=0,be=-1,Oe=-1,Xe=0,ut=0,dt=u,lt=null;t:for(;;){for(var xt;dt!==I||V!==0&&dt.nodeType!==3||(be=se+V),dt!==ee||B!==0&&dt.nodeType!==3||(Oe=se+B),dt.nodeType===3&&(se+=dt.nodeValue.length),(xt=dt.firstChild)!==null;)lt=dt,dt=xt;for(;;){if(dt===u)break t;if(lt===I&&++Xe===V&&(be=se),lt===ee&&++ut===B&&(Oe=se),(xt=dt.nextSibling)!==null)break;dt=lt,lt=dt.parentNode}dt=xt}I=be===-1||Oe===-1?null:{start:be,end:Oe}}else I=null}I=I||{start:0,end:0}}else I=null;for(ys={focusedElem:u,selectionRange:I},fa=!1,bt=p;bt!==null;)if(p=bt,u=p.child,(p.subtreeFlags&1028)!==0&&u!==null)u.return=p,bt=u;else for(;bt!==null;){p=bt;try{var Et=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Et!==null){var wt=Et.memoizedProps,yr=Et.memoizedState,Ue=p.stateNode,De=Ue.getSnapshotBeforeUpdate(p.elementType===p.type?wt:_n(p.type,wt),yr);Ue.__reactInternalSnapshotBeforeUpdate=De}break;case 3:var qe=p.stateNode.containerInfo;qe.nodeType===1?qe.textContent="":qe.nodeType===9&&qe.documentElement&&qe.removeChild(qe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(gt){gr(p,p.return,gt)}if(u=p.sibling,u!==null){u.return=p.return,bt=u;break}bt=p.return}return Et=gc,gc=!1,Et}function Is(u,p,I){var B=p.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var V=B=B.next;do{if((V.tag&u)===u){var ee=V.destroy;V.destroy=void 0,ee!==void 0&&Jl(p,I,ee)}V=V.next}while(V!==B)}}function Mo(u,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var I=p=p.next;do{if((I.tag&u)===u){var B=I.create;I.destroy=B()}I=I.next}while(I!==p)}}function eu(u){var p=u.ref;if(p!==null){var I=u.stateNode;u.tag,u=I,typeof p=="function"?p(u):p.current=u}}function yc(u){var p=u.alternate;p!==null&&(u.alternate=null,yc(p)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(p=u.stateNode,p!==null&&(delete p[Qr],delete p[Xi],delete p[Gn],delete p[bs],delete p[Es])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function vc(u){return u.tag===5||u.tag===3||u.tag===4}function xc(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||vc(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function tu(u,p,I){var B=u.tag;if(B===5||B===6)u=u.stateNode,p?I.nodeType===8?I.parentNode.insertBefore(u,p):I.insertBefore(u,p):(I.nodeType===8?(p=I.parentNode,p.insertBefore(u,I)):(p=I,p.appendChild(u)),I=I._reactRootContainer,I!=null||p.onclick!==null||(p.onclick=Da));else if(B!==4&&(u=u.child,u!==null))for(tu(u,p,I),u=u.sibling;u!==null;)tu(u,p,I),u=u.sibling}function ru(u,p,I){var B=u.tag;if(B===5||B===6)u=u.stateNode,p?I.insertBefore(u,p):I.appendChild(u);else if(B!==4&&(u=u.child,u!==null))for(ru(u,p,I),u=u.sibling;u!==null;)ru(u,p,I),u=u.sibling}var Pr=null,bn=!1;function Pi(u,p,I){for(I=I.child;I!==null;)_c(u,p,I),I=I.sibling}function _c(u,p,I){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(ua,I)}catch{}switch(I.tag){case 5:Fr||Wa(I,p);case 6:var B=Pr,V=bn;Pr=null,Pi(u,p,I),Pr=B,bn=V,Pr!==null&&(bn?(u=Pr,I=I.stateNode,u.nodeType===8?u.parentNode.removeChild(I):u.removeChild(I)):Pr.removeChild(I.stateNode));break;case 18:Pr!==null&&(bn?(u=Pr,I=I.stateNode,u.nodeType===8?_s(u.parentNode,I):u.nodeType===1&&_s(u,I),$i(u)):_s(Pr,I.stateNode));break;case 4:B=Pr,V=bn,Pr=I.stateNode.containerInfo,bn=!0,Pi(u,p,I),Pr=B,bn=V;break;case 0:case 11:case 14:case 15:if(!Fr&&(B=I.updateQueue,B!==null&&(B=B.lastEffect,B!==null))){V=B=B.next;do{var ee=V,se=ee.destroy;ee=ee.tag,se!==void 0&&((ee&2)!==0||(ee&4)!==0)&&Jl(I,p,se),V=V.next}while(V!==B)}Pi(u,p,I);break;case 1:if(!Fr&&(Wa(I,p),B=I.stateNode,typeof B.componentWillUnmount=="function"))try{B.props=I.memoizedProps,B.state=I.memoizedState,B.componentWillUnmount()}catch(be){gr(I,p,be)}Pi(u,p,I);break;case 21:Pi(u,p,I);break;case 22:I.mode&1?(Fr=(B=Fr)||I.memoizedState!==null,Pi(u,p,I),Fr=B):Pi(u,p,I);break;default:Pi(u,p,I)}}function bc(u){var p=u.updateQueue;if(p!==null){u.updateQueue=null;var I=u.stateNode;I===null&&(I=u.stateNode=new nf),p.forEach(function(B){var V=pf.bind(null,u,B);I.has(B)||(I.add(B),B.then(V,V))})}}function En(u,p){var I=p.deletions;if(I!==null)for(var B=0;B<I.length;B++){var V=I[B];try{var ee=u,se=p,be=se;e:for(;be!==null;){switch(be.tag){case 5:Pr=be.stateNode,bn=!1;break e;case 3:Pr=be.stateNode.containerInfo,bn=!0;break e;case 4:Pr=be.stateNode.containerInfo,bn=!0;break e}be=be.return}if(Pr===null)throw Error(n(160));_c(ee,se,V),Pr=null,bn=!1;var Oe=V.alternate;Oe!==null&&(Oe.return=null),V.return=null}catch(Xe){gr(V,p,Xe)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)Ec(p,u),p=p.sibling}function Ec(u,p){var I=u.alternate,B=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(En(p,u),Ln(u),B&4){try{Is(3,u,u.return),Mo(3,u)}catch(wt){gr(u,u.return,wt)}try{Is(5,u,u.return)}catch(wt){gr(u,u.return,wt)}}break;case 1:En(p,u),Ln(u),B&512&&I!==null&&Wa(I,I.return);break;case 5:if(En(p,u),Ln(u),B&512&&I!==null&&Wa(I,I.return),u.flags&32){var V=u.stateNode;try{Be(V,"")}catch(wt){gr(u,u.return,wt)}}if(B&4&&(V=u.stateNode,V!=null)){var ee=u.memoizedProps,se=I!==null?I.memoizedProps:ee,be=u.type,Oe=u.updateQueue;if(u.updateQueue=null,Oe!==null)try{be==="input"&&ee.type==="radio"&&ee.name!=null&&Ve(V,ee),Ze(be,se);var Xe=Ze(be,ee);for(se=0;se<Oe.length;se+=2){var ut=Oe[se],dt=Oe[se+1];ut==="style"?ie(V,dt):ut==="dangerouslySetInnerHTML"?pe(V,dt):ut==="children"?Be(V,dt):O(V,ut,dt,Xe)}switch(be){case"input":nt(V,ee);break;case"textarea":Qe(V,ee);break;case"select":var lt=V._wrapperState.wasMultiple;V._wrapperState.wasMultiple=!!ee.multiple;var xt=ee.value;xt!=null?Je(V,!!ee.multiple,xt,!1):lt!==!!ee.multiple&&(ee.defaultValue!=null?Je(V,!!ee.multiple,ee.defaultValue,!0):Je(V,!!ee.multiple,ee.multiple?[]:"",!1))}V[Xi]=ee}catch(wt){gr(u,u.return,wt)}}break;case 6:if(En(p,u),Ln(u),B&4){if(u.stateNode===null)throw Error(n(162));V=u.stateNode,ee=u.memoizedProps;try{V.nodeValue=ee}catch(wt){gr(u,u.return,wt)}}break;case 3:if(En(p,u),Ln(u),B&4&&I!==null&&I.memoizedState.isDehydrated)try{$i(p.containerInfo)}catch(wt){gr(u,u.return,wt)}break;case 4:En(p,u),Ln(u);break;case 13:En(p,u),Ln(u),V=u.child,V.flags&8192&&(ee=V.memoizedState!==null,V.stateNode.isHidden=ee,!ee||V.alternate!==null&&V.alternate.memoizedState!==null||(au=lr())),B&4&&bc(u);break;case 22:if(ut=I!==null&&I.memoizedState!==null,u.mode&1?(Fr=(Xe=Fr)||ut,En(p,u),Fr=Xe):En(p,u),Ln(u),B&8192){if(Xe=u.memoizedState!==null,(u.stateNode.isHidden=Xe)&&!ut&&(u.mode&1)!==0)for(bt=u,ut=u.child;ut!==null;){for(dt=bt=ut;bt!==null;){switch(lt=bt,xt=lt.child,lt.tag){case 0:case 11:case 14:case 15:Is(4,lt,lt.return);break;case 1:Wa(lt,lt.return);var Et=lt.stateNode;if(typeof Et.componentWillUnmount=="function"){B=lt,I=lt.return;try{p=B,Et.props=p.memoizedProps,Et.state=p.memoizedState,Et.componentWillUnmount()}catch(wt){gr(B,I,wt)}}break;case 5:Wa(lt,lt.return);break;case 22:if(lt.memoizedState!==null){Ac(dt);continue}}xt!==null?(xt.return=lt,bt=xt):Ac(dt)}ut=ut.sibling}e:for(ut=null,dt=u;;){if(dt.tag===5){if(ut===null){ut=dt;try{V=dt.stateNode,Xe?(ee=V.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none"):(be=dt.stateNode,Oe=dt.memoizedProps.style,se=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,be.style.display=Ye("display",se))}catch(wt){gr(u,u.return,wt)}}}else if(dt.tag===6){if(ut===null)try{dt.stateNode.nodeValue=Xe?"":dt.memoizedProps}catch(wt){gr(u,u.return,wt)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===u)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===u)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===u)break e;ut===dt&&(ut=null),dt=dt.return}ut===dt&&(ut=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:En(p,u),Ln(u),B&4&&bc(u);break;case 21:break;default:En(p,u),Ln(u)}}function Ln(u){var p=u.flags;if(p&2){try{e:{for(var I=u.return;I!==null;){if(vc(I)){var B=I;break e}I=I.return}throw Error(n(160))}switch(B.tag){case 5:var V=B.stateNode;B.flags&32&&(Be(V,""),B.flags&=-33);var ee=xc(u);ru(u,ee,V);break;case 3:case 4:var se=B.stateNode.containerInfo,be=xc(u);tu(u,be,se);break;default:throw Error(n(161))}}catch(Oe){gr(u,u.return,Oe)}u.flags&=-3}p&4096&&(u.flags&=-4097)}function sf(u,p,I){bt=u,wc(u)}function wc(u,p,I){for(var B=(u.mode&1)!==0;bt!==null;){var V=bt,ee=V.child;if(V.tag===22&&B){var se=V.memoizedState!==null||To;if(!se){var be=V.alternate,Oe=be!==null&&be.memoizedState!==null||Fr;be=To;var Xe=Fr;if(To=se,(Fr=Oe)&&!Xe)for(bt=V;bt!==null;)se=bt,Oe=se.child,se.tag===22&&se.memoizedState!==null?Cc(V):Oe!==null?(Oe.return=se,bt=Oe):Cc(V);for(;ee!==null;)bt=ee,wc(ee),ee=ee.sibling;bt=V,To=be,Fr=Xe}Sc(u)}else(V.subtreeFlags&8772)!==0&&ee!==null?(ee.return=V,bt=ee):Sc(u)}}function Sc(u){for(;bt!==null;){var p=bt;if((p.flags&8772)!==0){var I=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Fr||Mo(5,p);break;case 1:var B=p.stateNode;if(p.flags&4&&!Fr)if(I===null)B.componentDidMount();else{var V=p.elementType===p.type?I.memoizedProps:_n(p.type,I.memoizedProps);B.componentDidUpdate(V,I.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var ee=p.updateQueue;ee!==null&&Au(p,ee,B);break;case 3:var se=p.updateQueue;if(se!==null){if(I=null,p.child!==null)switch(p.child.tag){case 5:I=p.child.stateNode;break;case 1:I=p.child.stateNode}Au(p,se,I)}break;case 5:var be=p.stateNode;if(I===null&&p.flags&4){I=be;var Oe=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&I.focus();break;case"img":Oe.src&&(I.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var Xe=p.alternate;if(Xe!==null){var ut=Xe.memoizedState;if(ut!==null){var dt=ut.dehydrated;dt!==null&&$i(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Fr||p.flags&512&&eu(p)}catch(lt){gr(p,p.return,lt)}}if(p===u){bt=null;break}if(I=p.sibling,I!==null){I.return=p.return,bt=I;break}bt=p.return}}function Ac(u){for(;bt!==null;){var p=bt;if(p===u){bt=null;break}var I=p.sibling;if(I!==null){I.return=p.return,bt=I;break}bt=p.return}}function Cc(u){for(;bt!==null;){var p=bt;try{switch(p.tag){case 0:case 11:case 15:var I=p.return;try{Mo(4,p)}catch(Oe){gr(p,I,Oe)}break;case 1:var B=p.stateNode;if(typeof B.componentDidMount=="function"){var V=p.return;try{B.componentDidMount()}catch(Oe){gr(p,V,Oe)}}var ee=p.return;try{eu(p)}catch(Oe){gr(p,ee,Oe)}break;case 5:var se=p.return;try{eu(p)}catch(Oe){gr(p,se,Oe)}}}catch(Oe){gr(p,p.return,Oe)}if(p===u){bt=null;break}var be=p.sibling;if(be!==null){be.return=p.return,bt=be;break}bt=p.return}}var of=Math.ceil,jo=D.ReactCurrentDispatcher,nu=D.ReactCurrentOwner,un=D.ReactCurrentBatchConfig,Zt=0,Or=null,_r=null,Tr=0,Jr=0,Ga=Mn(0),wr=0,Ls=null,ta=0,Do=0,iu=0,ks=null,Xr=null,au=0,qa=1/0,ei=null,Io=!1,su=null,Ti=null,Lo=!1,Mi=null,ko=0,Ns=0,ou=null,No=-1,$o=0;function qr(){return(Zt&6)!==0?lr():No!==-1?No:No=lr()}function ji(u){return(u.mode&1)===0?1:(Zt&2)!==0&&Tr!==0?Tr&-Tr:Tt.transition!==null?($o===0&&($o=$n()),$o):(u=er,u!==0||(u=window.event,u=u===void 0?16:qs(u.type)),u)}function wn(u,p,I,B){if(50<Ns)throw Ns=0,ou=null,Error(n(185));tn(u,I,B),((Zt&2)===0||u!==Or)&&(u===Or&&((Zt&2)===0&&(Do|=I),wr===4&&Di(u,Tr)),Yr(u,B),I===1&&Zt===0&&(p.mode&1)===0&&(qa=lr()+500,Zi&&xn()))}function Yr(u,p){var I=u.callbackNode;ki(u,p);var B=si(u,u===Or?Tr:0);if(B===0)I!==null&&xr(I),u.callbackNode=null,u.callbackPriority=0;else if(p=B&-B,u.callbackPriority!==p){if(I!=null&&xr(I),p===1)u.tag===0?vo(Rc.bind(null,u)):Ss(Rc.bind(null,u)),El(function(){(Zt&6)===0&&xn()}),I=null;else{switch(hn(B)){case 1:I=ri;break;case 4:I=oa;break;case 16:I=la;break;case 536870912:I=Bs;break;default:I=la}I=kc(I,Oc.bind(null,u))}u.callbackPriority=p,u.callbackNode=I}}function Oc(u,p){if(No=-1,$o=0,(Zt&6)!==0)throw Error(n(327));var I=u.callbackNode;if(Ha()&&u.callbackNode!==I)return null;var B=si(u,u===Or?Tr:0);if(B===0)return null;if((B&30)!==0||(B&u.expiredLanes)!==0||p)p=Bo(u,B);else{p=B;var V=Zt;Zt|=2;var ee=Tc();(Or!==u||Tr!==p)&&(ei=null,qa=lr()+500,na(u,p));do try{cf();break}catch(be){Pc(u,be)}while(!0);Al(),jo.current=ee,Zt=V,_r!==null?p=0:(Or=null,Tr=0,p=wr)}if(p!==0){if(p===2&&(V=br(u),V!==0&&(B=V,p=lu(u,V))),p===1)throw I=Ls,na(u,0),Di(u,B),Yr(u,lr()),I;if(p===6)Di(u,B);else{if(V=u.current.alternate,(B&30)===0&&!lf(V)&&(p=Bo(u,B),p===2&&(ee=br(u),ee!==0&&(B=ee,p=lu(u,ee))),p===1))throw I=Ls,na(u,0),Di(u,B),Yr(u,lr()),I;switch(u.finishedWork=V,u.finishedLanes=B,p){case 0:case 1:throw Error(n(345));case 2:ia(u,Xr,ei);break;case 3:if(Di(u,B),(B&130023424)===B&&(p=au+500-lr(),10<p)){if(si(u,0)!==0)break;if(V=u.suspendedLanes,(V&B)!==B){qr(),u.pingedLanes|=u.suspendedLanes&V;break}u.timeoutHandle=xs(ia.bind(null,u,Xr,ei),p);break}ia(u,Xr,ei);break;case 4:if(Di(u,B),(B&4194240)===B)break;for(p=u.eventTimes,V=-1;0<B;){var se=31-pr(B);ee=1<<se,se=p[se],se>V&&(V=se),B&=~ee}if(B=V,B=lr()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*of(B/1960))-B,10<B){u.timeoutHandle=xs(ia.bind(null,u,Xr,ei),B);break}ia(u,Xr,ei);break;case 5:ia(u,Xr,ei);break;default:throw Error(n(329))}}}return Yr(u,lr()),u.callbackNode===I?Oc.bind(null,u):null}function lu(u,p){var I=ks;return u.current.memoizedState.isDehydrated&&(na(u,p).flags|=256),u=Bo(u,p),u!==2&&(p=Xr,Xr=I,p!==null&&uu(p)),u}function uu(u){Xr===null?Xr=u:Xr.push.apply(Xr,u)}function lf(u){for(var p=u;;){if(p.flags&16384){var I=p.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var B=0;B<I.length;B++){var V=I[B],ee=V.getSnapshot;V=V.value;try{if(!Hr(ee(),V))return!1}catch{return!1}}}if(I=p.child,p.subtreeFlags&16384&&I!==null)I.return=p,p=I;else{if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Di(u,p){for(p&=~iu,p&=~Do,u.suspendedLanes|=p,u.pingedLanes&=~p,u=u.expirationTimes;0<p;){var I=31-pr(p),B=1<<I;u[I]=-1,p&=~B}}function Rc(u){if((Zt&6)!==0)throw Error(n(327));Ha();var p=si(u,0);if((p&1)===0)return Yr(u,lr()),null;var I=Bo(u,p);if(u.tag!==0&&I===2){var B=br(u);B!==0&&(p=B,I=lu(u,B))}if(I===1)throw I=Ls,na(u,0),Di(u,p),Yr(u,lr()),I;if(I===6)throw Error(n(345));return u.finishedWork=u.current.alternate,u.finishedLanes=p,ia(u,Xr,ei),Yr(u,lr()),null}function cu(u,p){var I=Zt;Zt|=1;try{return u(p)}finally{Zt=I,Zt===0&&(qa=lr()+500,Zi&&xn())}}function ra(u){Mi!==null&&Mi.tag===0&&(Zt&6)===0&&Ha();var p=Zt;Zt|=1;var I=un.transition,B=er;try{if(un.transition=null,er=1,u)return u()}finally{er=B,un.transition=I,Zt=p,(Zt&6)===0&&xn()}}function fu(){Jr=Ga.current,or(Ga)}function na(u,p){u.finishedWork=null,u.finishedLanes=0;var I=u.timeoutHandle;if(I!==-1&&(u.timeoutHandle=-1,bl(I)),_r!==null)for(I=_r.return;I!==null;){var B=I;switch(Pe(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&Ia();break;case 3:za(),or(Lr),or(Ar),Dl();break;case 5:Ml(B);break;case 4:za();break;case 13:or(dr);break;case 19:or(dr);break;case 10:Cl(B.type._context);break;case 22:case 23:fu()}I=I.return}if(Or=u,_r=u=Ii(u.current,null),Tr=Jr=p,wr=0,Ls=null,iu=Do=ta=0,Xr=ks=null,Qi!==null){for(p=0;p<Qi.length;p++)if(I=Qi[p],B=I.interleaved,B!==null){I.interleaved=null;var V=B.next,ee=I.pending;if(ee!==null){var se=ee.next;ee.next=V,B.next=se}I.pending=B}Qi=null}return u}function Pc(u,p){do{var I=_r;try{if(Al(),Eo.current=Co,wo){for(var B=hr.memoizedState;B!==null;){var V=B.queue;V!==null&&(V.pending=null),B=B.next}wo=!1}if(ea=0,Cr=Er=hr=null,Ps=!1,Ts=0,nu.current=null,I===null||I.return===null){wr=1,Ls=p,_r=null;break}e:{var ee=u,se=I.return,be=I,Oe=p;if(p=Tr,be.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var Xe=Oe,ut=be,dt=ut.tag;if((ut.mode&1)===0&&(dt===0||dt===11||dt===15)){var lt=ut.alternate;lt?(ut.updateQueue=lt.updateQueue,ut.memoizedState=lt.memoizedState,ut.lanes=lt.lanes):(ut.updateQueue=null,ut.memoizedState=null)}var xt=ec(se);if(xt!==null){xt.flags&=-257,tc(xt,se,be,ee,p),xt.mode&1&&Ju(ee,Xe,p),p=xt,Oe=Xe;var Et=p.updateQueue;if(Et===null){var wt=new Set;wt.add(Oe),p.updateQueue=wt}else Et.add(Oe);break e}else{if((p&1)===0){Ju(ee,Xe,p),du();break e}Oe=Error(n(426))}}else if(ht&&be.mode&1){var yr=ec(se);if(yr!==null){(yr.flags&65536)===0&&(yr.flags|=256),tc(yr,se,be,ee,p),mr(Ua(Oe,be));break e}}ee=Oe=Ua(Oe,be),wr!==4&&(wr=2),ks===null?ks=[ee]:ks.push(ee),ee=se;do{switch(ee.tag){case 3:ee.flags|=65536,p&=-p,ee.lanes|=p;var Ue=Zu(ee,Oe,p);Su(ee,Ue);break e;case 1:be=Oe;var De=ee.type,qe=ee.stateNode;if((ee.flags&128)===0&&(typeof De.getDerivedStateFromError=="function"||qe!==null&&typeof qe.componentDidCatch=="function"&&(Ti===null||!Ti.has(qe)))){ee.flags|=65536,p&=-p,ee.lanes|=p;var gt=Qu(ee,be,p);Su(ee,gt);break e}}ee=ee.return}while(ee!==null)}jc(I)}catch(St){p=St,_r===I&&I!==null&&(_r=I=I.return);continue}break}while(!0)}function Tc(){var u=jo.current;return jo.current=Co,u===null?Co:u}function du(){(wr===0||wr===3||wr===2)&&(wr=4),Or===null||(ta&268435455)===0&&(Do&268435455)===0||Di(Or,Tr)}function Bo(u,p){var I=Zt;Zt|=2;var B=Tc();(Or!==u||Tr!==p)&&(ei=null,na(u,p));do try{uf();break}catch(V){Pc(u,V)}while(!0);if(Al(),Zt=I,jo.current=B,_r!==null)throw Error(n(261));return Or=null,Tr=0,wr}function uf(){for(;_r!==null;)Mc(_r)}function cf(){for(;_r!==null&&!en();)Mc(_r)}function Mc(u){var p=Lc(u.alternate,u,Jr);u.memoizedProps=u.pendingProps,p===null?jc(u):_r=p,nu.current=null}function jc(u){var p=u;do{var I=p.alternate;if(u=p.return,(p.flags&32768)===0){if(I=tf(I,p,Jr),I!==null){_r=I;return}}else{if(I=rf(I,p),I!==null){I.flags&=32767,_r=I;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{wr=6,_r=null;return}}if(p=p.sibling,p!==null){_r=p;return}_r=p=u}while(p!==null);wr===0&&(wr=5)}function ia(u,p,I){var B=er,V=un.transition;try{un.transition=null,er=1,ff(u,p,I,B)}finally{un.transition=V,er=B}return null}function ff(u,p,I,B){do Ha();while(Mi!==null);if((Zt&6)!==0)throw Error(n(327));I=u.finishedWork;var V=u.finishedLanes;if(I===null)return null;if(u.finishedWork=null,u.finishedLanes=0,I===u.current)throw Error(n(177));u.callbackNode=null,u.callbackPriority=0;var ee=I.lanes|I.childLanes;if(Yo(u,ee),u===Or&&(_r=Or=null,Tr=0),(I.subtreeFlags&2064)===0&&(I.flags&2064)===0||Lo||(Lo=!0,kc(la,function(){return Ha(),null})),ee=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||ee){ee=un.transition,un.transition=null;var se=er;er=1;var be=Zt;Zt|=4,nu.current=null,af(u,I),Ec(I,u),os(ys),fa=!!gs,ys=gs=null,u.current=I,sf(I),ti(),Zt=be,er=se,un.transition=ee}else u.current=I;if(Lo&&(Lo=!1,Mi=u,ko=V),ee=u.pendingLanes,ee===0&&(Ti=null),Sn(I.stateNode),Yr(u,lr()),p!==null)for(B=u.onRecoverableError,I=0;I<p.length;I++)V=p[I],B(V.value,{componentStack:V.stack,digest:V.digest});if(Io)throw Io=!1,u=su,su=null,u;return(ko&1)!==0&&u.tag!==0&&Ha(),ee=u.pendingLanes,(ee&1)!==0?u===ou?Ns++:(Ns=0,ou=u):Ns=0,xn(),null}function Ha(){if(Mi!==null){var u=hn(ko),p=un.transition,I=er;try{if(un.transition=null,er=16>u?16:u,Mi===null)var B=!1;else{if(u=Mi,Mi=null,ko=0,(Zt&6)!==0)throw Error(n(331));var V=Zt;for(Zt|=4,bt=u.current;bt!==null;){var ee=bt,se=ee.child;if((bt.flags&16)!==0){var be=ee.deletions;if(be!==null){for(var Oe=0;Oe<be.length;Oe++){var Xe=be[Oe];for(bt=Xe;bt!==null;){var ut=bt;switch(ut.tag){case 0:case 11:case 15:Is(8,ut,ee)}var dt=ut.child;if(dt!==null)dt.return=ut,bt=dt;else for(;bt!==null;){ut=bt;var lt=ut.sibling,xt=ut.return;if(yc(ut),ut===Xe){bt=null;break}if(lt!==null){lt.return=xt,bt=lt;break}bt=xt}}}var Et=ee.alternate;if(Et!==null){var wt=Et.child;if(wt!==null){Et.child=null;do{var yr=wt.sibling;wt.sibling=null,wt=yr}while(wt!==null)}}bt=ee}}if((ee.subtreeFlags&2064)!==0&&se!==null)se.return=ee,bt=se;else e:for(;bt!==null;){if(ee=bt,(ee.flags&2048)!==0)switch(ee.tag){case 0:case 11:case 15:Is(9,ee,ee.return)}var Ue=ee.sibling;if(Ue!==null){Ue.return=ee.return,bt=Ue;break e}bt=ee.return}}var De=u.current;for(bt=De;bt!==null;){se=bt;var qe=se.child;if((se.subtreeFlags&2064)!==0&&qe!==null)qe.return=se,bt=qe;else e:for(se=De;bt!==null;){if(be=bt,(be.flags&2048)!==0)try{switch(be.tag){case 0:case 11:case 15:Mo(9,be)}}catch(St){gr(be,be.return,St)}if(be===se){bt=null;break e}var gt=be.sibling;if(gt!==null){gt.return=be.return,bt=gt;break e}bt=be.return}}if(Zt=V,xn(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(ua,u)}catch{}B=!0}return B}finally{er=I,un.transition=p}}return!1}function Dc(u,p,I){p=Ua(I,p),p=Zu(u,p,1),u=Ri(u,p,1),p=qr(),u!==null&&(tn(u,1,p),Yr(u,p))}function gr(u,p,I){if(u.tag===3)Dc(u,u,I);else for(;p!==null;){if(p.tag===3){Dc(p,u,I);break}else if(p.tag===1){var B=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Ti===null||!Ti.has(B))){u=Ua(I,u),u=Qu(p,u,1),p=Ri(p,u,1),u=qr(),p!==null&&(tn(p,1,u),Yr(p,u));break}}p=p.return}}function df(u,p,I){var B=u.pingCache;B!==null&&B.delete(p),p=qr(),u.pingedLanes|=u.suspendedLanes&I,Or===u&&(Tr&I)===I&&(wr===4||wr===3&&(Tr&130023424)===Tr&&500>lr()-au?na(u,0):iu|=I),Yr(u,p)}function Ic(u,p){p===0&&((u.mode&1)===0?p=1:(p=ai,ai<<=1,(ai&130023424)===0&&(ai=4194304)));var I=qr();u=Zn(u,p),u!==null&&(tn(u,p,I),Yr(u,I))}function hf(u){var p=u.memoizedState,I=0;p!==null&&(I=p.retryLane),Ic(u,I)}function pf(u,p){var I=0;switch(u.tag){case 13:var B=u.stateNode,V=u.memoizedState;V!==null&&(I=V.retryLane);break;case 19:B=u.stateNode;break;default:throw Error(n(314))}B!==null&&B.delete(p),Ic(u,I)}var Lc;Lc=function(u,p,I){if(u!==null)if(u.memoizedProps!==p.pendingProps||Lr.current)Kr=!0;else{if((u.lanes&I)===0&&(p.flags&128)===0)return Kr=!1,ef(u,p,I);Kr=(u.flags&131072)!==0}else Kr=!1,ht&&(p.flags&1048576)!==0&&$e(p,N,p.index);switch(p.lanes=0,p.tag){case 2:var B=p.type;Po(u,p),u=p.pendingProps;var V=Ci(p,Ar.current);Fa(p,I),V=kl(null,p,B,u,V,I);var ee=Nl();return p.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Nr(B)?(ee=!0,La(p)):ee=!1,p.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,Pl(p),V.updater=Oo,p.stateNode=V,V._reactInternals=p,Wl(p,B,u,I),p=Vl(null,p,B,!0,ee,I)):(p.tag=0,ht&&ee&&_t(p),Gr(null,p,V,I),p=p.child),p;case 16:B=p.elementType;e:{switch(Po(u,p),u=p.pendingProps,V=B._init,B=V(B._payload),p.type=B,V=p.tag=gf(B),u=_n(B,u),V){case 0:p=Hl(null,p,B,u,I);break e;case 1:p=oc(null,p,B,u,I);break e;case 11:p=rc(null,p,B,u,I);break e;case 14:p=nc(null,p,B,_n(B.type,u),I);break e}throw Error(n(306,B,""))}return p;case 0:return B=p.type,V=p.pendingProps,V=p.elementType===B?V:_n(B,V),Hl(u,p,B,V,I);case 1:return B=p.type,V=p.pendingProps,V=p.elementType===B?V:_n(B,V),oc(u,p,B,V,I);case 3:e:{if(lc(p),u===null)throw Error(n(387));B=p.pendingProps,ee=p.memoizedState,V=ee.element,wu(u,p),_o(p,B,null,I);var se=p.memoizedState;if(B=se.element,ee.isDehydrated)if(ee={element:B,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},p.updateQueue.baseState=ee,p.memoizedState=ee,p.flags&256){V=Ua(Error(n(423)),p),p=uc(u,p,B,I,V);break e}else if(B!==V){V=Ua(Error(n(424)),p),p=uc(u,p,B,I,V);break e}else for($t=Sr(p.stateNode.containerInfo.firstChild),ze=p,ht=!0,st=null,I=As(p,null,B,I),p.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(Ht(),B===V){p=Jn(u,p,I);break e}Gr(u,p,B,I)}p=p.child}return p;case 5:return Cu(p),u===null&&zt(p),B=p.type,V=p.pendingProps,ee=u!==null?u.memoizedProps:null,se=V.children,vs(B,V)?se=null:ee!==null&&vs(B,ee)&&(p.flags|=32),sc(u,p),Gr(u,p,se,I),p.child;case 6:return u===null&&zt(p),null;case 13:return cc(u,p,I);case 4:return Tl(p,p.stateNode.containerInfo),B=p.pendingProps,u===null?p.child=Vr(p,null,B,I):Gr(u,p,B,I),p.child;case 11:return B=p.type,V=p.pendingProps,V=p.elementType===B?V:_n(B,V),rc(u,p,B,V,I);case 7:return Gr(u,p,p.pendingProps,I),p.child;case 8:return Gr(u,p,p.pendingProps.children,I),p.child;case 12:return Gr(u,p,p.pendingProps.children,I),p.child;case 10:e:{if(B=p.type._context,V=p.pendingProps,ee=p.memoizedProps,se=V.value,ar(Xn,B._currentValue),B._currentValue=se,ee!==null)if(Hr(ee.value,se)){if(ee.children===V.children&&!Lr.current){p=Jn(u,p,I);break e}}else for(ee=p.child,ee!==null&&(ee.return=p);ee!==null;){var be=ee.dependencies;if(be!==null){se=ee.child;for(var Oe=be.firstContext;Oe!==null;){if(Oe.context===B){if(ee.tag===1){Oe=Qn(-1,I&-I),Oe.tag=2;var Xe=ee.updateQueue;if(Xe!==null){Xe=Xe.shared;var ut=Xe.pending;ut===null?Oe.next=Oe:(Oe.next=ut.next,ut.next=Oe),Xe.pending=Oe}}ee.lanes|=I,Oe=ee.alternate,Oe!==null&&(Oe.lanes|=I),Ol(ee.return,I,p),be.lanes|=I;break}Oe=Oe.next}}else if(ee.tag===10)se=ee.type===p.type?null:ee.child;else if(ee.tag===18){if(se=ee.return,se===null)throw Error(n(341));se.lanes|=I,be=se.alternate,be!==null&&(be.lanes|=I),Ol(se,I,p),se=ee.sibling}else se=ee.child;if(se!==null)se.return=ee;else for(se=ee;se!==null;){if(se===p){se=null;break}if(ee=se.sibling,ee!==null){ee.return=se.return,se=ee;break}se=se.return}ee=se}Gr(u,p,V.children,I),p=p.child}return p;case 9:return V=p.type,B=p.pendingProps.children,Fa(p,I),V=sn(V),B=B(V),p.flags|=1,Gr(u,p,B,I),p.child;case 14:return B=p.type,V=_n(B,p.pendingProps),V=_n(B.type,V),nc(u,p,B,V,I);case 15:return ic(u,p,p.type,p.pendingProps,I);case 17:return B=p.type,V=p.pendingProps,V=p.elementType===B?V:_n(B,V),Po(u,p),p.tag=1,Nr(B)?(u=!0,La(p)):u=!1,Fa(p,I),Xu(p,B,V),Wl(p,B,V,I),Vl(null,p,B,!0,u,I);case 19:return dc(u,p,I);case 22:return ac(u,p,I)}throw Error(n(156,p.tag))};function kc(u,p){return vr(u,p)}function mf(u,p,I,B){this.tag=u,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(u,p,I,B){return new mf(u,p,I,B)}function hu(u){return u=u.prototype,!(!u||!u.isReactComponent)}function gf(u){if(typeof u=="function")return hu(u)?1:0;if(u!=null){if(u=u.$$typeof,u===W)return 11;if(u===H)return 14}return 2}function Ii(u,p){var I=u.alternate;return I===null?(I=cn(u.tag,p,u.key,u.mode),I.elementType=u.elementType,I.type=u.type,I.stateNode=u.stateNode,I.alternate=u,u.alternate=I):(I.pendingProps=p,I.type=u.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=u.flags&14680064,I.childLanes=u.childLanes,I.lanes=u.lanes,I.child=u.child,I.memoizedProps=u.memoizedProps,I.memoizedState=u.memoizedState,I.updateQueue=u.updateQueue,p=u.dependencies,I.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},I.sibling=u.sibling,I.index=u.index,I.ref=u.ref,I}function Fo(u,p,I,B,V,ee){var se=2;if(B=u,typeof u=="function")hu(u)&&(se=1);else if(typeof u=="string")se=5;else e:switch(u){case A:return aa(I.children,V,ee,p);case j:se=8,V|=8;break;case L:return u=cn(12,I,p,V|2),u.elementType=L,u.lanes=ee,u;case U:return u=cn(13,I,p,V),u.elementType=U,u.lanes=ee,u;case q:return u=cn(19,I,p,V),u.elementType=q,u.lanes=ee,u;case Z:return zo(I,V,ee,p);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case $:se=10;break e;case F:se=9;break e;case W:se=11;break e;case H:se=14;break e;case Y:se=16,B=null;break e}throw Error(n(130,u==null?u:typeof u,""))}return p=cn(se,I,p,V),p.elementType=u,p.type=B,p.lanes=ee,p}function aa(u,p,I,B){return u=cn(7,u,B,p),u.lanes=I,u}function zo(u,p,I,B){return u=cn(22,u,B,p),u.elementType=Z,u.lanes=I,u.stateNode={isHidden:!1},u}function pu(u,p,I){return u=cn(6,u,null,p),u.lanes=I,u}function mu(u,p,I){return p=cn(4,u.children!==null?u.children:[],u.key,p),p.lanes=I,p.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},p}function yf(u,p,I,B,V){this.tag=p,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fn(0),this.expirationTimes=fn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fn(0),this.identifierPrefix=B,this.onRecoverableError=V,this.mutableSourceEagerHydrationData=null}function gu(u,p,I,B,V,ee,se,be,Oe){return u=new yf(u,p,I,be,Oe),p===1?(p=1,ee===!0&&(p|=8)):p=0,ee=cn(3,null,null,p),u.current=ee,ee.stateNode=u,ee.memoizedState={element:B,isDehydrated:I,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pl(ee),u}function vf(u,p,I){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:B==null?null:""+B,children:u,containerInfo:p,implementation:I}}function Nc(u){if(!u)return jn;u=u._reactInternals;e:{if(Dt(u)!==u||u.tag!==1)throw Error(n(170));var p=u;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Nr(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(n(171))}if(u.tag===1){var I=u.type;if(Nr(I))return yo(u,I,p)}return p}function $c(u,p,I,B,V,ee,se,be,Oe){return u=gu(I,B,!0,u,V,ee,se,be,Oe),u.context=Nc(null),I=u.current,B=qr(),V=ji(I),ee=Qn(B,V),ee.callback=p??null,Ri(I,ee,V),u.current.lanes=V,tn(u,V,B),Yr(u,B),u}function Uo(u,p,I,B){var V=p.current,ee=qr(),se=ji(V);return I=Nc(I),p.context===null?p.context=I:p.pendingContext=I,p=Qn(ee,se),p.payload={element:u},B=B===void 0?null:B,B!==null&&(p.callback=B),u=Ri(V,p,se),u!==null&&(wn(u,V,se,ee),xo(u,V,se)),se}function Wo(u){return u=u.current,u.child?(u.child.tag===5,u.child.stateNode):null}function Bc(u,p){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var I=u.retryLane;u.retryLane=I!==0&&I<p?I:p}}function yu(u,p){Bc(u,p),(u=u.alternate)&&Bc(u,p)}function xf(){return null}var Fc=typeof reportError=="function"?reportError:function(u){console.error(u)};function vu(u){this._internalRoot=u}Go.prototype.render=vu.prototype.render=function(u){var p=this._internalRoot;if(p===null)throw Error(n(409));Uo(u,p,null,null)},Go.prototype.unmount=vu.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var p=u.containerInfo;ra(function(){Uo(null,u,null,null)}),p[vn]=null}};function Go(u){this._internalRoot=u}Go.prototype.unstable_scheduleHydration=function(u){if(u){var p=Mr();u={blockedOn:null,target:u,priority:p};for(var I=0;I<Ur.length&&p!==0&&p<Ur[I].priority;I++);Ur.splice(I,0,u),I===0&&Ws(u)}};function xu(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function qo(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function zc(){}function _f(u,p,I,B,V){if(V){if(typeof B=="function"){var ee=B;B=function(){var Xe=Wo(se);ee.call(Xe)}}var se=$c(p,B,u,0,null,!1,!1,"",zc);return u._reactRootContainer=se,u[vn]=se.current,xi(u.nodeType===8?u.parentNode:u),ra(),se}for(;V=u.lastChild;)u.removeChild(V);if(typeof B=="function"){var be=B;B=function(){var Xe=Wo(Oe);be.call(Xe)}}var Oe=gu(u,0,!1,null,null,!1,!1,"",zc);return u._reactRootContainer=Oe,u[vn]=Oe.current,xi(u.nodeType===8?u.parentNode:u),ra(function(){Uo(p,Oe,I,B)}),Oe}function Ho(u,p,I,B,V){var ee=I._reactRootContainer;if(ee){var se=ee;if(typeof V=="function"){var be=V;V=function(){var Oe=Wo(se);be.call(Oe)}}Uo(p,se,u,V)}else se=_f(I,p,u,V,B);return Wo(se)}Fs=function(u){switch(u.tag){case 3:var p=u.stateNode;if(p.current.memoizedState.isDehydrated){var I=kn(p.pendingLanes);I!==0&&(dn(p,I|1),Yr(p,lr()),(Zt&6)===0&&(qa=lr()+500,xn()))}break;case 13:ra(function(){var B=Zn(u,1);if(B!==null){var V=qr();wn(B,u,1,V)}}),yu(u,1)}},zs=function(u){if(u.tag===13){var p=Zn(u,134217728);if(p!==null){var I=qr();wn(p,u,134217728,I)}yu(u,134217728)}},pn=function(u){if(u.tag===13){var p=ji(u),I=Zn(u,p);if(I!==null){var B=qr();wn(I,u,p,B)}yu(u,p)}},Mr=function(){return er},jr=function(u,p){var I=er;try{return er=u,p()}finally{er=I}},ae=function(u,p,I){switch(p){case"input":if(nt(u,I),p=I.name,I.type==="radio"&&p!=null){for(I=u;I.parentNode;)I=I.parentNode;for(I=I.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<I.length;p++){var B=I[p];if(B!==u&&B.form===u.form){var V=Tn(B);if(!V)throw Error(n(90));Ce(B),nt(B,V)}}}break;case"textarea":Qe(u,I);break;case"select":p=I.value,p!=null&&Je(u,!!I.multiple,p,!1)}},le=cu,we=ra;var bf={usingClientEntryPoint:!1,Events:[wi,Si,Tn,Me,Te,cu]},$s={findFiberByHostInstance:qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ef={bundleType:$s.bundleType,version:$s.version,rendererPackageName:$s.rendererPackageName,rendererConfig:$s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=rr(u),u===null?null:u.stateNode},findFiberByHostInstance:$s.findFiberByHostInstance||xf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vo.isDisabled&&Vo.supportsFiber)try{ua=Vo.inject(Ef),Nt=Vo}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bf,reactDom_production_min.createPortal=function(u,p){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xu(p))throw Error(n(200));return vf(u,p,null,I)},reactDom_production_min.createRoot=function(u,p){if(!xu(u))throw Error(n(299));var I=!1,B="",V=Fc;return p!=null&&(p.unstable_strictMode===!0&&(I=!0),p.identifierPrefix!==void 0&&(B=p.identifierPrefix),p.onRecoverableError!==void 0&&(V=p.onRecoverableError)),p=gu(u,1,!1,null,null,I,!1,B,V),u[vn]=p.current,xi(u.nodeType===8?u.parentNode:u),new vu(p)},reactDom_production_min.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var p=u._reactInternals;if(p===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=rr(p),u=u===null?null:u.stateNode,u},reactDom_production_min.flushSync=function(u){return ra(u)},reactDom_production_min.hydrate=function(u,p,I){if(!qo(p))throw Error(n(200));return Ho(null,u,p,!0,I)},reactDom_production_min.hydrateRoot=function(u,p,I){if(!xu(u))throw Error(n(405));var B=I!=null&&I.hydratedSources||null,V=!1,ee="",se=Fc;if(I!=null&&(I.unstable_strictMode===!0&&(V=!0),I.identifierPrefix!==void 0&&(ee=I.identifierPrefix),I.onRecoverableError!==void 0&&(se=I.onRecoverableError)),p=$c(p,null,u,1,I??null,V,!1,ee,se),u[vn]=p.current,xi(u),B)for(u=0;u<B.length;u++)I=B[u],V=I._getVersion,V=V(I._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[I,V]:p.mutableSourceEagerHydrationData.push(I,V);return new Go(p)},reactDom_production_min.render=function(u,p,I){if(!qo(p))throw Error(n(200));return Ho(null,u,p,!1,I)},reactDom_production_min.unmountComponentAtNode=function(u){if(!qo(u))throw Error(n(40));return u._reactRootContainer?(ra(function(){Ho(null,null,u,!1,function(){u._reactRootContainer=null,u[vn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=cu,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(u,p,I,B){if(!qo(I))throw Error(n(200));if(u==null||u._reactInternals===void 0)throw Error(n(38));return Ho(u,p,I,!1,B)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var e=requireReactDom();return client.createRoot=e.createRoot,client.hydrateRoot=e.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},defaultTimeoutProvider={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},TimeoutManager=class{#e=defaultTimeoutProvider;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},timeoutManager=new TimeoutManager;function systemSetTimeoutZero(e){setTimeout(e,0)}var isServer=typeof window>"u"||"Deno"in globalThis;function noop$2(){}function functionalUpdate(e,t){return typeof e=="function"?e(t):e}function isValidTimeout(e){return typeof e=="number"&&e>=0&&e!==1/0}function timeUntilStale(e,t){return Math.max(e+(t||0)-Date.now(),0)}function resolveStaleTime(e,t){return typeof e=="function"?e(t):e}function resolveEnabled(e,t){return typeof e=="function"?e(t):e}function matchQuery(e,t){const{type:n="all",exact:i,fetchStatus:o,predicate:l,queryKey:h,stale:d}=e;if(h){if(i){if(t.queryHash!==hashQueryKeyByOptions(h,t.options))return!1}else if(!partialMatchKey(t.queryKey,h))return!1}if(n!=="all"){const m=t.isActive();if(n==="active"&&!m||n==="inactive"&&m)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||o&&o!==t.state.fetchStatus||l&&!l(t))}function matchMutation(e,t){const{exact:n,status:i,predicate:o,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(n){if(hashKey(t.options.mutationKey)!==hashKey(l))return!1}else if(!partialMatchKey(t.options.mutationKey,l))return!1}return!(i&&t.state.status!==i||o&&!o(t))}function hashQueryKeyByOptions(e,t){return(t?.queryKeyHashFn||hashKey)(e)}function hashKey(e){return JSON.stringify(e,(t,n)=>isPlainObject$2(n)?Object.keys(n).sort().reduce((i,o)=>(i[o]=n[o],i),{}):n)}function partialMatchKey(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>partialMatchKey(e[n],t[n])):!1}var hasOwn$1=Object.prototype.hasOwnProperty;function replaceEqualDeep(e,t,n=0){if(e===t)return e;if(n>500)return t;const i=isPlainArray(e)&&isPlainArray(t);if(!i&&!(isPlainObject$2(e)&&isPlainObject$2(t)))return t;const l=(i?e:Object.keys(e)).length,h=i?t:Object.keys(t),d=h.length,m=i?new Array(d):{};let b=0;for(let v=0;v<d;v++){const w=i?v:h[v],C=e[w],R=t[w];if(C===R){m[w]=C,(i?v<l:hasOwn$1.call(e,w))&&b++;continue}if(C===null||R===null||typeof C!="object"||typeof R!="object"){m[w]=R;continue}const T=replaceEqualDeep(C,R,n+1);m[w]=T,T===C&&b++}return l===d&&b===l?e:m}function shallowEqualObjects(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function isPlainArray(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function isPlainObject$2(e){if(!hasObjectPrototype(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!hasObjectPrototype(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hasObjectPrototype(e){return Object.prototype.toString.call(e)==="[object Object]"}function sleep(e){return new Promise(t=>{timeoutManager.setTimeout(t,e)})}function replaceData(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?replaceEqualDeep(e,t):t}function addToEnd(e,t,n=0){const i=[...e,t];return n&&i.length>n?i.slice(1):i}function addToStart(e,t,n=0){const i=[t,...e];return n&&i.length>n?i.slice(0,-1):i}var skipToken=Symbol();function ensureQueryFn(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function shouldThrowError(e,t){return typeof e=="function"?e(...t):!!e}function addConsumeAwareSignal(e,t,n){let i=!1,o;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(o??=t(),i||(i=!0,o.aborted?n():o.addEventListener("abort",n,{once:!0})),o)}),e}var FocusManager=class extends Subscribable{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!isServer&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},focusManager=new FocusManager;function pendingThenable(){let e,t;const n=new Promise((o,l)=>{e=o,t=l});n.status="pending",n.catch(()=>{});function i(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{i({status:"fulfilled",value:o}),e(o)},n.reject=o=>{i({status:"rejected",reason:o}),t(o)},n}var defaultScheduler=systemSetTimeoutZero;function createNotifyManager(){let e=[],t=0,n=d=>{d()},i=d=>{d()},o=defaultScheduler;const l=d=>{t?e.push(d):o(()=>{n(d)})},h=()=>{const d=e;e=[],d.length&&o(()=>{i(()=>{d.forEach(m=>{n(m)})})})};return{batch:d=>{let m;t++;try{m=d()}finally{t--,t||h()}return m},batchCalls:d=>(...m)=>{l(()=>{d(...m)})},schedule:l,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{i=d},setScheduler:d=>{o=d}}}var notifyManager=createNotifyManager(),OnlineManager=class extends Subscribable{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!isServer&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},onlineManager=new OnlineManager;function defaultRetryDelay(e){return Math.min(1e3*2**e,3e4)}function canFetch(e){return(e??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function createRetryer(e){let t=!1,n=0,i;const o=pendingThenable(),l=()=>o.status!=="pending",h=E=>{if(!l()){const f=new CancelledError(E);C(f),e.onCancel?.(f)}},d=()=>{t=!0},m=()=>{t=!1},b=()=>focusManager.isFocused()&&(e.networkMode==="always"||onlineManager.isOnline())&&e.canRun(),v=()=>canFetch(e.networkMode)&&e.canRun(),w=E=>{l()||(i?.(),o.resolve(E))},C=E=>{l()||(i?.(),o.reject(E))},R=()=>new Promise(E=>{i=f=>{(l()||b())&&E(f)},e.onPause?.()}).then(()=>{i=void 0,l()||e.onContinue?.()}),T=()=>{if(l())return;let E;const f=n===0?e.initialPromise:void 0;try{E=f??e.fn()}catch(g){E=Promise.reject(g)}Promise.resolve(E).then(w).catch(g=>{if(l())return;const S=e.retry??(isServer?0:3),O=e.retryDelay??defaultRetryDelay,D=typeof O=="function"?O(n,g):O,M=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,g);if(t||!M){C(g);return}n++,e.onFail?.(n,g),sleep(D).then(()=>b()?void 0:R()).then(()=>{t?C(g):T()})})};return{promise:o,status:()=>o.status,cancel:h,continue:()=>(i?.(),o),cancelRetry:d,continueRetry:m,canStart:v,start:()=>(v()?T():R().then(T),o)}}var Removable=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&(this.#e=timeoutManager.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(isServer?1/0:300*1e3))}clearGcTimeout(){this.#e&&(timeoutManager.clearTimeout(this.#e),this.#e=void 0)}},Query=class extends Removable{#e;#t;#r;#i;#n;#s;#o;constructor(e){super(),this.#o=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=getDefaultState$1(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=getDefaultState$1(this.options);t.data!==void 0&&(this.setState(successState(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const n=replaceData(this.state.data,e,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(noop$2).catch(noop$2):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>resolveStaleTime(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(m=>m.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},o=()=>{const d=ensureQueryFn(this.options,t),b=(()=>{const v={client:this.#i,queryKey:this.queryKey,meta:this.meta};return i(v),v})();return this.#o=!1,this.options.persister?this.options.persister(d,b,this):d(b)},h=(()=>{const d={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:o};return i(d),d})();this.options.behavior?.onFetch(h,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#a({type:"fetch",meta:h.fetchOptions?.meta}),this.#n=createRetryer({initialPromise:t?.initialPromise,fn:h.fetchFn,onCancel:d=>{d instanceof CancelledError&&d.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(d,m)=>{this.#a({type:"failed",failureCount:d,error:m})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0});try{const d=await this.#n.start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),this.#r.config.onSuccess?.(d,this),this.#r.config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof CancelledError){if(d.silent)return this.#n.promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw this.#a({type:"error",error:d}),this.#r.config.onError?.(d,this),this.#r.config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}#a(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...fetchState(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...successState(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const o=e.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),notifyManager.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function fetchState(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function successState(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function getDefaultState$1(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,i=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var QueryObserver=class extends Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=pendingThenable(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#i=void 0;#n;#s;#o;#a;#m;#d;#h;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),shouldFetchOnMount(this.#t,this.options)?this.#f():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#b(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#E(),this.#t.setOptions(this.options),t._defaulted&&!shallowEqualObjects(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&shouldFetchOptionally(this.#t,n,this.options,t)&&this.#f(),this.updateResult(),i&&(this.#t!==n||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(t.enabled,this.#t)||resolveStaleTime(this.options.staleTime,this.#t)!==resolveStaleTime(t.staleTime,this.#t))&&this.#g();const o=this.#y();i&&(this.#t!==n||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(t.enabled,this.#t)||o!==this.#l)&&this.#v(o)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return shouldAssignObserverCurrentProperties(this,n)&&(this.#i=n,this.#s=this.options,this.#n=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),t?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#f(e){this.#E();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(noop$2)),t}#g(){this.#_();const e=resolveStaleTime(this.options.staleTime,this.#t);if(isServer||this.#i.isStale||!isValidTimeout(e))return;const n=timeUntilStale(this.#i.dataUpdatedAt,e)+1;this.#u=timeoutManager.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#b(),this.#l=e,!(isServer||resolveEnabled(this.options.enabled,this.#t)===!1||!isValidTimeout(this.#l)||this.#l===0)&&(this.#c=timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.#f()},this.#l))}#x(){this.#g(),this.#v(this.#y())}#_(){this.#u&&(timeoutManager.clearTimeout(this.#u),this.#u=void 0)}#b(){this.#c&&(timeoutManager.clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const n=this.#t,i=this.options,o=this.#i,l=this.#n,h=this.#s,m=e!==n?e.state:this.#r,{state:b}=e;let v={...b},w=!1,C;if(t._optimisticResults){const j=this.hasListeners(),L=!j&&shouldFetchOnMount(e,t),$=j&&shouldFetchOptionally(e,n,t,i);(L||$)&&(v={...v,...fetchState(b.data,e.options)}),t._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:R,errorUpdatedAt:T,status:E}=v;C=v.data;let f=!1;if(t.placeholderData!==void 0&&C===void 0&&E==="pending"){let j;o?.isPlaceholderData&&t.placeholderData===h?.placeholderData?(j=o.data,f=!0):j=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,j!==void 0&&(E="success",C=replaceData(o?.data,j,t),w=!0)}if(t.select&&C!==void 0&&!f)if(o&&C===l?.data&&t.select===this.#m)C=this.#d;else try{this.#m=t.select,C=t.select(C),C=replaceData(o?.data,C,t),this.#d=C,this.#a=null}catch(j){this.#a=j}this.#a&&(R=this.#a,C=this.#d,T=Date.now(),E="error");const g=v.fetchStatus==="fetching",S=E==="pending",O=E==="error",D=S&&g,M=C!==void 0,A={status:E,fetchStatus:v.fetchStatus,isPending:S,isSuccess:E==="success",isError:O,isInitialLoading:D,isLoading:D,data:C,dataUpdatedAt:v.dataUpdatedAt,error:R,errorUpdatedAt:T,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>m.dataUpdateCount||v.errorUpdateCount>m.errorUpdateCount,isFetching:g,isRefetching:g&&!S,isLoadingError:O&&!M,isPaused:v.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:O&&M,isStale:isStale(e,t),refetch:this.refetch,promise:this.#o,isEnabled:resolveEnabled(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=A.data!==void 0,L=A.status==="error"&&!j,$=U=>{L?U.reject(A.error):j&&U.resolve(A.data)},F=()=>{const U=this.#o=A.promise=pendingThenable();$(U)},W=this.#o;switch(W.status){case"pending":e.queryHash===n.queryHash&&$(W);break;case"fulfilled":(L||A.data!==W.value)&&F();break;case"rejected":(!L||A.error!==W.reason)&&F();break}}return A}updateResult(){const e=this.#i,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#s=this.options,this.#n.data!==void 0&&(this.#h=this.#t),shallowEqualObjects(t,e))return;this.#i=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,o=typeof i=="function"?i():i;if(o==="all"||!o&&!this.#p.size)return!0;const l=new Set(o??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#i).some(h=>{const d=h;return this.#i[d]!==e[d]&&l.has(d)})};this.#w({listeners:n()})}#E(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#w(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function shouldLoadOnMount(e,t){return resolveEnabled(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function shouldFetchOnMount(e,t){return shouldLoadOnMount(e,t)||e.state.data!==void 0&&shouldFetchOn(e,t,t.refetchOnMount)}function shouldFetchOn(e,t,n){if(resolveEnabled(t.enabled,e)!==!1&&resolveStaleTime(t.staleTime,e)!=="static"){const i=typeof n=="function"?n(e):n;return i==="always"||i!==!1&&isStale(e,t)}return!1}function shouldFetchOptionally(e,t,n,i){return(e!==t||resolveEnabled(i.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&isStale(e,n)}function isStale(e,t){return resolveEnabled(t.enabled,e)!==!1&&e.isStaleByTime(resolveStaleTime(t.staleTime,e))}function shouldAssignObserverCurrentProperties(e,t){return!shallowEqualObjects(e.getCurrentResult(),t)}function infiniteQueryBehavior(e){return{onFetch:(t,n)=>{const i=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],h=t.state.data?.pageParams||[];let d={pages:[],pageParams:[]},m=0;const b=async()=>{let v=!1;const w=T=>{addConsumeAwareSignal(T,()=>t.signal,()=>v=!0)},C=ensureQueryFn(t.options,t.fetchOptions),R=async(T,E,f)=>{if(v)return Promise.reject();if(E==null&&T.pages.length)return Promise.resolve(T);const S=(()=>{const _={client:t.client,queryKey:t.queryKey,pageParam:E,direction:f?"backward":"forward",meta:t.options.meta};return w(_),_})(),O=await C(S),{maxPages:D}=t.options,M=f?addToStart:addToEnd;return{pages:M(T.pages,O,D),pageParams:M(T.pageParams,E,D)}};if(o&&l.length){const T=o==="backward",E=T?getPreviousPageParam:getNextPageParam,f={pages:l,pageParams:h},g=E(i,f);d=await R(f,g,T)}else{const T=e??l.length;do{const E=m===0?h[0]??i.initialPageParam:getNextPageParam(i,d);if(m>0&&E==null)break;d=await R(d,E),m++}while(m<T)}return d};t.options.persister?t.fetchFn=()=>t.options.persister?.(b,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=b}}}function getNextPageParam(e,{pages:t,pageParams:n}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,n[i],n):void 0}function getPreviousPageParam(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Mutation=class extends Removable{#e;#t;#r;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(l,h)=>{this.#n({type:"failed",failureCount:l,error:h})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const i=this.state.status==="pending",o=!this.#i.canStart();try{if(i)t();else{this.#n({type:"pending",variables:e,isPaused:o}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,n);const h=await this.options.onMutate?.(e,n);h!==this.state.context&&this.#n({type:"pending",context:h,variables:e,isPaused:o})}const l=await this.#i.start();return await this.#r.config.onSuccess?.(l,e,this.state.context,this,n),await this.options.onSuccess?.(l,e,this.state.context,n),await this.#r.config.onSettled?.(l,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(l,null,e,this.state.context,n),this.#n({type:"success",data:l}),l}catch(l){try{await this.#r.config.onError?.(l,e,this.state.context,this,n)}catch(h){Promise.reject(h)}try{await this.options.onError?.(l,e,this.state.context,n)}catch(h){Promise.reject(h)}try{await this.#r.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this,n)}catch(h){Promise.reject(h)}try{await this.options.onSettled?.(void 0,l,e,this.state.context,n)}catch(h){Promise.reject(h)}throw this.#n({type:"error",error:l}),l}finally{this.#r.runNext(this)}}#n(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),notifyManager.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MutationCache=class extends Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,n){const i=new Mutation({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:n});return this.add(i),i}add(e){this.#e.add(e);const t=scopeFor(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=scopeFor(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=scopeFor(e);if(typeof t=="string"){const i=this.#t.get(t)?.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){const t=scopeFor(e);return typeof t=="string"?this.#t.get(t)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){notifyManager.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>matchMutation(t,n))}findAll(e={}){return this.getAll().filter(t=>matchMutation(e,t))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(t=>t.continue().catch(noop$2))))}};function scopeFor(e){return e.options.scope?.id}var MutationObserver$1=class extends Subscribable{#e;#t=void 0;#r;#i;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),shallowEqualObjects(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&hashKey(n.mutationKey)!==hashKey(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#s(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#s()}mutate(t,n){return this.#i=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??getDefaultState();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#s(t){notifyManager.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,i=this.#t.context,o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#i.onSuccess?.(t.data,n,i,o)}catch(l){Promise.reject(l)}try{this.#i.onSettled?.(t.data,null,n,i,o)}catch(l){Promise.reject(l)}}else if(t?.type==="error"){try{this.#i.onError?.(t.error,n,i,o)}catch(l){Promise.reject(l)}try{this.#i.onSettled?.(void 0,t.error,n,i,o)}catch(l){Promise.reject(l)}}}this.listeners.forEach(n=>{n(this.#t)})})}},QueryCache=class extends Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const i=t.queryKey,o=t.queryHash??hashQueryKeyByOptions(i,t);let l=this.get(o);return l||(l=new Query({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(l)),l}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>matchQuery(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>matchQuery(e,n)):t}notify(e){notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},QueryClient=class{#e;#t;#r;#i;#n;#s;#o;#a;constructor(e={}){this.#e=e.queryCache||new QueryCache,this.#t=e.mutationCache||new MutationCache,this.#r=e.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),i=n.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(resolveStaleTime(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const i=n.data;return[t,i]})}setQueryData(e,t,n){const i=this.defaultQueryOptions({queryKey:e}),l=this.#e.get(i.queryHash)?.state.data,h=functionalUpdate(t,l);if(h!==void 0)return this.#e.build(this,i).setData(h,{...n,manual:!0})}setQueriesData(e,t,n){return notifyManager.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;notifyManager.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return notifyManager.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},i=notifyManager.batch(()=>this.#e.findAll(e).map(o=>o.cancel(n)));return Promise.all(i).then(noop$2).catch(noop$2)}invalidateQueries(e,t={}){return notifyManager.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},i=notifyManager.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,n);return n.throwOnError||(l=l.catch(noop$2)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(i).then(noop$2)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(resolveStaleTime(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(noop$2).catch(noop$2)}fetchInfiniteQuery(e){return e.behavior=infiniteQueryBehavior(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(noop$2).catch(noop$2)}ensureInfiniteQueryData(e){return e.behavior=infiniteQueryBehavior(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return onlineManager.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#i.set(hashKey(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#i.values()],n={};return t.forEach(i=>{partialMatchKey(e,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(e,t){this.#n.set(hashKey(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],n={};return t.forEach(i=>{partialMatchKey(e,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hashQueryKeyByOptions(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===skipToken&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},QueryClientContext=reactExports.createContext(void 0),useQueryClient=e=>{const t=reactExports.useContext(QueryClientContext);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},QueryClientProvider=({client:e,children:t})=>(reactExports.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:e,children:t})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext),ensurePreventErrorBoundaryRetry=(e,t,n)=>{const i=n?.state.error&&typeof e.throwOnError=="function"?shouldThrowError(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||i)&&(t.isReset()||(e.retryOnMount=!1))},useClearResetErrorBoundary=e=>{reactExports.useEffect(()=>{e.clearReset()},[e])},getHasError=({result:e,errorResetBoundary:t,throwOnError:n,query:i,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(o&&e.data===void 0||shouldThrowError(n,[e.error,i])),ensureSuspenseTimers=e=>{if(e.suspense){const n=o=>o==="static"?o:Math.max(o??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...o)=>n(i(...o)):n(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},willFetch=(e,t)=>e.isLoading&&e.isFetching&&!t,shouldSuspend=(e,t)=>e?.suspense&&t.isPending,fetchOptimistic=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function useBaseQuery(e,t,n){const i=useIsRestoring(),o=useQueryErrorResetBoundary(),l=useQueryClient(),h=l.defaultQueryOptions(e);l.getDefaultOptions().queries?._experimental_beforeQuery?.(h);const d=l.getQueryCache().get(h.queryHash);h._optimisticResults=i?"isRestoring":"optimistic",ensureSuspenseTimers(h),ensurePreventErrorBoundaryRetry(h,o,d),useClearResetErrorBoundary(o);const m=!l.getQueryCache().get(h.queryHash),[b]=reactExports.useState(()=>new t(l,h)),v=b.getOptimisticResult(h),w=!i&&e.subscribed!==!1;if(reactExports.useSyncExternalStore(reactExports.useCallback(C=>{const R=w?b.subscribe(notifyManager.batchCalls(C)):noop$2;return b.updateResult(),R},[b,w]),()=>b.getCurrentResult(),()=>b.getCurrentResult()),reactExports.useEffect(()=>{b.setOptions(h)},[h,b]),shouldSuspend(h,v))throw fetchOptimistic(h,b,o);if(getHasError({result:v,errorResetBoundary:o,throwOnError:h.throwOnError,query:d,suspense:h.suspense}))throw v.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(h,v),h.experimental_prefetchInRender&&!isServer&&willFetch(v,i)&&(m?fetchOptimistic(h,b,o):d?.promise)?.catch(noop$2).finally(()=>{b.updateResult()}),h.notifyOnChangeProps?v:b.trackResult(v)}function useQuery(e,t){return useBaseQuery(e,QueryObserver)}function useMutation(e,t){const n=useQueryClient(),[i]=reactExports.useState(()=>new MutationObserver$1(n,e));reactExports.useEffect(()=>{i.setOptions(e)},[i,e]);const o=reactExports.useSyncExternalStore(reactExports.useCallback(h=>i.subscribe(notifyManager.batchCalls(h)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=reactExports.useCallback((h,d)=>{i.mutate(h,d).catch(noop$2)},[i]);if(o.error&&shouldThrowError(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}const ThemeContext=reactExports.createContext(void 0);function ThemeProvider({children:e}){const[t,n]=reactExports.useState(()=>{const o=localStorage.getItem("biopath-theme");return o==="dark"||o==="light"?o:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});reactExports.useEffect(()=>{localStorage.setItem("biopath-theme",t),t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const i=()=>{n(o=>o==="light"?"dark":"light")};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{theme:t,toggleTheme:i},children:e})}function useTheme(){const e=reactExports.useContext(ThemeContext);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}function r(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function clsx(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}const Card=({children:e,className:t,hoverable:n=!1,onClick:i,onMouseEnter:o,onMouseLeave:l})=>jsxRuntimeExports.jsx("div",{className:clsx("bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-xl border border-gray-100/50 dark:border-gray-700/50 p-6 glow-card",n&&"transition-all duration-200 hover:-translate-y-0.5",i&&"cursor-pointer",t),onClick:i,onMouseEnter:o,onMouseLeave:l,children:e}),Button=({variant:e="primary",size:t="md",loading:n=!1,disabled:i,children:o,className:l,...h})=>{const d="font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",m={primary:"bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500 disabled:bg-gray-300",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500 disabled:bg-gray-100",outline:"border-2 border-primary-500 text-primary-500 hover:bg-primary-50 focus:ring-primary-500 disabled:border-gray-300 disabled:text-gray-300"},b={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return jsxRuntimeExports.jsx("button",{className:clsx(d,m[e],b[t],(i||n)&&"opacity-50 cursor-not-allowed",l),disabled:i||n,...h,children:n?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o]}):o})};function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(e=>t=>{const n=toString$2.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer$1(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction$2(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString$1=typeOfTest("string"),isFunction$2=typeOfTest("function"),isNumber$2=typeOfTest("number"),isObject$1=e=>e!==null&&typeof e=="object",isBoolean$1=e=>e===!0||e===!1,isPlainObject$1=e=>{if(kindOf(e)!=="object")return!1;const t=getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(toStringTag in e)&&!(iterator in e)},isEmptyObject=e=>{if(!isObject$1(e)||isBuffer$1(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject$1(e)&&isFunction$2(e.pipe),isFormData=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction$2(e.append)&&((t=kindOf(e))==="formdata"||t==="object"&&isFunction$2(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),isArray(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{if(isBuffer$1(e))return;const l=n?Object.getOwnPropertyNames(e):Object.keys(e),h=l.length;let d;for(i=0;i<h;i++)d=l[i],t.call(null,e[d],d,e)}}function findKey(e,t){if(isBuffer$1(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e,skipUndefined:t}=isContextDefined(this)&&this||{},n={},i=(o,l)=>{const h=e&&findKey(n,l)||l;isPlainObject$1(n[h])&&isPlainObject$1(o)?n[h]=merge(n[h],o):isPlainObject$1(o)?n[h]=merge({},o):isArray(o)?n[h]=o.slice():(!t||!isUndefined(o))&&(n[h]=o)};for(let o=0,l=arguments.length;o<l;o++)arguments[o]&&forEach(arguments[o],i);return n}const extend$1=(e,t,n,{allOwnKeys:i}={})=>(forEach(t,(o,l)=>{n&&isFunction$2(o)?Object.defineProperty(e,l,{value:bind(o,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,l,{value:o,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject=(e,t,n,i)=>{let o,l,h;const d={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),l=o.length;l-- >0;)h=o[l],(!i||i(h,e,t))&&!d[h]&&(t[h]=e[h],d[h]=!0);e=n!==!1&&getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},toArray$1=e=>{if(!e)return null;if(isArray(e))return e;let t=e.length;if(!isNumber$2(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},isTypedArray=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const i=(e&&e[iterator]).call(e);let o;for(;(o=i.next())&&!o.done;){const l=o.value;t.call(e,l[0],l[1])}},matchAll=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),hasOwnProperty$1=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};forEach(n,(o,l)=>{let h;(h=t(o,l,e))!==!1&&(i[l]=h||o)}),Object.defineProperties(e,i)},freezeMethods=e=>{reduceDescriptors(e,(t,n)=>{if(isFunction$2(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(isFunction$2(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(e,t)=>{const n={},i=o=>{o.forEach(l=>{n[l]=!0})};return isArray(e)?i(e):i(String(e).split(t)),n},noop$1=()=>{},toFiniteNumber=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function isSpecCompliantForm(e){return!!(e&&isFunction$2(e.append)&&e[toStringTag]==="FormData"&&e[iterator])}const toJSONObject=e=>{const t=new Array(10),n=(i,o)=>{if(isObject$1(i)){if(t.indexOf(i)>=0)return;if(isBuffer$1(i))return i;if(!("toJSON"in i)){t[o]=i;const l=isArray(i)?[]:{};return forEach(i,(h,d)=>{const m=n(h,o+1);!isUndefined(m)&&(l[d]=m)}),t[o]=void 0,l}}return i};return n(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject$1(e)||isFunction$2(e))&&isFunction$2(e.then)&&isFunction$2(e.catch),_setImmediate=((e,t)=>e?setImmediate:t?((n,i)=>(_global.addEventListener("message",({source:o,data:l})=>{o===_global&&l===n&&i.length&&i.shift()()},!1),o=>{i.push(o),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$2(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=e=>e!=null&&isFunction$2(e[iterator]),utils$1={isArray,isArrayBuffer,isBuffer:isBuffer$1,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$2,isBoolean:isBoolean$1,isObject:isObject$1,isPlainObject:isPlainObject$1,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$2,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};let AxiosError$1=class Uc extends Error{static from(t,n,i,o,l,h){const d=new Uc(t.message,n||t.code,i,o,l);return d.cause=t,d.name=t.name,h&&Object.assign(d,h),d}constructor(t,n,i,o,l){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),i&&(this.config=i),o&&(this.request=o),l&&(this.response=l,this.status=l.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}};AxiosError$1.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";AxiosError$1.ERR_BAD_OPTION="ERR_BAD_OPTION";AxiosError$1.ECONNABORTED="ECONNABORTED";AxiosError$1.ETIMEDOUT="ETIMEDOUT";AxiosError$1.ERR_NETWORK="ERR_NETWORK";AxiosError$1.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";AxiosError$1.ERR_DEPRECATED="ERR_DEPRECATED";AxiosError$1.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";AxiosError$1.ERR_BAD_REQUEST="ERR_BAD_REQUEST";AxiosError$1.ERR_CANCELED="ERR_CANCELED";AxiosError$1.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";AxiosError$1.ERR_INVALID_URL="ERR_INVALID_URL";const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,n){return e?e.concat(t).map(function(o,l){return o=removeBrackets(o),!n&&l?"["+o+"]":o}).join(n?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData$1(e,t,n){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=utils$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,f){return!utils$1.isUndefined(f[E])});const i=n.metaTokens,o=n.visitor||v,l=n.dots,h=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(o))throw new TypeError("visitor must be a function");function b(T){if(T===null)return"";if(utils$1.isDate(T))return T.toISOString();if(utils$1.isBoolean(T))return T.toString();if(!m&&utils$1.isBlob(T))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(T)||utils$1.isTypedArray(T)?m&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function v(T,E,f){let g=T;if(T&&!f&&typeof T=="object"){if(utils$1.endsWith(E,"{}"))E=i?E:E.slice(0,-2),T=JSON.stringify(T);else if(utils$1.isArray(T)&&isFlatArray(T)||(utils$1.isFileList(T)||utils$1.endsWith(E,"[]"))&&(g=utils$1.toArray(T)))return E=removeBrackets(E),g.forEach(function(O,D){!(utils$1.isUndefined(O)||O===null)&&t.append(h===!0?renderKey([E],D,l):h===null?E:E+"[]",b(O))}),!1}return isVisitable(T)?!0:(t.append(renderKey(f,E,l),b(T)),!1)}const w=[],C=Object.assign(predicates,{defaultVisitor:v,convertValue:b,isVisitable});function R(T,E){if(!utils$1.isUndefined(T)){if(w.indexOf(T)!==-1)throw Error("Circular reference detected in "+E.join("."));w.push(T),utils$1.forEach(T,function(g,S){(!(utils$1.isUndefined(g)||g===null)&&o.call(t,g,utils$1.isString(S)?S.trim():S,E,C))===!0&&R(g,E?E.concat(S):[S])}),w.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return R(e),t}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData$1(e,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,n){this._pairs.push([t,n])};prototype.toString=function(t){const n=t?function(i){return t.call(this,i,encode$1)}:encode$1;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(e,t,n){if(!t)return e;const i=n&&n.encode||encode,o=utils$1.isFunction(n)?{serialize:n}:n,l=o&&o.serialize;let h;if(l?h=l(t,o):h=utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,o).toString(i),h){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+h}return e}class InterceptorManager{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$1.forEach(this.handlers,function(i){i!==null&&t(i)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,t){return toFormData$1(e,new platform.classes.URLSearchParams,{visitor:function(n,i,o,l){return platform.isNode&&utils$1.isBuffer(n)?(this.append(i,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(e){const t={},n=Object.keys(e);let i;const o=n.length;let l;for(i=0;i<o;i++)l=n[i],t[l]=e[l];return t}function formDataToJSON(e){function t(n,i,o,l){let h=n[l++];if(h==="__proto__")return!0;const d=Number.isFinite(+h),m=l>=n.length;return h=!h&&utils$1.isArray(o)?o.length:h,m?(utils$1.hasOwnProp(o,h)?o[h]=[o[h],i]:o[h]=i,!d):((!o[h]||!utils$1.isObject(o[h]))&&(o[h]=[]),t(n,i,o[h],l)&&utils$1.isArray(o[h])&&(o[h]=arrayToObject(o[h])),!d)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const n={};return utils$1.forEachEntry(e,(i,o)=>{t(parsePropPath(i),o,n,0)}),n}return null}function stringifySafely(e,t,n){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,l=utils$1.isObject(t);if(l&&utils$1.isHTMLForm(t)&&(t=new FormData(t)),utils$1.isFormData(t))return o?JSON.stringify(formDataToJSON(t)):t;if(utils$1.isArrayBuffer(t)||utils$1.isBuffer(t)||utils$1.isStream(t)||utils$1.isFile(t)||utils$1.isBlob(t)||utils$1.isReadableStream(t))return t;if(utils$1.isArrayBufferView(t))return t.buffer;if(utils$1.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((d=utils$1.isFileList(t))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return toFormData$1(d?{"files[]":t}:t,m&&new m,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const n=this.transitional||defaults$1.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(utils$1.isResponse(t)||utils$1.isReadableStream(t))return t;if(t&&utils$1.isString(t)&&(i&&!this.responseType||o)){const h=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(d){if(h)throw d.name==="SyntaxError"?AxiosError$1.from(d,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults$1.headers[e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let n,i,o;return e&&e.split(`
`).forEach(function(h){o=h.indexOf(":"),n=h.substring(0,o).trim().toLowerCase(),i=h.substring(o+1).trim(),!(!n||t[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,n,i,o){if(utils$1.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!utils$1.isString(t)){if(utils$1.isString(i))return t.indexOf(i)!==-1;if(utils$1.isRegExp(i))return i.test(t)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function buildAccessors(e,t){const n=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,l,h){return this[i].call(this,t,o,l,h)},configurable:!0})})}let AxiosHeaders$1=class{constructor(t){t&&this.set(t)}set(t,n,i){const o=this;function l(d,m,b){const v=normalizeHeader(m);if(!v)throw new Error("header name must be a non-empty string");const w=utils$1.findKey(o,v);(!w||o[w]===void 0||b===!0||b===void 0&&o[w]!==!1)&&(o[w||m]=normalizeValue(d))}const h=(d,m)=>utils$1.forEach(d,(b,v)=>l(b,v,m));if(utils$1.isPlainObject(t)||t instanceof this.constructor)h(t,n);else if(utils$1.isString(t)&&(t=t.trim())&&!isValidHeaderName(t))h(parseHeaders(t),n);else if(utils$1.isObject(t)&&utils$1.isIterable(t)){let d={},m,b;for(const v of t){if(!utils$1.isArray(v))throw TypeError("Object iterator must return a key-value pair");d[b=v[0]]=(m=d[b])?utils$1.isArray(m)?[...m,v[1]]:[m,v[1]]:v[1]}h(d,n)}else t!=null&&l(n,t,i);return this}get(t,n){if(t=normalizeHeader(t),t){const i=utils$1.findKey(this,t);if(i){const o=this[i];if(!n)return o;if(n===!0)return parseTokens(o);if(utils$1.isFunction(n))return n.call(this,o,i);if(utils$1.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=normalizeHeader(t),t){const i=utils$1.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||matchHeaderValue(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let o=!1;function l(h){if(h=normalizeHeader(h),h){const d=utils$1.findKey(i,h);d&&(!n||matchHeaderValue(i,i[d],d,n))&&(delete i[d],o=!0)}}return utils$1.isArray(t)?t.forEach(l):l(t),o}clear(t){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const l=n[i];(!t||matchHeaderValue(this,this[l],l,t,!0))&&(delete this[l],o=!0)}return o}normalize(t){const n=this,i={};return utils$1.forEach(this,(o,l)=>{const h=utils$1.findKey(i,l);if(h){n[h]=normalizeValue(o),delete n[l];return}const d=t?formatHeader(l):String(l).trim();d!==l&&delete n[l],n[d]=normalizeValue(o),i[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return utils$1.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&utils$1.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function l(h){const d=normalizeHeader(h);i[d]||(buildAccessors(o,h),i[d]=!0)}return utils$1.isArray(t)?t.forEach(l):l(t),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(e,t){const n=this||defaults$1,i=t||n,o=AxiosHeaders$1.from(i.headers);let l=i.data;return utils$1.forEach(e,function(d){l=d.call(n,l,o.normalize(),t?t.status:void 0)}),o.normalize(),l}function isCancel$1(e){return!!(e&&e.__CANCEL__)}let CanceledError$1=class extends AxiosError$1{constructor(t,n,i){super(t??"canceled",AxiosError$1.ERR_CANCELED,n,i),this.name="CanceledError",this.__CANCEL__=!0}};function settle(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o=0,l=0,h;return t=t!==void 0?t:1e3,function(m){const b=Date.now(),v=i[l];h||(h=b),n[o]=m,i[o]=b;let w=l,C=0;for(;w!==o;)C+=n[w++],w=w%e;if(o=(o+1)%e,o===l&&(l=(l+1)%e),b-h<t)return;const R=v&&b-v;return R?Math.round(C*1e3/R):void 0}}function throttle$1(e,t){let n=0,i=1e3/t,o,l;const h=(b,v=Date.now())=>{n=v,o=null,l&&(clearTimeout(l),l=null),e(...b)};return[(...b)=>{const v=Date.now(),w=v-n;w>=i?h(b,v):(o=b,l||(l=setTimeout(()=>{l=null,h(o)},i-w)))},()=>o&&h(o)]}const progressEventReducer=(e,t,n=3)=>{let i=0;const o=speedometer(50,250);return throttle$1(l=>{const h=l.loaded,d=l.lengthComputable?l.total:void 0,m=h-i,b=o(m),v=h<=d;i=h;const w={loaded:h,total:d,progress:d?h/d:void 0,bytes:m,rate:b||void 0,estimated:b&&d&&v?(d-h)/b:void 0,event:l,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(w)},n)},progressEventDecorator=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap(()=>e(...t)),isURLSameOrigin=platform.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,platform.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(e,t,n,i,o,l,h){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(t)}`];utils$1.isNumber(n)&&d.push(`expires=${new Date(n).toUTCString()}`),utils$1.isString(i)&&d.push(`path=${i}`),utils$1.isString(o)&&d.push(`domain=${o}`),l===!0&&d.push("secure"),utils$1.isString(h)&&d.push(`SameSite=${h}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t,n){let i=!isAbsoluteURL(t);return e&&(i||n==!1)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig$1(e,t){t=t||{};const n={};function i(b,v,w,C){return utils$1.isPlainObject(b)&&utils$1.isPlainObject(v)?utils$1.merge.call({caseless:C},b,v):utils$1.isPlainObject(v)?utils$1.merge({},v):utils$1.isArray(v)?v.slice():v}function o(b,v,w,C){if(utils$1.isUndefined(v)){if(!utils$1.isUndefined(b))return i(void 0,b,w,C)}else return i(b,v,w,C)}function l(b,v){if(!utils$1.isUndefined(v))return i(void 0,v)}function h(b,v){if(utils$1.isUndefined(v)){if(!utils$1.isUndefined(b))return i(void 0,b)}else return i(void 0,v)}function d(b,v,w){if(w in t)return i(b,v);if(w in e)return i(void 0,b)}const m={url:l,method:l,data:l,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:d,headers:(b,v,w)=>o(headersToObject(b),headersToObject(v),w,!0)};return utils$1.forEach(Object.keys({...e,...t}),function(v){const w=m[v]||o,C=w(e[v],t[v],v);utils$1.isUndefined(C)&&w!==d||(n[v]=C)}),n}const resolveConfig=e=>{const t=mergeConfig$1({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:h,auth:d}=t;if(t.headers=h=AxiosHeaders$1.from(h),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&h.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),utils$1.isFormData(n)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(utils$1.isFunction(n.getHeaders)){const m=n.getHeaders(),b=["content-type","content-length"];Object.entries(m).forEach(([v,w])=>{b.includes(v.toLowerCase())&&h.set(v,w)})}}if(platform.hasStandardBrowserEnv&&(i&&utils$1.isFunction(i)&&(i=i(t)),i||i!==!1&&isURLSameOrigin(t.url))){const m=o&&l&&cookies.read(l);m&&h.set(o,m)}return t},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(n,i){const o=resolveConfig(e);let l=o.data;const h=AxiosHeaders$1.from(o.headers).normalize();let{responseType:d,onUploadProgress:m,onDownloadProgress:b}=o,v,w,C,R,T;function E(){R&&R(),T&&T(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let f=new XMLHttpRequest;f.open(o.method.toUpperCase(),o.url,!0),f.timeout=o.timeout;function g(){if(!f)return;const O=AxiosHeaders$1.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),M={data:!d||d==="text"||d==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:O,config:e,request:f};settle(function(A){n(A),E()},function(A){i(A),E()},M),f=null}"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(g)},f.onabort=function(){f&&(i(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,f)),f=null)},f.onerror=function(D){const M=D&&D.message?D.message:"Network Error",_=new AxiosError$1(M,AxiosError$1.ERR_NETWORK,e,f);_.event=D||null,i(_),f=null},f.ontimeout=function(){let D=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const M=o.transitional||transitionalDefaults;o.timeoutErrorMessage&&(D=o.timeoutErrorMessage),i(new AxiosError$1(D,M.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,f)),f=null},l===void 0&&h.setContentType(null),"setRequestHeader"in f&&utils$1.forEach(h.toJSON(),function(D,M){f.setRequestHeader(M,D)}),utils$1.isUndefined(o.withCredentials)||(f.withCredentials=!!o.withCredentials),d&&d!=="json"&&(f.responseType=o.responseType),b&&([C,T]=progressEventReducer(b,!0),f.addEventListener("progress",C)),m&&f.upload&&([w,R]=progressEventReducer(m),f.upload.addEventListener("progress",w),f.upload.addEventListener("loadend",R)),(o.cancelToken||o.signal)&&(v=O=>{f&&(i(!O||O.type?new CanceledError$1(null,e,f):O),f.abort(),f=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const S=parseProtocol(o.url);if(S&&platform.protocols.indexOf(S)===-1){i(new AxiosError$1("Unsupported protocol "+S+":",AxiosError$1.ERR_BAD_REQUEST,e));return}f.send(l||null)})},composeSignals=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,o;const l=function(b){if(!o){o=!0,d();const v=b instanceof Error?b:this.reason;i.abort(v instanceof AxiosError$1?v:new CanceledError$1(v instanceof Error?v.message:v))}};let h=t&&setTimeout(()=>{h=null,l(new AxiosError$1(`timeout of ${t}ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const d=()=>{e&&(h&&clearTimeout(h),h=null,e.forEach(b=>{b.unsubscribe?b.unsubscribe(l):b.removeEventListener("abort",l)}),e=null)};e.forEach(b=>b.addEventListener("abort",l));const{signal:m}=i;return m.unsubscribe=()=>utils$1.asap(d),m}},streamChunk=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,o;for(;i<n;)o=i+t,yield e.slice(i,o),i=o},readBytes=async function*(e,t){for await(const n of readStream(e))yield*streamChunk(n,t)},readStream=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},trackStream=(e,t,n,i)=>{const o=readBytes(e,t);let l=0,h,d=m=>{h||(h=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:b,value:v}=await o.next();if(b){d(),m.close();return}let w=v.byteLength;if(n){let C=l+=w;n(C)}m.enqueue(new Uint8Array(v))}catch(b){throw d(b),b}},cancel(m){return d(m),o.return()}},{highWaterMark:2})},DEFAULT_CHUNK_SIZE=64*1024,{isFunction:isFunction$1}=utils$1,globalFetchAPI=(({Request:e,Response:t})=>({Request:e,Response:t}))(utils$1.global),{ReadableStream:ReadableStream$1,TextEncoder:TextEncoder$1}=utils$1.global,test=(e,...t)=>{try{return!!e(...t)}catch{return!1}},factory=e=>{e=utils$1.merge.call({skipUndefined:!0},globalFetchAPI,e);const{fetch:t,Request:n,Response:i}=e,o=t?isFunction$1(t):typeof fetch=="function",l=isFunction$1(n),h=isFunction$1(i);if(!o)return!1;const d=o&&isFunction$1(ReadableStream$1),m=o&&(typeof TextEncoder$1=="function"?(T=>E=>T.encode(E))(new TextEncoder$1):async T=>new Uint8Array(await new n(T).arrayBuffer())),b=l&&d&&test(()=>{let T=!1;const E=new n(platform.origin,{body:new ReadableStream$1,method:"POST",get duplex(){return T=!0,"half"}}).headers.has("Content-Type");return T&&!E}),v=h&&d&&test(()=>utils$1.isReadableStream(new i("").body)),w={stream:v&&(T=>T.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(T=>{!w[T]&&(w[T]=(E,f)=>{let g=E&&E[T];if(g)return g.call(E);throw new AxiosError$1(`Response type '${T}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,f)})});const C=async T=>{if(T==null)return 0;if(utils$1.isBlob(T))return T.size;if(utils$1.isSpecCompliantForm(T))return(await new n(platform.origin,{method:"POST",body:T}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(T)||utils$1.isArrayBuffer(T))return T.byteLength;if(utils$1.isURLSearchParams(T)&&(T=T+""),utils$1.isString(T))return(await m(T)).byteLength},R=async(T,E)=>{const f=utils$1.toFiniteNumber(T.getContentLength());return f??C(E)};return async T=>{let{url:E,method:f,data:g,signal:S,cancelToken:O,timeout:D,onDownloadProgress:M,onUploadProgress:_,responseType:A,headers:j,withCredentials:L="same-origin",fetchOptions:$}=resolveConfig(T),F=t||fetch;A=A?(A+"").toLowerCase():"text";let W=composeSignals([S,O&&O.toAbortSignal()],D),U=null;const q=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let H;try{if(_&&b&&f!=="get"&&f!=="head"&&(H=await R(j,g))!==0){let G=new n(E,{method:"POST",body:g,duplex:"half"}),te;if(utils$1.isFormData(g)&&(te=G.headers.get("content-type"))&&j.setContentType(te),G.body){const[ue,de]=progressEventDecorator(H,progressEventReducer(asyncDecorator(_)));g=trackStream(G.body,DEFAULT_CHUNK_SIZE,ue,de)}}utils$1.isString(L)||(L=L?"include":"omit");const Y=l&&"credentials"in n.prototype,Z={...$,signal:W,method:f.toUpperCase(),headers:j.normalize().toJSON(),body:g,duplex:"half",credentials:Y?L:void 0};U=l&&new n(E,Z);let X=await(l?F(U,$):F(E,Z));const J=v&&(A==="stream"||A==="response");if(v&&(M||J&&q)){const G={};["status","statusText","headers"].forEach(xe=>{G[xe]=X[xe]});const te=utils$1.toFiniteNumber(X.headers.get("content-length")),[ue,de]=M&&progressEventDecorator(te,progressEventReducer(asyncDecorator(M),!0))||[];X=new i(trackStream(X.body,DEFAULT_CHUNK_SIZE,ue,()=>{de&&de(),q&&q()}),G)}A=A||"text";let Q=await w[utils$1.findKey(w,A)||"text"](X,T);return!J&&q&&q(),await new Promise((G,te)=>{settle(G,te,{data:Q,headers:AxiosHeaders$1.from(X.headers),status:X.status,statusText:X.statusText,config:T,request:U})})}catch(Y){throw q&&q(),Y&&Y.name==="TypeError"&&/Load failed|fetch/i.test(Y.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,T,U),{cause:Y.cause||Y}):AxiosError$1.from(Y,Y&&Y.code,T,U)}}},seedCache=new Map,getFetch=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:o}=t,l=[i,o,n];let h=l.length,d=h,m,b,v=seedCache;for(;d--;)m=l[d],b=v.get(m),b===void 0&&v.set(m,b=d?new Map:factory(t)),v=b;return b};getFetch();const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:{get:getFetch}};utils$1.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1;function getAdapter$1(e,t){e=utils$1.isArray(e)?e:[e];const{length:n}=e;let i,o;const l={};for(let h=0;h<n;h++){i=e[h];let d;if(o=i,!isResolvedHandle(i)&&(o=knownAdapters[(d=String(i)).toLowerCase()],o===void 0))throw new AxiosError$1(`Unknown adapter '${d}'`);if(o&&(utils$1.isFunction(o)||(o=o.get(t))))break;l[d||"#"+h]=o}if(!o){const h=Object.entries(l).map(([m,b])=>`adapter ${m} `+(b===!1?"is not supported by the environment":"is not available in the build"));let d=n?h.length>1?`since :
`+h.map(renderReason).join(`
`):" "+renderReason(h[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o}const adapters={getAdapter:getAdapter$1,adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults$1.adapter,e)(e).then(function(i){return throwIfCancellationRequested(e),i.data=transformData.call(e,e.transformResponse,i),i.headers=AxiosHeaders$1.from(i.headers),i},function(i){return isCancel$1(i)||(throwIfCancellationRequested(e),i&&i.response&&(i.response.data=transformData.call(e,e.transformResponse,i.response),i.response.headers=AxiosHeaders$1.from(i.response.headers))),Promise.reject(i)})}const VERSION$1="1.13.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(t,n,i){function o(l,h){return"[Axios v"+VERSION$1+"] Transitional option '"+l+"'"+h+(i?". "+i:"")}return(l,h,d)=>{if(t===!1)throw new AxiosError$1(o(h," has been removed"+(n?" in "+n:"")),AxiosError$1.ERR_DEPRECATED);return n&&!deprecatedWarnings[h]&&(deprecatedWarnings[h]=!0,console.warn(o(h," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,h,d):!0}};validators$1.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function assertOptions(e,t,n){if(typeof e!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const l=i[o],h=t[l];if(h){const d=e[l],m=d===void 0||h(d,l,e);if(m!==!0)throw new AxiosError$1("option "+l+" must be "+m,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$1("Unknown option "+l,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(t){this.defaults=t||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig$1(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:l}=n;i!==void 0&&validator.assertOptions(i,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!=null&&(utils$1.isFunction(o)?n.paramsSerializer={serialize:o}:validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let h=l&&utils$1.merge(l.common,l[n.method]);l&&utils$1.forEach(["delete","get","head","post","put","patch","common"],T=>{delete l[T]}),n.headers=AxiosHeaders$1.concat(h,l);const d=[];let m=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(m=m&&E.synchronous,d.unshift(E.fulfilled,E.rejected))});const b=[];this.interceptors.response.forEach(function(E){b.push(E.fulfilled,E.rejected)});let v,w=0,C;if(!m){const T=[dispatchRequest.bind(this),void 0];for(T.unshift(...d),T.push(...b),C=T.length,v=Promise.resolve(n);w<C;)v=v.then(T[w++],T[w++]);return v}C=d.length;let R=n;for(;w<C;){const T=d[w++],E=d[w++];try{R=T(R)}catch(f){E.call(this,f);break}}try{v=dispatchRequest.call(this,R)}catch(T){return Promise.reject(T)}for(w=0,C=b.length;w<C;)v=v.then(b[w++],b[w++]);return v}getUri(t){t=mergeConfig$1(this.defaults,t);const n=buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls);return buildURL(n,t.params,t.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(n,i){return this.request(mergeConfig$1(i||{},{method:t,url:n,data:(i||{}).data}))}});utils$1.forEach(["post","put","patch"],function(t){function n(i){return function(l,h,d){return this.request(mergeConfig$1(d||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:h}))}}Axios$1.prototype[t]=n(),Axios$1.prototype[t+"Form"]=n(!0)});let CancelToken$1=class Wc{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const h=new Promise(d=>{i.subscribe(d),l=d}).then(o);return h.cancel=function(){i.unsubscribe(l)},h},t(function(l,h,d){i.reason||(i.reason=new CanceledError$1(l,h,d),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Wc(function(o){t=o}),cancel:t}}};function spread$1(e){return function(n){return e.apply(null,n)}}function isAxiosError$1(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(HttpStatusCode$1).forEach(([e,t])=>{HttpStatusCode$1[t]=e});function createInstance(e){const t=new Axios$1(e),n=bind(Axios$1.prototype.request,t);return utils$1.extend(n,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return createInstance(mergeConfig$1(e,o))},n}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,PUBCHEM_BASE_URL="https://pubchem.ncbi.nlm.nih.gov/rest",searchCompounds=async(e,t=10)=>{if(!e||e.length<2)return[];try{const{data:n}=await axios.get(`${PUBCHEM_BASE_URL}/autocomplete/compound/${encodeURIComponent(e)}/json`,{params:{limit:t},timeout:5e3});return(n.dictionary_terms?.compound||[]).map(o=>({name:o}))}catch(n){return console.error("PubChem search error:",n),[]}},usePubChemSearch=(e,t=!0)=>useQuery({queryKey:["pubchem-search",e],queryFn:()=>searchCompounds(e,10),enabled:t&&e.length>=2,staleTime:300*1e3,retry:1}),LoadingSpinner$1=({size:e="md",className:t})=>{const n={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return jsxRuntimeExports.jsxs("svg",{className:clsx("animate-spin text-primary-500",n[e],t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},AutocompleteInput=({value:e,onChange:t,onSelect:n,placeholder:i="Type to search...",className:o})=>{const[l,h]=reactExports.useState(!1),[d,m]=reactExports.useState(e),b=reactExports.useRef(null);reactExports.useEffect(()=>{const T=setTimeout(()=>{m(e)},300);return()=>clearTimeout(T)},[e]);const{data:v=[],isLoading:w}=usePubChemSearch(d,l);reactExports.useEffect(()=>{const T=E=>{b.current&&!b.current.contains(E.target)&&h(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const C=T=>{const E=T.target.value;t(E),h(E.length>=2)},R=T=>{n(T),h(!1)};return jsxRuntimeExports.jsxs("div",{ref:b,className:clsx("relative",o),children:[jsxRuntimeExports.jsx("input",{type:"text",value:e,onChange:C,onFocus:()=>e.length>=2&&h(!0),placeholder:i,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200"}),l&&d.length>=2&&jsxRuntimeExports.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:w?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-4",children:[jsxRuntimeExports.jsx(LoadingSpinner$1,{size:"sm"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"Searching..."})]}):v.length>0?jsxRuntimeExports.jsx("ul",{className:"py-1",children:v.map((T,E)=>jsxRuntimeExports.jsx("li",{onClick:()=>R(T.name),className:"px-4 py-2 hover:bg-primary-50 dark:hover:bg-gray-700 cursor-pointer transition-colors duration-150",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-white",children:T.name}),T.cid&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["CID: ",T.cid]})]})},E))}):jsxRuntimeExports.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center",children:"No compounds found"})})]})},AnalysisForm=({onSubmit:e,isLoading:t=!1})=>{const[n,i]=reactExports.useState(""),[o,l]=reactExports.useState(!1),h=m=>{m.preventDefault(),n.trim()&&e({ingredient_name:n.trim(),enable_predictions:o})},d=m=>{i(m)};return jsxRuntimeExports.jsx(Card,{className:"max-w-2xl mx-auto",children:jsxRuntimeExports.jsxs("form",{onSubmit:h,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Analyze Active Ingredient"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter a compound or active ingredient name to analyze its biological pathways and targets."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{htmlFor:"ingredient",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Ingredient Name ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(AutocompleteInput,{value:n,onChange:i,onSelect:d,placeholder:"Start typing (e.g., ibuprofen, aspirin)..."}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Suggestions are powered by PubChem. Type at least 2 characters."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{id:"predictions",type:"checkbox",checked:o,onChange:m=>l(m.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700"}),jsxRuntimeExports.jsxs("label",{htmlFor:"predictions",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:["Enable predictions (computational docking/ML)",jsxRuntimeExports.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:"Includes predicted targets (lower confidence, longer analysis time)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{type:"submit",variant:"primary",size:"lg",loading:t,disabled:!n.trim()||t,className:"flex-1",children:t?"Analyzing...":"Analyze Compound"}),n&&jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"lg",onClick:()=>{i(""),l(!1)},children:"Clear"})]})]})})},scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){let m=function(b){return Promise.all(b.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=h?.nonce||h?.getAttribute("nonce");o=m(n.map(b=>{if(b=assetsURL(b),b in seen)return;seen[b]=!0;const v=b.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${w}`))return;const C=document.createElement("link");if(C.rel=v?"stylesheet":scriptRel,v||(C.as="script"),C.crossOrigin="",C.href=b,d&&C.setAttribute("nonce",d),document.head.appendChild(C),v)return new Promise((R,T)=>{C.addEventListener("load",R),C.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${b}`)))})}))}function l(h){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=h,window.dispatchEvent(d),!d.defaultPrevented)throw h}return o.then(h=>{for(const d of h||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})},PlantIdentification=({onAnalysisComplete:e,onError:t,isLoading:n,setIsLoading:i})=>{const[o,l]=reactExports.useState(null),[h,d]=reactExports.useState(null),[m,b]=reactExports.useState(["leaf"]),[v,w]=reactExports.useState(5),[C,R]=reactExports.useState(!1),T=reactExports.useRef(null),E=reactExports.useCallback(M=>{if(!M.type.startsWith("image/")){t("Please select an image file (JPEG or PNG)");return}if(M.size>10*1024*1024){t("Image file is too large. Maximum size is 10MB.");return}l(M);const _=URL.createObjectURL(M);d(_)},[t]),f=M=>{const _=M.target.files?.[0];_&&E(_)},g=M=>{b(_=>_.includes(M)?_.length===1?_:_.filter(A=>A!==M):[..._,M])},S=async M=>{if(M.preventDefault(),!o){t("Please select an image first");return}i(!0);try{const{analyzePlantUpload:_}=await __vitePreload(async()=>{const{analyzePlantUpload:j}=await import("./plantApi-BbtarRey.js");return{analyzePlantUpload:j}},[]),A=await _(o,m,v,C);e(A)}catch(_){t(_ instanceof Error?_.message:"Plant analysis failed")}finally{i(!1)}},O=()=>{l(null),h&&URL.revokeObjectURL(h),d(null),b(["leaf"]),w(5),R(!1),T.current&&(T.current.value="")},D=[{id:"leaf",label:"Leaf",icon:""},{id:"flower",label:"Flower",icon:""},{id:"fruit",label:"Fruit",icon:""},{id:"bark",label:"Bark",icon:""}];return jsxRuntimeExports.jsx(Card,{className:"max-w-2xl mx-auto",children:jsxRuntimeExports.jsxs("form",{onSubmit:S,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Identify Plant from Photo"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload a photo of a plant to identify its species and analyze its medicinal compounds."})]}),jsxRuntimeExports.jsx("input",{ref:T,type:"file",accept:"image/jpeg,image/png,image/jpg",onChange:f,className:"hidden"}),h?jsxRuntimeExports.jsxs("div",{className:"border-2 border-green-500 bg-green-50 dark:bg-green-900/20 rounded-xl p-6 text-center",children:[jsxRuntimeExports.jsx("img",{src:h,alt:"Selected plant",className:"max-h-64 mx-auto rounded-lg shadow-md mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:o?.name}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>T.current?.click(),className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 text-sm font-medium",children:"Change Photo"})]}):jsxRuntimeExports.jsxs("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-xl p-8 text-center bg-gray-50 dark:bg-gray-800/50",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Upload a Plant Photo"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Take or upload a clear photo of a plant to identify it"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>T.current?.click(),className:"inline-flex items-center px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition-colors shadow-md",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Choose Photo"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-3",children:"Supports JPEG and PNG (max 10MB)"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"What part of the plant is visible?"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(M=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>g(M.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m.includes(M.id)?"bg-primary-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[jsxRuntimeExports.jsx("span",{className:"mr-1",children:M.icon}),M.label]},M.id))}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Helps improve identification accuracy"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Compounds to analyze: ",v]}),jsxRuntimeExports.jsx("input",{type:"range",min:"1",max:"10",value:v,onChange:M=>w(parseInt(M.target.value)),className:"w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{id:"plant-predictions",type:"checkbox",checked:C,onChange:M=>R(M.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700"}),jsxRuntimeExports.jsxs("label",{htmlFor:"plant-predictions",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:["Enable ML predictions",jsxRuntimeExports.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:"Includes predicted targets (longer analysis time)"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{type:"submit",variant:"primary",size:"lg",loading:n,disabled:!o||n,className:"flex-1",children:n?"Analyzing Plant...":"Identify & Analyze"}),o&&jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"lg",onClick:O,disabled:n,children:"Clear"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-400 mb-1",children:"How it works:"}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal list-inside text-blue-800 dark:text-blue-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"PlantNet AI identifies the plant species from your photo"}),jsxRuntimeExports.jsx("li",{children:"We look up known medicinal compounds for that plant"}),jsxRuntimeExports.jsx("li",{children:"Each compound is analyzed through ChEMBL for biological pathways"}),jsxRuntimeExports.jsx("li",{children:"Results show how plant compounds may affect your body"})]})]})]})})},PlantAnalysisResults=({result:e,onNewAnalysis:t})=>{const{identification:n,compounds_found:i,compound_analyses:o,aggregate_pathways:l,summary:h}=e,d=b=>b>=.8?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":b>=.5?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",m=b=>b>=.7?"text-green-600 dark:text-green-400":b>=.4?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-400";return n.success?jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-6",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl",children:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.plant_identified}),h.common_names&&h.common_names.length>0&&jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:h.common_names.join(", ")}),h.family&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:["Family: ",h.family]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[jsxRuntimeExports.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${d(h.identification_confidence)}`,children:[(h.identification_confidence*100).toFixed(0),"% confidence"]}),jsxRuntimeExports.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:[h.compounds_analyzed," compounds analyzed"]}),jsxRuntimeExports.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:[h.total_pathways_affected," pathways affected"]})]})]})]})}),h.traditional_uses&&h.traditional_uses.length>0&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Traditional Uses"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:h.traditional_uses.map((b,v)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 rounded-full text-sm",children:b},v))})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Active Compounds"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map((b,v)=>{const w=o.find(C=>C.compound_name===b.name);return jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 dark:text-white capitalize",children:b.name}),b.chembl_id&&jsxRuntimeExports.jsx("a",{href:`https://www.ebi.ac.uk/chembl/compound_report_card/${b.chembl_id}/`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary-500 hover:text-primary-600",children:b.chembl_id})]}),w&&jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"mr-3",children:[w.targets_found," targets"]}),jsxRuntimeExports.jsxs("span",{children:[w.pathways_found," pathways"]})]})]},v)})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Most Affected Biological Pathways"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Pathways affected by multiple compounds from this plant receive higher aggregate scores."}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:l.slice(0,10).map((b,v)=>jsxRuntimeExports.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsxs("span",{className:"text-lg font-semibold text-gray-500 dark:text-gray-400",children:["#",v+1]}),jsxRuntimeExports.jsx("a",{href:b.pathway_url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 dark:text-white hover:text-primary-500",children:b.pathway_name})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:b.compounds.map((w,C)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 rounded text-xs",children:w},C))})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("div",{className:`text-xl font-bold ${m(b.aggregate_score)}`,children:[(b.aggregate_score*100).toFixed(0),"%"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[b.num_compounds," compound",b.num_compounds>1?"s":""]})]})]})},b.pathway_id))})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Analysis Summary"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:h.compounds_analyzed}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Compounds"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:h.total_targets_found}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Targets"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:h.total_pathways_affected}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pathways"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[(h.identification_confidence*100).toFixed(0),"%"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ID Confidence"})]})]})]}),h.top_pathways&&h.top_pathways.length>0&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Key Biological Effects"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:h.top_pathways.map((b,v)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b.name}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:b.compounds_involved.map((w,C)=>jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[w,C<b.compounds_involved.length-1?", ":""]},C))})]}),jsxRuntimeExports.jsxs("span",{className:`font-bold ${m(b.score)}`,children:[(b.score*100).toFixed(0),"%"]})]},v))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-yellow-900 dark:text-yellow-400 mb-1",children:"Disclaimer"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-800 dark:text-yellow-300",children:h.disclaimer})]}),h.warning&&jsxRuntimeExports.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-orange-900 dark:text-orange-400 mb-1",children:"Notice"}),jsxRuntimeExports.jsx("p",{className:"text-orange-800 dark:text-orange-300",children:h.warning})]}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("button",{onClick:t,className:"px-6 py-3 bg-primary-500 text-white font-medium rounded-lg hover:bg-primary-600 transition-colors",children:"Analyze Another Plant"})})]}):jsxRuntimeExports.jsx(Card,{className:"max-w-4xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"text-5xl mb-4",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Plant Identification Failed"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:n.error||"Unable to identify the plant from the image."}),jsxRuntimeExports.jsx("button",{onClick:t,className:"px-6 py-3 bg-primary-500 text-white font-medium rounded-lg hover:bg-primary-600 transition-colors",children:"Try Another Photo"})]})})},CompoundInfo=({compound:e})=>jsxRuntimeExports.jsxs(Card,{className:"animate-slide-up",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Compound Identity"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Name"}),jsxRuntimeExports.jsx("p",{className:"text-base text-gray-900 dark:text-white mt-1",children:e.ingredient_name})]}),e.pubchem_cid&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"PubChem CID"}),jsxRuntimeExports.jsx("p",{className:"text-base text-gray-900 dark:text-white mt-1",children:jsxRuntimeExports.jsx("a",{href:`https://pubchem.ncbi.nlm.nih.gov/compound/${e.pubchem_cid}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 hover:underline",children:e.pubchem_cid})})]}),e.molecular_formula&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Molecular Formula"}),jsxRuntimeExports.jsx("p",{className:"text-base text-gray-900 dark:text-white mt-1 font-mono",children:e.molecular_formula})]}),e.molecular_weight&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Molecular Weight"}),jsxRuntimeExports.jsxs("p",{className:"text-base text-gray-900 dark:text-white mt-1",children:[e.molecular_weight.toFixed(2)," g/mol"]})]}),e.canonical_smiles&&jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"SMILES"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-200 mt-1 font-mono break-all bg-gray-50 dark:bg-gray-700 p-2 rounded",children:e.canonical_smiles})]}),e.inchikey&&jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"InChIKey"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-200 mt-1 font-mono break-all bg-gray-50 dark:bg-gray-700 p-2 rounded",children:e.inchikey})]}),e.iupac_name&&jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"IUPAC Name"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:e.iupac_name})]})]})]}),formatNumber=(e,t=2)=>e==null?"N/A":e.toFixed(t),formatPChEMBL=e=>e==null?"N/A":e.toFixed(1),formatImpactScore=e=>e==null?"N/A":`${(e*100).toFixed(0)}%`,getPotencyDescription=e=>e==null?"Unknown":e>=8?"Very High":e>=6?"High":e>=4?"Moderate":"Low",SummaryCard=({report:e})=>{const{final_summary:t}=e;return jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[jsxRuntimeExports.jsxs(Card,{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:[t.total_targets_measured,t.total_targets_predicted>0&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400 dark:text-gray-500 text-2xl",children:[" +",t.total_targets_predicted]})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[t.total_targets_measured>0?"Measured":""," ",t.total_targets_predicted>0?"& Predicted ":"","Target",t.total_targets_measured+t.total_targets_predicted>1?"s":""]})]}),jsxRuntimeExports.jsxs(Card,{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:t.total_pathways_affected}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Biological Pathway",t.total_pathways_affected>1?"s":""," Affected"]})]}),jsxRuntimeExports.jsxs(Card,{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:[formatNumber(e.total_analysis_duration_seconds||0,1),"s"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Analysis Duration"})]})]})},TIER_COLORS={A:{bg:"bg-green-100",text:"text-green-800",border:"border-green-300",badge:"bg-green-500",label:"Measured",description:"Experimental bioassay evidence"},B:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-300",badge:"bg-yellow-500",label:"Inferred",description:"Pathway role from known targets"},C:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300",badge:"bg-gray-500",label:"Predicted",description:"Computational prediction"}},getTierColor=e=>TIER_COLORS[e]||TIER_COLORS.C,Badge=({tier:e,children:t,className:n})=>{const i=e?getTierColor(e):null;return jsxRuntimeExports.jsx("span",{className:clsx("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e&&i?`${i.bg} ${i.text}`:"bg-gray-100 text-gray-800",n),children:t})},getTargetBodyEffects=(e,t)=>{const n=e.toLowerCase();return n.includes("cyclooxygenase")||n.includes("prostaglandin")||t==="P23219"||t==="P35354"?{systems:["Inflammatory Response","Pain Signaling","Cardiovascular","Gastrointestinal"],effects:[{metric:"Prostaglandin Production",effect:"Reduces inflammatory prostaglandins",direction:"decrease"},{metric:"Pain Perception",effect:"Decreases pain signaling",direction:"decrease"},{metric:"Inflammation",effect:"Reduces swelling and redness",direction:"decrease"},{metric:"Platelet Aggregation",effect:"May affect blood clotting",direction:"modulate"},{metric:"Gastric Protection",effect:"May reduce stomach lining protection",direction:"decrease"}],evidence:[{source:"ChEMBL",description:"Bioactivity data from curated medicinal chemistry literature"},{source:"UniProt P23219/P35354",description:"Prostaglandin G/H synthase (COX-1/COX-2) - validated drug targets"}]}:n.includes("lipoxygenase")||t==="P09917"?{systems:["Inflammatory Response","Immune System","Respiratory"],effects:[{metric:"Leukotriene Production",effect:"Modulates leukotriene synthesis",direction:"modulate"},{metric:"Airway Inflammation",effect:"Affects bronchial constriction",direction:"modulate"},{metric:"Allergic Response",effect:"Influences allergic reactions",direction:"modulate"}],evidence:[{source:"ChEMBL",description:"Bioactivity data from medicinal chemistry sources"},{source:"UniProt P09917",description:"Arachidonate 5-lipoxygenase"}]}:n.includes("cytochrome")||n.includes("cyp")||t.startsWith("P11")?{systems:["Drug Metabolism","Liver Function","Detoxification"],effects:[{metric:"Drug Metabolism",effect:"Alters drug processing speed",direction:"modulate"},{metric:"Drug Interactions",effect:"May affect other medication levels",direction:"modulate"},{metric:"Liver Enzyme Activity",effect:"Influences hepatic function",direction:"modulate"}],evidence:[{source:"ChEMBL",description:"CYP450 interaction data"},{source:"DrugBank",description:"Drug metabolism pathway annotations"}]}:n.includes("aldo-keto")||n.includes("reductase")?{systems:["Steroid Metabolism","Prostaglandin Metabolism","Detoxification"],effects:[{metric:"Steroid Levels",effect:"Modulates steroid hormone metabolism",direction:"modulate"},{metric:"Prostaglandin Levels",effect:"Affects prostaglandin inactivation",direction:"modulate"}],evidence:[{source:"ChEMBL",description:"Enzyme activity data"}]}:n.includes("phospholipase")?{systems:["Cell Signaling","Inflammatory Response","Membrane Function"],effects:[{metric:"Arachidonic Acid Release",effect:"Affects inflammatory precursor release",direction:"modulate"},{metric:"Cell Membrane Integrity",effect:"Influences membrane composition",direction:"modulate"}],evidence:[{source:"ChEMBL",description:"Phospholipase activity assays"}]}:n.includes("kinase")?{systems:["Cell Signaling","Cell Growth","Metabolism"],effects:[{metric:"Cell Proliferation",effect:"Modulates cell growth signals",direction:"modulate"},{metric:"Protein Phosphorylation",effect:"Affects cellular signaling cascades",direction:"modulate"}],evidence:[{source:"ChEMBL",description:"Kinase inhibition assays"}]}:n.includes("channel")||n.includes("receptor")?{systems:["Nervous System","Cell Signaling","Muscle Function"],effects:[{metric:"Neural Signaling",effect:"Modulates nerve impulse transmission",direction:"modulate"},{metric:"Cellular Excitability",effect:"Affects cell responsiveness",direction:"modulate"}],evidence:[{source:"ChEMBL",description:"Receptor binding assays"}]}:{systems:["Cellular Function"],effects:[{metric:"Protein Activity",effect:"Modulates target protein function",direction:"modulate"}],evidence:[{source:"ChEMBL",description:"Bioactivity screening data"}]}},getConfidenceExplanation=(e,t)=>e==="A"?{explanation:"High confidence binding supported by multiple experimental assays with strong potency values.",sources:["ChEMBL curated bioactivity data","Peer-reviewed medicinal chemistry literature",t&&t>=7?"pChEMBL >= 7 indicates sub-micromolar potency":""].filter(Boolean)}:e==="B"?{explanation:"Moderate confidence based on experimental data with moderate potency or fewer confirmatory assays.",sources:["ChEMBL bioactivity data","Limited assay replication"]}:{explanation:"Lower confidence - may be based on predicted interactions or weak experimental binding.",sources:["Computational prediction or weak binding data","Requires additional experimental validation"]},TargetsList=({targets:e})=>{const[t,n]=reactExports.useState("potency"),[i,o]=reactExports.useState(null),l=[...e].sort((m,b)=>t==="name"?m.target_name.localeCompare(b.target_name):(b.pchembl_value||0)-(m.pchembl_value||0)),h=m=>{o(i===m?null:m)},d=m=>{switch(m){case"increase":return jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})});case"decrease":return jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});default:return jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}};return jsxRuntimeExports.jsxs(Card,{className:"animate-slide-up",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Known Targets"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.length," target",e.length!==1?"s":""," with measured potency"]})]}),jsxRuntimeExports.jsxs("select",{value:t,onChange:m=>n(m.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[jsxRuntimeExports.jsx("option",{value:"potency",children:"Sort by Potency"}),jsxRuntimeExports.jsx("option",{value:"name",children:"Sort by Name"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[l.map((m,b)=>{const v=i===b,w=getTargetBodyEffects(m.target_name,m.target_id),C=getConfidenceExplanation(m.confidence_tier,m.pchembl_value);return jsxRuntimeExports.jsxs("div",{className:clsx("border rounded-lg transition-all duration-200 overflow-hidden",v?"border-primary-400 dark:border-primary-500 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-600"),children:[jsxRuntimeExports.jsxs("div",{onClick:()=>h(b),className:"p-4 cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:m.target_name}),jsxRuntimeExports.jsx("svg",{className:clsx("w-4 h-4 text-gray-400 transition-transform duration-200",v&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:m.target_id})]}),jsxRuntimeExports.jsxs(Badge,{tier:m.confidence_tier,children:["Tier ",m.confidence_tier]})]}),m.pchembl_value&&jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["pChEMBL: ",formatPChEMBL(m.pchembl_value)]}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[getPotencyDescription(m.pchembl_value)," Potency"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-red-500 via-yellow-500 to-green-500 transition-all duration-300",style:{width:`${m.pchembl_value/10*100}%`}})}),m.standard_type&&m.standard_value&&m.standard_units&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[m.standard_type,": ",m.standard_value," ",m.standard_units]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("span",{children:["Source: ",m.source]}),m.assay_references?.length>0&&jsxRuntimeExports.jsxs("span",{children:[" ",m.assay_references.length," assay",m.assay_references.length>1?"s":""]}),jsxRuntimeExports.jsx("span",{className:"ml-auto text-primary-500 dark:text-primary-400",children:v?"Click to collapse":"Click for details"})]})]}),v&&jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50 p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:clsx("p-3 rounded-lg border",m.confidence_tier==="A"&&"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",m.confidence_tier==="B"&&"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",m.confidence_tier==="C"&&"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700"),children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Confidence Evidence (Tier ",m.confidence_tier,")"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:C.explanation}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:C.sources.map((R,T)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4"})}),R]},T))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Data Sources"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[w.evidence.map((R,T)=>jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:[R.source,":"]}),jsxRuntimeExports.jsx("span",{className:"text-blue-700 dark:text-blue-300 ml-1",children:R.description})]},T)),m.assay_references?.length>0&&jsxRuntimeExports.jsxs("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-700",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-blue-800 dark:text-blue-200",children:"Assay References:"}),jsxRuntimeExports.jsx("div",{className:"mt-1 space-y-1",children:m.assay_references.slice(0,3).map((R,T)=>jsxRuntimeExports.jsxs("a",{href:R.source_url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:[R.assay_id,": ",R.assay_description||"View assay details"]},T))})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Affected Body Systems"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:w.systems.map((R,T)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-full",children:R},T))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Physiological Effects"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:w.effects.map((R,T)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700",children:[jsxRuntimeExports.jsx("div",{className:"mt-0.5",children:d(R.direction)}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:R.metric}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:R.effect})]}),jsxRuntimeExports.jsx("span",{className:clsx("text-xs px-2 py-0.5 rounded-full",R.direction==="increase"&&"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",R.direction==="decrease"&&"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",R.direction==="modulate"&&"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"),children:R.direction==="increase"?"Increases":R.direction==="decrease"?"Decreases":"Modulates"})]},T))})]})]})]},b)}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No known targets found for this compound."})]})]})};var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var e=Array.isArray;return isArray_1=e,isArray_1}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var e=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal=e,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var e=require_freeGlobal(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return _root=n,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var e=require_root(),t=e.Symbol;return _Symbol=t,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var e=require_Symbol(),t=Object.prototype,n=t.hasOwnProperty,i=t.toString,o=e?e.toStringTag:void 0;function l(h){var d=n.call(h,o),m=h[o];try{h[o]=void 0;var b=!0}catch{}var v=i.call(h);return b&&(d?h[o]=m:delete h[o]),v}return _getRawTag=l,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var e=Object.prototype,t=e.toString;function n(i){return t.call(i)}return _objectToString=n,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var e=require_Symbol(),t=require_getRawTag(),n=require_objectToString(),i="[object Null]",o="[object Undefined]",l=e?e.toStringTag:void 0;function h(d){return d==null?d===void 0?o:i:l&&l in Object(d)?t(d):n(d)}return _baseGetTag=h,_baseGetTag}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function e(t){return t!=null&&typeof t=="object"}return isObjectLike_1=e,isObjectLike_1}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var e=require_baseGetTag(),t=requireIsObjectLike(),n="[object Symbol]";function i(o){return typeof o=="symbol"||t(o)&&e(o)==n}return isSymbol_1=i,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var e=requireIsArray(),t=requireIsSymbol(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function o(l,h){if(e(l))return!1;var d=typeof l;return d=="number"||d=="symbol"||d=="boolean"||l==null||t(l)?!0:i.test(l)||!n.test(l)||h!=null&&l in Object(h)}return _isKey=o,_isKey}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return isObject_1=e,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var e=require_baseGetTag(),t=requireIsObject(),n="[object AsyncFunction]",i="[object Function]",o="[object GeneratorFunction]",l="[object Proxy]";function h(d){if(!t(d))return!1;var m=e(d);return m==i||m==o||m==n||m==l}return isFunction_1=h,isFunction_1}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var e=require_root(),t=e["__core-js_shared__"];return _coreJsData=t,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var e=require_coreJsData(),t=(function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function n(i){return!!t&&t in i}return _isMasked=n,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var e=Function.prototype,t=e.toString;function n(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return _toSource=n,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var e=requireIsFunction(),t=require_isMasked(),n=requireIsObject(),i=require_toSource(),o=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,h=Function.prototype,d=Object.prototype,m=h.toString,b=d.hasOwnProperty,v=RegExp("^"+m.call(b).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function w(C){if(!n(C)||t(C))return!1;var R=e(C)?v:l;return R.test(i(C))}return _baseIsNative=w,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function e(t,n){return t?.[n]}return _getValue=e,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var e=require_baseIsNative(),t=require_getValue();function n(i,o){var l=t(i,o);return e(l)?l:void 0}return _getNative=n,_getNative}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var e=require_getNative(),t=e(Object,"create");return _nativeCreate=t,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var e=require_nativeCreate();function t(){this.__data__=e?e(null):{},this.size=0}return _hashClear=t,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return _hashDelete=e,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var e=require_nativeCreate(),t="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function o(l){var h=this.__data__;if(e){var d=h[l];return d===t?void 0:d}return i.call(h,l)?h[l]:void 0}return _hashGet=o,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var e=require_nativeCreate(),t=Object.prototype,n=t.hasOwnProperty;function i(o){var l=this.__data__;return e?l[o]!==void 0:n.call(l,o)}return _hashHas=i,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var e=require_nativeCreate(),t="__lodash_hash_undefined__";function n(i,o){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=e&&o===void 0?t:o,this}return _hashSet=n,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var e=require_hashClear(),t=require_hashDelete(),n=require_hashGet(),i=require_hashHas(),o=require_hashSet();function l(h){var d=-1,m=h==null?0:h.length;for(this.clear();++d<m;){var b=h[d];this.set(b[0],b[1])}}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=n,l.prototype.has=i,l.prototype.set=o,_Hash=l,_Hash}var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function e(){this.__data__=[],this.size=0}return _listCacheClear=e,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function e(t,n){return t===n||t!==t&&n!==n}return eq_1=e,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var e=requireEq();function t(n,i){for(var o=n.length;o--;)if(e(n[o][0],i))return o;return-1}return _assocIndexOf=t,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var e=require_assocIndexOf(),t=Array.prototype,n=t.splice;function i(o){var l=this.__data__,h=e(l,o);if(h<0)return!1;var d=l.length-1;return h==d?l.pop():n.call(l,h,1),--this.size,!0}return _listCacheDelete=i,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var e=require_assocIndexOf();function t(n){var i=this.__data__,o=e(i,n);return o<0?void 0:i[o][1]}return _listCacheGet=t,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var e=require_assocIndexOf();function t(n){return e(this.__data__,n)>-1}return _listCacheHas=t,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var e=require_assocIndexOf();function t(n,i){var o=this.__data__,l=e(o,n);return l<0?(++this.size,o.push([n,i])):o[l][1]=i,this}return _listCacheSet=t,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var e=require_listCacheClear(),t=require_listCacheDelete(),n=require_listCacheGet(),i=require_listCacheHas(),o=require_listCacheSet();function l(h){var d=-1,m=h==null?0:h.length;for(this.clear();++d<m;){var b=h[d];this.set(b[0],b[1])}}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=n,l.prototype.has=i,l.prototype.set=o,_ListCache=l,_ListCache}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var e=require_getNative(),t=require_root(),n=e(t,"Map");return _Map=n,_Map}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var e=require_Hash(),t=require_ListCache(),n=require_Map();function i(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return _mapCacheClear=i,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return _isKeyable=e,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var e=require_isKeyable();function t(n,i){var o=n.__data__;return e(i)?o[typeof i=="string"?"string":"hash"]:o.map}return _getMapData=t,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var e=require_getMapData();function t(n){var i=e(this,n).delete(n);return this.size-=i?1:0,i}return _mapCacheDelete=t,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var e=require_getMapData();function t(n){return e(this,n).get(n)}return _mapCacheGet=t,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var e=require_getMapData();function t(n){return e(this,n).has(n)}return _mapCacheHas=t,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var e=require_getMapData();function t(n,i){var o=e(this,n),l=o.size;return o.set(n,i),this.size+=o.size==l?0:1,this}return _mapCacheSet=t,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var e=require_mapCacheClear(),t=require_mapCacheDelete(),n=require_mapCacheGet(),i=require_mapCacheHas(),o=require_mapCacheSet();function l(h){var d=-1,m=h==null?0:h.length;for(this.clear();++d<m;){var b=h[d];this.set(b[0],b[1])}}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=n,l.prototype.has=i,l.prototype.set=o,_MapCache=l,_MapCache}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var e=require_MapCache(),t="Expected a function";function n(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var l=function(){var h=arguments,d=o?o.apply(this,h):h[0],m=l.cache;if(m.has(d))return m.get(d);var b=i.apply(this,h);return l.cache=m.set(d,b)||m,b};return l.cache=new(n.Cache||e),l}return n.Cache=e,memoize_1=n,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var e=requireMemoize(),t=500;function n(i){var o=e(i,function(h){return l.size===t&&l.clear(),h}),l=o.cache;return o}return _memoizeCapped=n,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var e=require_memoizeCapped(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=e(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(t,function(h,d,m,b){l.push(m?b.replace(n,"$1"):d||h)}),l});return _stringToPath=i,_stringToPath}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function e(t,n){for(var i=-1,o=t==null?0:t.length,l=Array(o);++i<o;)l[i]=n(t[i],i,t);return l}return _arrayMap=e,_arrayMap}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var e=require_Symbol(),t=require_arrayMap(),n=requireIsArray(),i=requireIsSymbol(),o=e?e.prototype:void 0,l=o?o.toString:void 0;function h(d){if(typeof d=="string")return d;if(n(d))return t(d,h)+"";if(i(d))return l?l.call(d):"";var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}return _baseToString=h,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var e=require_baseToString();function t(n){return n==null?"":e(n)}return toString_1=t,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var e=requireIsArray(),t=require_isKey(),n=require_stringToPath(),i=requireToString();function o(l,h){return e(l)?l:t(l,h)?[l]:n(i(l))}return _castPath=o,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var e=requireIsSymbol();function t(n){if(typeof n=="string"||e(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return _toKey=t,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var e=require_castPath(),t=require_toKey();function n(i,o){o=e(o,i);for(var l=0,h=o.length;i!=null&&l<h;)i=i[t(o[l++])];return l&&l==h?i:void 0}return _baseGet=n,_baseGet}var get_1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var e=require_baseGet();function t(n,i,o){var l=n==null?void 0:e(n,i);return l===void 0?o:l}return get_1=t,get_1}var getExports=requireGet();const get=getDefaultExportFromCjs(getExports);var isNil_1,hasRequiredIsNil;function requireIsNil(){if(hasRequiredIsNil)return isNil_1;hasRequiredIsNil=1;function e(t){return t==null}return isNil_1=e,isNil_1}var isNilExports=requireIsNil();const isNil=getDefaultExportFromCjs(isNilExports);var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var e=require_baseGetTag(),t=requireIsArray(),n=requireIsObjectLike(),i="[object String]";function o(l){return typeof l=="string"||!t(l)&&n(l)&&e(l)==i}return isString_1=o,isString_1}var isStringExports=requireIsString();const isString=getDefaultExportFromCjs(isStringExports);var isFunctionExports=requireIsFunction();const isFunction=getDefaultExportFromCjs(isFunctionExports);var isObjectExports=requireIsObject();const isObject=getDefaultExportFromCjs(isObjectExports);var reactIs={exports:{}},reactIs_production_min={};var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.server_context"),m=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function E(f){if(typeof f=="object"&&f!==null){var g=f.$$typeof;switch(g){case e:switch(f=f.type,f){case n:case o:case i:case b:case v:return f;default:switch(f=f&&f.$$typeof,f){case d:case h:case m:case C:case w:case l:return f;default:return g}}case t:return g}}}return reactIs_production_min.ContextConsumer=h,reactIs_production_min.ContextProvider=l,reactIs_production_min.Element=e,reactIs_production_min.ForwardRef=m,reactIs_production_min.Fragment=n,reactIs_production_min.Lazy=C,reactIs_production_min.Memo=w,reactIs_production_min.Portal=t,reactIs_production_min.Profiler=o,reactIs_production_min.StrictMode=i,reactIs_production_min.Suspense=b,reactIs_production_min.SuspenseList=v,reactIs_production_min.isAsyncMode=function(){return!1},reactIs_production_min.isConcurrentMode=function(){return!1},reactIs_production_min.isContextConsumer=function(f){return E(f)===h},reactIs_production_min.isContextProvider=function(f){return E(f)===l},reactIs_production_min.isElement=function(f){return typeof f=="object"&&f!==null&&f.$$typeof===e},reactIs_production_min.isForwardRef=function(f){return E(f)===m},reactIs_production_min.isFragment=function(f){return E(f)===n},reactIs_production_min.isLazy=function(f){return E(f)===C},reactIs_production_min.isMemo=function(f){return E(f)===w},reactIs_production_min.isPortal=function(f){return E(f)===t},reactIs_production_min.isProfiler=function(f){return E(f)===o},reactIs_production_min.isStrictMode=function(f){return E(f)===i},reactIs_production_min.isSuspense=function(f){return E(f)===b},reactIs_production_min.isSuspenseList=function(f){return E(f)===v},reactIs_production_min.isValidElementType=function(f){return typeof f=="string"||typeof f=="function"||f===n||f===o||f===i||f===b||f===v||f===R||typeof f=="object"&&f!==null&&(f.$$typeof===C||f.$$typeof===w||f.$$typeof===l||f.$$typeof===h||f.$$typeof===m||f.$$typeof===T||f.getModuleId!==void 0)},reactIs_production_min.typeOf=E,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var reactIsExports=requireReactIs(),isNumber_1,hasRequiredIsNumber;function requireIsNumber(){if(hasRequiredIsNumber)return isNumber_1;hasRequiredIsNumber=1;var e=require_baseGetTag(),t=requireIsObjectLike(),n="[object Number]";function i(o){return typeof o=="number"||t(o)&&e(o)==n}return isNumber_1=i,isNumber_1}var _isNaN,hasRequired_isNaN;function require_isNaN(){if(hasRequired_isNaN)return _isNaN;hasRequired_isNaN=1;var e=requireIsNumber();function t(n){return e(n)&&n!=+n}return _isNaN=t,_isNaN}var _isNaNExports=require_isNaN();const isNan=getDefaultExportFromCjs(_isNaNExports);var isNumberExports=requireIsNumber();const isNumber$1=getDefaultExportFromCjs(isNumberExports);var mathSign=function(t){return t===0?0:t>0?1:-1},isPercent=function(t){return isString(t)&&t.indexOf("%")===t.length-1},isNumber=function(t){return isNumber$1(t)&&!isNan(t)},isNullish=function(t){return isNil(t)},isNumOrStr=function(t){return isNumber(t)||isString(t)},idCounter=0,uniqueId=function(t){var n=++idCounter;return"".concat(t||"").concat(n)},getPercentValue=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber(t)&&!isString(t))return i;var l;if(isPercent(t)){var h=t.indexOf("%");l=n*parseFloat(t.slice(0,h))/100}else l=+t;return isNan(l)&&(l=i),o&&l>n&&(l=n),l},getAnyElementOfObject=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},hasDuplicate=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,i={},o=0;o<n;o++)if(!i[t[o]])i[t[o]]=!0;else return!0;return!1},interpolateNumber$2=function(t,n){return isNumber(t)&&isNumber(n)?function(i){return t+i*(n-t)}:function(){return n}};function findEntryInArray(e,t,n){return!e||!e.length?null:e.find(function(i){return i&&(typeof t=="function"?t(i):get(i,t))===n})}var compareValues=function(t,n){return isNumber(t)&&isNumber(n)?t-n:isString(t)&&isString(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function shallowEqual(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var i in t)if({}.hasOwnProperty.call(t,i)&&!{}.hasOwnProperty.call(e,i))return!1;return!0}function _typeof$F(e){"@babel/helpers - typeof";return _typeof$F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$F(e)}var SVGContainerPropKeys=["viewBox","children"],SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PolyElementKeys=["points","pathLength"],FilteredElementKeyMap={svg:SVGContainerPropKeys,polygon:PolyElementKeys,polyline:PolyElementKeys},EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],adaptEventHandlers=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(reactExports.isValidElement(t)&&(i=t.props),!isObject(i))return null;var o={};return Object.keys(i).forEach(function(l){EventKeys.includes(l)&&(o[l]=n||function(h){return i[l](i,h)})}),o},getEventHandlerOfChild=function(t,n,i){return function(o){return t(n,i,o),null}},adaptEventsOfChild=function(t,n,i){if(!isObject(t)||_typeof$F(t)!=="object")return null;var o=null;return Object.keys(t).forEach(function(l){var h=t[l];EventKeys.includes(l)&&typeof h=="function"&&(o||(o={}),o[l]=getEventHandlerOfChild(h,n,i))}),o},_excluded$f=["children"],_excluded2$4=["children"];function _objectWithoutProperties$f(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$f(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$f(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var REACT_BROWSER_EVENT_MAP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},getDisplayName=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},lastChildren=null,lastResult=null,toArray=function e(t){if(t===lastChildren&&Array.isArray(lastResult))return lastResult;var n=[];return reactExports.Children.forEach(t,function(i){isNil(i)||(reactIsExports.isFragment(i)?n=n.concat(e(i.props.children)):n.push(i))}),lastResult=n,lastChildren=t,n};function findAllByType(e,t){var n=[],i=[];return Array.isArray(t)?i=t.map(function(o){return getDisplayName(o)}):i=[getDisplayName(t)],toArray(e).forEach(function(o){var l=get(o,"type.displayName")||get(o,"type.name");i.indexOf(l)!==-1&&n.push(o)}),n}function findChildByType(e,t){var n=findAllByType(e,t);return n&&n[0]}var validateWidthHeight=function(t){if(!t||!t.props)return!1;var n=t.props,i=n.width,o=n.height;return!(!isNumber(i)||i<=0||!isNumber(o)||o<=0)},SVG_TAGS=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],isSvgElement=function(t){return t&&t.type&&isString(t.type)&&SVG_TAGS.indexOf(t.type)>=0},isValidSpreadableProp=function(t,n,i,o){var l,h=(l=FilteredElementKeyMap?.[o])!==null&&l!==void 0?l:[];return n.startsWith("data-")||!isFunction(t)&&(o&&h.includes(n)||SVGElementPropKeys.includes(n))||i&&EventKeys.includes(n)},filterProps=function(t,n,i){if(!t||typeof t=="function"||typeof t=="boolean")return null;var o=t;if(reactExports.isValidElement(t)&&(o=t.props),!isObject(o))return null;var l={};return Object.keys(o).forEach(function(h){var d;isValidSpreadableProp((d=o)===null||d===void 0?void 0:d[h],h,n,i)&&(l[h]=o[h])}),l},isChildrenEqual=function e(t,n){if(t===n)return!0;var i=reactExports.Children.count(t);if(i!==reactExports.Children.count(n))return!1;if(i===0)return!0;if(i===1)return isSingleChildEqual(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var o=0;o<i;o++){var l=t[o],h=n[o];if(Array.isArray(l)||Array.isArray(h)){if(!e(l,h))return!1}else if(!isSingleChildEqual(l,h))return!1}return!0},isSingleChildEqual=function(t,n){if(isNil(t)&&isNil(n))return!0;if(!isNil(t)&&!isNil(n)){var i=t.props||{},o=i.children,l=_objectWithoutProperties$f(i,_excluded$f),h=n.props||{},d=h.children,m=_objectWithoutProperties$f(h,_excluded2$4);return o&&d?shallowEqual(l,m)&&isChildrenEqual(o,d):!o&&!d?shallowEqual(l,m):!1}return!1},renderByOrder=function(t,n){var i=[],o={};return toArray(t).forEach(function(l,h){if(isSvgElement(l))i.push(l);else if(l){var d=getDisplayName(l.type),m=n[d]||{},b=m.handler,v=m.once;if(b&&(!v||!o[d])){var w=b(l,d,h);i.push(w),o[d]=!0}}}),i},getReactEventByType=function(t){var n=t&&t.type;return n&&REACT_BROWSER_EVENT_MAP[n]?REACT_BROWSER_EVENT_MAP[n]:null},parseChildIndex=function(t,n){return toArray(n).indexOf(t)},_excluded$e=["children","width","height","viewBox","className","style","title","desc"];function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$o.apply(this,arguments)}function _objectWithoutProperties$e(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$e(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$e(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function Surface(e){var t=e.children,n=e.width,i=e.height,o=e.viewBox,l=e.className,h=e.style,d=e.title,m=e.desc,b=_objectWithoutProperties$e(e,_excluded$e),v=o||{width:n,height:i,x:0,y:0},w=clsx("recharts-surface",l);return React.createElement("svg",_extends$o({},filterProps(b,!0,"svg"),{className:w,width:n,height:i,style:h,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height)}),React.createElement("title",null,d),React.createElement("desc",null,m),t)}var _excluded$d=["children","className"];function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$n.apply(this,arguments)}function _objectWithoutProperties$d(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$d(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$d(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var Layer=React.forwardRef(function(e,t){var n=e.children,i=e.className,o=_objectWithoutProperties$d(e,_excluded$d),l=clsx("recharts-layer",i);return React.createElement("g",_extends$n({className:l},filterProps(o,!0),{ref:t}),n)}),warn=function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),l=2;l<i;l++)o[l-2]=arguments[l]},_baseSlice,hasRequired_baseSlice;function require_baseSlice(){if(hasRequired_baseSlice)return _baseSlice;hasRequired_baseSlice=1;function e(t,n,i){var o=-1,l=t.length;n<0&&(n=-n>l?0:l+n),i=i>l?l:i,i<0&&(i+=l),l=n>i?0:i-n>>>0,n>>>=0;for(var h=Array(l);++o<l;)h[o]=t[o+n];return h}return _baseSlice=e,_baseSlice}var _castSlice,hasRequired_castSlice;function require_castSlice(){if(hasRequired_castSlice)return _castSlice;hasRequired_castSlice=1;var e=require_baseSlice();function t(n,i,o){var l=n.length;return o=o===void 0?l:o,!i&&o>=l?n:e(n,i,o)}return _castSlice=t,_castSlice}var _hasUnicode,hasRequired_hasUnicode;function require_hasUnicode(){if(hasRequired_hasUnicode)return _hasUnicode;hasRequired_hasUnicode=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=t+n+i,l="\\ufe0e\\ufe0f",h="\\u200d",d=RegExp("["+h+e+o+l+"]");function m(b){return d.test(b)}return _hasUnicode=m,_hasUnicode}var _asciiToArray,hasRequired_asciiToArray;function require_asciiToArray(){if(hasRequired_asciiToArray)return _asciiToArray;hasRequired_asciiToArray=1;function e(t){return t.split("")}return _asciiToArray=e,_asciiToArray}var _unicodeToArray,hasRequired_unicodeToArray;function require_unicodeToArray(){if(hasRequired_unicodeToArray)return _unicodeToArray;hasRequired_unicodeToArray=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=t+n+i,l="\\ufe0e\\ufe0f",h="["+e+"]",d="["+o+"]",m="\\ud83c[\\udffb-\\udfff]",b="(?:"+d+"|"+m+")",v="[^"+e+"]",w="(?:\\ud83c[\\udde6-\\uddff]){2}",C="[\\ud800-\\udbff][\\udc00-\\udfff]",R="\\u200d",T=b+"?",E="["+l+"]?",f="(?:"+R+"(?:"+[v,w,C].join("|")+")"+E+T+")*",g=E+T+f,S="(?:"+[v+d+"?",d,w,C,h].join("|")+")",O=RegExp(m+"(?="+m+")|"+S+g,"g");function D(M){return M.match(O)||[]}return _unicodeToArray=D,_unicodeToArray}var _stringToArray,hasRequired_stringToArray;function require_stringToArray(){if(hasRequired_stringToArray)return _stringToArray;hasRequired_stringToArray=1;var e=require_asciiToArray(),t=require_hasUnicode(),n=require_unicodeToArray();function i(o){return t(o)?n(o):e(o)}return _stringToArray=i,_stringToArray}var _createCaseFirst,hasRequired_createCaseFirst;function require_createCaseFirst(){if(hasRequired_createCaseFirst)return _createCaseFirst;hasRequired_createCaseFirst=1;var e=require_castSlice(),t=require_hasUnicode(),n=require_stringToArray(),i=requireToString();function o(l){return function(h){h=i(h);var d=t(h)?n(h):void 0,m=d?d[0]:h.charAt(0),b=d?e(d,1).join(""):h.slice(1);return m[l]()+b}}return _createCaseFirst=o,_createCaseFirst}var upperFirst_1,hasRequiredUpperFirst;function requireUpperFirst(){if(hasRequiredUpperFirst)return upperFirst_1;hasRequiredUpperFirst=1;var e=require_createCaseFirst(),t=e("toUpperCase");return upperFirst_1=t,upperFirst_1}var upperFirstExports=requireUpperFirst();const upperFirst=getDefaultExportFromCjs(upperFirstExports);function constant$1(e){return function(){return e}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function appendRound(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append;const n=10**t;return function(i){this._+=i[0];for(let o=1,l=i.length;o<l;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}class Path{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?append:appendRound(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,o){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+o}`}bezierCurveTo(t,n,i,o,l,h){this._append`C${+t},${+n},${+i},${+o},${this._x1=+l},${this._y1=+h}`}arcTo(t,n,i,o,l){if(t=+t,n=+n,i=+i,o=+o,l=+l,l<0)throw new Error(`negative radius: ${l}`);let h=this._x1,d=this._y1,m=i-t,b=o-n,v=h-t,w=d-n,C=v*v+w*w;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(C>epsilon)if(!(Math.abs(w*m-b*v)>epsilon)||!l)this._append`L${this._x1=t},${this._y1=n}`;else{let R=i-h,T=o-d,E=m*m+b*b,f=R*R+T*T,g=Math.sqrt(E),S=Math.sqrt(C),O=l*Math.tan((pi-Math.acos((E+C-f)/(2*g*S)))/2),D=O/S,M=O/g;Math.abs(D-1)>epsilon&&this._append`L${t+D*v},${n+D*w}`,this._append`A${l},${l},0,0,${+(w*R>v*T)},${this._x1=t+M*m},${this._y1=n+M*b}`}}arc(t,n,i,o,l,h){if(t=+t,n=+n,i=+i,h=!!h,i<0)throw new Error(`negative radius: ${i}`);let d=i*Math.cos(o),m=i*Math.sin(o),b=t+d,v=n+m,w=1^h,C=h?o-l:l-o;this._x1===null?this._append`M${b},${v}`:(Math.abs(this._x1-b)>epsilon||Math.abs(this._y1-v)>epsilon)&&this._append`L${b},${v}`,i&&(C<0&&(C=C%tau+tau),C>tauEpsilon?this._append`A${i},${i},0,1,${w},${t-d},${n-m}A${i},${i},0,1,${w},${this._x1=b},${this._y1=v}`:C>epsilon&&this._append`A${i},${i},0,${+(C>=pi)},${w},${this._x1=t+i*Math.cos(l)},${this._y1=n+i*Math.sin(l)}`)}rect(t,n,i,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+o}h${-i}Z`}toString(){return this._}}function withPath(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new Path(t)}function array(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function curveLinear(e){return new Linear(e)}function x(e){return e[0]}function y(e){return e[1]}function shapeLine(e,t){var n=constant$1(!0),i=null,o=curveLinear,l=null,h=withPath(d);e=typeof e=="function"?e:e===void 0?x:constant$1(e),t=typeof t=="function"?t:t===void 0?y:constant$1(t);function d(m){var b,v=(m=array(m)).length,w,C=!1,R;for(i==null&&(l=o(R=h())),b=0;b<=v;++b)!(b<v&&n(w=m[b],b,m))===C&&((C=!C)?l.lineStart():l.lineEnd()),C&&l.point(+e(w,b,m),+t(w,b,m));if(R)return l=null,R+""||null}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:constant$1(+m),d):e},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:constant$1(+m),d):t},d.defined=function(m){return arguments.length?(n=typeof m=="function"?m:constant$1(!!m),d):n},d.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),d):o},d.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),d):i},d}function shapeArea(e,t,n){var i=null,o=constant$1(!0),l=null,h=curveLinear,d=null,m=withPath(b);e=typeof e=="function"?e:e===void 0?x:constant$1(+e),t=typeof t=="function"?t:constant$1(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?y:constant$1(+n);function b(w){var C,R,T,E=(w=array(w)).length,f,g=!1,S,O=new Array(E),D=new Array(E);for(l==null&&(d=h(S=m())),C=0;C<=E;++C){if(!(C<E&&o(f=w[C],C,w))===g)if(g=!g)R=C,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),T=C-1;T>=R;--T)d.point(O[T],D[T]);d.lineEnd(),d.areaEnd()}g&&(O[C]=+e(f,C,w),D[C]=+t(f,C,w),d.point(i?+i(f,C,w):O[C],n?+n(f,C,w):D[C]))}if(S)return d=null,S+""||null}function v(){return shapeLine().defined(o).curve(h).context(l)}return b.x=function(w){return arguments.length?(e=typeof w=="function"?w:constant$1(+w),i=null,b):e},b.x0=function(w){return arguments.length?(e=typeof w=="function"?w:constant$1(+w),b):e},b.x1=function(w){return arguments.length?(i=w==null?null:typeof w=="function"?w:constant$1(+w),b):i},b.y=function(w){return arguments.length?(t=typeof w=="function"?w:constant$1(+w),n=null,b):t},b.y0=function(w){return arguments.length?(t=typeof w=="function"?w:constant$1(+w),b):t},b.y1=function(w){return arguments.length?(n=w==null?null:typeof w=="function"?w:constant$1(+w),b):n},b.lineX0=b.lineY0=function(){return v().x(e).y(t)},b.lineY1=function(){return v().x(e).y(n)},b.lineX1=function(){return v().x(i).y(t)},b.defined=function(w){return arguments.length?(o=typeof w=="function"?w:constant$1(!!w),b):o},b.curve=function(w){return arguments.length?(h=w,l!=null&&(d=h(l)),b):h},b.context=function(w){return arguments.length?(w==null?l=d=null:d=h(l=w),b):l},b}class Bump{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}const symbolCircle={draw(e,t){const n=sqrt$1(t/pi$1);e.moveTo(n,0),e.arc(0,0,n,0,tau$1)}},symbolCross={draw(e,t){const n=sqrt$1(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(e,t){const n=sqrt$1(t/tan30_2),i=n*tan30;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},symbolSquare={draw(e,t){const n=sqrt$1(t),i=-n/2;e.rect(i,i,n,n)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(e,t){const n=sqrt$1(t*ka),i=kx*n,o=ky*n;e.moveTo(0,-n),e.lineTo(i,o);for(let l=1;l<5;++l){const h=tau$1*l/5,d=cos(h),m=sin(h);e.lineTo(m*n,-d*n),e.lineTo(d*i-m*o,m*i+d*o)}e.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(e,t){const n=-sqrt$1(t/(sqrt3*3));e.moveTo(0,n*2),e.lineTo(-sqrt3*n,-n),e.lineTo(sqrt3*n,-n),e.closePath()}},c=-.5,s=sqrt$1(3)/2,k=1/sqrt$1(12),a=(k/2+1)*3,symbolWye={draw(e,t){const n=sqrt$1(t/a),i=n/2,o=n*k,l=i,h=n*k+n,d=-l,m=h;e.moveTo(i,o),e.lineTo(l,h),e.lineTo(d,m),e.lineTo(c*i-s*o,s*i+c*o),e.lineTo(c*l-s*h,s*l+c*h),e.lineTo(c*d-s*m,s*d+c*m),e.lineTo(c*i+s*o,c*o-s*i),e.lineTo(c*l+s*h,c*h-s*l),e.lineTo(c*d+s*m,c*m-s*d),e.closePath()}};function Symbol$1(e,t){let n=null,i=withPath(o);e=typeof e=="function"?e:constant$1(e||symbolCircle),t=typeof t=="function"?t:constant$1(t===void 0?64:+t);function o(){let l;if(n||(n=l=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),l)return n=null,l+""||null}return o.type=function(l){return arguments.length?(e=typeof l=="function"?l:constant$1(l),o):e},o.size=function(l){return arguments.length?(t=typeof l=="function"?l:constant$1(+l),o):t},o.context=function(l){return arguments.length?(n=l??null,o):n},o}function noop(){}function point$2(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Basis(e){this._context=e}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasis(e){return new Basis(e)}function BasisClosed(e){this._context=e}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasisClosed(e){return new BasisClosed(e)}function BasisOpen(e){this._context=e}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasisOpen(e){return new BasisOpen(e)}function LinearClosed(e){this._context=e}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function curveLinearClosed(e){return new LinearClosed(e)}function sign(e){return e<0?-1:1}function slope3(e,t,n){var i=e._x1-e._x0,o=t-e._x1,l=(e._y1-e._y0)/(i||o<0&&-0),h=(n-e._y1)/(o||i<0&&-0),d=(l*o+h*i)/(i+o);return(sign(l)+sign(h))*Math.min(Math.abs(l),Math.abs(h),.5*Math.abs(d))||0}function slope2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function point$1(e,t,n){var i=e._x0,o=e._y0,l=e._x1,h=e._y1,d=(l-i)/3;e._context.bezierCurveTo(i+d,o+d*t,l-d,h-d*n,l,h)}function MonotoneX(e){this._context=e}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,n=slope3(this,e,t)),n);break;default:point$1(this,this._t0,n=slope3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function MonotoneY(e){this._context=new ReflectContext(e)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)};function ReflectContext(e){this._context=e}ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,o,l){this._context.bezierCurveTo(t,e,i,n,l,o)}};function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=controlPoints(e),o=controlPoints(t),l=0,h=1;h<n;++l,++h)this._context.bezierCurveTo(i[0][l],o[0][l],i[1][l],o[1][l],e[h],t[h]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function controlPoints(e){var t,n=e.length-1,i,o=new Array(n),l=new Array(n),h=new Array(n);for(o[0]=0,l[0]=2,h[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,l[t]=4,h[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,l[n-1]=7,h[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=o[t]/l[t-1],l[t]-=i,h[t]-=i*h[t-1];for(o[n-1]=h[n-1]/l[n-1],t=n-2;t>=0;--t)o[t]=(h[t]-o[t+1])/l[t];for(l[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)l[t]=2*e[t+1]-o[t+1];return[o,l]}function curveNatural(e){return new Natural(e)}function Step(e,t){this._context=e,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function curveStep(e){return new Step(e,.5)}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}function stackOffsetNone(e,t){if((h=e.length)>1)for(var n=1,i,o,l=e[t[0]],h,d=l.length;n<h;++n)for(o=l,l=e[t[n]],i=0;i<d;++i)l[i][1]+=l[i][0]=isNaN(o[i][1])?o[i][0]:o[i][1]}function stackOrderNone(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}function shapeStack(){var e=constant$1([]),t=stackOrderNone,n=stackOffsetNone,i=stackValue;function o(l){var h=Array.from(e.apply(this,arguments),stackSeries),d,m=h.length,b=-1,v;for(const w of l)for(d=0,++b;d<m;++d)(h[d][b]=[0,+i(w,h[d].key,b,l)]).data=w;for(d=0,v=array(t(h));d<m;++d)h[v[d]].index=d;return n(h,v),h}return o.keys=function(l){return arguments.length?(e=typeof l=="function"?l:constant$1(Array.from(l)),o):e},o.value=function(l){return arguments.length?(i=typeof l=="function"?l:constant$1(+l),o):i},o.order=function(l){return arguments.length?(t=l==null?stackOrderNone:typeof l=="function"?l:constant$1(Array.from(l)),o):t},o.offset=function(l){return arguments.length?(n=l??stackOffsetNone,o):n},o}function stackOffsetExpand(e,t){if((i=e.length)>0){for(var n,i,o=0,l=e[0].length,h;o<l;++o){for(h=n=0;n<i;++n)h+=e[n][o][1]||0;if(h)for(n=0;n<i;++n)e[n][o][1]/=h}stackOffsetNone(e,t)}}function stackOffsetSilhouette(e,t){if((o=e.length)>0){for(var n=0,i=e[t[0]],o,l=i.length;n<l;++n){for(var h=0,d=0;h<o;++h)d+=e[h][n][1]||0;i[n][1]+=i[n][0]=-d/2}stackOffsetNone(e,t)}}function stackOffsetWiggle(e,t){if(!(!((h=e.length)>0)||!((l=(o=e[t[0]]).length)>0))){for(var n=0,i=1,o,l,h;i<l;++i){for(var d=0,m=0,b=0;d<h;++d){for(var v=e[t[d]],w=v[i][1]||0,C=v[i-1][1]||0,R=(w-C)/2,T=0;T<d;++T){var E=e[t[T]],f=E[i][1]||0,g=E[i-1][1]||0;R+=f-g}m+=w,b+=R*w}o[i-1][1]+=o[i-1][0]=n,m&&(n-=b/m)}o[i-1][1]+=o[i-1][0]=n,stackOffsetNone(e,t)}}function _typeof$E(e){"@babel/helpers - typeof";return _typeof$E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$E(e)}var _excluded$c=["type","size","sizeType"];function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$m.apply(this,arguments)}function ownKeys$x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$x(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$x(Object(n),!0).forEach(function(i){_defineProperty$D(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$x(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$D(e,t,n){return t=_toPropertyKey$D(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$D(e){var t=_toPrimitive$D(e,"string");return _typeof$E(t)=="symbol"?t:t+""}function _toPrimitive$D(e,t){if(_typeof$E(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$E(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$c(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$c(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$c(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$1=Math.PI/180,getSymbolFactory=function(t){var n="symbol".concat(upperFirst(t));return symbolFactories[n]||symbolCircle},calculateAreaSize=function(t,n,i){if(n==="area")return t;switch(i){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var o=18*RADIAN$1;return 1.25*t*t*(Math.tan(o)-Math.tan(o*2)*Math.pow(Math.tan(o),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},registerSymbol=function(t,n){symbolFactories["symbol".concat(upperFirst(t))]=n},Symbols=function(t){var n=t.type,i=n===void 0?"circle":n,o=t.size,l=o===void 0?64:o,h=t.sizeType,d=h===void 0?"area":h,m=_objectWithoutProperties$c(t,_excluded$c),b=_objectSpread$x(_objectSpread$x({},m),{},{type:i,size:l,sizeType:d}),v=function(){var f=getSymbolFactory(i),g=Symbol$1().type(f).size(calculateAreaSize(l,d,i));return g()},w=b.className,C=b.cx,R=b.cy,T=filterProps(b,!0);return C===+C&&R===+R&&l===+l?React.createElement("path",_extends$m({},T,{className:clsx("recharts-symbols",w),transform:"translate(".concat(C,", ").concat(R,")"),d:v()})):null};Symbols.registerSymbol=registerSymbol;function _typeof$D(e){"@babel/helpers - typeof";return _typeof$D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$D(e)}function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$l.apply(this,arguments)}function ownKeys$w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$w(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$w(Object(n),!0).forEach(function(i){_defineProperty$C(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$w(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _classCallCheck$h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$C(i.key),i)}}function _createClass$h(e,t,n){return t&&_defineProperties$h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$d(e,t,n){return t=_getPrototypeOf$e(t),_possibleConstructorReturn$e(e,_isNativeReflectConstruct$e()?Reflect.construct(t,n||[],_getPrototypeOf$e(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$e(e,t){if(t&&(_typeof$D(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$e(e)}function _assertThisInitialized$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$e=function(){return!!e})()}function _getPrototypeOf$e(e){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$e(e)}function _inherits$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$e(e,t)}function _setPrototypeOf$e(e,t){return _setPrototypeOf$e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$e(e,t)}function _defineProperty$C(e,t,n){return t=_toPropertyKey$C(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$C(e){var t=_toPrimitive$C(e,"string");return _typeof$D(t)=="symbol"?t:t+""}function _toPrimitive$C(e,t){if(_typeof$D(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$D(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var SIZE=32,DefaultLegendContent=(function(e){function t(){return _classCallCheck$h(this,t),_callSuper$d(this,t,arguments)}return _inherits$e(t,e),_createClass$h(t,[{key:"renderIcon",value:function(i){var o=this.props.inactiveColor,l=SIZE/2,h=SIZE/6,d=SIZE/3,m=i.inactive?o:i.color;if(i.type==="plainline")return React.createElement("line",{strokeWidth:4,fill:"none",stroke:m,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:l,x2:SIZE,y2:l,className:"recharts-legend-icon"});if(i.type==="line")return React.createElement("path",{strokeWidth:4,fill:"none",stroke:m,d:"M0,".concat(l,"h").concat(d,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(2*d,",").concat(l,`
            H`).concat(SIZE,"M").concat(2*d,",").concat(l,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(d,",").concat(l),className:"recharts-legend-icon"});if(i.type==="rect")return React.createElement("path",{stroke:"none",fill:m,d:"M0,".concat(SIZE/8,"h").concat(SIZE,"v").concat(SIZE*3/4,"h").concat(-SIZE,"z"),className:"recharts-legend-icon"});if(React.isValidElement(i.legendIcon)){var b=_objectSpread$w({},i);return delete b.legendIcon,React.cloneElement(i.legendIcon,b)}return React.createElement(Symbols,{fill:m,cx:l,cy:l,size:SIZE,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,o=this.props,l=o.payload,h=o.iconSize,d=o.layout,m=o.formatter,b=o.inactiveColor,v={x:0,y:0,width:SIZE,height:SIZE},w={display:d==="horizontal"?"inline-block":"block",marginRight:10},C={display:"inline-block",verticalAlign:"middle",marginRight:4};return l.map(function(R,T){var E=R.formatter||m,f=clsx(_defineProperty$C(_defineProperty$C({"recharts-legend-item":!0},"legend-item-".concat(T),!0),"inactive",R.inactive));if(R.type==="none")return null;var g=isFunction(R.value)?null:R.value;warn(!isFunction(R.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=R.inactive?b:R.color;return React.createElement("li",_extends$l({className:f,style:w,key:"legend-item-".concat(T)},adaptEventsOfChild(i.props,R,T)),React.createElement(Surface,{width:h,height:h,viewBox:v,style:C},i.renderIcon(R)),React.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},E?E(g,R,T):g))})}},{key:"render",value:function(){var i=this.props,o=i.payload,l=i.layout,h=i.align;if(!o||!o.length)return null;var d={padding:0,margin:0,textAlign:l==="horizontal"?h:"left"};return React.createElement("ul",{className:"recharts-default-legend",style:d},this.renderItems())}}])})(reactExports.PureComponent);_defineProperty$C(DefaultLegendContent,"displayName","Legend");_defineProperty$C(DefaultLegendContent,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var e=require_ListCache();function t(){this.__data__=new e,this.size=0}return _stackClear=t,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function e(t){var n=this.__data__,i=n.delete(t);return this.size=n.size,i}return _stackDelete=e,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function e(t){return this.__data__.get(t)}return _stackGet=e,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function e(t){return this.__data__.has(t)}return _stackHas=e,_stackHas}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var e=require_ListCache(),t=require_Map(),n=require_MapCache(),i=200;function o(l,h){var d=this.__data__;if(d instanceof e){var m=d.__data__;if(!t||m.length<i-1)return m.push([l,h]),this.size=++d.size,this;d=this.__data__=new n(m)}return d.set(l,h),this.size=d.size,this}return _stackSet=o,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var e=require_ListCache(),t=require_stackClear(),n=require_stackDelete(),i=require_stackGet(),o=require_stackHas(),l=require_stackSet();function h(d){var m=this.__data__=new e(d);this.size=m.size}return h.prototype.clear=t,h.prototype.delete=n,h.prototype.get=i,h.prototype.has=o,h.prototype.set=l,_Stack=h,_Stack}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return _setCacheAdd=t,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function e(t){return this.__data__.has(t)}return _setCacheHas=e,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var e=require_MapCache(),t=require_setCacheAdd(),n=require_setCacheHas();function i(o){var l=-1,h=o==null?0:o.length;for(this.__data__=new e;++l<h;)this.add(o[l])}return i.prototype.add=i.prototype.push=t,i.prototype.has=n,_SetCache=i,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function e(t,n){for(var i=-1,o=t==null?0:t.length;++i<o;)if(n(t[i],i,t))return!0;return!1}return _arraySome=e,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function e(t,n){return t.has(n)}return _cacheHas=e,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var e=require_SetCache(),t=require_arraySome(),n=require_cacheHas(),i=1,o=2;function l(h,d,m,b,v,w){var C=m&i,R=h.length,T=d.length;if(R!=T&&!(C&&T>R))return!1;var E=w.get(h),f=w.get(d);if(E&&f)return E==d&&f==h;var g=-1,S=!0,O=m&o?new e:void 0;for(w.set(h,d),w.set(d,h);++g<R;){var D=h[g],M=d[g];if(b)var _=C?b(M,D,g,d,h,w):b(D,M,g,h,d,w);if(_!==void 0){if(_)continue;S=!1;break}if(O){if(!t(d,function(A,j){if(!n(O,j)&&(D===A||v(D,A,m,b,w)))return O.push(j)})){S=!1;break}}else if(!(D===M||v(D,M,m,b,w))){S=!1;break}}return w.delete(h),w.delete(d),S}return _equalArrays=l,_equalArrays}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var e=require_root(),t=e.Uint8Array;return _Uint8Array=t,_Uint8Array}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(o,l){i[++n]=[l,o]}),i}return _mapToArray=e,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(o){i[++n]=o}),i}return _setToArray=e,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var e=require_Symbol(),t=require_Uint8Array(),n=requireEq(),i=require_equalArrays(),o=require_mapToArray(),l=require_setToArray(),h=1,d=2,m="[object Boolean]",b="[object Date]",v="[object Error]",w="[object Map]",C="[object Number]",R="[object RegExp]",T="[object Set]",E="[object String]",f="[object Symbol]",g="[object ArrayBuffer]",S="[object DataView]",O=e?e.prototype:void 0,D=O?O.valueOf:void 0;function M(_,A,j,L,$,F,W){switch(j){case S:if(_.byteLength!=A.byteLength||_.byteOffset!=A.byteOffset)return!1;_=_.buffer,A=A.buffer;case g:return!(_.byteLength!=A.byteLength||!F(new t(_),new t(A)));case m:case b:case C:return n(+_,+A);case v:return _.name==A.name&&_.message==A.message;case R:case E:return _==A+"";case w:var U=o;case T:var q=L&h;if(U||(U=l),_.size!=A.size&&!q)return!1;var H=W.get(_);if(H)return H==A;L|=d,W.set(_,A);var Y=i(U(_),U(A),L,$,F,W);return W.delete(_),Y;case f:if(D)return D.call(_)==D.call(A)}return!1}return _equalByTag=M,_equalByTag}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function e(t,n){for(var i=-1,o=n.length,l=t.length;++i<o;)t[l+i]=n[i];return t}return _arrayPush=e,_arrayPush}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var e=require_arrayPush(),t=requireIsArray();function n(i,o,l){var h=o(i);return t(i)?h:e(h,l(i))}return _baseGetAllKeys=n,_baseGetAllKeys}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function e(t,n){for(var i=-1,o=t==null?0:t.length,l=0,h=[];++i<o;){var d=t[i];n(d,i,t)&&(h[l++]=d)}return h}return _arrayFilter=e,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function e(){return[]}return stubArray_1=e,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var e=require_arrayFilter(),t=requireStubArray(),n=Object.prototype,i=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,l=o?function(h){return h==null?[]:(h=Object(h),e(o(h),function(d){return i.call(h,d)}))}:t;return _getSymbols=l,_getSymbols}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function e(t,n){for(var i=-1,o=Array(t);++i<t;)o[i]=n(i);return o}return _baseTimes=e,_baseTimes}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var e=require_baseGetTag(),t=requireIsObjectLike(),n="[object Arguments]";function i(o){return t(o)&&e(o)==n}return _baseIsArguments=i,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var e=require_baseIsArguments(),t=requireIsObjectLike(),n=Object.prototype,i=n.hasOwnProperty,o=n.propertyIsEnumerable,l=e((function(){return arguments})())?e:function(h){return t(h)&&i.call(h,"callee")&&!o.call(h,"callee")};return isArguments_1=l,isArguments_1}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function e(){return!1}return stubFalse_1=e,stubFalse_1}isBuffer.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,(function(e,t){var n=require_root(),i=requireStubFalse(),o=t&&!t.nodeType&&t,l=o&&!0&&e&&!e.nodeType&&e,h=l&&l.exports===o,d=h?n.Buffer:void 0,m=d?d.isBuffer:void 0,b=m||i;e.exports=b})(isBuffer,isBuffer.exports)),isBuffer.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(i,o){var l=typeof i;return o=o??e,!!o&&(l=="number"||l!="symbol"&&t.test(i))&&i>-1&&i%1==0&&i<o}return _isIndex=n,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return isLength_1=t,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var e=require_baseGetTag(),t=requireIsLength(),n=requireIsObjectLike(),i="[object Arguments]",o="[object Array]",l="[object Boolean]",h="[object Date]",d="[object Error]",m="[object Function]",b="[object Map]",v="[object Number]",w="[object Object]",C="[object RegExp]",R="[object Set]",T="[object String]",E="[object WeakMap]",f="[object ArrayBuffer]",g="[object DataView]",S="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",M="[object Int16Array]",_="[object Int32Array]",A="[object Uint8Array]",j="[object Uint8ClampedArray]",L="[object Uint16Array]",$="[object Uint32Array]",F={};F[S]=F[O]=F[D]=F[M]=F[_]=F[A]=F[j]=F[L]=F[$]=!0,F[i]=F[o]=F[f]=F[l]=F[g]=F[h]=F[d]=F[m]=F[b]=F[v]=F[w]=F[C]=F[R]=F[T]=F[E]=!1;function W(U){return n(U)&&t(U.length)&&!!F[e(U)]}return _baseIsTypedArray=W,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function e(t){return function(n){return t(n)}}return _baseUnary=e,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,(function(e,t){var n=require_freeGlobal(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===i,h=l&&n.process,d=(function(){try{var m=o&&o.require&&o.require("util").types;return m||h&&h.binding&&h.binding("util")}catch{}})();e.exports=d})(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var e=require_baseIsTypedArray(),t=require_baseUnary(),n=require_nodeUtil(),i=n&&n.isTypedArray,o=i?t(i):e;return isTypedArray_1=o,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var e=require_baseTimes(),t=requireIsArguments(),n=requireIsArray(),i=requireIsBuffer(),o=require_isIndex(),l=requireIsTypedArray(),h=Object.prototype,d=h.hasOwnProperty;function m(b,v){var w=n(b),C=!w&&t(b),R=!w&&!C&&i(b),T=!w&&!C&&!R&&l(b),E=w||C||R||T,f=E?e(b.length,String):[],g=f.length;for(var S in b)(v||d.call(b,S))&&!(E&&(S=="length"||R&&(S=="offset"||S=="parent")||T&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||o(S,g)))&&f.push(S);return f}return _arrayLikeKeys=m,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var e=Object.prototype;function t(n){var i=n&&n.constructor,o=typeof i=="function"&&i.prototype||e;return n===o}return _isPrototype=t,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function e(t,n){return function(i){return t(n(i))}}return _overArg=e,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var e=require_overArg(),t=e(Object.keys,Object);return _nativeKeys=t,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var e=require_isPrototype(),t=require_nativeKeys(),n=Object.prototype,i=n.hasOwnProperty;function o(l){if(!e(l))return t(l);var h=[];for(var d in Object(l))i.call(l,d)&&d!="constructor"&&h.push(d);return h}return _baseKeys=o,_baseKeys}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var e=requireIsFunction(),t=requireIsLength();function n(i){return i!=null&&t(i.length)&&!e(i)}return isArrayLike_1=n,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var e=require_arrayLikeKeys(),t=require_baseKeys(),n=requireIsArrayLike();function i(o){return n(o)?e(o):t(o)}return keys_1=i,keys_1}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var e=require_baseGetAllKeys(),t=require_getSymbols(),n=requireKeys();function i(o){return e(o,n,t)}return _getAllKeys=i,_getAllKeys}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var e=require_getAllKeys(),t=1,n=Object.prototype,i=n.hasOwnProperty;function o(l,h,d,m,b,v){var w=d&t,C=e(l),R=C.length,T=e(h),E=T.length;if(R!=E&&!w)return!1;for(var f=R;f--;){var g=C[f];if(!(w?g in h:i.call(h,g)))return!1}var S=v.get(l),O=v.get(h);if(S&&O)return S==h&&O==l;var D=!0;v.set(l,h),v.set(h,l);for(var M=w;++f<R;){g=C[f];var _=l[g],A=h[g];if(m)var j=w?m(A,_,g,h,l,v):m(_,A,g,l,h,v);if(!(j===void 0?_===A||b(_,A,d,m,v):j)){D=!1;break}M||(M=g=="constructor")}if(D&&!M){var L=l.constructor,$=h.constructor;L!=$&&"constructor"in l&&"constructor"in h&&!(typeof L=="function"&&L instanceof L&&typeof $=="function"&&$ instanceof $)&&(D=!1)}return v.delete(l),v.delete(h),D}return _equalObjects=o,_equalObjects}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var e=require_getNative(),t=require_root(),n=e(t,"DataView");return _DataView=n,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var e=require_getNative(),t=require_root(),n=e(t,"Promise");return _Promise=n,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var e=require_getNative(),t=require_root(),n=e(t,"Set");return _Set=n,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var e=require_getNative(),t=require_root(),n=e(t,"WeakMap");return _WeakMap=n,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var e=require_DataView(),t=require_Map(),n=require_Promise(),i=require_Set(),o=require_WeakMap(),l=require_baseGetTag(),h=require_toSource(),d="[object Map]",m="[object Object]",b="[object Promise]",v="[object Set]",w="[object WeakMap]",C="[object DataView]",R=h(e),T=h(t),E=h(n),f=h(i),g=h(o),S=l;return(e&&S(new e(new ArrayBuffer(1)))!=C||t&&S(new t)!=d||n&&S(n.resolve())!=b||i&&S(new i)!=v||o&&S(new o)!=w)&&(S=function(O){var D=l(O),M=D==m?O.constructor:void 0,_=M?h(M):"";if(_)switch(_){case R:return C;case T:return d;case E:return b;case f:return v;case g:return w}return D}),_getTag=S,_getTag}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var e=require_Stack(),t=require_equalArrays(),n=require_equalByTag(),i=require_equalObjects(),o=require_getTag(),l=requireIsArray(),h=requireIsBuffer(),d=requireIsTypedArray(),m=1,b="[object Arguments]",v="[object Array]",w="[object Object]",C=Object.prototype,R=C.hasOwnProperty;function T(E,f,g,S,O,D){var M=l(E),_=l(f),A=M?v:o(E),j=_?v:o(f);A=A==b?w:A,j=j==b?w:j;var L=A==w,$=j==w,F=A==j;if(F&&h(E)){if(!h(f))return!1;M=!0,L=!1}if(F&&!L)return D||(D=new e),M||d(E)?t(E,f,g,S,O,D):n(E,f,A,g,S,O,D);if(!(g&m)){var W=L&&R.call(E,"__wrapped__"),U=$&&R.call(f,"__wrapped__");if(W||U){var q=W?E.value():E,H=U?f.value():f;return D||(D=new e),O(q,H,g,S,D)}}return F?(D||(D=new e),i(E,f,g,S,O,D)):!1}return _baseIsEqualDeep=T,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var e=require_baseIsEqualDeep(),t=requireIsObjectLike();function n(i,o,l,h,d){return i===o?!0:i==null||o==null||!t(i)&&!t(o)?i!==i&&o!==o:e(i,o,l,h,n,d)}return _baseIsEqual=n,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var e=require_Stack(),t=require_baseIsEqual(),n=1,i=2;function o(l,h,d,m){var b=d.length,v=b,w=!m;if(l==null)return!v;for(l=Object(l);b--;){var C=d[b];if(w&&C[2]?C[1]!==l[C[0]]:!(C[0]in l))return!1}for(;++b<v;){C=d[b];var R=C[0],T=l[R],E=C[1];if(w&&C[2]){if(T===void 0&&!(R in l))return!1}else{var f=new e;if(m)var g=m(T,E,R,l,h,f);if(!(g===void 0?t(E,T,n|i,m,f):g))return!1}}return!0}return _baseIsMatch=o,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var e=requireIsObject();function t(n){return n===n&&!e(n)}return _isStrictComparable=t,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var e=require_isStrictComparable(),t=requireKeys();function n(i){for(var o=t(i),l=o.length;l--;){var h=o[l],d=i[h];o[l]=[h,d,e(d)]}return o}return _getMatchData=n,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function e(t,n){return function(i){return i==null?!1:i[t]===n&&(n!==void 0||t in Object(i))}}return _matchesStrictComparable=e,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var e=require_baseIsMatch(),t=require_getMatchData(),n=require_matchesStrictComparable();function i(o){var l=t(o);return l.length==1&&l[0][2]?n(l[0][0],l[0][1]):function(h){return h===o||e(h,o,l)}}return _baseMatches=i,_baseMatches}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function e(t,n){return t!=null&&n in Object(t)}return _baseHasIn=e,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var e=require_castPath(),t=requireIsArguments(),n=requireIsArray(),i=require_isIndex(),o=requireIsLength(),l=require_toKey();function h(d,m,b){m=e(m,d);for(var v=-1,w=m.length,C=!1;++v<w;){var R=l(m[v]);if(!(C=d!=null&&b(d,R)))break;d=d[R]}return C||++v!=w?C:(w=d==null?0:d.length,!!w&&o(w)&&i(R,w)&&(n(d)||t(d)))}return _hasPath=h,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var e=require_baseHasIn(),t=require_hasPath();function n(i,o){return i!=null&&t(i,o,e)}return hasIn_1=n,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var e=require_baseIsEqual(),t=requireGet(),n=requireHasIn(),i=require_isKey(),o=require_isStrictComparable(),l=require_matchesStrictComparable(),h=require_toKey(),d=1,m=2;function b(v,w){return i(v)&&o(w)?l(h(v),w):function(C){var R=t(C,v);return R===void 0&&R===w?n(C,v):e(w,R,d|m)}}return _baseMatchesProperty=b,_baseMatchesProperty}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function e(t){return t}return identity_1=e,identity_1}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function e(t){return function(n){return n?.[t]}}return _baseProperty=e,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var e=require_baseGet();function t(n){return function(i){return e(i,n)}}return _basePropertyDeep=t,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var e=require_baseProperty(),t=require_basePropertyDeep(),n=require_isKey(),i=require_toKey();function o(l){return n(l)?e(i(l)):t(l)}return property_1=o,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var e=require_baseMatches(),t=require_baseMatchesProperty(),n=requireIdentity(),i=requireIsArray(),o=requireProperty();function l(h){return typeof h=="function"?h:h==null?n:typeof h=="object"?i(h)?t(h[0],h[1]):e(h):o(h)}return _baseIteratee=l,_baseIteratee}var _baseFindIndex,hasRequired_baseFindIndex;function require_baseFindIndex(){if(hasRequired_baseFindIndex)return _baseFindIndex;hasRequired_baseFindIndex=1;function e(t,n,i,o){for(var l=t.length,h=i+(o?1:-1);o?h--:++h<l;)if(n(t[h],h,t))return h;return-1}return _baseFindIndex=e,_baseFindIndex}var _baseIsNaN,hasRequired_baseIsNaN;function require_baseIsNaN(){if(hasRequired_baseIsNaN)return _baseIsNaN;hasRequired_baseIsNaN=1;function e(t){return t!==t}return _baseIsNaN=e,_baseIsNaN}var _strictIndexOf,hasRequired_strictIndexOf;function require_strictIndexOf(){if(hasRequired_strictIndexOf)return _strictIndexOf;hasRequired_strictIndexOf=1;function e(t,n,i){for(var o=i-1,l=t.length;++o<l;)if(t[o]===n)return o;return-1}return _strictIndexOf=e,_strictIndexOf}var _baseIndexOf,hasRequired_baseIndexOf;function require_baseIndexOf(){if(hasRequired_baseIndexOf)return _baseIndexOf;hasRequired_baseIndexOf=1;var e=require_baseFindIndex(),t=require_baseIsNaN(),n=require_strictIndexOf();function i(o,l,h){return l===l?n(o,l,h):e(o,t,h)}return _baseIndexOf=i,_baseIndexOf}var _arrayIncludes,hasRequired_arrayIncludes;function require_arrayIncludes(){if(hasRequired_arrayIncludes)return _arrayIncludes;hasRequired_arrayIncludes=1;var e=require_baseIndexOf();function t(n,i){var o=n==null?0:n.length;return!!o&&e(n,i,0)>-1}return _arrayIncludes=t,_arrayIncludes}var _arrayIncludesWith,hasRequired_arrayIncludesWith;function require_arrayIncludesWith(){if(hasRequired_arrayIncludesWith)return _arrayIncludesWith;hasRequired_arrayIncludesWith=1;function e(t,n,i){for(var o=-1,l=t==null?0:t.length;++o<l;)if(i(n,t[o]))return!0;return!1}return _arrayIncludesWith=e,_arrayIncludesWith}var noop_1,hasRequiredNoop;function requireNoop(){if(hasRequiredNoop)return noop_1;hasRequiredNoop=1;function e(){}return noop_1=e,noop_1}var _createSet,hasRequired_createSet;function require_createSet(){if(hasRequired_createSet)return _createSet;hasRequired_createSet=1;var e=require_Set(),t=requireNoop(),n=require_setToArray(),i=1/0,o=e&&1/n(new e([,-0]))[1]==i?function(l){return new e(l)}:t;return _createSet=o,_createSet}var _baseUniq,hasRequired_baseUniq;function require_baseUniq(){if(hasRequired_baseUniq)return _baseUniq;hasRequired_baseUniq=1;var e=require_SetCache(),t=require_arrayIncludes(),n=require_arrayIncludesWith(),i=require_cacheHas(),o=require_createSet(),l=require_setToArray(),h=200;function d(m,b,v){var w=-1,C=t,R=m.length,T=!0,E=[],f=E;if(v)T=!1,C=n;else if(R>=h){var g=b?null:o(m);if(g)return l(g);T=!1,C=i,f=new e}else f=b?[]:E;e:for(;++w<R;){var S=m[w],O=b?b(S):S;if(S=v||S!==0?S:0,T&&O===O){for(var D=f.length;D--;)if(f[D]===O)continue e;b&&f.push(O),E.push(S)}else C(f,O,v)||(f!==E&&f.push(O),E.push(S))}return E}return _baseUniq=d,_baseUniq}var uniqBy_1,hasRequiredUniqBy;function requireUniqBy(){if(hasRequiredUniqBy)return uniqBy_1;hasRequiredUniqBy=1;var e=require_baseIteratee(),t=require_baseUniq();function n(i,o){return i&&i.length?t(i,e(o,2)):[]}return uniqBy_1=n,uniqBy_1}var uniqByExports=requireUniqBy();const uniqBy=getDefaultExportFromCjs(uniqByExports);function getUniqPayload(e,t,n){return t===!0?uniqBy(e,n):isFunction(t)?uniqBy(e,t):e}function _typeof$C(e){"@babel/helpers - typeof";return _typeof$C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$C(e)}var _excluded$b=["ref"];function ownKeys$v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$v(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$v(Object(n),!0).forEach(function(i){_defineProperty$B(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$v(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _classCallCheck$g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$B(i.key),i)}}function _createClass$g(e,t,n){return t&&_defineProperties$g(e.prototype,t),n&&_defineProperties$g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$c(e,t,n){return t=_getPrototypeOf$d(t),_possibleConstructorReturn$d(e,_isNativeReflectConstruct$d()?Reflect.construct(t,n||[],_getPrototypeOf$d(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$d(e,t){if(t&&(_typeof$C(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$d(e)}function _assertThisInitialized$d(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$d=function(){return!!e})()}function _getPrototypeOf$d(e){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$d(e)}function _inherits$d(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$d(e,t)}function _setPrototypeOf$d(e,t){return _setPrototypeOf$d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$d(e,t)}function _defineProperty$B(e,t,n){return t=_toPropertyKey$B(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$B(e){var t=_toPrimitive$B(e,"string");return _typeof$C(t)=="symbol"?t:t+""}function _toPrimitive$B(e,t){if(_typeof$C(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$C(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _objectWithoutProperties$b(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$b(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$b(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function defaultUniqBy$1(e){return e.value}function renderContent$1(e,t){if(React.isValidElement(e))return React.cloneElement(e,t);if(typeof e=="function")return React.createElement(e,t);t.ref;var n=_objectWithoutProperties$b(t,_excluded$b);return React.createElement(DefaultLegendContent,n)}var EPS$1=1,Legend=(function(e){function t(){var n;_classCallCheck$g(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return n=_callSuper$c(this,t,[].concat(o)),_defineProperty$B(n,"lastBoundingBox",{width:-1,height:-1}),n}return _inherits$d(t,e),_createClass$g(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();return i.height=this.wrapperNode.offsetHeight,i.width=this.wrapperNode.offsetWidth,i}return null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate,o=this.getBBox();o?(Math.abs(o.width-this.lastBoundingBox.width)>EPS$1||Math.abs(o.height-this.lastBoundingBox.height)>EPS$1)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,i&&i(o)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?_objectSpread$v({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var o=this.props,l=o.layout,h=o.align,d=o.verticalAlign,m=o.margin,b=o.chartWidth,v=o.chartHeight,w,C;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(h==="center"&&l==="vertical"){var R=this.getBBoxSnapshot();w={left:((b||0)-R.width)/2}}else w=h==="right"?{right:m&&m.right||0}:{left:m&&m.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(d==="middle"){var T=this.getBBoxSnapshot();C={top:((v||0)-T.height)/2}}else C=d==="bottom"?{bottom:m&&m.bottom||0}:{top:m&&m.top||0};return _objectSpread$v(_objectSpread$v({},w),C)}},{key:"render",value:function(){var i=this,o=this.props,l=o.content,h=o.width,d=o.height,m=o.wrapperStyle,b=o.payloadUniqBy,v=o.payload,w=_objectSpread$v(_objectSpread$v({position:"absolute",width:h||"auto",height:d||"auto"},this.getDefaultPosition(m)),m);return React.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:function(R){i.wrapperNode=R}},renderContent$1(l,_objectSpread$v(_objectSpread$v({},this.props),{},{payload:getUniqPayload(v,b,defaultUniqBy$1)})))}}],[{key:"getWithHeight",value:function(i,o){var l=_objectSpread$v(_objectSpread$v({},this.defaultProps),i.props),h=l.layout;return h==="vertical"&&isNumber(i.props.height)?{height:i.props.height}:h==="horizontal"?{width:i.props.width||o}:null}}])})(reactExports.PureComponent);_defineProperty$B(Legend,"displayName","Legend");_defineProperty$B(Legend,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var _isFlattenable,hasRequired_isFlattenable;function require_isFlattenable(){if(hasRequired_isFlattenable)return _isFlattenable;hasRequired_isFlattenable=1;var e=require_Symbol(),t=requireIsArguments(),n=requireIsArray(),i=e?e.isConcatSpreadable:void 0;function o(l){return n(l)||t(l)||!!(i&&l&&l[i])}return _isFlattenable=o,_isFlattenable}var _baseFlatten,hasRequired_baseFlatten;function require_baseFlatten(){if(hasRequired_baseFlatten)return _baseFlatten;hasRequired_baseFlatten=1;var e=require_arrayPush(),t=require_isFlattenable();function n(i,o,l,h,d){var m=-1,b=i.length;for(l||(l=t),d||(d=[]);++m<b;){var v=i[m];o>0&&l(v)?o>1?n(v,o-1,l,h,d):e(d,v):h||(d[d.length]=v)}return d}return _baseFlatten=n,_baseFlatten}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function e(t){return function(n,i,o){for(var l=-1,h=Object(n),d=o(n),m=d.length;m--;){var b=d[t?m:++l];if(i(h[b],b,h)===!1)break}return n}}return _createBaseFor=e,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var e=require_createBaseFor(),t=e();return _baseFor=t,_baseFor}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var e=require_baseFor(),t=requireKeys();function n(i,o){return i&&e(i,o,t)}return _baseForOwn=n,_baseForOwn}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var e=requireIsArrayLike();function t(n,i){return function(o,l){if(o==null)return o;if(!e(o))return n(o,l);for(var h=o.length,d=i?h:-1,m=Object(o);(i?d--:++d<h)&&l(m[d],d,m)!==!1;);return o}}return _createBaseEach=t,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var e=require_baseForOwn(),t=require_createBaseEach(),n=t(e);return _baseEach=n,_baseEach}var _baseMap,hasRequired_baseMap;function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var e=require_baseEach(),t=requireIsArrayLike();function n(i,o){var l=-1,h=t(i)?Array(i.length):[];return e(i,function(d,m,b){h[++l]=o(d,m,b)}),h}return _baseMap=n,_baseMap}var _baseSortBy,hasRequired_baseSortBy;function require_baseSortBy(){if(hasRequired_baseSortBy)return _baseSortBy;hasRequired_baseSortBy=1;function e(t,n){var i=t.length;for(t.sort(n);i--;)t[i]=t[i].value;return t}return _baseSortBy=e,_baseSortBy}var _compareAscending,hasRequired_compareAscending;function require_compareAscending(){if(hasRequired_compareAscending)return _compareAscending;hasRequired_compareAscending=1;var e=requireIsSymbol();function t(n,i){if(n!==i){var o=n!==void 0,l=n===null,h=n===n,d=e(n),m=i!==void 0,b=i===null,v=i===i,w=e(i);if(!b&&!w&&!d&&n>i||d&&m&&v&&!b&&!w||l&&m&&v||!o&&v||!h)return 1;if(!l&&!d&&!w&&n<i||w&&o&&h&&!l&&!d||b&&o&&h||!m&&h||!v)return-1}return 0}return _compareAscending=t,_compareAscending}var _compareMultiple,hasRequired_compareMultiple;function require_compareMultiple(){if(hasRequired_compareMultiple)return _compareMultiple;hasRequired_compareMultiple=1;var e=require_compareAscending();function t(n,i,o){for(var l=-1,h=n.criteria,d=i.criteria,m=h.length,b=o.length;++l<m;){var v=e(h[l],d[l]);if(v){if(l>=b)return v;var w=o[l];return v*(w=="desc"?-1:1)}}return n.index-i.index}return _compareMultiple=t,_compareMultiple}var _baseOrderBy,hasRequired_baseOrderBy;function require_baseOrderBy(){if(hasRequired_baseOrderBy)return _baseOrderBy;hasRequired_baseOrderBy=1;var e=require_arrayMap(),t=require_baseGet(),n=require_baseIteratee(),i=require_baseMap(),o=require_baseSortBy(),l=require_baseUnary(),h=require_compareMultiple(),d=requireIdentity(),m=requireIsArray();function b(v,w,C){w.length?w=e(w,function(E){return m(E)?function(f){return t(f,E.length===1?E[0]:E)}:E}):w=[d];var R=-1;w=e(w,l(n));var T=i(v,function(E,f,g){var S=e(w,function(O){return O(E)});return{criteria:S,index:++R,value:E}});return o(T,function(E,f){return h(E,f,C)})}return _baseOrderBy=b,_baseOrderBy}var _apply,hasRequired_apply;function require_apply(){if(hasRequired_apply)return _apply;hasRequired_apply=1;function e(t,n,i){switch(i.length){case 0:return t.call(n);case 1:return t.call(n,i[0]);case 2:return t.call(n,i[0],i[1]);case 3:return t.call(n,i[0],i[1],i[2])}return t.apply(n,i)}return _apply=e,_apply}var _overRest,hasRequired_overRest;function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var e=require_apply(),t=Math.max;function n(i,o,l){return o=t(o===void 0?i.length-1:o,0),function(){for(var h=arguments,d=-1,m=t(h.length-o,0),b=Array(m);++d<m;)b[d]=h[o+d];d=-1;for(var v=Array(o+1);++d<o;)v[d]=h[d];return v[o]=l(b),e(i,this,v)}}return _overRest=n,_overRest}var constant_1,hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant_1;hasRequiredConstant=1;function e(t){return function(){return t}}return constant_1=e,constant_1}var _defineProperty$A,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty$A;hasRequired_defineProperty=1;var e=require_getNative(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return _defineProperty$A=t,_defineProperty$A}var _baseSetToString,hasRequired_baseSetToString;function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var e=requireConstant(),t=require_defineProperty(),n=requireIdentity(),i=t?function(o,l){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(l),writable:!0})}:n;return _baseSetToString=i,_baseSetToString}var _shortOut,hasRequired_shortOut;function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var e=800,t=16,n=Date.now;function i(o){var l=0,h=0;return function(){var d=n(),m=t-(d-h);if(h=d,m>0){if(++l>=e)return arguments[0]}else l=0;return o.apply(void 0,arguments)}}return _shortOut=i,_shortOut}var _setToString,hasRequired_setToString;function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var e=require_baseSetToString(),t=require_shortOut(),n=t(e);return _setToString=n,_setToString}var _baseRest,hasRequired_baseRest;function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var e=requireIdentity(),t=require_overRest(),n=require_setToString();function i(o,l){return n(t(o,l,e),o+"")}return _baseRest=i,_baseRest}var _isIterateeCall,hasRequired_isIterateeCall;function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var e=requireEq(),t=requireIsArrayLike(),n=require_isIndex(),i=requireIsObject();function o(l,h,d){if(!i(d))return!1;var m=typeof h;return(m=="number"?t(d)&&n(h,d.length):m=="string"&&h in d)?e(d[h],l):!1}return _isIterateeCall=o,_isIterateeCall}var sortBy_1,hasRequiredSortBy;function requireSortBy(){if(hasRequiredSortBy)return sortBy_1;hasRequiredSortBy=1;var e=require_baseFlatten(),t=require_baseOrderBy(),n=require_baseRest(),i=require_isIterateeCall(),o=n(function(l,h){if(l==null)return[];var d=h.length;return d>1&&i(l,h[0],h[1])?h=[]:d>2&&i(h[0],h[1],h[2])&&(h=[h[0]]),t(l,e(h,1),[])});return sortBy_1=o,sortBy_1}var sortByExports=requireSortBy();const sortBy=getDefaultExportFromCjs(sortByExports);function _typeof$B(e){"@babel/helpers - typeof";return _typeof$B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$B(e)}function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$k.apply(this,arguments)}function _slicedToArray$b(e,t){return _arrayWithHoles$c(e)||_iterableToArrayLimit$b(e,t)||_unsupportedIterableToArray$i(e,t)||_nonIterableRest$c()}function _nonIterableRest$c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$i(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$i(e,t)}}function _arrayLikeToArray$i(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$b(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t!==0)for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$c(e){if(Array.isArray(e))return e}function ownKeys$u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$u(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$u(Object(n),!0).forEach(function(i){_defineProperty$z(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$u(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$z(e,t,n){return t=_toPropertyKey$A(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$A(e){var t=_toPrimitive$A(e,"string");return _typeof$B(t)=="symbol"?t:t+""}function _toPrimitive$A(e,t){if(_typeof$B(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$B(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultFormatter(e){return Array.isArray(e)&&isNumOrStr(e[0])&&isNumOrStr(e[1])?e.join(" ~ "):e}var DefaultTooltipContent=function(t){var n=t.separator,i=n===void 0?" : ":n,o=t.contentStyle,l=o===void 0?{}:o,h=t.itemStyle,d=h===void 0?{}:h,m=t.labelStyle,b=m===void 0?{}:m,v=t.payload,w=t.formatter,C=t.itemSorter,R=t.wrapperClassName,T=t.labelClassName,E=t.label,f=t.labelFormatter,g=t.accessibilityLayer,S=g===void 0?!1:g,O=function(){if(v&&v.length){var W={padding:0,margin:0},U=(C?sortBy(v,C):v).map(function(q,H){if(q.type==="none")return null;var Y=_objectSpread$u({display:"block",paddingTop:4,paddingBottom:4,color:q.color||"#000"},d),Z=q.formatter||w||defaultFormatter,X=q.value,J=q.name,Q=X,G=J;if(Z&&Q!=null&&G!=null){var te=Z(X,J,q,H,v);if(Array.isArray(te)){var ue=_slicedToArray$b(te,2);Q=ue[0],G=ue[1]}else Q=te}return React.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:Y},isNumOrStr(G)?React.createElement("span",{className:"recharts-tooltip-item-name"},G):null,isNumOrStr(G)?React.createElement("span",{className:"recharts-tooltip-item-separator"},i):null,React.createElement("span",{className:"recharts-tooltip-item-value"},Q),React.createElement("span",{className:"recharts-tooltip-item-unit"},q.unit||""))});return React.createElement("ul",{className:"recharts-tooltip-item-list",style:W},U)}return null},D=_objectSpread$u({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},l),M=_objectSpread$u({margin:0},b),_=!isNil(E),A=_?E:"",j=clsx("recharts-default-tooltip",R),L=clsx("recharts-tooltip-label",T);_&&f&&v!==void 0&&v!==null&&(A=f(E,v));var $=S?{role:"status","aria-live":"assertive"}:{};return React.createElement("div",_extends$k({className:j,style:D},$),React.createElement("p",{className:L,style:M},React.isValidElement(A)?A:"".concat(A)),O())};function _typeof$A(e){"@babel/helpers - typeof";return _typeof$A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$A(e)}function _defineProperty$y(e,t,n){return t=_toPropertyKey$z(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$z(e){var t=_toPrimitive$z(e,"string");return _typeof$A(t)=="symbol"?t:t+""}function _toPrimitive$z(e,t){if(_typeof$A(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$A(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(e){var t=e.coordinate,n=e.translateX,i=e.translateY;return clsx(CSS_CLASS_PREFIX,_defineProperty$y(_defineProperty$y(_defineProperty$y(_defineProperty$y({},"".concat(CSS_CLASS_PREFIX,"-right"),isNumber(n)&&t&&isNumber(t.x)&&n>=t.x),"".concat(CSS_CLASS_PREFIX,"-left"),isNumber(n)&&t&&isNumber(t.x)&&n<t.x),"".concat(CSS_CLASS_PREFIX,"-bottom"),isNumber(i)&&t&&isNumber(t.y)&&i>=t.y),"".concat(CSS_CLASS_PREFIX,"-top"),isNumber(i)&&t&&isNumber(t.y)&&i<t.y))}function getTooltipTranslateXY(e){var t=e.allowEscapeViewBox,n=e.coordinate,i=e.key,o=e.offsetTopLeft,l=e.position,h=e.reverseDirection,d=e.tooltipDimension,m=e.viewBox,b=e.viewBoxDimension;if(l&&isNumber(l[i]))return l[i];var v=n[i]-d-o,w=n[i]+o;if(t[i])return h[i]?v:w;if(h[i]){var C=v,R=m[i];return C<R?Math.max(w,m[i]):Math.max(v,m[i])}var T=w+d,E=m[i]+b;return T>E?Math.max(v,m[i]):Math.max(w,m[i])}function getTransformStyle(e){var t=e.translateX,n=e.translateY,i=e.useTranslate3d;return{transform:i?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function getTooltipTranslate(e){var t=e.allowEscapeViewBox,n=e.coordinate,i=e.offsetTopLeft,o=e.position,l=e.reverseDirection,h=e.tooltipBox,d=e.useTranslate3d,m=e.viewBox,b,v,w;return h.height>0&&h.width>0&&n?(v=getTooltipTranslateXY({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:h.width,viewBox:m,viewBoxDimension:m.width}),w=getTooltipTranslateXY({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:i,position:o,reverseDirection:l,tooltipDimension:h.height,viewBox:m,viewBoxDimension:m.height}),b=getTransformStyle({translateX:v,translateY:w,useTranslate3d:d})):b=TOOLTIP_HIDDEN,{cssProperties:b,cssClasses:getTooltipCSSClassName({translateX:v,translateY:w,coordinate:n})}}function _typeof$z(e){"@babel/helpers - typeof";return _typeof$z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$z(e)}function ownKeys$t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$t(Object(n),!0).forEach(function(i){_defineProperty$x(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$t(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _classCallCheck$f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$y(i.key),i)}}function _createClass$f(e,t,n){return t&&_defineProperties$f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$b(e,t,n){return t=_getPrototypeOf$c(t),_possibleConstructorReturn$c(e,_isNativeReflectConstruct$c()?Reflect.construct(t,n||[],_getPrototypeOf$c(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$c(e,t){if(t&&(_typeof$z(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$c(e)}function _assertThisInitialized$c(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$c=function(){return!!e})()}function _getPrototypeOf$c(e){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$c(e)}function _inherits$c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$c(e,t)}function _setPrototypeOf$c(e,t){return _setPrototypeOf$c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$c(e,t)}function _defineProperty$x(e,t,n){return t=_toPropertyKey$y(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$y(e){var t=_toPrimitive$y(e,"string");return _typeof$z(t)=="symbol"?t:t+""}function _toPrimitive$y(e,t){if(_typeof$z(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$z(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var EPSILON=1,TooltipBoundingBox=(function(e){function t(){var n;_classCallCheck$f(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return n=_callSuper$b(this,t,[].concat(o)),_defineProperty$x(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_defineProperty$x(n,"handleKeyDown",function(h){if(h.key==="Escape"){var d,m,b,v;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(d=(m=n.props.coordinate)===null||m===void 0?void 0:m.x)!==null&&d!==void 0?d:0,y:(b=(v=n.props.coordinate)===null||v===void 0?void 0:v.y)!==null&&b!==void 0?b:0}})}}),n}return _inherits$c(t,e),_createClass$f(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.state.lastBoundingBox.width)>EPSILON||Math.abs(i.height-this.state.lastBoundingBox.height)>EPSILON)&&this.setState({lastBoundingBox:{width:i.width,height:i.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,o=this.props,l=o.active,h=o.allowEscapeViewBox,d=o.animationDuration,m=o.animationEasing,b=o.children,v=o.coordinate,w=o.hasPayload,C=o.isAnimationActive,R=o.offset,T=o.position,E=o.reverseDirection,f=o.useTranslate3d,g=o.viewBox,S=o.wrapperStyle,O=getTooltipTranslate({allowEscapeViewBox:h,coordinate:v,offsetTopLeft:R,position:T,reverseDirection:E,tooltipBox:this.state.lastBoundingBox,useTranslate3d:f,viewBox:g}),D=O.cssClasses,M=O.cssProperties,_=_objectSpread$t(_objectSpread$t({transition:C&&l?"transform ".concat(d,"ms ").concat(m):void 0},M),{},{pointerEvents:"none",visibility:!this.state.dismissed&&l&&w?"visible":"hidden",position:"absolute",top:0,left:0},S);return React.createElement("div",{tabIndex:-1,className:D,style:_,ref:function(j){i.wrapperNode=j}},b)}}])})(reactExports.PureComponent),parseIsSsrByDefault=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Global={isSsr:parseIsSsrByDefault()};function _typeof$y(e){"@babel/helpers - typeof";return _typeof$y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$y(e)}function ownKeys$s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$s(Object(n),!0).forEach(function(i){_defineProperty$w(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$s(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _classCallCheck$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$x(i.key),i)}}function _createClass$e(e,t,n){return t&&_defineProperties$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$a(e,t,n){return t=_getPrototypeOf$b(t),_possibleConstructorReturn$b(e,_isNativeReflectConstruct$b()?Reflect.construct(t,n||[],_getPrototypeOf$b(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$b(e,t){if(t&&(_typeof$y(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$b(e)}function _assertThisInitialized$b(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$b=function(){return!!e})()}function _getPrototypeOf$b(e){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$b(e)}function _inherits$b(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$b(e,t)}function _setPrototypeOf$b(e,t){return _setPrototypeOf$b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$b(e,t)}function _defineProperty$w(e,t,n){return t=_toPropertyKey$x(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$x(e){var t=_toPrimitive$x(e,"string");return _typeof$y(t)=="symbol"?t:t+""}function _toPrimitive$x(e,t){if(_typeof$y(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$y(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function defaultUniqBy(e){return e.dataKey}function renderContent(e,t){return React.isValidElement(e)?React.cloneElement(e,t):typeof e=="function"?React.createElement(e,t):React.createElement(DefaultTooltipContent,t)}var Tooltip=(function(e){function t(){return _classCallCheck$e(this,t),_callSuper$a(this,t,arguments)}return _inherits$b(t,e),_createClass$e(t,[{key:"render",value:function(){var i=this,o=this.props,l=o.active,h=o.allowEscapeViewBox,d=o.animationDuration,m=o.animationEasing,b=o.content,v=o.coordinate,w=o.filterNull,C=o.isAnimationActive,R=o.offset,T=o.payload,E=o.payloadUniqBy,f=o.position,g=o.reverseDirection,S=o.useTranslate3d,O=o.viewBox,D=o.wrapperStyle,M=T??[];w&&M.length&&(M=getUniqPayload(T.filter(function(A){return A.value!=null&&(A.hide!==!0||i.props.includeHidden)}),E,defaultUniqBy));var _=M.length>0;return React.createElement(TooltipBoundingBox,{allowEscapeViewBox:h,animationDuration:d,animationEasing:m,isAnimationActive:C,active:l,coordinate:v,hasPayload:_,offset:R,position:f,reverseDirection:g,useTranslate3d:S,viewBox:O,wrapperStyle:D},renderContent(b,_objectSpread$s(_objectSpread$s({},this.props),{},{payload:M})))}}])})(reactExports.PureComponent);_defineProperty$w(Tooltip,"displayName","Tooltip");_defineProperty$w(Tooltip,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Global.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var now_1,hasRequiredNow;function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var e=require_root(),t=function(){return e.Date.now()};return now_1=t,now_1}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var e=/\s/;function t(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return _trimmedEndIndex=t,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var e=require_trimmedEndIndex(),t=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(t,"")}return _baseTrim=n,_baseTrim}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var e=require_baseTrim(),t=requireIsObject(),n=requireIsSymbol(),i=NaN,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,h=/^0o[0-7]+$/i,d=parseInt;function m(b){if(typeof b=="number")return b;if(n(b))return i;if(t(b)){var v=typeof b.valueOf=="function"?b.valueOf():b;b=t(v)?v+"":v}if(typeof b!="string")return b===0?b:+b;b=e(b);var w=l.test(b);return w||h.test(b)?d(b.slice(2),w?2:8):o.test(b)?i:+b}return toNumber_1=m,toNumber_1}var debounce_1,hasRequiredDebounce;function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var e=requireIsObject(),t=requireNow(),n=requireToNumber(),i="Expected a function",o=Math.max,l=Math.min;function h(d,m,b){var v,w,C,R,T,E,f=0,g=!1,S=!1,O=!0;if(typeof d!="function")throw new TypeError(i);m=n(m)||0,e(b)&&(g=!!b.leading,S="maxWait"in b,C=S?o(n(b.maxWait)||0,m):C,O="trailing"in b?!!b.trailing:O);function D(U){var q=v,H=w;return v=w=void 0,f=U,R=d.apply(H,q),R}function M(U){return f=U,T=setTimeout(j,m),g?D(U):R}function _(U){var q=U-E,H=U-f,Y=m-q;return S?l(Y,C-H):Y}function A(U){var q=U-E,H=U-f;return E===void 0||q>=m||q<0||S&&H>=C}function j(){var U=t();if(A(U))return L(U);T=setTimeout(j,_(U))}function L(U){return T=void 0,O&&v?D(U):(v=w=void 0,R)}function $(){T!==void 0&&clearTimeout(T),f=0,v=E=w=T=void 0}function F(){return T===void 0?R:L(t())}function W(){var U=t(),q=A(U);if(v=arguments,w=this,E=U,q){if(T===void 0)return M(E);if(S)return clearTimeout(T),T=setTimeout(j,m),D(E)}return T===void 0&&(T=setTimeout(j,m)),R}return W.cancel=$,W.flush=F,W}return debounce_1=h,debounce_1}var throttle_1,hasRequiredThrottle;function requireThrottle(){if(hasRequiredThrottle)return throttle_1;hasRequiredThrottle=1;var e=requireDebounce(),t=requireIsObject(),n="Expected a function";function i(o,l,h){var d=!0,m=!0;if(typeof o!="function")throw new TypeError(n);return t(h)&&(d="leading"in h?!!h.leading:d,m="trailing"in h?!!h.trailing:m),e(o,l,{leading:d,maxWait:l,trailing:m})}return throttle_1=i,throttle_1}var throttleExports=requireThrottle();const throttle=getDefaultExportFromCjs(throttleExports);function _typeof$x(e){"@babel/helpers - typeof";return _typeof$x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$x(e)}function ownKeys$r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$r(Object(n),!0).forEach(function(i){_defineProperty$v(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$r(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$v(e,t,n){return t=_toPropertyKey$w(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$w(e){var t=_toPrimitive$w(e,"string");return _typeof$x(t)=="symbol"?t:t+""}function _toPrimitive$w(e,t){if(_typeof$x(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$x(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _slicedToArray$a(e,t){return _arrayWithHoles$b(e)||_iterableToArrayLimit$a(e,t)||_unsupportedIterableToArray$h(e,t)||_nonIterableRest$b()}function _nonIterableRest$b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$h(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$h(e,t)}}function _arrayLikeToArray$h(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$a(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t!==0)for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$b(e){if(Array.isArray(e))return e}var ResponsiveContainer=reactExports.forwardRef(function(e,t){var n=e.aspect,i=e.initialDimension,o=i===void 0?{width:-1,height:-1}:i,l=e.width,h=l===void 0?"100%":l,d=e.height,m=d===void 0?"100%":d,b=e.minWidth,v=b===void 0?0:b,w=e.minHeight,C=e.maxHeight,R=e.children,T=e.debounce,E=T===void 0?0:T,f=e.id,g=e.className,S=e.onResize,O=e.style,D=O===void 0?{}:O,M=reactExports.useRef(null),_=reactExports.useRef();_.current=S,reactExports.useImperativeHandle(t,function(){return Object.defineProperty(M.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),M.current},configurable:!0})});var A=reactExports.useState({containerWidth:o.width,containerHeight:o.height}),j=_slicedToArray$a(A,2),L=j[0],$=j[1],F=reactExports.useCallback(function(U,q){$(function(H){var Y=Math.round(U),Z=Math.round(q);return H.containerWidth===Y&&H.containerHeight===Z?H:{containerWidth:Y,containerHeight:Z}})},[]);reactExports.useEffect(function(){var U=function(J){var Q,G=J[0].contentRect,te=G.width,ue=G.height;F(te,ue),(Q=_.current)===null||Q===void 0||Q.call(_,te,ue)};E>0&&(U=throttle(U,E,{trailing:!0,leading:!1}));var q=new ResizeObserver(U),H=M.current.getBoundingClientRect(),Y=H.width,Z=H.height;return F(Y,Z),q.observe(M.current),function(){q.disconnect()}},[F,E]);var W=reactExports.useMemo(function(){var U=L.containerWidth,q=L.containerHeight;if(U<0||q<0)return null;warn(isPercent(h)||isPercent(m),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,h,m),warn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var H=isPercent(h)?U:h,Y=isPercent(m)?q:m;n&&n>0&&(H?Y=H/n:Y&&(H=Y*n),C&&Y>C&&(Y=C)),warn(H>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,Y,h,m,v,w,n);var Z=!Array.isArray(R)&&getDisplayName(R.type).endsWith("Chart");return React.Children.map(R,function(X){return React.isValidElement(X)?reactExports.cloneElement(X,_objectSpread$r({width:H,height:Y},Z?{style:_objectSpread$r({height:"100%",width:"100%",maxHeight:Y,maxWidth:H},X.props.style)}:{})):X})},[n,R,m,C,w,v,L,h]);return React.createElement("div",{id:f?"".concat(f):void 0,className:clsx("recharts-responsive-container",g),style:_objectSpread$r(_objectSpread$r({},D),{},{width:h,height:m,minWidth:v,minHeight:w,maxHeight:C}),ref:M},W)}),Cell=function(t){return null};Cell.displayName="Cell";function _typeof$w(e){"@babel/helpers - typeof";return _typeof$w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$w(e)}function ownKeys$q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$q(Object(n),!0).forEach(function(i){_defineProperty$u(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$q(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$u(e,t,n){return t=_toPropertyKey$v(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$v(e){var t=_toPrimitive$v(e,"string");return _typeof$w(t)=="symbol"?t:t+""}function _toPrimitive$v(e,t){if(_typeof$w(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$w(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var stringCache={widthCache:{},cacheCount:0},MAX_CACHE_NUM=2e3,SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function removeInvalidKeys(e){var t=_objectSpread$q({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var getStringSize=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Global.isSsr)return{width:0,height:0};var i=removeInvalidKeys(n),o=JSON.stringify({text:t,copyStyle:i});if(stringCache.widthCache[o])return stringCache.widthCache[o];try{var l=document.getElementById(MEASUREMENT_SPAN_ID);l||(l=document.createElement("span"),l.setAttribute("id",MEASUREMENT_SPAN_ID),l.setAttribute("aria-hidden","true"),document.body.appendChild(l));var h=_objectSpread$q(_objectSpread$q({},SPAN_STYLE),i);Object.assign(l.style,h),l.textContent="".concat(t);var d=l.getBoundingClientRect(),m={width:d.width,height:d.height};return stringCache.widthCache[o]=m,++stringCache.cacheCount>MAX_CACHE_NUM&&(stringCache.cacheCount=0,stringCache.widthCache={}),m}catch{return{width:0,height:0}}},getOffset=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function _typeof$v(e){"@babel/helpers - typeof";return _typeof$v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$v(e)}function _slicedToArray$9(e,t){return _arrayWithHoles$a(e)||_iterableToArrayLimit$9(e,t)||_unsupportedIterableToArray$g(e,t)||_nonIterableRest$a()}function _nonIterableRest$a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$g(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$g(e,t)}}function _arrayLikeToArray$g(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$9(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;m=!1}else for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$a(e){if(Array.isArray(e))return e}function _classCallCheck$d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$u(i.key),i)}}function _createClass$d(e,t,n){return t&&_defineProperties$d(e.prototype,t),n&&_defineProperties$d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey$u(e){var t=_toPrimitive$u(e,"string");return _typeof$v(t)=="symbol"?t:t+""}function _toPrimitive$u(e,t){if(_typeof$v(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$v(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(e,t){return e*CONVERSION_RATES[t]}var DecimalCSS=(function(){function e(t,n){_classCallCheck$d(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!CSS_LENGTH_UNIT_REGEX.test(n)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(n)&&(this.num=convertToPx(t,n),this.unit="px")}return _createClass$d(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var i,o=(i=NUM_SPLIT_REGEX.exec(n))!==null&&i!==void 0?i:[],l=_slicedToArray$9(o,3),h=l[1],d=l[2];return new e(parseFloat(h),d??"")}}])})();function calculateArithmetic(e){if(e.includes(STR_NAN))return STR_NAN;for(var t=e;t.includes("*")||t.includes("/");){var n,i=(n=MULTIPLY_OR_DIVIDE_REGEX.exec(t))!==null&&n!==void 0?n:[],o=_slicedToArray$9(i,4),l=o[1],h=o[2],d=o[3],m=DecimalCSS.parse(l??""),b=DecimalCSS.parse(d??""),v=h==="*"?m.multiply(b):m.divide(b);if(v.isNaN())return STR_NAN;t=t.replace(MULTIPLY_OR_DIVIDE_REGEX,v.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var w,C=(w=ADD_OR_SUBTRACT_REGEX.exec(t))!==null&&w!==void 0?w:[],R=_slicedToArray$9(C,4),T=R[1],E=R[2],f=R[3],g=DecimalCSS.parse(T??""),S=DecimalCSS.parse(f??""),O=E==="+"?g.add(S):g.subtract(S);if(O.isNaN())return STR_NAN;t=t.replace(ADD_OR_SUBTRACT_REGEX,O.toString())}return t}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(e){for(var t=e;t.includes("(");){var n=PARENTHESES_REGEX.exec(t),i=_slicedToArray$9(n,2),o=i[1];t=t.replace(PARENTHESES_REGEX,calculateArithmetic(o))}return t}function evaluateExpression(e){var t=e.replace(/\s+/g,"");return t=calculateParentheses(t),t=calculateArithmetic(t),t}function safeEvaluateExpression(e){try{return evaluateExpression(e)}catch{return STR_NAN}}function reduceCSSCalc(e){var t=safeEvaluateExpression(e.slice(5,-1));return t===STR_NAN?"":t}var _excluded$a=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$3=["dx","dy","angle","className","breakAll"];function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$j.apply(this,arguments)}function _objectWithoutProperties$a(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$a(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$a(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function _slicedToArray$8(e,t){return _arrayWithHoles$9(e)||_iterableToArrayLimit$8(e,t)||_unsupportedIterableToArray$f(e,t)||_nonIterableRest$9()}function _nonIterableRest$9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$f(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$f(e,t)}}function _arrayLikeToArray$f(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$8(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;m=!1}else for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$9(e){if(Array.isArray(e))return e}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=function(t){var n=t.children,i=t.breakAll,o=t.style;try{var l=[];isNil(n)||(i?l=n.toString().split(""):l=n.toString().split(BREAKING_SPACES));var h=l.map(function(m){return{word:m,width:getStringSize(m,o).width}}),d=i?0:getStringSize("",o).width;return{wordsWithComputedWidth:h,spaceWidth:d}}catch{return null}},calculateWordsByLines=function(t,n,i,o,l){var h=t.maxLines,d=t.children,m=t.style,b=t.breakAll,v=isNumber(h),w=d,C=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce(function(Y,Z){var X=Z.word,J=Z.width,Q=Y[Y.length-1];if(Q&&(o==null||l||Q.width+J+i<Number(o)))Q.words.push(X),Q.width+=J+i;else{var G={words:[X],width:J};Y.push(G)}return Y},[])},R=C(n),T=function(H){return H.reduce(function(Y,Z){return Y.width>Z.width?Y:Z})};if(!v)return R;for(var E="",f=function(H){var Y=w.slice(0,H),Z=calculateWordWidths({breakAll:b,style:m,children:Y+E}).wordsWithComputedWidth,X=C(Z),J=X.length>h||T(X).width>Number(o);return[J,X]},g=0,S=w.length-1,O=0,D;g<=S&&O<=w.length-1;){var M=Math.floor((g+S)/2),_=M-1,A=f(_),j=_slicedToArray$8(A,2),L=j[0],$=j[1],F=f(M),W=_slicedToArray$8(F,1),U=W[0];if(!L&&!U&&(g=M+1),L&&U&&(S=M-1),!L&&U){D=$;break}O++}return D||R},getWordsWithoutCalculate=function(t){var n=isNil(t)?[]:t.toString().split(BREAKING_SPACES);return[{words:n}]},getWordsByLines=function(t){var n=t.width,i=t.scaleToFit,o=t.children,l=t.style,h=t.breakAll,d=t.maxLines;if((n||i)&&!Global.isSsr){var m,b,v=calculateWordWidths({breakAll:h,children:o,style:l});if(v){var w=v.wordsWithComputedWidth,C=v.spaceWidth;m=w,b=C}else return getWordsWithoutCalculate(o);return calculateWordsByLines({breakAll:h,children:o,maxLines:d,style:l},m,b,n,i)}return getWordsWithoutCalculate(o)},DEFAULT_FILL="#808080",Text=function(t){var n=t.x,i=n===void 0?0:n,o=t.y,l=o===void 0?0:o,h=t.lineHeight,d=h===void 0?"1em":h,m=t.capHeight,b=m===void 0?"0.71em":m,v=t.scaleToFit,w=v===void 0?!1:v,C=t.textAnchor,R=C===void 0?"start":C,T=t.verticalAnchor,E=T===void 0?"end":T,f=t.fill,g=f===void 0?DEFAULT_FILL:f,S=_objectWithoutProperties$a(t,_excluded$a),O=reactExports.useMemo(function(){return getWordsByLines({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:w,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,w,S.style,S.width]),D=S.dx,M=S.dy,_=S.angle,A=S.className,j=S.breakAll,L=_objectWithoutProperties$a(S,_excluded2$3);if(!isNumOrStr(i)||!isNumOrStr(l))return null;var $=i+(isNumber(D)?D:0),F=l+(isNumber(M)?M:0),W;switch(E){case"start":W=reduceCSSCalc("calc(".concat(b,")"));break;case"middle":W=reduceCSSCalc("calc(".concat((O.length-1)/2," * -").concat(d," + (").concat(b," / 2))"));break;default:W=reduceCSSCalc("calc(".concat(O.length-1," * -").concat(d,")"));break}var U=[];if(w){var q=O[0].width,H=S.width;U.push("scale(".concat((isNumber(H)?H/q:1)/q,")"))}return _&&U.push("rotate(".concat(_,", ").concat($,", ").concat(F,")")),U.length&&(L.transform=U.join(" ")),React.createElement("text",_extends$j({},filterProps(L,!0),{x:$,y:F,className:clsx("recharts-text",A),textAnchor:R,fill:g.includes("url")?DEFAULT_FILL:g}),O.map(function(Y,Z){var X=Y.words.join(j?"":" ");return React.createElement("tspan",{x:$,dy:Z===0?W:d,key:"".concat(X,"-").concat(Z)},X)}))};function ascending(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,n,i;e.length!==2?(t=ascending,n=(d,m)=>ascending(e(d),m),i=(d,m)=>e(d)-m):(t=e===ascending||e===descending?e:zero$1,n=e,i=e);function o(d,m,b=0,v=d.length){if(b<v){if(t(m,m)!==0)return v;do{const w=b+v>>>1;n(d[w],m)<0?b=w+1:v=w}while(b<v)}return b}function l(d,m,b=0,v=d.length){if(b<v){if(t(m,m)!==0)return v;do{const w=b+v>>>1;n(d[w],m)<=0?b=w+1:v=w}while(b<v)}return b}function h(d,m,b=0,v=d.length){const w=o(d,m,b,v-1);return w>b&&i(d[w-1],m)>-i(d[w],m)?w-1:w}return{left:o,center:h,right:l}}function zero$1(){return 0}function number$2(e){return e===null?NaN:+e}function*numbers(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;class InternMap extends Map{constructor(t,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,o]of t)this.set(i,o)}get(t){return super.get(intern_get(this,t))}has(t){return super.has(intern_get(this,t))}set(t,n){return super.set(intern_set(this,t),n)}delete(t){return super.delete(intern_delete(this,t))}}function intern_get({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function intern_set({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function intern_delete({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function keyof(e){return e!==null&&typeof e=="object"?e.valueOf():e}function compareDefined(e=ascending){if(e===ascending)return ascendingDefined;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function ascendingDefined(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,n){const i=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(i)),l=i/Math.pow(10,o),h=l>=e10?10:l>=e5?5:l>=e2?2:1;let d,m,b;return o<0?(b=Math.pow(10,-o)/h,d=Math.round(e*b),m=Math.round(t*b),d/b<e&&++d,m/b>t&&--m,b=-b):(b=Math.pow(10,o)*h,d=Math.round(e/b),m=Math.round(t/b),d*b<e&&++d,m*b>t&&--m),m<d&&.5<=n&&n<2?tickSpec(e,t,n*2):[d,m,b]}function ticks(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[o,l,h]=i?tickSpec(t,e,n):tickSpec(e,t,n);if(!(l>=o))return[];const d=l-o+1,m=new Array(d);if(i)if(h<0)for(let b=0;b<d;++b)m[b]=(l-b)/-h;else for(let b=0;b<d;++b)m[b]=(l-b)*h;else if(h<0)for(let b=0;b<d;++b)m[b]=(o+b)/-h;else for(let b=0;b<d;++b)m[b]=(o+b)*h;return m}function tickIncrement(e,t,n){return t=+t,e=+e,n=+n,tickSpec(e,t,n)[2]}function tickStep(e,t,n){t=+t,e=+e,n=+n;const i=t<e,o=i?tickIncrement(t,e,n):tickIncrement(e,t,n);return(i?-1:1)*(o<0?1/-o:o)}function max$1(e,t){let n;for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function min$1(e,t){let n;for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function quickselect(e,t,n=0,i=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(o=o===void 0?ascendingDefined:compareDefined(o);i>n;){if(i-n>600){const m=i-n+1,b=t-n+1,v=Math.log(m),w=.5*Math.exp(2*v/3),C=.5*Math.sqrt(v*w*(m-w)/m)*(b-m/2<0?-1:1),R=Math.max(n,Math.floor(t-b*w/m+C)),T=Math.min(i,Math.floor(t+(m-b)*w/m+C));quickselect(e,t,R,T,o)}const l=e[t];let h=n,d=i;for(swap(e,n,t),o(e[i],l)>0&&swap(e,n,i);h<d;){for(swap(e,h,d),++h,--d;o(e[h],l)<0;)++h;for(;o(e[d],l)>0;)--d}o(e[n],l)===0?swap(e,n,d):(++d,swap(e,d,i)),d<=t&&(n=d+1),t<=d&&(i=d-1)}return e}function swap(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function quantile$1(e,t,n){if(e=Float64Array.from(numbers(e)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return min$1(e);if(t>=1)return max$1(e);var i,o=(i-1)*t,l=Math.floor(o),h=max$1(quickselect(e,l).subarray(0,l+1)),d=min$1(e.subarray(l+1));return h+(d-h)*(o-l)}}function quantileSorted(e,t,n=number$2){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,o=(i-1)*t,l=Math.floor(o),h=+n(e[l],l,e),d=+n(e[l+1],l+1,e);return h+(d-h)*(o-l)}}function range$2(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var i=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,l=new Array(o);++i<o;)l[i]=e+i*n;return l}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const implicit=Symbol("implicit");function ordinal(){var e=new InternMap,t=[],n=[],i=implicit;function o(l){let h=e.get(l);if(h===void 0){if(i!==implicit)return i;e.set(l,h=t.push(l)-1)}return n[h%n.length]}return o.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const h of l)e.has(h)||e.set(h,t.push(h)-1);return o},o.range=function(l){return arguments.length?(n=Array.from(l),o):n.slice()},o.unknown=function(l){return arguments.length?(i=l,o):i},o.copy=function(){return ordinal(t,n).unknown(i)},initRange.apply(o,arguments),o}function band(){var e=ordinal().unknown(void 0),t=e.domain,n=e.range,i=0,o=1,l,h,d=!1,m=0,b=0,v=.5;delete e.unknown;function w(){var C=t().length,R=o<i,T=R?o:i,E=R?i:o;l=(E-T)/Math.max(1,C-m+b*2),d&&(l=Math.floor(l)),T+=(E-T-l*(C-m))*v,h=l*(1-m),d&&(T=Math.round(T),h=Math.round(h));var f=range$2(C).map(function(g){return T+l*g});return n(R?f.reverse():f)}return e.domain=function(C){return arguments.length?(t(C),w()):t()},e.range=function(C){return arguments.length?([i,o]=C,i=+i,o=+o,w()):[i,o]},e.rangeRound=function(C){return[i,o]=C,i=+i,o=+o,d=!0,w()},e.bandwidth=function(){return h},e.step=function(){return l},e.round=function(C){return arguments.length?(d=!!C,w()):d},e.padding=function(C){return arguments.length?(m=Math.min(1,b=+C),w()):m},e.paddingInner=function(C){return arguments.length?(m=Math.min(1,C),w()):m},e.paddingOuter=function(C){return arguments.length?(b=+C,w()):b},e.align=function(C){return arguments.length?(v=Math.max(0,Math.min(1,C)),w()):v},e.copy=function(){return band(t(),[i,o]).round(d).paddingInner(m).paddingOuter(b).align(v)},initRange.apply(w(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rgbn(t):n===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rgba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba(e,t,n,i){return i<=0&&(e=t=n=NaN),new Rgb(e,t,n,i)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb$1(e,t,n,i){return arguments.length===1?rgbConvert(e):new Rgb(e,t,n,i??1)}function Rgb(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}define(Rgb,rgb$1,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,i)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),l=Math.max(t,n,i),h=NaN,d=l-o,m=(l+o)/2;return d?(t===l?h=(n-i)/d+(n<i)*6:n===l?h=(i-t)/d+2:h=(t-n)/d+4,d/=m<.5?l+o:2-l-o,h*=60):d=m>0&&m<1?0:h,new Hsl(h,d,m,e.opacity)}function hsl(e,t,n,i){return arguments.length===1?hslConvert(e):new Hsl(e,t,n,i??1)}function Hsl(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}define(Hsl,hsl,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new Rgb(hsl2rgb(e>=240?e-240:e+120,o,i),hsl2rgb(e,o,i),hsl2rgb(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const constant=e=>()=>e;function linear$1(e,t){return function(n){return e+n*t}}function exponential(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function gamma(e){return(e=+e)==1?nogamma:function(t,n){return n-t?exponential(t,n,e):constant(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?linear$1(e,n):constant(isNaN(e)?t:e)}const rgb=(function e(t){var n=gamma(t);function i(o,l){var h=n((o=rgb$1(o)).r,(l=rgb$1(l)).r),d=n(o.g,l.g),m=n(o.b,l.b),b=nogamma(o.opacity,l.opacity);return function(v){return o.r=h(v),o.g=d(v),o.b=m(v),o.opacity=b(v),o+""}}return i.gamma=e,i})(1);function numberArray(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),o;return function(l){for(o=0;o<n;++o)i[o]=e[o]*(1-l)+t[o]*l;return i}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,o=new Array(i),l=new Array(n),h;for(h=0;h<i;++h)o[h]=interpolate(e[h],t[h]);for(;h<n;++h)l[h]=t[h];return function(d){for(h=0;h<i;++h)l[h]=o[h](d);return l}}function date$1(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function interpolateNumber$1(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function object(e,t){var n={},i={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=interpolate(e[o],t[o]):i[o]=t[o];return function(l){for(o in n)i[o]=n[o](l);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function string(e,t){var n=reA.lastIndex=reB.lastIndex=0,i,o,l,h=-1,d=[],m=[];for(e=e+"",t=t+"";(i=reA.exec(e))&&(o=reB.exec(t));)(l=o.index)>n&&(l=t.slice(n,l),d[h]?d[h]+=l:d[++h]=l),(i=i[0])===(o=o[0])?d[h]?d[h]+=o:d[++h]=o:(d[++h]=null,m.push({i:h,x:interpolateNumber$1(i,o)})),n=reB.lastIndex;return n<t.length&&(l=t.slice(n),d[h]?d[h]+=l:d[++h]=l),d.length<2?m[0]?one(m[0].x):zero(t):(t=m.length,function(b){for(var v=0,w;v<t;++v)d[(w=m[v]).i]=w.x(b);return d.join("")})}function interpolate(e,t){var n=typeof t,i;return t==null||n==="boolean"?constant(t):(n==="number"?interpolateNumber$1:n==="string"?(i=color(t))?(t=i,rgb):string:t instanceof color?rgb:t instanceof Date?date$1:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object:interpolateNumber$1)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function piecewise(e,t){t===void 0&&(t=e,e=interpolate);for(var n=0,i=t.length-1,o=t[0],l=new Array(i<0?0:i);n<i;)l[n]=e(o,o=t[++n]);return function(h){var d=Math.max(0,Math.min(i-1,Math.floor(h*=i)));return l[d](h-d)}}function constants(e){return function(){return e}}function number$1(e){return+e}var unit=[0,1];function identity$4(e){return e}function normalize(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:constants(isNaN(t)?NaN:.5)}function clamper(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function bimap(e,t,n){var i=e[0],o=e[1],l=t[0],h=t[1];return o<i?(i=normalize(o,i),l=n(h,l)):(i=normalize(i,o),l=n(l,h)),function(d){return l(i(d))}}function polymap(e,t,n){var i=Math.min(e.length,t.length)-1,o=new Array(i),l=new Array(i),h=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<i;)o[h]=normalize(e[h],e[h+1]),l[h]=n(t[h],t[h+1]);return function(d){var m=bisectRight(e,d,1,i)-1;return l[m](o[m](d))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e=unit,t=unit,n=interpolate,i,o,l,h=identity$4,d,m,b;function v(){var C=Math.min(e.length,t.length);return h!==identity$4&&(h=clamper(e[0],e[C-1])),d=C>2?polymap:bimap,m=b=null,w}function w(C){return C==null||isNaN(C=+C)?l:(m||(m=d(e.map(i),t,n)))(i(h(C)))}return w.invert=function(C){return h(o((b||(b=d(t,e.map(i),interpolateNumber$1)))(C)))},w.domain=function(C){return arguments.length?(e=Array.from(C,number$1),v()):e.slice()},w.range=function(C){return arguments.length?(t=Array.from(C),v()):t.slice()},w.rangeRound=function(C){return t=Array.from(C),n=interpolateRound,v()},w.clamp=function(C){return arguments.length?(h=C?!0:identity$4,v()):h!==identity$4},w.interpolate=function(C){return arguments.length?(n=C,v()):n},w.unknown=function(C){return arguments.length?(l=C,w):l},function(C,R){return i=C,o=R,v()}}function continuous(){return transformer$2()(identity$4,identity$4)}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,t){return function(n,i){for(var o=n.length,l=[],h=0,d=e[0],m=0;o>0&&d>0&&(m+d+1>i&&(d=Math.max(1,i-m)),l.push(n.substring(o-=d,o+d)),!((m+=d+1)>i));)d=e[h=(h+1)%e.length];return l.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var t=e.length,n=1,i=-1,o;n<t;++n)switch(e[n]){case".":i=o=n;break;case"0":i===0&&(i=n),o=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(o+1):e}var prefixExponent;function formatPrefixAuto(e,t){var n=formatDecimalParts(e,t);if(!n)return prefixExponent=void 0,e.toPrecision(t);var i=n[0],o=n[1],l=o-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,h=i.length;return l===h?i:l>h?i+new Array(l-h+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+formatDecimalParts(e,Math.max(0,t+l-1))[0]}function formatRounded(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}const formatTypes={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(e*100,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$3(e){return e}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var t=e.grouping===void 0||e.thousands===void 0?identity$3:formatGroup(map$1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?identity$3:formatNumerals(map$1.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function b(w,C){w=formatSpecifier(w);var R=w.fill,T=w.align,E=w.sign,f=w.symbol,g=w.zero,S=w.width,O=w.comma,D=w.precision,M=w.trim,_=w.type;_==="n"?(O=!0,_="g"):formatTypes[_]||(D===void 0&&(D=12),M=!0,_="g"),(g||R==="0"&&T==="=")&&(g=!0,R="0",T="=");var A=(C&&C.prefix!==void 0?C.prefix:"")+(f==="$"?n:f==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():""),j=(f==="$"?i:/[%p]/.test(_)?h:"")+(C&&C.suffix!==void 0?C.suffix:""),L=formatTypes[_],$=/[defgprs%]/.test(_);D=D===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function F(W){var U=A,q=j,H,Y,Z;if(_==="c")q=L(W)+q,W="";else{W=+W;var X=W<0||1/W<0;if(W=isNaN(W)?m:L(Math.abs(W),D),M&&(W=formatTrim(W)),X&&+W==0&&E!=="+"&&(X=!1),U=(X?E==="("?E:d:E==="-"||E==="("?"":E)+U,q=(_==="s"&&!isNaN(W)&&prefixExponent!==void 0?prefixes[8+prefixExponent/3]:"")+q+(X&&E==="("?")":""),$){for(H=-1,Y=W.length;++H<Y;)if(Z=W.charCodeAt(H),48>Z||Z>57){q=(Z===46?o+W.slice(H+1):W.slice(H))+q,W=W.slice(0,H);break}}}O&&!g&&(W=t(W,1/0));var J=U.length+W.length+q.length,Q=J<S?new Array(S-J+1).join(R):"";switch(O&&g&&(W=t(Q+W,Q.length?S-q.length:1/0),Q=""),T){case"<":W=U+W+q+Q;break;case"=":W=U+Q+W+q;break;case"^":W=Q.slice(0,J=Q.length>>1)+U+W+q+Q.slice(J);break;default:W=Q+U+W+q;break}return l(W)}return F.toString=function(){return w+""},F}function v(w,C){var R=Math.max(-8,Math.min(8,Math.floor(exponent(C)/3)))*3,T=Math.pow(10,-R),E=b((w=formatSpecifier(w),w.type="f",w),{suffix:prefixes[8+R/3]});return function(f){return E(T*f)}}return{format:b,formatPrefix:v}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(e){return locale$1=formatLocale$1(e),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,n,i){var o=tickStep(e,t,n),l;switch(i=formatSpecifier(i??",f"),i.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(l=precisionPrefix(o,h))&&(i.precision=l),formatPrefix(i,h)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(l=precisionRound(o,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=l-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(l=precisionFixed(o))&&(i.precision=l-(i.type==="%")*2);break}}return format(i)}function linearish(e){var t=e.domain;return e.ticks=function(n){var i=t();return ticks(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var o=t();return tickFormat(o[0],o[o.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),o=0,l=i.length-1,h=i[o],d=i[l],m,b,v=10;for(d<h&&(b=h,h=d,d=b,b=o,o=l,l=b);v-- >0;){if(b=tickIncrement(h,d,n),b===m)return i[o]=h,i[l]=d,t(i);if(b>0)h=Math.floor(h/b)*b,d=Math.ceil(d/b)*b;else if(b<0)h=Math.ceil(h*b)/b,d=Math.floor(d*b)/b;else break;m=b}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function identity$2(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,number$1),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return identity$2(e).unknown(t)},e=arguments.length?Array.from(e,number$1):[0,1],linearish(n)}function nice(e,t){e=e.slice();var n=0,i=e.length-1,o=e[n],l=e[i],h;return l<o&&(h=n,n=i,i=h,h=o,o=l,l=h),e[n]=t.floor(o),e[i]=t.ceil(l),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return e===10?pow10:e===Math.E?Math.exp:t=>Math.pow(e,t)}function logp(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function reflect(e){return(t,n)=>-e(-t,n)}function loggish(e){const t=e(transformLog,transformExp),n=t.domain;let i=10,o,l;function h(){return o=logp(i),l=powp(i),n()[0]<0?(o=reflect(o),l=reflect(l),e(transformLogn,transformExpn)):e(transformLog,transformExp),t}return t.base=function(d){return arguments.length?(i=+d,h()):i},t.domain=function(d){return arguments.length?(n(d),h()):n()},t.ticks=d=>{const m=n();let b=m[0],v=m[m.length-1];const w=v<b;w&&([b,v]=[v,b]);let C=o(b),R=o(v),T,E;const f=d==null?10:+d;let g=[];if(!(i%1)&&R-C<f){if(C=Math.floor(C),R=Math.ceil(R),b>0){for(;C<=R;++C)for(T=1;T<i;++T)if(E=C<0?T/l(-C):T*l(C),!(E<b)){if(E>v)break;g.push(E)}}else for(;C<=R;++C)for(T=i-1;T>=1;--T)if(E=C>0?T/l(-C):T*l(C),!(E<b)){if(E>v)break;g.push(E)}g.length*2<f&&(g=ticks(b,v,f))}else g=ticks(C,R,Math.min(R-C,f)).map(l);return w?g.reverse():g},t.tickFormat=(d,m)=>{if(d==null&&(d=10),m==null&&(m=i===10?"s":","),typeof m!="function"&&(!(i%1)&&(m=formatSpecifier(m)).precision==null&&(m.trim=!0),m=format(m)),d===1/0)return m;const b=Math.max(1,i*d/t.ticks().length);return v=>{let w=v/l(Math.round(o(v)));return w*i<i-.5&&(w*=i),w<=b?m(v):""}},t.nice=()=>n(nice(n(),{floor:d=>l(Math.floor(o(d))),ceil:d=>l(Math.ceil(o(d)))})),t}function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$1(e,log()).base(e.base()),initRange.apply(e,arguments),e}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,n=e(transformSymlog(t),transformSymexp(t));return n.constant=function(i){return arguments.length?e(transformSymlog(t=+i),transformSymexp(t)):t},linearish(n)}function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$1(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(identity$4,identity$4),n=1;function i(){return n===1?e(identity$4,identity$4):n===.5?e(transformSqrt,transformSquare):e(transformPow(n),transformPow(1/n))}return t.exponent=function(o){return arguments.length?(n=+o,i()):n},linearish(t)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$1(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e=continuous(),t=[0,1],n=!1,i;function o(l){var h=unsquare(e(l));return isNaN(h)?i:n?Math.round(h):h}return o.invert=function(l){return e.invert(square(l))},o.domain=function(l){return arguments.length?(e.domain(l),o):e.domain()},o.range=function(l){return arguments.length?(e.range((t=Array.from(l,number$1)).map(square)),o):t.slice()},o.rangeRound=function(l){return o.range(l).round(!0)},o.round=function(l){return arguments.length?(n=!!l,o):n},o.clamp=function(l){return arguments.length?(e.clamp(l),o):e.clamp()},o.unknown=function(l){return arguments.length?(i=l,o):i},o.copy=function(){return radial(e.domain(),t).round(n).clamp(e.clamp()).unknown(i)},initRange.apply(o,arguments),linearish(o)}function quantile(){var e=[],t=[],n=[],i;function o(){var h=0,d=Math.max(1,t.length);for(n=new Array(d-1);++h<d;)n[h-1]=quantileSorted(e,h/d);return l}function l(h){return h==null||isNaN(h=+h)?i:t[bisectRight(n,h)]}return l.invertExtent=function(h){var d=t.indexOf(h);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},l.domain=function(h){if(!arguments.length)return e.slice();e=[];for(let d of h)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(ascending),o()},l.range=function(h){return arguments.length?(t=Array.from(h),o()):t.slice()},l.unknown=function(h){return arguments.length?(i=h,l):i},l.quantiles=function(){return n.slice()},l.copy=function(){return quantile().domain(e).range(t).unknown(i)},initRange.apply(l,arguments)}function quantize(){var e=0,t=1,n=1,i=[.5],o=[0,1],l;function h(m){return m!=null&&m<=m?o[bisectRight(i,m,0,n)]:l}function d(){var m=-1;for(i=new Array(n);++m<n;)i[m]=((m+1)*t-(m-n)*e)/(n+1);return h}return h.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,d()):[e,t]},h.range=function(m){return arguments.length?(n=(o=Array.from(m)).length-1,d()):o.slice()},h.invertExtent=function(m){var b=o.indexOf(m);return b<0?[NaN,NaN]:b<1?[e,i[0]]:b>=n?[i[n-1],t]:[i[b-1],i[b]]},h.unknown=function(m){return arguments.length&&(l=m),h},h.thresholds=function(){return i.slice()},h.copy=function(){return quantize().domain([e,t]).range(o).unknown(l)},initRange.apply(linearish(h),arguments)}function threshold(){var e=[.5],t=[0,1],n,i=1;function o(l){return l!=null&&l<=l?t[bisectRight(e,l,0,i)]:n}return o.domain=function(l){return arguments.length?(e=Array.from(l),i=Math.min(e.length,t.length-1),o):e.slice()},o.range=function(l){return arguments.length?(t=Array.from(l),i=Math.min(e.length,t.length-1),o):t.slice()},o.invertExtent=function(l){var h=t.indexOf(l);return[e[h-1],e[h]]},o.unknown=function(l){return arguments.length?(n=l,o):n},o.copy=function(){return threshold().domain(e).range(t).unknown(n)},initRange.apply(o,arguments)}const t0=new Date,t1=new Date;function timeInterval(e,t,n,i){function o(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return o.floor=l=>(e(l=new Date(+l)),l),o.ceil=l=>(e(l=new Date(l-1)),t(l,1),e(l),l),o.round=l=>{const h=o(l),d=o.ceil(l);return l-h<d-l?h:d},o.offset=(l,h)=>(t(l=new Date(+l),h==null?1:Math.floor(h)),l),o.range=(l,h,d)=>{const m=[];if(l=o.ceil(l),d=d==null?1:Math.floor(d),!(l<h)||!(d>0))return m;let b;do m.push(b=new Date(+l)),t(l,d),e(l);while(b<l&&l<h);return m},o.filter=l=>timeInterval(h=>{if(h>=h)for(;e(h),!l(h);)h.setTime(h-1)},(h,d)=>{if(h>=h)if(d<0)for(;++d<=0;)for(;t(h,-1),!l(h););else for(;--d>=0;)for(;t(h,1),!l(h););}),n&&(o.count=(l,h)=>(t0.setTime(+l),t1.setTime(+h),e(t0),e(t1),Math.floor(n(t0,t1))),o.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?o.filter(i?h=>i(h)%l===0:h=>o.count(0,h)%l===0):o)),o}const millisecond=timeInterval(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);millisecond.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?timeInterval(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*durationSecond)},(e,t)=>(t-e)/durationSecond,e=>e.getUTCSeconds());second.range;const timeMinute=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getMinutes());timeMinute.range;const utcMinute=timeInterval(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getHours());timeHour.range;const utcHour=timeInterval(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getUTCHours());utcHour.range;const timeDay=timeInterval(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay,e=>e.getDate()-1);timeDay.range;const utcDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>e.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>Math.floor(e/durationDay));unixDay.range;function timeWeekday(e){return timeInterval(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(e){return timeInterval(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());timeMonth.range;const utcMonth=timeInterval(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());utcMonth.range;const timeYear=timeInterval(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());timeYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});timeYear.range;const utcYear=timeInterval(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());utcYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});utcYear.range;function ticker(e,t,n,i,o,l){const h=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[l,1,durationMinute],[l,5,5*durationMinute],[l,15,15*durationMinute],[l,30,30*durationMinute],[o,1,durationHour],[o,3,3*durationHour],[o,6,6*durationHour],[o,12,12*durationHour],[i,1,durationDay],[i,2,2*durationDay],[n,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[e,1,durationYear]];function d(b,v,w){const C=v<b;C&&([b,v]=[v,b]);const R=w&&typeof w.range=="function"?w:m(b,v,w),T=R?R.range(b,+v+1):[];return C?T.reverse():T}function m(b,v,w){const C=Math.abs(v-b)/w,R=bisector(([,,f])=>f).right(h,C);if(R===h.length)return e.every(tickStep(b/durationYear,v/durationYear,w));if(R===0)return millisecond.every(Math.max(tickStep(b,v,w),1));const[T,E]=h[C/h[R-1][2]<h[R][2]/C?R-1:R];return T.every(E)}return[d,m]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,n=e.date,i=e.time,o=e.periods,l=e.days,h=e.shortDays,d=e.months,m=e.shortMonths,b=formatRe(o),v=formatLookup(o),w=formatRe(l),C=formatLookup(l),R=formatRe(h),T=formatLookup(h),E=formatRe(d),f=formatLookup(d),g=formatRe(m),S=formatLookup(m),O={a:Z,A:X,b:J,B:Q,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:G,q:te,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},D={a:ue,A:de,b:xe,B:ve,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Se,q:Ee,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},M={a:$,A:F,b:W,B:U,c:q,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:L,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:H,X:Y,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};O.x=_(n,O),O.X=_(i,O),O.c=_(t,O),D.x=_(n,D),D.X=_(i,D),D.c=_(t,D);function _(he,Re){return function(je){var Ce=[],Le=-1,me=0,Ie=he.length,Ve,nt,it;for(je instanceof Date||(je=new Date(+je));++Le<Ie;)he.charCodeAt(Le)===37&&(Ce.push(he.slice(me,Le)),(nt=pads[Ve=he.charAt(++Le)])!=null?Ve=he.charAt(++Le):nt=Ve==="e"?" ":"0",(it=Re[Ve])&&(Ve=it(je,nt)),Ce.push(Ve),me=Le+1);return Ce.push(he.slice(me,Le)),Ce.join("")}}function A(he,Re){return function(je){var Ce=newDate(1900,void 0,1),Le=j(Ce,he,je+="",0),me,Ie;if(Le!=je.length)return null;if("Q"in Ce)return new Date(Ce.Q);if("s"in Ce)return new Date(Ce.s*1e3+("L"in Ce?Ce.L:0));if(Re&&!("Z"in Ce)&&(Ce.Z=0),"p"in Ce&&(Ce.H=Ce.H%12+Ce.p*12),Ce.m===void 0&&(Ce.m="q"in Ce?Ce.q:0),"V"in Ce){if(Ce.V<1||Ce.V>53)return null;"w"in Ce||(Ce.w=1),"Z"in Ce?(me=utcDate(newDate(Ce.y,0,1)),Ie=me.getUTCDay(),me=Ie>4||Ie===0?utcMonday.ceil(me):utcMonday(me),me=utcDay.offset(me,(Ce.V-1)*7),Ce.y=me.getUTCFullYear(),Ce.m=me.getUTCMonth(),Ce.d=me.getUTCDate()+(Ce.w+6)%7):(me=localDate(newDate(Ce.y,0,1)),Ie=me.getDay(),me=Ie>4||Ie===0?timeMonday.ceil(me):timeMonday(me),me=timeDay.offset(me,(Ce.V-1)*7),Ce.y=me.getFullYear(),Ce.m=me.getMonth(),Ce.d=me.getDate()+(Ce.w+6)%7)}else("W"in Ce||"U"in Ce)&&("w"in Ce||(Ce.w="u"in Ce?Ce.u%7:"W"in Ce?1:0),Ie="Z"in Ce?utcDate(newDate(Ce.y,0,1)).getUTCDay():localDate(newDate(Ce.y,0,1)).getDay(),Ce.m=0,Ce.d="W"in Ce?(Ce.w+6)%7+Ce.W*7-(Ie+5)%7:Ce.w+Ce.U*7-(Ie+6)%7);return"Z"in Ce?(Ce.H+=Ce.Z/100|0,Ce.M+=Ce.Z%100,utcDate(Ce)):localDate(Ce)}}function j(he,Re,je,Ce){for(var Le=0,me=Re.length,Ie=je.length,Ve,nt;Le<me;){if(Ce>=Ie)return-1;if(Ve=Re.charCodeAt(Le++),Ve===37){if(Ve=Re.charAt(Le++),nt=M[Ve in pads?Re.charAt(Le++):Ve],!nt||(Ce=nt(he,je,Ce))<0)return-1}else if(Ve!=je.charCodeAt(Ce++))return-1}return Ce}function L(he,Re,je){var Ce=b.exec(Re.slice(je));return Ce?(he.p=v.get(Ce[0].toLowerCase()),je+Ce[0].length):-1}function $(he,Re,je){var Ce=R.exec(Re.slice(je));return Ce?(he.w=T.get(Ce[0].toLowerCase()),je+Ce[0].length):-1}function F(he,Re,je){var Ce=w.exec(Re.slice(je));return Ce?(he.w=C.get(Ce[0].toLowerCase()),je+Ce[0].length):-1}function W(he,Re,je){var Ce=g.exec(Re.slice(je));return Ce?(he.m=S.get(Ce[0].toLowerCase()),je+Ce[0].length):-1}function U(he,Re,je){var Ce=E.exec(Re.slice(je));return Ce?(he.m=f.get(Ce[0].toLowerCase()),je+Ce[0].length):-1}function q(he,Re,je){return j(he,t,Re,je)}function H(he,Re,je){return j(he,n,Re,je)}function Y(he,Re,je){return j(he,i,Re,je)}function Z(he){return h[he.getDay()]}function X(he){return l[he.getDay()]}function J(he){return m[he.getMonth()]}function Q(he){return d[he.getMonth()]}function G(he){return o[+(he.getHours()>=12)]}function te(he){return 1+~~(he.getMonth()/3)}function ue(he){return h[he.getUTCDay()]}function de(he){return l[he.getUTCDay()]}function xe(he){return m[he.getUTCMonth()]}function ve(he){return d[he.getUTCMonth()]}function Se(he){return o[+(he.getUTCHours()>=12)]}function Ee(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var Re=_(he+="",O);return Re.toString=function(){return he},Re},parse:function(he){var Re=A(he+="",!1);return Re.toString=function(){return he},Re},utcFormat:function(he){var Re=_(he+="",D);return Re.toString=function(){return he},Re},utcParse:function(he){var Re=A(he+="",!0);return Re.toString=function(){return he},Re}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,t,n){var i=e<0?"-":"",o=(i?-e:e)+"",l=o.length;return i+(l<n?new Array(n-l+1).join(t)+o:o)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function parseWeekdayNumberSunday(e,t,n){var i=numberRe.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var i=numberRe.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function parseWeekNumberSunday(e,t,n){var i=numberRe.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function parseWeekNumberISO(e,t,n){var i=numberRe.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function parseWeekNumberMonday(e,t,n){var i=numberRe.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function parseFullYear(e,t,n){var i=numberRe.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function parseYear(e,t,n){var i=numberRe.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function parseZone(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function parseQuarter(e,t,n){var i=numberRe.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function parseMonthNumber(e,t,n){var i=numberRe.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function parseDayOfMonth(e,t,n){var i=numberRe.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function parseDayOfYear(e,t,n){var i=numberRe.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function parseHour24(e,t,n){var i=numberRe.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function parseMinutes(e,t,n){var i=numberRe.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function parseSeconds(e,t,n){var i=numberRe.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function parseMilliseconds(e,t,n){var i=numberRe.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function parseMicroseconds(e,t,n){var i=numberRe.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function parseLiteralPercent(e,t,n){var i=percentRe.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function parseUnixTimestamp(e,t,n){var i=numberRe.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var i=numberRe.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return t===0?7:t}function formatWeekNumberSunday(e,t){return pad(timeSunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||t===0?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(timeYear(e).getDay()===4),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(timeMonday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return e=dISO(e),pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var n=e.getDay();return e=n>=4||n===0?timeThursday(e):timeThursday.ceil(e),pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return t===0?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||t===0?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(utcYear(e).getUTCDay()===4),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return e=UTCdISO(e),pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var n=e.getUTCDay();return e=n>=4||n===0?utcThursday(e):utcThursday.ceil(e),pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(e){return locale=formatLocale(e),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(e){return new Date(e)}function number(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,n,i,o,l,h,d,m,b){var v=continuous(),w=v.invert,C=v.domain,R=b(".%L"),T=b(":%S"),E=b("%I:%M"),f=b("%I %p"),g=b("%a %d"),S=b("%b %d"),O=b("%B"),D=b("%Y");function M(_){return(m(_)<_?R:d(_)<_?T:h(_)<_?E:l(_)<_?f:i(_)<_?o(_)<_?g:S:n(_)<_?O:D)(_)}return v.invert=function(_){return new Date(w(_))},v.domain=function(_){return arguments.length?C(Array.from(_,number)):C().map(date)},v.ticks=function(_){var A=C();return e(A[0],A[A.length-1],_??10)},v.tickFormat=function(_,A){return A==null?M:b(A)},v.nice=function(_){var A=C();return(!_||typeof _.range!="function")&&(_=t(A[0],A[A.length-1],_??10)),_?C(nice(A,_)):v},v.copy=function(){return copy$1(v,calendar(e,t,n,i,o,l,h,d,m,b))},v}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var e=0,t=1,n,i,o,l,h=identity$4,d=!1,m;function b(w){return w==null||isNaN(w=+w)?m:h(o===0?.5:(w=(l(w)-n)*o,d?Math.max(0,Math.min(1,w)):w))}b.domain=function(w){return arguments.length?([e,t]=w,n=l(e=+e),i=l(t=+t),o=n===i?0:1/(i-n),b):[e,t]},b.clamp=function(w){return arguments.length?(d=!!w,b):d},b.interpolator=function(w){return arguments.length?(h=w,b):h};function v(w){return function(C){var R,T;return arguments.length?([R,T]=C,h=w(R,T),b):[h(0),h(1)]}}return b.range=v(interpolate),b.rangeRound=v(interpolateRound),b.unknown=function(w){return arguments.length?(m=w,b):m},function(w){return l=w,n=w(e),i=w(t),o=n===i?0:1/(i-n),b}}function copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(transformer$1()(identity$4));return e.copy=function(){return copy(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)}function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var e=[],t=identity$4;function n(i){if(i!=null&&!isNaN(i=+i))return t((bisectRight(e,i,1)-1)/(e.length-1))}return n.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(ascending),n},n.interpolator=function(i){return arguments.length?(t=i,n):t},n.range=function(){return e.map((i,o)=>t(o/(e.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(o,l)=>quantile$1(e,l/i))},n.copy=function(){return sequentialQuantile(t).domain(e)},initInterpolator.apply(n,arguments)}function transformer(){var e=0,t=.5,n=1,i=1,o,l,h,d,m,b=identity$4,v,w=!1,C;function R(E){return isNaN(E=+E)?C:(E=.5+((E=+v(E))-l)*(i*E<i*l?d:m),b(w?Math.max(0,Math.min(1,E)):E))}R.domain=function(E){return arguments.length?([e,t,n]=E,o=v(e=+e),l=v(t=+t),h=v(n=+n),d=o===l?0:.5/(l-o),m=l===h?0:.5/(h-l),i=l<o?-1:1,R):[e,t,n]},R.clamp=function(E){return arguments.length?(w=!!E,R):w},R.interpolator=function(E){return arguments.length?(b=E,R):b};function T(E){return function(f){var g,S,O;return arguments.length?([g,S,O]=f,b=piecewise(E,[g,S,O]),R):[b(0),b(.5),b(1)]}}return R.range=T(interpolate),R.rangeRound=T(interpolateRound),R.unknown=function(E){return arguments.length?(C=E,R):C},function(E){return v=E,o=E(e),l=E(t),h=E(n),d=o===l?0:.5/(l-o),m=l===h?0:.5/(h-l),i=l<o?-1:1,R}}function diverging(){var e=linearish(transformer()(identity$4));return e.copy=function(){return copy(e,diverging())},initInterpolator.apply(e,arguments)}function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)}function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$2,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var _baseExtremum,hasRequired_baseExtremum;function require_baseExtremum(){if(hasRequired_baseExtremum)return _baseExtremum;hasRequired_baseExtremum=1;var e=requireIsSymbol();function t(n,i,o){for(var l=-1,h=n.length;++l<h;){var d=n[l],m=i(d);if(m!=null&&(b===void 0?m===m&&!e(m):o(m,b)))var b=m,v=d}return v}return _baseExtremum=t,_baseExtremum}var _baseGt,hasRequired_baseGt;function require_baseGt(){if(hasRequired_baseGt)return _baseGt;hasRequired_baseGt=1;function e(t,n){return t>n}return _baseGt=e,_baseGt}var max_1,hasRequiredMax;function requireMax(){if(hasRequiredMax)return max_1;hasRequiredMax=1;var e=require_baseExtremum(),t=require_baseGt(),n=requireIdentity();function i(o){return o&&o.length?e(o,n,t):void 0}return max_1=i,max_1}var maxExports=requireMax();const max=getDefaultExportFromCjs(maxExports);var _baseLt,hasRequired_baseLt;function require_baseLt(){if(hasRequired_baseLt)return _baseLt;hasRequired_baseLt=1;function e(t,n){return t<n}return _baseLt=e,_baseLt}var min_1,hasRequiredMin;function requireMin(){if(hasRequiredMin)return min_1;hasRequiredMin=1;var e=require_baseExtremum(),t=require_baseLt(),n=requireIdentity();function i(o){return o&&o.length?e(o,n,t):void 0}return min_1=i,min_1}var minExports=requireMin();const min=getDefaultExportFromCjs(minExports);var map_1,hasRequiredMap;function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var e=require_arrayMap(),t=require_baseIteratee(),n=require_baseMap(),i=requireIsArray();function o(l,h){var d=i(l)?e:n;return d(l,t(h,3))}return map_1=o,map_1}var flatMap_1,hasRequiredFlatMap;function requireFlatMap(){if(hasRequiredFlatMap)return flatMap_1;hasRequiredFlatMap=1;var e=require_baseFlatten(),t=requireMap();function n(i,o){return e(t(i,o),1)}return flatMap_1=n,flatMap_1}var flatMapExports=requireFlatMap();const flatMap=getDefaultExportFromCjs(flatMapExports);var isEqual_1,hasRequiredIsEqual;function requireIsEqual(){if(hasRequiredIsEqual)return isEqual_1;hasRequiredIsEqual=1;var e=require_baseIsEqual();function t(n,i){return e(n,i)}return isEqual_1=t,isEqual_1}var isEqualExports=requireIsEqual();const isEqual=getDefaultExportFromCjs(isEqualExports);var MAX_DIGITS=1e9,defaults={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};P.comparedTo=P.cmp=function(e){var t,n,i,o,l=this;if(e=new l.constructor(e),l.s!==e.s)return l.s||-e.s;if(l.e!==e.e)return l.e>e.e^l.s<0?1:-1;for(i=l.d.length,o=e.d.length,t=0,n=i<o?i:o;t<n;++t)if(l.d[t]!==e.d[t])return l.d[t]>e.d[t]^l.s<0?1:-1;return i===o?0:i>o^l.s<0?1:-1};P.decimalPlaces=P.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*LOG_BASE;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};P.dividedBy=P.div=function(e){return divide(this,new this.constructor(e))};P.dividedToIntegerBy=P.idiv=function(e){var t=this,n=t.constructor;return round(divide(t,new n(e),0,1),n.precision)};P.equals=P.eq=function(e){return!this.cmp(e)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(e){return this.cmp(e)>0};P.greaterThanOrEqualTo=P.gte=function(e){return this.cmp(e)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(e){return this.cmp(e)<0};P.lessThanOrEqualTo=P.lte=function(e){return this.cmp(e)<1};P.logarithm=P.log=function(e){var t,n=this,i=n.constructor,o=i.precision,l=o+5;if(e===void 0)e=new i(10);else if(e=new i(e),e.s<1||e.eq(ONE))throw Error(decimalError+"NaN");if(n.s<1)throw Error(decimalError+(n.s?"NaN":"-Infinity"));return n.eq(ONE)?new i(0):(external=!1,t=divide(ln(n,l),ln(e,l),l),external=!0,round(t,o))};P.minus=P.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?subtract(t,e):add(t,(e.s=-e.s,e))};P.modulo=P.mod=function(e){var t,n=this,i=n.constructor,o=i.precision;if(e=new i(e),!e.s)throw Error(decimalError+"NaN");return n.s?(external=!1,t=divide(n,e,0,1).times(e),external=!0,n.minus(t)):round(new i(n),o)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};P.plus=P.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?add(t,e):subtract(t,(e.s=-e.s,e))};P.precision=P.sd=function(e){var t,n,i,o=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(invalidArgument+e);if(t=getBase10Exponent(o)+1,i=o.d.length-1,n=i*LOG_BASE+1,i=o.d[i],i){for(;i%10==0;i/=10)n--;for(i=o.d[0];i>=10;i/=10)n++}return e&&t>n?t:n};P.squareRoot=P.sqrt=function(){var e,t,n,i,o,l,h,d=this,m=d.constructor;if(d.s<1){if(!d.s)return new m(0);throw Error(decimalError+"NaN")}for(e=getBase10Exponent(d),external=!1,o=Math.sqrt(+d),o==0||o==1/0?(t=digitsToString(d.d),(t.length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=mathfloor((e+1)/2)-(e<0||e%2),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),i=new m(t)):i=new m(o.toString()),n=m.precision,o=h=n+3;;)if(l=i,i=l.plus(divide(d,l,h+2)).times(.5),digitsToString(l.d).slice(0,h)===(t=digitsToString(i.d)).slice(0,h)){if(t=t.slice(h-3,h+1),o==h&&t=="4999"){if(round(l,n+1,0),l.times(l).eq(d)){i=l;break}}else if(t!="9999")break;h+=4}return external=!0,round(i,n)};P.times=P.mul=function(e){var t,n,i,o,l,h,d,m,b,v=this,w=v.constructor,C=v.d,R=(e=new w(e)).d;if(!v.s||!e.s)return new w(0);for(e.s*=v.s,n=v.e+e.e,m=C.length,b=R.length,m<b&&(l=C,C=R,R=l,h=m,m=b,b=h),l=[],h=m+b,i=h;i--;)l.push(0);for(i=b;--i>=0;){for(t=0,o=m+i;o>i;)d=l[o]+R[i]*C[o-i-1]+t,l[o--]=d%BASE|0,t=d/BASE|0;l[o]=(l[o]+t)%BASE|0}for(;!l[--h];)l.pop();return t?++n:l.shift(),e.d=l,e.e=n,external?round(e,w.precision):e};P.toDecimalPlaces=P.todp=function(e,t){var n=this,i=n.constructor;return n=new i(n),e===void 0?n:(checkInt32(e,0,MAX_DIGITS),t===void 0?t=i.rounding:checkInt32(t,0,8),round(n,e+getBase10Exponent(n)+1,t))};P.toExponential=function(e,t){var n,i=this,o=i.constructor;return e===void 0?n=toString$1(i,!0):(checkInt32(e,0,MAX_DIGITS),t===void 0?t=o.rounding:checkInt32(t,0,8),i=round(new o(i),e+1,t),n=toString$1(i,!0,e+1)),n};P.toFixed=function(e,t){var n,i,o=this,l=o.constructor;return e===void 0?toString$1(o):(checkInt32(e,0,MAX_DIGITS),t===void 0?t=l.rounding:checkInt32(t,0,8),i=round(new l(o),e+getBase10Exponent(o)+1,t),n=toString$1(i.abs(),!1,e+getBase10Exponent(i)+1),o.isneg()&&!o.isZero()?"-"+n:n)};P.toInteger=P.toint=function(){var e=this,t=e.constructor;return round(new t(e),getBase10Exponent(e)+1,t.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(e){var t,n,i,o,l,h,d=this,m=d.constructor,b=12,v=+(e=new m(e));if(!e.s)return new m(ONE);if(d=new m(d),!d.s){if(e.s<1)throw Error(decimalError+"Infinity");return d}if(d.eq(ONE))return d;if(i=m.precision,e.eq(ONE))return round(d,i);if(t=e.e,n=e.d.length-1,h=t>=n,l=d.s,h){if((n=v<0?-v:v)<=MAX_SAFE_INTEGER){for(o=new m(ONE),t=Math.ceil(i/LOG_BASE+4),external=!1;n%2&&(o=o.times(d),truncate(o.d,t)),n=mathfloor(n/2),n!==0;)d=d.times(d),truncate(d.d,t);return external=!0,e.s<0?new m(ONE).div(o):round(o,i)}}else if(l<0)throw Error(decimalError+"NaN");return l=l<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,external=!1,o=e.times(ln(d,i+b)),external=!0,o=exp(o),o.s=l,o};P.toPrecision=function(e,t){var n,i,o=this,l=o.constructor;return e===void 0?(n=getBase10Exponent(o),i=toString$1(o,n<=l.toExpNeg||n>=l.toExpPos)):(checkInt32(e,1,MAX_DIGITS),t===void 0?t=l.rounding:checkInt32(t,0,8),o=round(new l(o),e,t),n=getBase10Exponent(o),i=toString$1(o,e<=n||n<=l.toExpNeg,e)),i};P.toSignificantDigits=P.tosd=function(e,t){var n=this,i=n.constructor;return e===void 0?(e=i.precision,t=i.rounding):(checkInt32(e,1,MAX_DIGITS),t===void 0?t=i.rounding:checkInt32(t,0,8)),round(new i(n),e,t)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=getBase10Exponent(e),n=e.constructor;return toString$1(e,t<=n.toExpNeg||t>=n.toExpPos)};function add(e,t){var n,i,o,l,h,d,m,b,v=e.constructor,w=v.precision;if(!e.s||!t.s)return t.s||(t=new v(e)),external?round(t,w):t;if(m=e.d,b=t.d,h=e.e,o=t.e,m=m.slice(),l=h-o,l){for(l<0?(i=m,l=-l,d=b.length):(i=b,o=h,d=m.length),h=Math.ceil(w/LOG_BASE),d=h>d?h+1:d+1,l>d&&(l=d,i.length=1),i.reverse();l--;)i.push(0);i.reverse()}for(d=m.length,l=b.length,d-l<0&&(l=d,i=b,b=m,m=i),n=0;l;)n=(m[--l]=m[l]+b[l]+n)/BASE|0,m[l]%=BASE;for(n&&(m.unshift(n),++o),d=m.length;m[--d]==0;)m.pop();return t.d=m,t.e=o,external?round(t,w):t}function checkInt32(e,t,n){if(e!==~~e||e<t||e>n)throw Error(invalidArgument+e)}function digitsToString(e){var t,n,i,o=e.length-1,l="",h=e[0];if(o>0){for(l+=h,t=1;t<o;t++)i=e[t]+"",n=LOG_BASE-i.length,n&&(l+=getZeroString(n)),l+=i;h=e[t],i=h+"",n=LOG_BASE-i.length,n&&(l+=getZeroString(n))}else if(h===0)return"0";for(;h%10===0;)h/=10;return l+h}var divide=(function(){function e(i,o){var l,h=0,d=i.length;for(i=i.slice();d--;)l=i[d]*o+h,i[d]=l%BASE|0,h=l/BASE|0;return h&&i.unshift(h),i}function t(i,o,l,h){var d,m;if(l!=h)m=l>h?1:-1;else for(d=m=0;d<l;d++)if(i[d]!=o[d]){m=i[d]>o[d]?1:-1;break}return m}function n(i,o,l){for(var h=0;l--;)i[l]-=h,h=i[l]<o[l]?1:0,i[l]=h*BASE+i[l]-o[l];for(;!i[0]&&i.length>1;)i.shift()}return function(i,o,l,h){var d,m,b,v,w,C,R,T,E,f,g,S,O,D,M,_,A,j,L=i.constructor,$=i.s==o.s?1:-1,F=i.d,W=o.d;if(!i.s)return new L(i);if(!o.s)throw Error(decimalError+"Division by zero");for(m=i.e-o.e,A=W.length,M=F.length,R=new L($),T=R.d=[],b=0;W[b]==(F[b]||0);)++b;if(W[b]>(F[b]||0)&&--m,l==null?S=l=L.precision:h?S=l+(getBase10Exponent(i)-getBase10Exponent(o))+1:S=l,S<0)return new L(0);if(S=S/LOG_BASE+2|0,b=0,A==1)for(v=0,W=W[0],S++;(b<M||v)&&S--;b++)O=v*BASE+(F[b]||0),T[b]=O/W|0,v=O%W|0;else{for(v=BASE/(W[0]+1)|0,v>1&&(W=e(W,v),F=e(F,v),A=W.length,M=F.length),D=A,E=F.slice(0,A),f=E.length;f<A;)E[f++]=0;j=W.slice(),j.unshift(0),_=W[0],W[1]>=BASE/2&&++_;do v=0,d=t(W,E,A,f),d<0?(g=E[0],A!=f&&(g=g*BASE+(E[1]||0)),v=g/_|0,v>1?(v>=BASE&&(v=BASE-1),w=e(W,v),C=w.length,f=E.length,d=t(w,E,C,f),d==1&&(v--,n(w,A<C?j:W,C))):(v==0&&(d=v=1),w=W.slice()),C=w.length,C<f&&w.unshift(0),n(E,w,f),d==-1&&(f=E.length,d=t(W,E,A,f),d<1&&(v++,n(E,A<f?j:W,f))),f=E.length):d===0&&(v++,E=[0]),T[b++]=v,d&&E[0]?E[f++]=F[D]||0:(E=[F[D]],f=1);while((D++<M||E[0]!==void 0)&&S--)}return T[0]||T.shift(),R.e=m,round(R,h?l+getBase10Exponent(R)+1:l)}})();function exp(e,t){var n,i,o,l,h,d,m=0,b=0,v=e.constructor,w=v.precision;if(getBase10Exponent(e)>16)throw Error(exponentOutOfRange+getBase10Exponent(e));if(!e.s)return new v(ONE);for(external=!1,d=w,h=new v(.03125);e.abs().gte(.1);)e=e.times(h),b+=5;for(i=Math.log(mathpow(2,b))/Math.LN10*2+5|0,d+=i,n=o=l=new v(ONE),v.precision=d;;){if(o=round(o.times(e),d),n=n.times(++m),h=l.plus(divide(o,n,d)),digitsToString(h.d).slice(0,d)===digitsToString(l.d).slice(0,d)){for(;b--;)l=round(l.times(l),d);return v.precision=w,t==null?(external=!0,round(l,w)):l}l=h}}function getBase10Exponent(e){for(var t=e.e*LOG_BASE,n=e.d[0];n>=10;n/=10)t++;return t}function getLn10(e,t,n){if(t>e.LN10.sd())throw external=!0,n&&(e.precision=n),Error(decimalError+"LN10 precision limit exceeded");return round(new e(e.LN10),t)}function getZeroString(e){for(var t="";e--;)t+="0";return t}function ln(e,t){var n,i,o,l,h,d,m,b,v,w=1,C=10,R=e,T=R.d,E=R.constructor,f=E.precision;if(R.s<1)throw Error(decimalError+(R.s?"NaN":"-Infinity"));if(R.eq(ONE))return new E(0);if(t==null?(external=!1,b=f):b=t,R.eq(10))return t==null&&(external=!0),getLn10(E,b);if(b+=C,E.precision=b,n=digitsToString(T),i=n.charAt(0),l=getBase10Exponent(R),Math.abs(l)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)R=R.times(e),n=digitsToString(R.d),i=n.charAt(0),w++;l=getBase10Exponent(R),i>1?(R=new E("0."+n),l++):R=new E(i+"."+n.slice(1))}else return m=getLn10(E,b+2,f).times(l+""),R=ln(new E(i+"."+n.slice(1)),b-C).plus(m),E.precision=f,t==null?(external=!0,round(R,f)):R;for(d=h=R=divide(R.minus(ONE),R.plus(ONE),b),v=round(R.times(R),b),o=3;;){if(h=round(h.times(v),b),m=d.plus(divide(h,new E(o),b)),digitsToString(m.d).slice(0,b)===digitsToString(d.d).slice(0,b))return d=d.times(2),l!==0&&(d=d.plus(getLn10(E,b+2,f).times(l+""))),d=divide(d,new E(w),b),E.precision=f,t==null?(external=!0,round(d,f)):d;d=m,o+=2}}function parseDecimal(e,t){var n,i,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charCodeAt(i)===48;)++i;for(o=t.length;t.charCodeAt(o-1)===48;)--o;if(t=t.slice(i,o),t){if(o-=i,n=n-i-1,e.e=mathfloor(n/LOG_BASE),e.d=[],i=(n+1)%LOG_BASE,n<0&&(i+=LOG_BASE),i<o){for(i&&e.d.push(+t.slice(0,i)),o-=LOG_BASE;i<o;)e.d.push(+t.slice(i,i+=LOG_BASE));t=t.slice(i),i=LOG_BASE-t.length}else i-=o;for(;i--;)t+="0";if(e.d.push(+t),external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+n)}else e.s=0,e.e=0,e.d=[0];return e}function round(e,t,n){var i,o,l,h,d,m,b,v,w=e.d;for(h=1,l=w[0];l>=10;l/=10)h++;if(i=t-h,i<0)i+=LOG_BASE,o=t,b=w[v=0];else{if(v=Math.ceil((i+1)/LOG_BASE),l=w.length,v>=l)return e;for(b=l=w[v],h=1;l>=10;l/=10)h++;i%=LOG_BASE,o=i-LOG_BASE+h}if(n!==void 0&&(l=mathpow(10,h-o-1),d=b/l%10|0,m=t<0||w[v+1]!==void 0||b%l,m=n<4?(d||m)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||m||n==6&&(i>0?o>0?b/mathpow(10,h-o):0:w[v-1])%10&1||n==(e.s<0?8:7))),t<1||!w[0])return m?(l=getBase10Exponent(e),w.length=1,t=t-l-1,w[0]=mathpow(10,(LOG_BASE-t%LOG_BASE)%LOG_BASE),e.e=mathfloor(-t/LOG_BASE)||0):(w.length=1,w[0]=e.e=e.s=0),e;if(i==0?(w.length=v,l=1,v--):(w.length=v+1,l=mathpow(10,LOG_BASE-i),w[v]=o>0?(b/mathpow(10,h-o)%mathpow(10,o)|0)*l:0),m)for(;;)if(v==0){(w[0]+=l)==BASE&&(w[0]=1,++e.e);break}else{if(w[v]+=l,w[v]!=BASE)break;w[v--]=0,l=1}for(i=w.length;w[--i]===0;)w.pop();if(external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(e));return e}function subtract(e,t){var n,i,o,l,h,d,m,b,v,w,C=e.constructor,R=C.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new C(e),external?round(t,R):t;if(m=e.d,w=t.d,i=t.e,b=e.e,m=m.slice(),h=b-i,h){for(v=h<0,v?(n=m,h=-h,d=w.length):(n=w,i=b,d=m.length),o=Math.max(Math.ceil(R/LOG_BASE),d)+2,h>o&&(h=o,n.length=1),n.reverse(),o=h;o--;)n.push(0);n.reverse()}else{for(o=m.length,d=w.length,v=o<d,v&&(d=o),o=0;o<d;o++)if(m[o]!=w[o]){v=m[o]<w[o];break}h=0}for(v&&(n=m,m=w,w=n,t.s=-t.s),d=m.length,o=w.length-d;o>0;--o)m[d++]=0;for(o=w.length;o>h;){if(m[--o]<w[o]){for(l=o;l&&m[--l]===0;)m[l]=BASE-1;--m[l],m[o]+=BASE}m[o]-=w[o]}for(;m[--d]===0;)m.pop();for(;m[0]===0;m.shift())--i;return m[0]?(t.d=m,t.e=i,external?round(t,R):t):new C(0)}function toString$1(e,t,n){var i,o=getBase10Exponent(e),l=digitsToString(e.d),h=l.length;return t?(n&&(i=n-h)>0?l=l.charAt(0)+"."+l.slice(1)+getZeroString(i):h>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(o<0?"e":"e+")+o):o<0?(l="0."+getZeroString(-o-1)+l,n&&(i=n-h)>0&&(l+=getZeroString(i))):o>=h?(l+=getZeroString(o+1-h),n&&(i=n-o-1)>0&&(l=l+"."+getZeroString(i))):((i=o+1)<h&&(l=l.slice(0,i)+"."+l.slice(i)),n&&(i=n-h)>0&&(o+1===h&&(l+="."),l+=getZeroString(i))),e.s<0?"-"+l:l}function truncate(e,t){if(e.length>t)return e.length=t,!0}function clone(e){var t,n,i;function o(l){var h=this;if(!(h instanceof o))return new o(l);if(h.constructor=o,l instanceof o){h.s=l.s,h.e=l.e,h.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(invalidArgument+l);if(l>0)h.s=1;else if(l<0)l=-l,h.s=-1;else{h.s=0,h.e=0,h.d=[0];return}if(l===~~l&&l<1e7){h.e=0,h.d=[l];return}return parseDecimal(h,l.toString())}else if(typeof l!="string")throw Error(invalidArgument+l);if(l.charCodeAt(0)===45?(l=l.slice(1),h.s=-1):h.s=1,isDecimal.test(l))parseDecimal(h,l);else throw Error(invalidArgument+l)}if(o.prototype=P,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=clone,o.config=o.set=config,e===void 0&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<i.length;)e.hasOwnProperty(n=i[t++])||(e[n]=this[n]);return o.config(e),o}function config(e){if(!e||typeof e!="object")throw Error(decimalError+"Object expected");var t,n,i,o=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if((i=e[n=o[t]])!==void 0)if(mathfloor(i)===i&&i>=o[t+1]&&i<=o[t+2])this[n]=i;else throw Error(invalidArgument+n+": "+i);if((i=e[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(invalidArgument+n+": "+i);return this}var Decimal=clone(defaults);ONE=new Decimal(1);const Decimal$1=Decimal;function _toConsumableArray$9(e){return _arrayWithoutHoles$9(e)||_iterableToArray$a(e)||_unsupportedIterableToArray$e(e)||_nonIterableSpread$9()}function _nonIterableSpread$9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$e(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$e(e,t)}}function _iterableToArray$a(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles$9(e){if(Array.isArray(e))return _arrayLikeToArray$e(e)}function _arrayLikeToArray$e(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var identity$1=function(t){return t},PLACE_HOLDER={},isPlaceHolder=function(t){return t===PLACE_HOLDER},curry0=function(t){return function n(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},curryN=function e(t,n){return t===1?n:curry0(function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var h=o.filter(function(d){return d!==PLACE_HOLDER}).length;return h>=t?n.apply(void 0,o):e(t-h,curry0(function(){for(var d=arguments.length,m=new Array(d),b=0;b<d;b++)m[b]=arguments[b];var v=o.map(function(w){return isPlaceHolder(w)?m.shift():w});return n.apply(void 0,_toConsumableArray$9(v).concat(m))}))})},curry=function(t){return curryN(t.length,t)},range$1=function(t,n){for(var i=[],o=t;o<n;++o)i[o-t]=o;return i},map=curry(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),compose=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!n.length)return identity$1;var o=n.reverse(),l=o[0],h=o.slice(1);return function(){return h.reduce(function(d,m){return m(d)},l.apply(void 0,arguments))}},reverse=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},memoize$1=function(t){var n=null,i=null;return function(){for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];return n&&l.every(function(d,m){return d===n[m]})||(n=l,i=t.apply(void 0,l)),i}};function getDigitCount(e){var t;return e===0?t=1:t=Math.floor(new Decimal$1(e).abs().log(10).toNumber())+1,t}function rangeStep(e,t,n){for(var i=new Decimal$1(e),o=0,l=[];i.lt(t)&&o<1e5;)l.push(i.toNumber()),i=i.add(n),o++;return l}var interpolateNumber=curry(function(e,t,n){var i=+e,o=+t;return i+n*(o-i)}),uninterpolateNumber=curry(function(e,t,n){var i=t-+e;return i=i||1/0,(n-e)/i}),uninterpolateTruncation=curry(function(e,t,n){var i=t-+e;return i=i||1/0,Math.max(0,Math.min(1,(n-e)/i))});const Arithmetic={rangeStep,getDigitCount,interpolateNumber,uninterpolateNumber,uninterpolateTruncation};function _toConsumableArray$8(e){return _arrayWithoutHoles$8(e)||_iterableToArray$9(e)||_unsupportedIterableToArray$d(e)||_nonIterableSpread$8()}function _nonIterableSpread$8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$9(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles$8(e){if(Array.isArray(e))return _arrayLikeToArray$d(e)}function _slicedToArray$7(e,t){return _arrayWithHoles$8(e)||_iterableToArrayLimit$7(e,t)||_unsupportedIterableToArray$d(e,t)||_nonIterableRest$8()}function _nonIterableRest$8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$d(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$d(e,t)}}function _arrayLikeToArray$d(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$7(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],i=!0,o=!1,l=void 0;try{for(var h=e[Symbol.iterator](),d;!(i=(d=h.next()).done)&&(n.push(d.value),!(t&&n.length===t));i=!0);}catch(m){o=!0,l=m}finally{try{!i&&h.return!=null&&h.return()}finally{if(o)throw l}}return n}}function _arrayWithHoles$8(e){if(Array.isArray(e))return e}function getValidInterval(e){var t=_slicedToArray$7(e,2),n=t[0],i=t[1],o=n,l=i;return n>i&&(o=i,l=n),[o,l]}function getFormatStep(e,t,n){if(e.lte(0))return new Decimal$1(0);var i=Arithmetic.getDigitCount(e.toNumber()),o=new Decimal$1(10).pow(i),l=e.div(o),h=i!==1?.05:.1,d=new Decimal$1(Math.ceil(l.div(h).toNumber())).add(n).mul(h),m=d.mul(o);return t?m:new Decimal$1(Math.ceil(m))}function getTickOfSingleValue(e,t,n){var i=1,o=new Decimal$1(e);if(!o.isint()&&n){var l=Math.abs(e);l<1?(i=new Decimal$1(10).pow(Arithmetic.getDigitCount(e)-1),o=new Decimal$1(Math.floor(o.div(i).toNumber())).mul(i)):l>1&&(o=new Decimal$1(Math.floor(e)))}else e===0?o=new Decimal$1(Math.floor((t-1)/2)):n||(o=new Decimal$1(Math.floor(e)));var h=Math.floor((t-1)/2),d=compose(map(function(m){return o.add(new Decimal$1(m-h).mul(i)).toNumber()}),range$1);return d(0,t)}function calculateStep(e,t,n,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var l=getFormatStep(new Decimal$1(t).sub(e).div(n-1),i,o),h;e<=0&&t>=0?h=new Decimal$1(0):(h=new Decimal$1(e).add(t).div(2),h=h.sub(new Decimal$1(h).mod(l)));var d=Math.ceil(h.sub(e).div(l).toNumber()),m=Math.ceil(new Decimal$1(t).sub(h).div(l).toNumber()),b=d+m+1;return b>n?calculateStep(e,t,n,i,o+1):(b<n&&(m=t>0?m+(n-b):m,d=t>0?d:d+(n-b)),{step:l,tickMin:h.sub(new Decimal$1(d).mul(l)),tickMax:h.add(new Decimal$1(m).mul(l))})}function getNiceTickValuesFn(e){var t=_slicedToArray$7(e,2),n=t[0],i=t[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=Math.max(o,2),d=getValidInterval([n,i]),m=_slicedToArray$7(d,2),b=m[0],v=m[1];if(b===-1/0||v===1/0){var w=v===1/0?[b].concat(_toConsumableArray$8(range$1(0,o-1).map(function(){return 1/0}))):[].concat(_toConsumableArray$8(range$1(0,o-1).map(function(){return-1/0})),[v]);return n>i?reverse(w):w}if(b===v)return getTickOfSingleValue(b,o,l);var C=calculateStep(b,v,h,l),R=C.step,T=C.tickMin,E=C.tickMax,f=Arithmetic.rangeStep(T,E.add(new Decimal$1(.1).mul(R)),R);return n>i?reverse(f):f}function getTickValuesFixedDomainFn(e,t){var n=_slicedToArray$7(e,2),i=n[0],o=n[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=getValidInterval([i,o]),d=_slicedToArray$7(h,2),m=d[0],b=d[1];if(m===-1/0||b===1/0)return[i,o];if(m===b)return[m];var v=Math.max(t,2),w=getFormatStep(new Decimal$1(b).sub(m).div(v-1),l,0),C=[].concat(_toConsumableArray$8(Arithmetic.rangeStep(new Decimal$1(m),new Decimal$1(b).sub(new Decimal$1(.99).mul(w)),w)),[b]);return i>o?reverse(C):C}var getNiceTickValues=memoize$1(getNiceTickValuesFn),getTickValuesFixedDomain=memoize$1(getTickValuesFixedDomainFn),prefix="Invariant failed";function invariant(e,t){throw new Error(prefix)}var _excluded$9=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _typeof$u(e){"@babel/helpers - typeof";return _typeof$u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$u(e)}function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$i.apply(this,arguments)}function _slicedToArray$6(e,t){return _arrayWithHoles$7(e)||_iterableToArrayLimit$6(e,t)||_unsupportedIterableToArray$c(e,t)||_nonIterableRest$7()}function _nonIterableRest$7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$c(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$c(e,t)}}function _arrayLikeToArray$c(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$6(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t!==0)for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$7(e){if(Array.isArray(e))return e}function _objectWithoutProperties$9(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$9(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$9(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function _classCallCheck$c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$t(i.key),i)}}function _createClass$c(e,t,n){return t&&_defineProperties$c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$9(e,t,n){return t=_getPrototypeOf$a(t),_possibleConstructorReturn$a(e,_isNativeReflectConstruct$a()?Reflect.construct(t,n||[],_getPrototypeOf$a(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$a(e,t){if(t&&(_typeof$u(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$a(e)}function _assertThisInitialized$a(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$a=function(){return!!e})()}function _getPrototypeOf$a(e){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$a(e)}function _inherits$a(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$a(e,t)}function _setPrototypeOf$a(e,t){return _setPrototypeOf$a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$a(e,t)}function _defineProperty$t(e,t,n){return t=_toPropertyKey$t(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$t(e){var t=_toPrimitive$t(e,"string");return _typeof$u(t)=="symbol"?t:t+""}function _toPrimitive$t(e,t){if(_typeof$u(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$u(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ErrorBar=(function(e){function t(){return _classCallCheck$c(this,t),_callSuper$9(this,t,arguments)}return _inherits$a(t,e),_createClass$c(t,[{key:"render",value:function(){var i=this.props,o=i.offset,l=i.layout,h=i.width,d=i.dataKey,m=i.data,b=i.dataPointFormatter,v=i.xAxis,w=i.yAxis,C=_objectWithoutProperties$9(i,_excluded$9),R=filterProps(C,!1);this.props.direction==="x"&&v.type!=="number"&&invariant();var T=m.map(function(E){var f=b(E,d),g=f.x,S=f.y,O=f.value,D=f.errorVal;if(!D)return null;var M=[],_,A;if(Array.isArray(D)){var j=_slicedToArray$6(D,2);_=j[0],A=j[1]}else _=A=D;if(l==="vertical"){var L=v.scale,$=S+o,F=$+h,W=$-h,U=L(O-_),q=L(O+A);M.push({x1:q,y1:F,x2:q,y2:W}),M.push({x1:U,y1:$,x2:q,y2:$}),M.push({x1:U,y1:F,x2:U,y2:W})}else if(l==="horizontal"){var H=w.scale,Y=g+o,Z=Y-h,X=Y+h,J=H(O-_),Q=H(O+A);M.push({x1:Z,y1:Q,x2:X,y2:Q}),M.push({x1:Y,y1:J,x2:Y,y2:Q}),M.push({x1:Z,y1:J,x2:X,y2:J})}return React.createElement(Layer,_extends$i({className:"recharts-errorBar",key:"bar-".concat(M.map(function(G){return"".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))},R),M.map(function(G){return React.createElement("line",_extends$i({},G,{key:"line-".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))}))});return React.createElement(Layer,{className:"recharts-errorBars"},T)}}])})(React.Component);_defineProperty$t(ErrorBar,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});_defineProperty$t(ErrorBar,"displayName","ErrorBar");function _typeof$t(e){"@babel/helpers - typeof";return _typeof$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$t(e)}function ownKeys$p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$p(Object(n),!0).forEach(function(i){_defineProperty$s(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$p(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$s(e,t,n){return t=_toPropertyKey$s(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$s(e){var t=_toPrimitive$s(e,"string");return _typeof$t(t)=="symbol"?t:t+""}function _toPrimitive$s(e,t){if(_typeof$t(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$t(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var getLegendProps=function(t){var n=t.children,i=t.formattedGraphicalItems,o=t.legendWidth,l=t.legendContent,h=findChildByType(n,Legend);if(!h)return null;var d=Legend.defaultProps,m=d!==void 0?_objectSpread$p(_objectSpread$p({},d),h.props):{},b;return h.props&&h.props.payload?b=h.props&&h.props.payload:l==="children"?b=(i||[]).reduce(function(v,w){var C=w.item,R=w.props,T=R.sectors||R.data||[];return v.concat(T.map(function(E){return{type:h.props.iconType||C.props.legendType,value:E.name,color:E.fill,payload:E}}))},[]):b=(i||[]).map(function(v){var w=v.item,C=w.type.defaultProps,R=C!==void 0?_objectSpread$p(_objectSpread$p({},C),w.props):{},T=R.dataKey,E=R.name,f=R.legendType,g=R.hide;return{inactive:g,dataKey:T,type:m.iconType||f||"square",color:getMainColorOfGraphicItem(w),value:E||T,payload:R}}),_objectSpread$p(_objectSpread$p(_objectSpread$p({},m),Legend.getWithHeight(h,o)),{},{payload:b,item:h})};function _typeof$s(e){"@babel/helpers - typeof";return _typeof$s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$s(e)}function _toConsumableArray$7(e){return _arrayWithoutHoles$7(e)||_iterableToArray$8(e)||_unsupportedIterableToArray$b(e)||_nonIterableSpread$7()}function _nonIterableSpread$7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$b(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$b(e,t)}}function _iterableToArray$8(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$7(e){if(Array.isArray(e))return _arrayLikeToArray$b(e)}function _arrayLikeToArray$b(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ownKeys$o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$o(Object(n),!0).forEach(function(i){_defineProperty$r(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$o(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$r(e,t,n){return t=_toPropertyKey$r(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$r(e){var t=_toPrimitive$r(e,"string");return _typeof$s(t)=="symbol"?t:t+""}function _toPrimitive$r(e,t){if(_typeof$s(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$s(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getValueByDataKey(e,t,n){return isNil(e)||isNil(t)?n:isNumOrStr(t)?get(e,t,n):isFunction(t)?t(e):n}function getDomainOfDataByKey(e,t,n,i){var o=flatMap(e,function(d){return getValueByDataKey(d,t)});if(n==="number"){var l=o.filter(function(d){return isNumber(d)||parseFloat(d)});return l.length?[min(l),max(l)]:[1/0,-1/0]}var h=i?o.filter(function(d){return!isNil(d)}):o;return h.map(function(d){return isNumOrStr(d)||d instanceof Date?d:""})}var calculateActiveTickIndex=function(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,h=-1,d=(n=i?.length)!==null&&n!==void 0?n:0;if(d<=1)return 0;if(l&&l.axisType==="angleAxis"&&Math.abs(Math.abs(l.range[1]-l.range[0])-360)<=1e-6)for(var m=l.range,b=0;b<d;b++){var v=b>0?o[b-1].coordinate:o[d-1].coordinate,w=o[b].coordinate,C=b>=d-1?o[0].coordinate:o[b+1].coordinate,R=void 0;if(mathSign(w-v)!==mathSign(C-w)){var T=[];if(mathSign(C-w)===mathSign(m[1]-m[0])){R=C;var E=w+m[1]-m[0];T[0]=Math.min(E,(E+v)/2),T[1]=Math.max(E,(E+v)/2)}else{R=v;var f=C+m[1]-m[0];T[0]=Math.min(w,(f+w)/2),T[1]=Math.max(w,(f+w)/2)}var g=[Math.min(w,(R+w)/2),Math.max(w,(R+w)/2)];if(t>g[0]&&t<=g[1]||t>=T[0]&&t<=T[1]){h=o[b].index;break}}else{var S=Math.min(v,C),O=Math.max(v,C);if(t>(S+w)/2&&t<=(O+w)/2){h=o[b].index;break}}}else for(var D=0;D<d;D++)if(D===0&&t<=(i[D].coordinate+i[D+1].coordinate)/2||D>0&&D<d-1&&t>(i[D].coordinate+i[D-1].coordinate)/2&&t<=(i[D].coordinate+i[D+1].coordinate)/2||D===d-1&&t>(i[D].coordinate+i[D-1].coordinate)/2){h=i[D].index;break}return h},getMainColorOfGraphicItem=function(t){var n,i=t,o=i.type.displayName,l=(n=t.type)!==null&&n!==void 0&&n.defaultProps?_objectSpread$o(_objectSpread$o({},t.type.defaultProps),t.props):t.props,h=l.stroke,d=l.fill,m;switch(o){case"Line":m=h;break;case"Area":case"Radar":m=h&&h!=="none"?h:d;break;default:m=d;break}return m},getBarSizeList=function(t){var n=t.barSize,i=t.totalSize,o=t.stackGroups,l=o===void 0?{}:o;if(!l)return{};for(var h={},d=Object.keys(l),m=0,b=d.length;m<b;m++)for(var v=l[d[m]].stackGroups,w=Object.keys(v),C=0,R=w.length;C<R;C++){var T=v[w[C]],E=T.items,f=T.cateAxisId,g=E.filter(function(A){return getDisplayName(A.type).indexOf("Bar")>=0});if(g&&g.length){var S=g[0].type.defaultProps,O=S!==void 0?_objectSpread$o(_objectSpread$o({},S),g[0].props):g[0].props,D=O.barSize,M=O[f];h[M]||(h[M]=[]);var _=isNil(D)?n:D;h[M].push({item:g[0],stackList:g.slice(1),barSize:isNil(_)?void 0:getPercentValue(_,i,0)})}}return h},getBarPosition=function(t){var n=t.barGap,i=t.barCategoryGap,o=t.bandSize,l=t.sizeList,h=l===void 0?[]:l,d=t.maxBarSize,m=h.length;if(m<1)return null;var b=getPercentValue(n,o,0,!0),v,w=[];if(h[0].barSize===+h[0].barSize){var C=!1,R=o/m,T=h.reduce(function(D,M){return D+M.barSize||0},0);T+=(m-1)*b,T>=o&&(T-=(m-1)*b,b=0),T>=o&&R>0&&(C=!0,R*=.9,T=m*R);var E=(o-T)/2>>0,f={offset:E-b,size:0};v=h.reduce(function(D,M){var _={item:M.item,position:{offset:f.offset+f.size+b,size:C?R:M.barSize}},A=[].concat(_toConsumableArray$7(D),[_]);return f=A[A.length-1].position,M.stackList&&M.stackList.length&&M.stackList.forEach(function(j){A.push({item:j,position:f})}),A},w)}else{var g=getPercentValue(i,o,0,!0);o-2*g-(m-1)*b<=0&&(b=0);var S=(o-2*g-(m-1)*b)/m;S>1&&(S>>=0);var O=d===+d?Math.min(S,d):S;v=h.reduce(function(D,M,_){var A=[].concat(_toConsumableArray$7(D),[{item:M.item,position:{offset:g+(S+b)*_+(S-O)/2,size:O}}]);return M.stackList&&M.stackList.length&&M.stackList.forEach(function(j){A.push({item:j,position:A[A.length-1].position})}),A},w)}return v},appendOffsetOfLegend=function(t,n,i,o){var l=i.children,h=i.width,d=i.margin,m=h-(d.left||0)-(d.right||0),b=getLegendProps({children:l,legendWidth:m});if(b){var v=o||{},w=v.width,C=v.height,R=b.align,T=b.verticalAlign,E=b.layout;if((E==="vertical"||E==="horizontal"&&T==="middle")&&R!=="center"&&isNumber(t[R]))return _objectSpread$o(_objectSpread$o({},t),{},_defineProperty$r({},R,t[R]+(w||0)));if((E==="horizontal"||E==="vertical"&&R==="center")&&T!=="middle"&&isNumber(t[T]))return _objectSpread$o(_objectSpread$o({},t),{},_defineProperty$r({},T,t[T]+(C||0)))}return t},isErrorBarRelevantForAxis=function(t,n,i){return isNil(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||i==="x"?n==="xAxis":i==="y"?n==="yAxis":!0},getDomainOfErrorBars=function(t,n,i,o,l){var h=n.props.children,d=findAllByType(h,ErrorBar).filter(function(b){return isErrorBarRelevantForAxis(o,l,b.props.direction)});if(d&&d.length){var m=d.map(function(b){return b.props.dataKey});return t.reduce(function(b,v){var w=getValueByDataKey(v,i);if(isNil(w))return b;var C=Array.isArray(w)?[min(w),max(w)]:[w,w],R=m.reduce(function(T,E){var f=getValueByDataKey(v,E,0),g=C[0]-Math.abs(Array.isArray(f)?f[0]:f),S=C[1]+Math.abs(Array.isArray(f)?f[1]:f);return[Math.min(g,T[0]),Math.max(S,T[1])]},[1/0,-1/0]);return[Math.min(R[0],b[0]),Math.max(R[1],b[1])]},[1/0,-1/0])}return null},parseErrorBarsOfAxis=function(t,n,i,o,l){var h=n.map(function(d){return getDomainOfErrorBars(t,d,i,l,o)}).filter(function(d){return!isNil(d)});return h&&h.length?h.reduce(function(d,m){return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]):null},getDomainOfItemsWithSameAxis=function(t,n,i,o,l){var h=n.map(function(m){var b=m.props.dataKey;return i==="number"&&b&&getDomainOfErrorBars(t,m,b,o)||getDomainOfDataByKey(t,b,i,l)});if(i==="number")return h.reduce(function(m,b){return[Math.min(m[0],b[0]),Math.max(m[1],b[1])]},[1/0,-1/0]);var d={};return h.reduce(function(m,b){for(var v=0,w=b.length;v<w;v++)d[b[v]]||(d[b[v]]=!0,m.push(b[v]));return m},[])},isCategoricalAxis=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},getTicksOfAxis=function(t,n,i){if(!t)return null;var o=t.scale,l=t.duplicateDomain,h=t.type,d=t.range,m=t.realScaleType==="scaleBand"?o.bandwidth()/2:2,b=(n||i)&&h==="category"&&o.bandwidth?o.bandwidth()/m:0;if(b=t.axisType==="angleAxis"&&d?.length>=2?mathSign(d[0]-d[1])*2*b:b,n&&(t.ticks||t.niceTicks)){var v=(t.ticks||t.niceTicks).map(function(w){var C=l?l.indexOf(w):w;return{coordinate:o(C)+b,value:w,offset:b}});return v.filter(function(w){return!isNan(w.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(w,C){return{coordinate:o(w)+b,value:w,index:C,offset:b}}):o.ticks&&!i?o.ticks(t.tickCount).map(function(w){return{coordinate:o(w)+b,value:w,offset:b}}):o.domain().map(function(w,C){return{coordinate:o(w)+b,value:l?l[w]:w,index:C,offset:b}})},handlerWeakMap=new WeakMap,combineEventHandlers=function(t,n){if(typeof n!="function")return t;handlerWeakMap.has(t)||handlerWeakMap.set(t,new WeakMap);var i=handlerWeakMap.get(t);if(i.has(n))return i.get(n);var o=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return i.set(n,o),o},parseScale=function(t,n,i){var o=t.scale,l=t.type,h=t.layout,d=t.axisType;if(o==="auto")return h==="radial"&&d==="radiusAxis"?{scale:band(),realScaleType:"band"}:h==="radial"&&d==="angleAxis"?{scale:linear(),realScaleType:"linear"}:l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!i)?{scale:point(),realScaleType:"point"}:l==="category"?{scale:band(),realScaleType:"band"}:{scale:linear(),realScaleType:"linear"};if(isString(o)){var m="scale".concat(upperFirst(o));return{scale:(d3Scales[m]||point)(),realScaleType:d3Scales[m]?m:"point"}}return isFunction(o)?{scale:o}:{scale:point(),realScaleType:"point"}},EPS=1e-4,checkDomainOfScale=function(t){var n=t.domain();if(!(!n||n.length<=2)){var i=n.length,o=t.range(),l=Math.min(o[0],o[1])-EPS,h=Math.max(o[0],o[1])+EPS,d=t(n[0]),m=t(n[i-1]);(d<l||d>h||m<l||m>h)&&t.domain([n[0],n[i-1]])}},findPositionOfBar=function(t,n){if(!t)return null;for(var i=0,o=t.length;i<o;i++)if(t[i].item===n)return t[i].position;return null},truncateByDomain=function(t,n){if(!n||n.length!==2||!isNumber(n[0])||!isNumber(n[1]))return t;var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]),l=[t[0],t[1]];return(!isNumber(t[0])||t[0]<i)&&(l[0]=i),(!isNumber(t[1])||t[1]>o)&&(l[1]=o),l[0]>o&&(l[0]=o),l[1]<i&&(l[1]=i),l},offsetSign=function(t){var n=t.length;if(!(n<=0))for(var i=0,o=t[0].length;i<o;++i)for(var l=0,h=0,d=0;d<n;++d){var m=isNan(t[d][i][1])?t[d][i][0]:t[d][i][1];m>=0?(t[d][i][0]=l,t[d][i][1]=l+m,l=t[d][i][1]):(t[d][i][0]=h,t[d][i][1]=h+m,h=t[d][i][1])}},offsetPositive=function(t){var n=t.length;if(!(n<=0))for(var i=0,o=t[0].length;i<o;++i)for(var l=0,h=0;h<n;++h){var d=isNan(t[h][i][1])?t[h][i][0]:t[h][i][1];d>=0?(t[h][i][0]=l,t[h][i][1]=l+d,l=t[h][i][1]):(t[h][i][0]=0,t[h][i][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=function(t,n,i){var o=n.map(function(d){return d.props.dataKey}),l=STACK_OFFSET_MAP[i],h=shapeStack().keys(o).value(function(d,m){return+getValueByDataKey(d,m,0)}).order(stackOrderNone).offset(l);return h(t)},getStackGroupsByAxisId=function(t,n,i,o,l,h){if(!t)return null;var d=h?n.reverse():n,m={},b=d.reduce(function(w,C){var R,T=(R=C.type)!==null&&R!==void 0&&R.defaultProps?_objectSpread$o(_objectSpread$o({},C.type.defaultProps),C.props):C.props,E=T.stackId,f=T.hide;if(f)return w;var g=T[i],S=w[g]||{hasStack:!1,stackGroups:{}};if(isNumOrStr(E)){var O=S.stackGroups[E]||{numericAxisId:i,cateAxisId:o,items:[]};O.items.push(C),S.hasStack=!0,S.stackGroups[E]=O}else S.stackGroups[uniqueId("_stackId_")]={numericAxisId:i,cateAxisId:o,items:[C]};return _objectSpread$o(_objectSpread$o({},w),{},_defineProperty$r({},g,S))},m),v={};return Object.keys(b).reduce(function(w,C){var R=b[C];if(R.hasStack){var T={};R.stackGroups=Object.keys(R.stackGroups).reduce(function(E,f){var g=R.stackGroups[f];return _objectSpread$o(_objectSpread$o({},E),{},_defineProperty$r({},f,{numericAxisId:i,cateAxisId:o,items:g.items,stackedData:getStackedData(t,g.items,l)}))},T)}return _objectSpread$o(_objectSpread$o({},w),{},_defineProperty$r({},C,R))},v)},getTicksOfScale=function(t,n){var i=n.realScaleType,o=n.type,l=n.tickCount,h=n.originalDomain,d=n.allowDecimals,m=i||n.scale;if(m!=="auto"&&m!=="linear")return null;if(l&&o==="number"&&h&&(h[0]==="auto"||h[1]==="auto")){var b=t.domain();if(!b.length)return null;var v=getNiceTickValues(b,l,d);return t.domain([min(v),max(v)]),{niceTicks:v}}if(l&&o==="number"){var w=t.domain(),C=getTickValuesFixedDomain(w,l,d);return{niceTicks:C}}return null},getCateCoordinateOfBar=function(t){var n=t.axis,i=t.ticks,o=t.offset,l=t.bandSize,h=t.entry,d=t.index;if(n.type==="category")return i[d]?i[d].coordinate+o:null;var m=getValueByDataKey(h,n.dataKey,n.domain[d]);return isNil(m)?null:n.scale(m)-l/2+o},getBaseValueOfBar=function(t){var n=t.numericAxis,i=n.scale.domain();if(n.type==="number"){var o=Math.min(i[0],i[1]),l=Math.max(i[0],i[1]);return o<=0&&l>=0?0:l<0?l:o}return i[0]},getStackedDataOfItem=function(t,n){var i,o=(i=t.type)!==null&&i!==void 0&&i.defaultProps?_objectSpread$o(_objectSpread$o({},t.type.defaultProps),t.props):t.props,l=o.stackId;if(isNumOrStr(l)){var h=n[l];if(h){var d=h.items.indexOf(t);return d>=0?h.stackedData[d]:null}}return null},getDomainOfSingle=function(t){return t.reduce(function(n,i){return[min(i.concat([n[0]]).filter(isNumber)),max(i.concat([n[1]]).filter(isNumber))]},[1/0,-1/0])},getDomainOfStackGroups=function(t,n,i){return Object.keys(t).reduce(function(o,l){var h=t[l],d=h.stackedData,m=d.reduce(function(b,v){var w=getDomainOfSingle(v.slice(n,i+1));return[Math.min(b[0],w[0]),Math.max(b[1],w[1])]},[1/0,-1/0]);return[Math.min(m[0],o[0]),Math.max(m[1],o[1])]},[1/0,-1/0]).map(function(o){return o===1/0||o===-1/0?0:o})},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,parseSpecifiedDomain=function(t,n,i){if(isFunction(t))return t(n,i);if(!Array.isArray(t))return n;var o=[];if(isNumber(t[0]))o[0]=i?t[0]:Math.min(t[0],n[0]);else if(MIN_VALUE_REG.test(t[0])){var l=+MIN_VALUE_REG.exec(t[0])[1];o[0]=n[0]-l}else isFunction(t[0])?o[0]=t[0](n[0]):o[0]=n[0];if(isNumber(t[1]))o[1]=i?t[1]:Math.max(t[1],n[1]);else if(MAX_VALUE_REG.test(t[1])){var h=+MAX_VALUE_REG.exec(t[1])[1];o[1]=n[1]+h}else isFunction(t[1])?o[1]=t[1](n[1]):o[1]=n[1];return o},getBandSizeOfAxis=function(t,n,i){if(t&&t.scale&&t.scale.bandwidth){var o=t.scale.bandwidth();if(!i||o>0)return o}if(t&&n&&n.length>=2){for(var l=sortBy(n,function(w){return w.coordinate}),h=1/0,d=1,m=l.length;d<m;d++){var b=l[d],v=l[d-1];h=Math.min((b.coordinate||0)-(v.coordinate||0),h)}return h===1/0?0:h}return i?void 0:0},parseDomainOfCategoryAxis=function(t,n,i){return!t||!t.length||isEqual(t,get(i,"type.defaultProps.domain"))?n:t},getTooltipItem=function(t,n){var i=t.type.defaultProps?_objectSpread$o(_objectSpread$o({},t.type.defaultProps),t.props):t.props,o=i.dataKey,l=i.name,h=i.unit,d=i.formatter,m=i.tooltipType,b=i.chartType,v=i.hide;return _objectSpread$o(_objectSpread$o({},filterProps(t,!1)),{},{dataKey:o,unit:h,formatter:d,name:l||o,color:getMainColorOfGraphicItem(t),value:getValueByDataKey(n,o),type:m,payload:n,chartType:b,hide:v})};function _typeof$r(e){"@babel/helpers - typeof";return _typeof$r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$r(e)}function ownKeys$n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$n(Object(n),!0).forEach(function(i){_defineProperty$q(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$n(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$q(e,t,n){return t=_toPropertyKey$q(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$q(e){var t=_toPrimitive$q(e,"string");return _typeof$r(t)=="symbol"?t:t+""}function _toPrimitive$q(e,t){if(_typeof$r(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$r(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RADIAN=Math.PI/180,radianToDegree=function(t){return t*180/Math.PI},polarToCartesian=function(t,n,i,o){return{x:t+Math.cos(-RADIAN*o)*i,y:n+Math.sin(-RADIAN*o)*i}},distanceBetweenPoints=function(t,n){var i=t.x,o=t.y,l=n.x,h=n.y;return Math.sqrt(Math.pow(i-l,2)+Math.pow(o-h,2))},getAngleOfPoint=function(t,n){var i=t.x,o=t.y,l=n.cx,h=n.cy,d=distanceBetweenPoints({x:i,y:o},{x:l,y:h});if(d<=0)return{radius:d};var m=(i-l)/d,b=Math.acos(m);return o>h&&(b=2*Math.PI-b),{radius:d,angle:radianToDegree(b),angleInRadian:b}},formatAngleOfSector=function(t){var n=t.startAngle,i=t.endAngle,o=Math.floor(n/360),l=Math.floor(i/360),h=Math.min(o,l);return{startAngle:n-h*360,endAngle:i-h*360}},reverseFormatAngleOfSetor=function(t,n){var i=n.startAngle,o=n.endAngle,l=Math.floor(i/360),h=Math.floor(o/360),d=Math.min(l,h);return t+d*360},inRangeOfSector=function(t,n){var i=t.x,o=t.y,l=getAngleOfPoint({x:i,y:o},n),h=l.radius,d=l.angle,m=n.innerRadius,b=n.outerRadius;if(h<m||h>b)return!1;if(h===0)return!0;var v=formatAngleOfSector(n),w=v.startAngle,C=v.endAngle,R=d,T;if(w<=C){for(;R>C;)R-=360;for(;R<w;)R+=360;T=R>=w&&R<=C}else{for(;R>w;)R-=360;for(;R<C;)R+=360;T=R>=C&&R<=w}return T?_objectSpread$n(_objectSpread$n({},n),{},{radius:h,angle:reverseFormatAngleOfSetor(R,n)}):null};function _typeof$q(e){"@babel/helpers - typeof";return _typeof$q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$q(e)}var _excluded$8=["offset"];function _toConsumableArray$6(e){return _arrayWithoutHoles$6(e)||_iterableToArray$7(e)||_unsupportedIterableToArray$a(e)||_nonIterableSpread$6()}function _nonIterableSpread$6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$a(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$a(e,t)}}function _iterableToArray$7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$6(e){if(Array.isArray(e))return _arrayLikeToArray$a(e)}function _arrayLikeToArray$a(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _objectWithoutProperties$8(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$8(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$8(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function ownKeys$m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$m(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$m(Object(n),!0).forEach(function(i){_defineProperty$p(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$m(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$p(e,t,n){return t=_toPropertyKey$p(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$p(e){var t=_toPrimitive$p(e,"string");return _typeof$q(t)=="symbol"?t:t+""}function _toPrimitive$p(e,t){if(_typeof$q(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$q(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$h.apply(this,arguments)}var getLabel=function(t){var n=t.value,i=t.formatter,o=isNil(t.children)?n:t.children;return isFunction(i)?i(o):o},getDeltaAngle$1=function(t,n){var i=mathSign(n-t),o=Math.min(Math.abs(n-t),360);return i*o},renderRadialLabel=function(t,n,i){var o=t.position,l=t.viewBox,h=t.offset,d=t.className,m=l,b=m.cx,v=m.cy,w=m.innerRadius,C=m.outerRadius,R=m.startAngle,T=m.endAngle,E=m.clockWise,f=(w+C)/2,g=getDeltaAngle$1(R,T),S=g>=0?1:-1,O,D;o==="insideStart"?(O=R+S*h,D=E):o==="insideEnd"?(O=T-S*h,D=!E):o==="end"&&(O=T+S*h,D=E),D=g<=0?D:!D;var M=polarToCartesian(b,v,f,O),_=polarToCartesian(b,v,f,O+(D?1:-1)*359),A="M".concat(M.x,",").concat(M.y,`
    A`).concat(f,",").concat(f,",0,1,").concat(D?0:1,`,
    `).concat(_.x,",").concat(_.y),j=isNil(t.id)?uniqueId("recharts-radial-line-"):t.id;return React.createElement("text",_extends$h({},i,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",d)}),React.createElement("defs",null,React.createElement("path",{id:j,d:A})),React.createElement("textPath",{xlinkHref:"#".concat(j)},n))},getAttrsOfPolarLabel=function(t){var n=t.viewBox,i=t.offset,o=t.position,l=n,h=l.cx,d=l.cy,m=l.innerRadius,b=l.outerRadius,v=l.startAngle,w=l.endAngle,C=(v+w)/2;if(o==="outside"){var R=polarToCartesian(h,d,b+i,C),T=R.x,E=R.y;return{x:T,y:E,textAnchor:T>=h?"start":"end",verticalAnchor:"middle"}}if(o==="center")return{x:h,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(o==="centerTop")return{x:h,y:d,textAnchor:"middle",verticalAnchor:"start"};if(o==="centerBottom")return{x:h,y:d,textAnchor:"middle",verticalAnchor:"end"};var f=(m+b)/2,g=polarToCartesian(h,d,f,C),S=g.x,O=g.y;return{x:S,y:O,textAnchor:"middle",verticalAnchor:"middle"}},getAttrsOfCartesianLabel=function(t){var n=t.viewBox,i=t.parentViewBox,o=t.offset,l=t.position,h=n,d=h.x,m=h.y,b=h.width,v=h.height,w=v>=0?1:-1,C=w*o,R=w>0?"end":"start",T=w>0?"start":"end",E=b>=0?1:-1,f=E*o,g=E>0?"end":"start",S=E>0?"start":"end";if(l==="top"){var O={x:d+b/2,y:m-w*o,textAnchor:"middle",verticalAnchor:R};return _objectSpread$m(_objectSpread$m({},O),i?{height:Math.max(m-i.y,0),width:b}:{})}if(l==="bottom"){var D={x:d+b/2,y:m+v+C,textAnchor:"middle",verticalAnchor:T};return _objectSpread$m(_objectSpread$m({},D),i?{height:Math.max(i.y+i.height-(m+v),0),width:b}:{})}if(l==="left"){var M={x:d-f,y:m+v/2,textAnchor:g,verticalAnchor:"middle"};return _objectSpread$m(_objectSpread$m({},M),i?{width:Math.max(M.x-i.x,0),height:v}:{})}if(l==="right"){var _={x:d+b+f,y:m+v/2,textAnchor:S,verticalAnchor:"middle"};return _objectSpread$m(_objectSpread$m({},_),i?{width:Math.max(i.x+i.width-_.x,0),height:v}:{})}var A=i?{width:b,height:v}:{};return l==="insideLeft"?_objectSpread$m({x:d+f,y:m+v/2,textAnchor:S,verticalAnchor:"middle"},A):l==="insideRight"?_objectSpread$m({x:d+b-f,y:m+v/2,textAnchor:g,verticalAnchor:"middle"},A):l==="insideTop"?_objectSpread$m({x:d+b/2,y:m+C,textAnchor:"middle",verticalAnchor:T},A):l==="insideBottom"?_objectSpread$m({x:d+b/2,y:m+v-C,textAnchor:"middle",verticalAnchor:R},A):l==="insideTopLeft"?_objectSpread$m({x:d+f,y:m+C,textAnchor:S,verticalAnchor:T},A):l==="insideTopRight"?_objectSpread$m({x:d+b-f,y:m+C,textAnchor:g,verticalAnchor:T},A):l==="insideBottomLeft"?_objectSpread$m({x:d+f,y:m+v-C,textAnchor:S,verticalAnchor:R},A):l==="insideBottomRight"?_objectSpread$m({x:d+b-f,y:m+v-C,textAnchor:g,verticalAnchor:R},A):isObject(l)&&(isNumber(l.x)||isPercent(l.x))&&(isNumber(l.y)||isPercent(l.y))?_objectSpread$m({x:d+getPercentValue(l.x,b),y:m+getPercentValue(l.y,v),textAnchor:"end",verticalAnchor:"end"},A):_objectSpread$m({x:d+b/2,y:m+v/2,textAnchor:"middle",verticalAnchor:"middle"},A)},isPolar=function(t){return"cx"in t&&isNumber(t.cx)};function Label(e){var t=e.offset,n=t===void 0?5:t,i=_objectWithoutProperties$8(e,_excluded$8),o=_objectSpread$m({offset:n},i),l=o.viewBox,h=o.position,d=o.value,m=o.children,b=o.content,v=o.className,w=v===void 0?"":v,C=o.textBreakAll;if(!l||isNil(d)&&isNil(m)&&!reactExports.isValidElement(b)&&!isFunction(b))return null;if(reactExports.isValidElement(b))return reactExports.cloneElement(b,o);var R;if(isFunction(b)){if(R=reactExports.createElement(b,o),reactExports.isValidElement(R))return R}else R=getLabel(o);var T=isPolar(l),E=filterProps(o,!0);if(T&&(h==="insideStart"||h==="insideEnd"||h==="end"))return renderRadialLabel(o,R,E);var f=T?getAttrsOfPolarLabel(o):getAttrsOfCartesianLabel(o);return React.createElement(Text,_extends$h({className:clsx("recharts-label",w)},E,f,{breakAll:C}),R)}Label.displayName="Label";var parseViewBox=function(t){var n=t.cx,i=t.cy,o=t.angle,l=t.startAngle,h=t.endAngle,d=t.r,m=t.radius,b=t.innerRadius,v=t.outerRadius,w=t.x,C=t.y,R=t.top,T=t.left,E=t.width,f=t.height,g=t.clockWise,S=t.labelViewBox;if(S)return S;if(isNumber(E)&&isNumber(f)){if(isNumber(w)&&isNumber(C))return{x:w,y:C,width:E,height:f};if(isNumber(R)&&isNumber(T))return{x:R,y:T,width:E,height:f}}return isNumber(w)&&isNumber(C)?{x:w,y:C,width:0,height:0}:isNumber(n)&&isNumber(i)?{cx:n,cy:i,startAngle:l||o||0,endAngle:h||o||0,innerRadius:b||0,outerRadius:v||m||d||0,clockWise:g}:t.viewBox?t.viewBox:{}},parseLabel=function(t,n){return t?t===!0?React.createElement(Label,{key:"label-implicit",viewBox:n}):isNumOrStr(t)?React.createElement(Label,{key:"label-implicit",viewBox:n,value:t}):reactExports.isValidElement(t)?t.type===Label?reactExports.cloneElement(t,{key:"label-implicit",viewBox:n}):React.createElement(Label,{key:"label-implicit",content:t,viewBox:n}):isFunction(t)?React.createElement(Label,{key:"label-implicit",content:t,viewBox:n}):isObject(t)?React.createElement(Label,_extends$h({viewBox:n},t,{key:"label-implicit"})):null:null},renderCallByParent$1=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&i&&!t.label)return null;var o=t.children,l=parseViewBox(t),h=findAllByType(o,Label).map(function(m,b){return reactExports.cloneElement(m,{viewBox:n||l,key:"label-".concat(b)})});if(!i)return h;var d=parseLabel(t.label,n||l);return[d].concat(_toConsumableArray$6(h))};Label.parseViewBox=parseViewBox;Label.renderCallByParent=renderCallByParent$1;var last_1,hasRequiredLast;function requireLast(){if(hasRequiredLast)return last_1;hasRequiredLast=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return last_1=e,last_1}var lastExports=requireLast();const last=getDefaultExportFromCjs(lastExports);function _typeof$p(e){"@babel/helpers - typeof";return _typeof$p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$p(e)}var _excluded$7=["valueAccessor"],_excluded2$2=["data","dataKey","clockWise","id","textBreakAll"];function _toConsumableArray$5(e){return _arrayWithoutHoles$5(e)||_iterableToArray$6(e)||_unsupportedIterableToArray$9(e)||_nonIterableSpread$5()}function _nonIterableSpread$5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$9(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$9(e,t)}}function _iterableToArray$6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$5(e){if(Array.isArray(e))return _arrayLikeToArray$9(e)}function _arrayLikeToArray$9(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$g.apply(this,arguments)}function ownKeys$l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$l(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$l(Object(n),!0).forEach(function(i){_defineProperty$o(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$l(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$o(e,t,n){return t=_toPropertyKey$o(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$o(e){var t=_toPrimitive$o(e,"string");return _typeof$p(t)=="symbol"?t:t+""}function _toPrimitive$o(e,t){if(_typeof$p(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$p(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$7(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$7(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$7(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var defaultAccessor=function(t){return Array.isArray(t.value)?last(t.value):t.value};function LabelList(e){var t=e.valueAccessor,n=t===void 0?defaultAccessor:t,i=_objectWithoutProperties$7(e,_excluded$7),o=i.data,l=i.dataKey,h=i.clockWise,d=i.id,m=i.textBreakAll,b=_objectWithoutProperties$7(i,_excluded2$2);return!o||!o.length?null:React.createElement(Layer,{className:"recharts-label-list"},o.map(function(v,w){var C=isNil(l)?n(v,w):getValueByDataKey(v&&v.payload,l),R=isNil(d)?{}:{id:"".concat(d,"-").concat(w)};return React.createElement(Label,_extends$g({},filterProps(v,!0),b,R,{parentViewBox:v.parentViewBox,value:C,textBreakAll:m,viewBox:Label.parseViewBox(isNil(h)?v:_objectSpread$l(_objectSpread$l({},v),{},{clockWise:h})),key:"label-".concat(w),index:w}))}))}LabelList.displayName="LabelList";function parseLabelList(e,t){return e?e===!0?React.createElement(LabelList,{key:"labelList-implicit",data:t}):React.isValidElement(e)||isFunction(e)?React.createElement(LabelList,{key:"labelList-implicit",data:t,content:e}):isObject(e)?React.createElement(LabelList,_extends$g({data:t},e,{key:"labelList-implicit"})):null:null}function renderCallByParent(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,o=findAllByType(i,LabelList).map(function(h,d){return reactExports.cloneElement(h,{data:t,key:"labelList-".concat(d)})});if(!n)return o;var l=parseLabelList(e.label,t);return[l].concat(_toConsumableArray$5(o))}LabelList.renderCallByParent=renderCallByParent;function _typeof$o(e){"@babel/helpers - typeof";return _typeof$o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$o(e)}function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$f.apply(this,arguments)}function ownKeys$k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$k(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$k(Object(n),!0).forEach(function(i){_defineProperty$n(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$k(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$n(e,t,n){return t=_toPropertyKey$n(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$n(e){var t=_toPrimitive$n(e,"string");return _typeof$o(t)=="symbol"?t:t+""}function _toPrimitive$n(e,t){if(_typeof$o(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$o(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var getDeltaAngle=function(t,n){var i=mathSign(n-t),o=Math.min(Math.abs(n-t),359.999);return i*o},getTangentCircle=function(t){var n=t.cx,i=t.cy,o=t.radius,l=t.angle,h=t.sign,d=t.isExternal,m=t.cornerRadius,b=t.cornerIsExternal,v=m*(d?1:-1)+o,w=Math.asin(m/v)/RADIAN,C=b?l:l+h*w,R=polarToCartesian(n,i,v,C),T=polarToCartesian(n,i,o,C),E=b?l-h*w:l,f=polarToCartesian(n,i,v*Math.cos(w*RADIAN),E);return{center:R,circleTangency:T,lineTangency:f,theta:w}},getSectorPath=function(t){var n=t.cx,i=t.cy,o=t.innerRadius,l=t.outerRadius,h=t.startAngle,d=t.endAngle,m=getDeltaAngle(h,d),b=h+m,v=polarToCartesian(n,i,l,h),w=polarToCartesian(n,i,l,b),C="M ".concat(v.x,",").concat(v.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(m)>180),",").concat(+(h>b),`,
    `).concat(w.x,",").concat(w.y,`
  `);if(o>0){var R=polarToCartesian(n,i,o,h),T=polarToCartesian(n,i,o,b);C+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(m)>180),",").concat(+(h<=b),`,
            `).concat(R.x,",").concat(R.y," Z")}else C+="L ".concat(n,",").concat(i," Z");return C},getSectorWithCorner=function(t){var n=t.cx,i=t.cy,o=t.innerRadius,l=t.outerRadius,h=t.cornerRadius,d=t.forceCornerRadius,m=t.cornerIsExternal,b=t.startAngle,v=t.endAngle,w=mathSign(v-b),C=getTangentCircle({cx:n,cy:i,radius:l,angle:b,sign:w,cornerRadius:h,cornerIsExternal:m}),R=C.circleTangency,T=C.lineTangency,E=C.theta,f=getTangentCircle({cx:n,cy:i,radius:l,angle:v,sign:-w,cornerRadius:h,cornerIsExternal:m}),g=f.circleTangency,S=f.lineTangency,O=f.theta,D=m?Math.abs(b-v):Math.abs(b-v)-E-O;if(D<0)return d?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(h,",").concat(h,",0,0,1,").concat(h*2,`,0
        a`).concat(h,",").concat(h,",0,0,1,").concat(-h*2,`,0
      `):getSectorPath({cx:n,cy:i,innerRadius:o,outerRadius:l,startAngle:b,endAngle:v});var M="M ".concat(T.x,",").concat(T.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(w<0),",").concat(R.x,",").concat(R.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(D>180),",").concat(+(w<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(w<0),",").concat(S.x,",").concat(S.y,`
  `);if(o>0){var _=getTangentCircle({cx:n,cy:i,radius:o,angle:b,sign:w,isExternal:!0,cornerRadius:h,cornerIsExternal:m}),A=_.circleTangency,j=_.lineTangency,L=_.theta,$=getTangentCircle({cx:n,cy:i,radius:o,angle:v,sign:-w,isExternal:!0,cornerRadius:h,cornerIsExternal:m}),F=$.circleTangency,W=$.lineTangency,U=$.theta,q=m?Math.abs(b-v):Math.abs(b-v)-L-U;if(q<0&&h===0)return"".concat(M,"L").concat(n,",").concat(i,"Z");M+="L".concat(W.x,",").concat(W.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(w<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(q>180),",").concat(+(w>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(w<0),",").concat(j.x,",").concat(j.y,"Z")}else M+="L".concat(n,",").concat(i,"Z");return M},defaultProps$2={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=function(t){var n=_objectSpread$k(_objectSpread$k({},defaultProps$2),t),i=n.cx,o=n.cy,l=n.innerRadius,h=n.outerRadius,d=n.cornerRadius,m=n.forceCornerRadius,b=n.cornerIsExternal,v=n.startAngle,w=n.endAngle,C=n.className;if(h<l||v===w)return null;var R=clsx("recharts-sector",C),T=h-l,E=getPercentValue(d,T,0,!0),f;return E>0&&Math.abs(v-w)<360?f=getSectorWithCorner({cx:i,cy:o,innerRadius:l,outerRadius:h,cornerRadius:Math.min(E,T/2),forceCornerRadius:m,cornerIsExternal:b,startAngle:v,endAngle:w}):f=getSectorPath({cx:i,cy:o,innerRadius:l,outerRadius:h,startAngle:v,endAngle:w}),React.createElement("path",_extends$f({},filterProps(n,!0),{className:R,d:f,role:"img"}))};function _typeof$n(e){"@babel/helpers - typeof";return _typeof$n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$n(e)}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$e.apply(this,arguments)}function ownKeys$j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$j(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$j(Object(n),!0).forEach(function(i){_defineProperty$m(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$j(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$m(e,t,n){return t=_toPropertyKey$m(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$m(e){var t=_toPrimitive$m(e,"string");return _typeof$n(t)=="symbol"?t:t+""}function _toPrimitive$m(e,t){if(_typeof$n(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$n(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=function(t){return t.x===+t.x&&t.y===+t.y},getX=function(t){return t.x},getY=function(t){return t.y},getCurveFactory=function(t,n){if(isFunction(t))return t;var i="curve".concat(upperFirst(t));return(i==="curveMonotone"||i==="curveBump")&&n?CURVE_FACTORIES["".concat(i).concat(n==="vertical"?"Y":"X")]:CURVE_FACTORIES[i]||curveLinear},getPath$1=function(t){var n=t.type,i=n===void 0?"linear":n,o=t.points,l=o===void 0?[]:o,h=t.baseLine,d=t.layout,m=t.connectNulls,b=m===void 0?!1:m,v=getCurveFactory(i,d),w=b?l.filter(function(E){return defined(E)}):l,C;if(Array.isArray(h)){var R=b?h.filter(function(E){return defined(E)}):h,T=w.map(function(E,f){return _objectSpread$j(_objectSpread$j({},E),{},{base:R[f]})});return d==="vertical"?C=shapeArea().y(getY).x1(getX).x0(function(E){return E.base.x}):C=shapeArea().x(getX).y1(getY).y0(function(E){return E.base.y}),C.defined(defined).curve(v),C(T)}return d==="vertical"&&isNumber(h)?C=shapeArea().y(getY).x1(getX).x0(h):isNumber(h)?C=shapeArea().x(getX).y1(getY).y0(h):C=shapeLine().x(getX).y(getY),C.defined(defined).curve(v),C(w)},Curve=function(t){var n=t.className,i=t.points,o=t.path,l=t.pathRef;if((!i||!i.length)&&!o)return null;var h=i&&i.length?getPath$1(t):o;return reactExports.createElement("path",_extends$e({},filterProps(t,!1),adaptEventHandlers(t),{className:clsx("recharts-curve",n),d:h,ref:l}))},propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=e,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var e=requireReactPropTypesSecret();function t(){}function n(){}return n.resetWarningCache=t,factoryWithThrowingShims=function(){function i(h,d,m,b,v,w){if(w!==e){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}i.isRequired=i;function o(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports),{getOwnPropertyNames,getOwnPropertySymbols}=Object,{hasOwnProperty}=Object.prototype;function combineComparators(e,t){return function(i,o,l){return e(i,o,l)&&t(i,o,l)}}function createIsCircular(e){return function(n,i,o){if(!n||!i||typeof n!="object"||typeof i!="object")return e(n,i,o);const{cache:l}=o,h=l.get(n),d=l.get(i);if(h&&d)return h===i&&d===n;l.set(n,i),l.set(i,n);const m=e(n,i,o);return l.delete(n),l.delete(i),m}}function getShortTag(e){return e?.[Symbol.toStringTag]}function getStrictProperties(e){return getOwnPropertyNames(e).concat(getOwnPropertySymbols(e))}const hasOwn=Object.hasOwn||((e,t)=>hasOwnProperty.call(e,t));function sameValueZeroEqual(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const PREACT_VNODE="__v",PREACT_OWNER="__o",REACT_OWNER="_owner",{getOwnPropertyDescriptor,keys}=Object;function areArrayBuffersEqual(e,t){return e.byteLength===t.byteLength&&areTypedArraysEqual(new Uint8Array(e),new Uint8Array(t))}function areArraysEqual(e,t,n){let i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!n.equals(e[i],t[i],i,i,e,t,n))return!1;return!0}function areDataViewsEqual(e,t){return e.byteLength===t.byteLength&&areTypedArraysEqual(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function areDatesEqual(e,t){return sameValueZeroEqual(e.getTime(),t.getTime())}function areErrorsEqual(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function areFunctionsEqual(e,t){return e===t}function areMapsEqual(e,t,n){const i=e.size;if(i!==t.size)return!1;if(!i)return!0;const o=new Array(i),l=e.entries();let h,d,m=0;for(;(h=l.next())&&!h.done;){const b=t.entries();let v=!1,w=0;for(;(d=b.next())&&!d.done;){if(o[w]){w++;continue}const C=h.value,R=d.value;if(n.equals(C[0],R[0],m,w,e,t,n)&&n.equals(C[1],R[1],C[0],R[0],e,t,n)){v=o[w]=!0;break}w++}if(!v)return!1;m++}return!0}const areNumbersEqual=sameValueZeroEqual;function areObjectsEqual(e,t,n){const i=keys(e);let o=i.length;if(keys(t).length!==o)return!1;for(;o-- >0;)if(!isPropertyEqual(e,t,n,i[o]))return!1;return!0}function areObjectsEqualStrict(e,t,n){const i=getStrictProperties(e);let o=i.length;if(getStrictProperties(t).length!==o)return!1;let l,h,d;for(;o-- >0;)if(l=i[o],!isPropertyEqual(e,t,n,l)||(h=getOwnPropertyDescriptor(e,l),d=getOwnPropertyDescriptor(t,l),(h||d)&&(!h||!d||h.configurable!==d.configurable||h.enumerable!==d.enumerable||h.writable!==d.writable)))return!1;return!0}function arePrimitiveWrappersEqual(e,t){return sameValueZeroEqual(e.valueOf(),t.valueOf())}function areRegExpsEqual(e,t){return e.source===t.source&&e.flags===t.flags}function areSetsEqual(e,t,n){const i=e.size;if(i!==t.size)return!1;if(!i)return!0;const o=new Array(i),l=e.values();let h,d;for(;(h=l.next())&&!h.done;){const m=t.values();let b=!1,v=0;for(;(d=m.next())&&!d.done;){if(!o[v]&&n.equals(h.value,d.value,h.value,d.value,e,t,n)){b=o[v]=!0;break}v++}if(!b)return!1}return!0}function areTypedArraysEqual(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function areUrlsEqual(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function isPropertyEqual(e,t,n,i){return(i===REACT_OWNER||i===PREACT_OWNER||i===PREACT_VNODE)&&(e.$$typeof||t.$$typeof)?!0:hasOwn(t,i)&&n.equals(e[i],t[i],i,i,e,t,n)}const ARRAY_BUFFER_TAG="[object ArrayBuffer]",ARGUMENTS_TAG="[object Arguments]",BOOLEAN_TAG="[object Boolean]",DATA_VIEW_TAG="[object DataView]",DATE_TAG="[object Date]",ERROR_TAG="[object Error]",MAP_TAG="[object Map]",NUMBER_TAG="[object Number]",OBJECT_TAG="[object Object]",REG_EXP_TAG="[object RegExp]",SET_TAG="[object Set]",STRING_TAG="[object String]",TYPED_ARRAY_TAGS={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},URL_TAG="[object URL]",toString=Object.prototype.toString;function createEqualityComparator({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:i,areErrorsEqual:o,areFunctionsEqual:l,areMapsEqual:h,areNumbersEqual:d,areObjectsEqual:m,arePrimitiveWrappersEqual:b,areRegExpsEqual:v,areSetsEqual:w,areTypedArraysEqual:C,areUrlsEqual:R,unknownTagComparators:T}){return function(f,g,S){if(f===g)return!0;if(f==null||g==null)return!1;const O=typeof f;if(O!==typeof g)return!1;if(O!=="object")return O==="number"?d(f,g,S):O==="function"?l(f,g,S):!1;const D=f.constructor;if(D!==g.constructor)return!1;if(D===Object)return m(f,g,S);if(Array.isArray(f))return t(f,g,S);if(D===Date)return i(f,g,S);if(D===RegExp)return v(f,g,S);if(D===Map)return h(f,g,S);if(D===Set)return w(f,g,S);const M=toString.call(f);if(M===DATE_TAG)return i(f,g,S);if(M===REG_EXP_TAG)return v(f,g,S);if(M===MAP_TAG)return h(f,g,S);if(M===SET_TAG)return w(f,g,S);if(M===OBJECT_TAG)return typeof f.then!="function"&&typeof g.then!="function"&&m(f,g,S);if(M===URL_TAG)return R(f,g,S);if(M===ERROR_TAG)return o(f,g,S);if(M===ARGUMENTS_TAG)return m(f,g,S);if(TYPED_ARRAY_TAGS[M])return C(f,g,S);if(M===ARRAY_BUFFER_TAG)return e(f,g,S);if(M===DATA_VIEW_TAG)return n(f,g,S);if(M===BOOLEAN_TAG||M===NUMBER_TAG||M===STRING_TAG)return b(f,g,S);if(T){let _=T[M];if(!_){const A=getShortTag(f);A&&(_=T[A])}if(_)return _(f,g,S)}return!1}}function createEqualityComparatorConfig({circular:e,createCustomConfig:t,strict:n}){let i={areArrayBuffersEqual,areArraysEqual:n?areObjectsEqualStrict:areArraysEqual,areDataViewsEqual,areDatesEqual,areErrorsEqual,areFunctionsEqual,areMapsEqual:n?combineComparators(areMapsEqual,areObjectsEqualStrict):areMapsEqual,areNumbersEqual,areObjectsEqual:n?areObjectsEqualStrict:areObjectsEqual,arePrimitiveWrappersEqual,areRegExpsEqual,areSetsEqual:n?combineComparators(areSetsEqual,areObjectsEqualStrict):areSetsEqual,areTypedArraysEqual:n?combineComparators(areTypedArraysEqual,areObjectsEqualStrict):areTypedArraysEqual,areUrlsEqual,unknownTagComparators:void 0};if(t&&(i=Object.assign({},i,t(i))),e){const o=createIsCircular(i.areArraysEqual),l=createIsCircular(i.areMapsEqual),h=createIsCircular(i.areObjectsEqual),d=createIsCircular(i.areSetsEqual);i=Object.assign({},i,{areArraysEqual:o,areMapsEqual:l,areObjectsEqual:h,areSetsEqual:d})}return i}function createInternalEqualityComparator(e){return function(t,n,i,o,l,h,d){return e(t,n,d)}}function createIsEqual({circular:e,comparator:t,createState:n,equals:i,strict:o}){if(n)return function(d,m){const{cache:b=e?new WeakMap:void 0,meta:v}=n();return t(d,m,{cache:b,equals:i,meta:v,strict:o})};if(e)return function(d,m){return t(d,m,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};const l={cache:void 0,equals:i,meta:void 0,strict:o};return function(d,m){return t(d,m,l)}}const deepEqual=createCustomEqual();createCustomEqual({strict:!0});createCustomEqual({circular:!0});createCustomEqual({circular:!0,strict:!0});createCustomEqual({createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({strict:!0,createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual,strict:!0});function createCustomEqual(e={}){const{circular:t=!1,createInternalComparator:n,createState:i,strict:o=!1}=e,l=createEqualityComparatorConfig(e),h=createEqualityComparator(l),d=n?n(h):createInternalEqualityComparator(h);return createIsEqual({circular:t,comparator:h,createState:i,equals:d,strict:o})}function safeRequestAnimationFrame(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function setRafTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,i=function o(l){n<0&&(n=l),l-n>t?(e(l),n=-1):safeRequestAnimationFrame(o)};requestAnimationFrame(i)}function _typeof$m(e){"@babel/helpers - typeof";return _typeof$m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$m(e)}function _toArray(e){return _arrayWithHoles$6(e)||_iterableToArray$5(e)||_unsupportedIterableToArray$8(e)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$8(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$8(e,t)}}function _arrayLikeToArray$8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArray$5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithHoles$6(e){if(Array.isArray(e))return e}function createAnimateManager(){var e={},t=function(){return null},n=!1,i=function o(l){if(!n){if(Array.isArray(l)){if(!l.length)return;var h=l,d=_toArray(h),m=d[0],b=d.slice(1);if(typeof m=="number"){setRafTimeout(o.bind(null,b),m);return}o(m),setRafTimeout(o.bind(null,b));return}_typeof$m(l)==="object"&&(e=l,t(e)),typeof l=="function"&&l()}};return{stop:function(){n=!0},start:function(l){n=!1,i(l)},subscribe:function(l){return t=l,function(){t=function(){return null}}}}}function _typeof$l(e){"@babel/helpers - typeof";return _typeof$l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$l(e)}function ownKeys$i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$i(Object(n),!0).forEach(function(i){_defineProperty$l(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$i(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$l(e,t,n){return t=_toPropertyKey$l(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$l(e){var t=_toPrimitive$l(e,"string");return _typeof$l(t)==="symbol"?t:String(t)}function _toPrimitive$l(e,t){if(_typeof$l(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$l(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var getIntersectionKeys=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(i,o){return i.filter(function(l){return o.includes(l)})})},identity=function(t){return t},getDashCase=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},mapObject=function(t,n){return Object.keys(n).reduce(function(i,o){return _objectSpread$i(_objectSpread$i({},i),{},_defineProperty$l({},o,t(o,n[o])))},{})},getTransitionVal=function(t,n,i){return t.map(function(o){return"".concat(getDashCase(o)," ").concat(n,"ms ").concat(i)}).join(",")};function _slicedToArray$5(e,t){return _arrayWithHoles$5(e)||_iterableToArrayLimit$5(e,t)||_unsupportedIterableToArray$7(e,t)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit$5(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t!==0)for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$5(e){if(Array.isArray(e))return e}function _toConsumableArray$4(e){return _arrayWithoutHoles$4(e)||_iterableToArray$4(e)||_unsupportedIterableToArray$7(e)||_nonIterableSpread$4()}function _nonIterableSpread$4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$7(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$7(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$7(e,t)}}function _iterableToArray$4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$4(e){if(Array.isArray(e))return _arrayLikeToArray$7(e)}function _arrayLikeToArray$7(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ACCURACY=1e-4,cubicBezierFactor=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},multyTime=function(t,n){return t.map(function(i,o){return i*Math.pow(n,o)}).reduce(function(i,o){return i+o})},cubicBezier=function(t,n){return function(i){var o=cubicBezierFactor(t,n);return multyTime(o,i)}},derivativeCubicBezier=function(t,n){return function(i){var o=cubicBezierFactor(t,n),l=[].concat(_toConsumableArray$4(o.map(function(h,d){return h*d}).slice(1)),[0]);return multyTime(l,i)}},configBezier=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=n[0],l=n[1],h=n[2],d=n[3];if(n.length===1)switch(n[0]){case"linear":o=0,l=0,h=1,d=1;break;case"ease":o=.25,l=.1,h=.25,d=1;break;case"ease-in":o=.42,l=0,h=1,d=1;break;case"ease-out":o=.42,l=0,h=.58,d=1;break;case"ease-in-out":o=0,l=0,h=.58,d=1;break;default:{var m=n[0].split("(");if(m[0]==="cubic-bezier"&&m[1].split(")")[0].split(",").length===4){var b=m[1].split(")")[0].split(",").map(function(f){return parseFloat(f)}),v=_slicedToArray$5(b,4);o=v[0],l=v[1],h=v[2],d=v[3]}}}var w=cubicBezier(o,h),C=cubicBezier(l,d),R=derivativeCubicBezier(o,h),T=function(g){return g>1?1:g<0?0:g},E=function(g){for(var S=g>1?1:g,O=S,D=0;D<8;++D){var M=w(O)-S,_=R(O);if(Math.abs(M-S)<ACCURACY||_<ACCURACY)return C(O);O=T(O-M/_)}return C(O)};return E.isStepper=!1,E},configSpring=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,i=n===void 0?100:n,o=t.damping,l=o===void 0?8:o,h=t.dt,d=h===void 0?17:h,m=function(v,w,C){var R=-(v-w)*i,T=C*l,E=C+(R-T)*d/1e3,f=C*d/1e3+v;return Math.abs(f-w)<ACCURACY&&Math.abs(E)<ACCURACY?[w,0]:[f,E]};return m.isStepper=!0,m.dt=d,m},configEasing=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=n[0];if(typeof o=="string")switch(o){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(o);case"spring":return configSpring();default:if(o.split("(")[0]==="cubic-bezier")return configBezier(o)}return typeof o=="function"?o:null};function _typeof$k(e){"@babel/helpers - typeof";return _typeof$k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$k(e)}function _toConsumableArray$3(e){return _arrayWithoutHoles$3(e)||_iterableToArray$3(e)||_unsupportedIterableToArray$6(e)||_nonIterableSpread$3()}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$3(e){if(Array.isArray(e))return _arrayLikeToArray$6(e)}function ownKeys$h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$h(Object(n),!0).forEach(function(i){_defineProperty$k(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$h(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$k(e,t,n){return t=_toPropertyKey$k(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$k(e){var t=_toPrimitive$k(e,"string");return _typeof$k(t)==="symbol"?t:String(t)}function _toPrimitive$k(e,t){if(_typeof$k(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$k(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _slicedToArray$4(e,t){return _arrayWithHoles$4(e)||_iterableToArrayLimit$4(e,t)||_unsupportedIterableToArray$6(e,t)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$6(e,t)}}function _arrayLikeToArray$6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$4(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t!==0)for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$4(e){if(Array.isArray(e))return e}var alpha=function(t,n,i){return t+(n-t)*i},needContinue=function(t){var n=t.from,i=t.to;return n!==i},calStepperVals=function e(t,n,i){var o=mapObject(function(l,h){if(needContinue(h)){var d=t(h.from,h.to,h.velocity),m=_slicedToArray$4(d,2),b=m[0],v=m[1];return _objectSpread$h(_objectSpread$h({},h),{},{from:b,velocity:v})}return h},n);return i<1?mapObject(function(l,h){return needContinue(h)?_objectSpread$h(_objectSpread$h({},h),{},{velocity:alpha(h.velocity,o[l].velocity,i),from:alpha(h.from,o[l].from,i)}):h},n):e(t,o,i-1)};const configUpdate=(function(e,t,n,i,o){var l=getIntersectionKeys(e,t),h=l.reduce(function(f,g){return _objectSpread$h(_objectSpread$h({},f),{},_defineProperty$k({},g,[e[g],t[g]]))},{}),d=l.reduce(function(f,g){return _objectSpread$h(_objectSpread$h({},f),{},_defineProperty$k({},g,{from:e[g],velocity:0,to:t[g]}))},{}),m=-1,b,v,w=function(){return null},C=function(){return mapObject(function(g,S){return S.from},d)},R=function(){return!Object.values(d).filter(needContinue).length},T=function(g){b||(b=g);var S=g-b,O=S/n.dt;d=calStepperVals(n,d,O),o(_objectSpread$h(_objectSpread$h(_objectSpread$h({},e),t),C())),b=g,R()||(m=requestAnimationFrame(w))},E=function(g){v||(v=g);var S=(g-v)/i,O=mapObject(function(M,_){return alpha.apply(void 0,_toConsumableArray$3(_).concat([n(S)]))},h);if(o(_objectSpread$h(_objectSpread$h(_objectSpread$h({},e),t),O)),S<1)m=requestAnimationFrame(w);else{var D=mapObject(function(M,_){return alpha.apply(void 0,_toConsumableArray$3(_).concat([n(1)]))},h);o(_objectSpread$h(_objectSpread$h(_objectSpread$h({},e),t),D))}};return w=n.isStepper?T:E,function(){return requestAnimationFrame(w),function(){cancelAnimationFrame(m)}}});function _typeof$j(e){"@babel/helpers - typeof";return _typeof$j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$j(e)}var _excluded$6=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _objectWithoutProperties$6(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$6(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$6(e,t){if(e==null)return{};var n={},i=Object.keys(e),o,l;for(l=0;l<i.length;l++)o=i[l],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function _toConsumableArray$2(e){return _arrayWithoutHoles$2(e)||_iterableToArray$2(e)||_unsupportedIterableToArray$5(e)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$5(e,t)}}function _iterableToArray$2(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$2(e){if(Array.isArray(e))return _arrayLikeToArray$5(e)}function _arrayLikeToArray$5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ownKeys$g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$g(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$g(Object(n),!0).forEach(function(i){_defineProperty$j(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$g(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$j(e,t,n){return t=_toPropertyKey$j(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck$b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$j(i.key),i)}}function _createClass$b(e,t,n){return t&&_defineProperties$b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey$j(e){var t=_toPrimitive$j(e,"string");return _typeof$j(t)==="symbol"?t:String(t)}function _toPrimitive$j(e,t){if(_typeof$j(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$j(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _inherits$9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$9(e,t)}function _setPrototypeOf$9(e,t){return _setPrototypeOf$9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$9(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct$9();return function(){var i=_getPrototypeOf$9(e),o;if(t){var l=_getPrototypeOf$9(this).constructor;o=Reflect.construct(i,arguments,l)}else o=i.apply(this,arguments);return _possibleConstructorReturn$9(this,o)}}function _possibleConstructorReturn$9(e,t){if(t&&(_typeof$j(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$9(e)}function _assertThisInitialized$9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$9(e){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$9(e)}var Animate=(function(e){_inherits$9(n,e);var t=_createSuper(n);function n(i,o){var l;_classCallCheck$b(this,n),l=t.call(this,i,o);var h=l.props,d=h.isActive,m=h.attributeName,b=h.from,v=h.to,w=h.steps,C=h.children,R=h.duration;if(l.handleStyleChange=l.handleStyleChange.bind(_assertThisInitialized$9(l)),l.changeStyle=l.changeStyle.bind(_assertThisInitialized$9(l)),!d||R<=0)return l.state={style:{}},typeof C=="function"&&(l.state={style:v}),_possibleConstructorReturn$9(l);if(w&&w.length)l.state={style:w[0].style};else if(b){if(typeof C=="function")return l.state={style:b},_possibleConstructorReturn$9(l);l.state={style:m?_defineProperty$j({},m,b):b}}else l.state={style:{}};return l}return _createClass$b(n,[{key:"componentDidMount",value:function(){var o=this.props,l=o.isActive,h=o.canBegin;this.mounted=!0,!(!l||!h)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(o){var l=this.props,h=l.isActive,d=l.canBegin,m=l.attributeName,b=l.shouldReAnimate,v=l.to,w=l.from,C=this.state.style;if(d){if(!h){var R={style:m?_defineProperty$j({},m,v):v};this.state&&C&&(m&&C[m]!==v||!m&&C!==v)&&this.setState(R);return}if(!(deepEqual(o.to,v)&&o.canBegin&&o.isActive)){var T=!o.canBegin||!o.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var E=T||b?w:o.to;if(this.state&&C){var f={style:m?_defineProperty$j({},m,E):E};(m&&C[m]!==E||!m&&C!==E)&&this.setState(f)}this.runAnimation(_objectSpread$g(_objectSpread$g({},this.props),{},{from:E,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var o=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),o&&o()}},{key:"handleStyleChange",value:function(o){this.changeStyle(o)}},{key:"changeStyle",value:function(o){this.mounted&&this.setState({style:o})}},{key:"runJSAnimation",value:function(o){var l=this,h=o.from,d=o.to,m=o.duration,b=o.easing,v=o.begin,w=o.onAnimationEnd,C=o.onAnimationStart,R=configUpdate(h,d,configEasing(b),m,this.changeStyle),T=function(){l.stopJSAnimation=R()};this.manager.start([C,v,T,m,w])}},{key:"runStepAnimation",value:function(o){var l=this,h=o.steps,d=o.begin,m=o.onAnimationStart,b=h[0],v=b.style,w=b.duration,C=w===void 0?0:w,R=function(E,f,g){if(g===0)return E;var S=f.duration,O=f.easing,D=O===void 0?"ease":O,M=f.style,_=f.properties,A=f.onAnimationEnd,j=g>0?h[g-1]:f,L=_||Object.keys(M);if(typeof D=="function"||D==="spring")return[].concat(_toConsumableArray$2(E),[l.runJSAnimation.bind(l,{from:j.style,to:M,duration:S,easing:D}),S]);var $=getTransitionVal(L,S,D),F=_objectSpread$g(_objectSpread$g(_objectSpread$g({},j.style),M),{},{transition:$});return[].concat(_toConsumableArray$2(E),[F,S,A]).filter(identity)};return this.manager.start([m].concat(_toConsumableArray$2(h.reduce(R,[v,Math.max(C,d)])),[o.onAnimationEnd]))}},{key:"runAnimation",value:function(o){this.manager||(this.manager=createAnimateManager());var l=o.begin,h=o.duration,d=o.attributeName,m=o.to,b=o.easing,v=o.onAnimationStart,w=o.onAnimationEnd,C=o.steps,R=o.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof b=="function"||typeof R=="function"||b==="spring"){this.runJSAnimation(o);return}if(C.length>1){this.runStepAnimation(o);return}var E=d?_defineProperty$j({},d,m):m,f=getTransitionVal(Object.keys(E),h,b);T.start([v,l,_objectSpread$g(_objectSpread$g({},E),{},{transition:f}),h,w])}},{key:"render",value:function(){var o=this.props,l=o.children;o.begin;var h=o.duration;o.attributeName,o.easing;var d=o.isActive;o.steps,o.from,o.to,o.canBegin,o.onAnimationEnd,o.shouldReAnimate,o.onAnimationReStart;var m=_objectWithoutProperties$6(o,_excluded$6),b=reactExports.Children.count(l),v=this.state.style;if(typeof l=="function")return l(v);if(!d||b===0||h<=0)return l;var w=function(R){var T=R.props,E=T.style,f=E===void 0?{}:E,g=T.className,S=reactExports.cloneElement(R,_objectSpread$g(_objectSpread$g({},m),{},{style:_objectSpread$g(_objectSpread$g({},f),v),className:g}));return S};return b===1?w(reactExports.Children.only(l)):React.createElement("div",null,reactExports.Children.map(l,function(C){return w(C)}))}}]),n})(reactExports.PureComponent);Animate.displayName="Animate";Animate.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Animate.propTypes={from:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),to:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),attributeName:PropTypes.string,duration:PropTypes.number,begin:PropTypes.number,easing:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),steps:PropTypes.arrayOf(PropTypes.shape({duration:PropTypes.number.isRequired,style:PropTypes.object.isRequired,easing:PropTypes.oneOfType([PropTypes.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),PropTypes.func]),properties:PropTypes.arrayOf("string"),onAnimationEnd:PropTypes.func})),children:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),isActive:PropTypes.bool,canBegin:PropTypes.bool,onAnimationEnd:PropTypes.func,shouldReAnimate:PropTypes.bool,onAnimationStart:PropTypes.func,onAnimationReStart:PropTypes.func};function _typeof$i(e){"@babel/helpers - typeof";return _typeof$i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$i(e)}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$d.apply(this,arguments)}function _slicedToArray$3(e,t){return _arrayWithHoles$3(e)||_iterableToArrayLimit$3(e,t)||_unsupportedIterableToArray$4(e,t)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$4(e,t)}}function _arrayLikeToArray$4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$3(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t!==0)for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$3(e){if(Array.isArray(e))return e}function ownKeys$f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$f(Object(n),!0).forEach(function(i){_defineProperty$i(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$f(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$i(e,t,n){return t=_toPropertyKey$i(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$i(e){var t=_toPrimitive$i(e,"string");return _typeof$i(t)=="symbol"?t:t+""}function _toPrimitive$i(e,t){if(_typeof$i(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$i(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var getRectanglePath=function(t,n,i,o,l){var h=Math.min(Math.abs(i)/2,Math.abs(o)/2),d=o>=0?1:-1,m=i>=0?1:-1,b=o>=0&&i>=0||o<0&&i<0?1:0,v;if(h>0&&l instanceof Array){for(var w=[0,0,0,0],C=0,R=4;C<R;C++)w[C]=l[C]>h?h:l[C];v="M".concat(t,",").concat(n+d*w[0]),w[0]>0&&(v+="A ".concat(w[0],",").concat(w[0],",0,0,").concat(b,",").concat(t+m*w[0],",").concat(n)),v+="L ".concat(t+i-m*w[1],",").concat(n),w[1]>0&&(v+="A ".concat(w[1],",").concat(w[1],",0,0,").concat(b,`,
        `).concat(t+i,",").concat(n+d*w[1])),v+="L ".concat(t+i,",").concat(n+o-d*w[2]),w[2]>0&&(v+="A ".concat(w[2],",").concat(w[2],",0,0,").concat(b,`,
        `).concat(t+i-m*w[2],",").concat(n+o)),v+="L ".concat(t+m*w[3],",").concat(n+o),w[3]>0&&(v+="A ".concat(w[3],",").concat(w[3],",0,0,").concat(b,`,
        `).concat(t,",").concat(n+o-d*w[3])),v+="Z"}else if(h>0&&l===+l&&l>0){var T=Math.min(h,l);v="M ".concat(t,",").concat(n+d*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(b,",").concat(t+m*T,",").concat(n,`
            L `).concat(t+i-m*T,",").concat(n,`
            A `).concat(T,",").concat(T,",0,0,").concat(b,",").concat(t+i,",").concat(n+d*T,`
            L `).concat(t+i,",").concat(n+o-d*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(b,",").concat(t+i-m*T,",").concat(n+o,`
            L `).concat(t+m*T,",").concat(n+o,`
            A `).concat(T,",").concat(T,",0,0,").concat(b,",").concat(t,",").concat(n+o-d*T," Z")}else v="M ".concat(t,",").concat(n," h ").concat(i," v ").concat(o," h ").concat(-i," Z");return v},isInRectangle=function(t,n){if(!t||!n)return!1;var i=t.x,o=t.y,l=n.x,h=n.y,d=n.width,m=n.height;if(Math.abs(d)>0&&Math.abs(m)>0){var b=Math.min(l,l+d),v=Math.max(l,l+d),w=Math.min(h,h+m),C=Math.max(h,h+m);return i>=b&&i<=v&&o>=w&&o<=C}return!1},defaultProps$1={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=function(t){var n=_objectSpread$f(_objectSpread$f({},defaultProps$1),t),i=reactExports.useRef(),o=reactExports.useState(-1),l=_slicedToArray$3(o,2),h=l[0],d=l[1];reactExports.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var D=i.current.getTotalLength();D&&d(D)}catch{}},[]);var m=n.x,b=n.y,v=n.width,w=n.height,C=n.radius,R=n.className,T=n.animationEasing,E=n.animationDuration,f=n.animationBegin,g=n.isAnimationActive,S=n.isUpdateAnimationActive;if(m!==+m||b!==+b||v!==+v||w!==+w||v===0||w===0)return null;var O=clsx("recharts-rectangle",R);return S?React.createElement(Animate,{canBegin:h>0,from:{width:v,height:w,x:m,y:b},to:{width:v,height:w,x:m,y:b},duration:E,animationEasing:T,isActive:S},function(D){var M=D.width,_=D.height,A=D.x,j=D.y;return React.createElement(Animate,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:E,isActive:g,easing:T},React.createElement("path",_extends$d({},filterProps(n,!0),{className:O,d:getRectanglePath(A,j,M,_,C),ref:i})))}):React.createElement("path",_extends$d({},filterProps(n,!0),{className:O,d:getRectanglePath(m,b,v,w,C)}))};function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$c.apply(this,arguments)}var Dot=function(t){var n=t.cx,i=t.cy,o=t.r,l=t.className,h=clsx("recharts-dot",l);return n===+n&&i===+i&&o===+o?reactExports.createElement("circle",_extends$c({},filterProps(t,!1),adaptEventHandlers(t),{className:h,cx:n,cy:i,r:o})):null};function _typeof$h(e){"@babel/helpers - typeof";return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$h(e)}var _excluded$5=["x","y","top","left","width","height","className"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$b.apply(this,arguments)}function ownKeys$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$e(Object(n),!0).forEach(function(i){_defineProperty$h(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$e(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$h(e,t,n){return t=_toPropertyKey$h(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$h(e){var t=_toPrimitive$h(e,"string");return _typeof$h(t)=="symbol"?t:t+""}function _toPrimitive$h(e,t){if(_typeof$h(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$h(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$5(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$5(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$5(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var getPath=function(t,n,i,o,l,h){return"M".concat(t,",").concat(l,"v").concat(o,"M").concat(h,",").concat(n,"h").concat(i)},Cross=function(t){var n=t.x,i=n===void 0?0:n,o=t.y,l=o===void 0?0:o,h=t.top,d=h===void 0?0:h,m=t.left,b=m===void 0?0:m,v=t.width,w=v===void 0?0:v,C=t.height,R=C===void 0?0:C,T=t.className,E=_objectWithoutProperties$5(t,_excluded$5),f=_objectSpread$e({x:i,y:l,top:d,left:b,width:w,height:R},E);return!isNumber(i)||!isNumber(l)||!isNumber(w)||!isNumber(R)||!isNumber(d)||!isNumber(b)?null:React.createElement("path",_extends$b({},filterProps(f,!0),{className:clsx("recharts-cross",T),d:getPath(i,l,w,R,d,b)}))},_getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var e=require_overArg(),t=e(Object.getPrototypeOf,Object);return _getPrototype=t,_getPrototype}var isPlainObject_1,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var e=require_baseGetTag(),t=require_getPrototype(),n=requireIsObjectLike(),i="[object Object]",o=Function.prototype,l=Object.prototype,h=o.toString,d=l.hasOwnProperty,m=h.call(Object);function b(v){if(!n(v)||e(v)!=i)return!1;var w=t(v);if(w===null)return!0;var C=d.call(w,"constructor")&&w.constructor;return typeof C=="function"&&C instanceof C&&h.call(C)==m}return isPlainObject_1=b,isPlainObject_1}var isPlainObjectExports=requireIsPlainObject();const isPlainObject=getDefaultExportFromCjs(isPlainObjectExports);var isBoolean_1,hasRequiredIsBoolean;function requireIsBoolean(){if(hasRequiredIsBoolean)return isBoolean_1;hasRequiredIsBoolean=1;var e=require_baseGetTag(),t=requireIsObjectLike(),n="[object Boolean]";function i(o){return o===!0||o===!1||t(o)&&e(o)==n}return isBoolean_1=i,isBoolean_1}var isBooleanExports=requireIsBoolean();const isBoolean=getDefaultExportFromCjs(isBooleanExports);function _typeof$g(e){"@babel/helpers - typeof";return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$g(e)}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$a.apply(this,arguments)}function _slicedToArray$2(e,t){return _arrayWithHoles$2(e)||_iterableToArrayLimit$2(e,t)||_unsupportedIterableToArray$3(e,t)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$3(e,t)}}function _arrayLikeToArray$3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$2(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t!==0)for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$2(e){if(Array.isArray(e))return e}function ownKeys$d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$d(Object(n),!0).forEach(function(i){_defineProperty$g(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$d(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$g(e,t,n){return t=_toPropertyKey$g(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$g(e){var t=_toPrimitive$g(e,"string");return _typeof$g(t)=="symbol"?t:t+""}function _toPrimitive$g(e,t){if(_typeof$g(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$g(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var getTrapezoidPath=function(t,n,i,o,l){var h=i-o,d;return d="M ".concat(t,",").concat(n),d+="L ".concat(t+i,",").concat(n),d+="L ".concat(t+i-h/2,",").concat(n+l),d+="L ".concat(t+i-h/2-o,",").concat(n+l),d+="L ".concat(t,",").concat(n," Z"),d},defaultProps={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=function(t){var n=_objectSpread$d(_objectSpread$d({},defaultProps),t),i=reactExports.useRef(),o=reactExports.useState(-1),l=_slicedToArray$2(o,2),h=l[0],d=l[1];reactExports.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var O=i.current.getTotalLength();O&&d(O)}catch{}},[]);var m=n.x,b=n.y,v=n.upperWidth,w=n.lowerWidth,C=n.height,R=n.className,T=n.animationEasing,E=n.animationDuration,f=n.animationBegin,g=n.isUpdateAnimationActive;if(m!==+m||b!==+b||v!==+v||w!==+w||C!==+C||v===0&&w===0||C===0)return null;var S=clsx("recharts-trapezoid",R);return g?React.createElement(Animate,{canBegin:h>0,from:{upperWidth:0,lowerWidth:0,height:C,x:m,y:b},to:{upperWidth:v,lowerWidth:w,height:C,x:m,y:b},duration:E,animationEasing:T,isActive:g},function(O){var D=O.upperWidth,M=O.lowerWidth,_=O.height,A=O.x,j=O.y;return React.createElement(Animate,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:E,easing:T},React.createElement("path",_extends$a({},filterProps(n,!0),{className:S,d:getTrapezoidPath(A,j,D,M,_),ref:i})))}):React.createElement("g",null,React.createElement("path",_extends$a({},filterProps(n,!0),{className:S,d:getTrapezoidPath(m,b,v,w,C)})))},_excluded$4=["option","shapeType","propTransformer","activeClassName","isActive"];function _typeof$f(e){"@babel/helpers - typeof";return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$f(e)}function _objectWithoutProperties$4(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$4(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$4(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function ownKeys$c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$c(Object(n),!0).forEach(function(i){_defineProperty$f(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$c(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$f(e,t,n){return t=_toPropertyKey$f(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$f(e){var t=_toPrimitive$f(e,"string");return _typeof$f(t)=="symbol"?t:t+""}function _toPrimitive$f(e,t){if(_typeof$f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$f(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultPropTransformer(e,t){return _objectSpread$c(_objectSpread$c({},t),e)}function isSymbolsProps(e,t){return e==="symbols"}function ShapeSelector(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return React.createElement(Rectangle,n);case"trapezoid":return React.createElement(Trapezoid,n);case"sector":return React.createElement(Sector,n);case"symbols":if(isSymbolsProps(t))return React.createElement(Symbols,n);break;default:return null}}function getPropsFromShapeOption(e){return reactExports.isValidElement(e)?e.props:e}function Shape(e){var t=e.option,n=e.shapeType,i=e.propTransformer,o=i===void 0?defaultPropTransformer:i,l=e.activeClassName,h=l===void 0?"recharts-active-shape":l,d=e.isActive,m=_objectWithoutProperties$4(e,_excluded$4),b;if(reactExports.isValidElement(t))b=reactExports.cloneElement(t,_objectSpread$c(_objectSpread$c({},m),getPropsFromShapeOption(t)));else if(isFunction(t))b=t(m);else if(isPlainObject(t)&&!isBoolean(t)){var v=o(t,m);b=React.createElement(ShapeSelector,{shapeType:n,elementProps:v})}else{var w=m;b=React.createElement(ShapeSelector,{shapeType:n,elementProps:w})}return d?React.createElement(Layer,{className:h},b):b}function isFunnel(e,t){return t!=null&&"trapezoids"in e.props}function isPie(e,t){return t!=null&&"sectors"in e.props}function isScatter(e,t){return t!=null&&"points"in e.props}function compareFunnel(e,t){var n,i,o=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,l=e.y===(t==null||(i=t.labelViewBox)===null||i===void 0?void 0:i.y)||e.y===t.y;return o&&l}function comparePie(e,t){var n=e.endAngle===t.endAngle,i=e.startAngle===t.startAngle;return n&&i}function compareScatter(e,t){var n=e.x===t.x,i=e.y===t.y,o=e.z===t.z;return n&&i&&o}function getComparisonFn(e,t){var n;return isFunnel(e,t)?n=compareFunnel:isPie(e,t)?n=comparePie:isScatter(e,t)&&(n=compareScatter),n}function getShapeDataKey(e,t){var n;return isFunnel(e,t)?n="trapezoids":isPie(e,t)?n="sectors":isScatter(e,t)&&(n="points"),n}function getActiveShapeTooltipPayload(e,t){if(isFunnel(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(isPie(e,t)){var i;return(i=t.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}return isScatter(e,t)?t.payload:{}}function getActiveShapeIndexForTooltip(e){var t=e.activeTooltipItem,n=e.graphicalItem,i=e.itemData,o=getShapeDataKey(n,t),l=getActiveShapeTooltipPayload(n,t),h=i.filter(function(m,b){var v=isEqual(l,m),w=n.props[o].filter(function(T){var E=getComparisonFn(n,t);return E(T,t)}),C=n.props[o].indexOf(w[w.length-1]),R=b===C;return v&&R}),d=i.indexOf(h[h.length-1]);return d}var _baseRange,hasRequired_baseRange;function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var e=Math.ceil,t=Math.max;function n(i,o,l,h){for(var d=-1,m=t(e((o-i)/(l||1)),0),b=Array(m);m--;)b[h?m:++d]=i,i+=l;return b}return _baseRange=n,_baseRange}var toFinite_1,hasRequiredToFinite;function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var e=requireToNumber(),t=1/0,n=17976931348623157e292;function i(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var l=o<0?-1:1;return l*n}return o===o?o:0}return toFinite_1=i,toFinite_1}var _createRange,hasRequired_createRange;function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var e=require_baseRange(),t=require_isIterateeCall(),n=requireToFinite();function i(o){return function(l,h,d){return d&&typeof d!="number"&&t(l,h,d)&&(h=d=void 0),l=n(l),h===void 0?(h=l,l=0):h=n(h),d=d===void 0?l<h?1:-1:n(d),e(l,h,d,o)}}return _createRange=i,_createRange}var range_1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range_1;hasRequiredRange=1;var e=require_createRange(),t=e();return range_1=t,range_1}var rangeExports=requireRange();const range=getDefaultExportFromCjs(rangeExports);function _typeof$e(e){"@babel/helpers - typeof";return _typeof$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$e(e)}function ownKeys$b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$b(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$b(Object(n),!0).forEach(function(i){_defineProperty$e(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$e(e,t,n){return t=_toPropertyKey$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$e(e){var t=_toPrimitive$e(e,"string");return _typeof$e(t)=="symbol"?t:t+""}function _toPrimitive$e(e,t){if(_typeof$e(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$e(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PREFIX_LIST=["Webkit","Moz","O","ms"],generatePrefixStyle=function(t,n){var i=t.replace(/(\w)/,function(l){return l.toUpperCase()}),o=PREFIX_LIST.reduce(function(l,h){return _objectSpread$b(_objectSpread$b({},l),{},_defineProperty$e({},h+i,n))},{});return o[t]=n,o};function _typeof$d(e){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$d(e)}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$9.apply(this,arguments)}function ownKeys$a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$a(Object(n),!0).forEach(function(i){_defineProperty$d(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _classCallCheck$a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$d(i.key),i)}}function _createClass$a(e,t,n){return t&&_defineProperties$a(e.prototype,t),n&&_defineProperties$a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$8(e,t,n){return t=_getPrototypeOf$8(t),_possibleConstructorReturn$8(e,_isNativeReflectConstruct$8()?Reflect.construct(t,n||[],_getPrototypeOf$8(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$8(e,t){if(t&&(_typeof$d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$8(e)}function _assertThisInitialized$8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$8=function(){return!!e})()}function _getPrototypeOf$8(e){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$8(e)}function _inherits$8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$8(e,t)}function _setPrototypeOf$8(e,t){return _setPrototypeOf$8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$8(e,t)}function _defineProperty$d(e,t,n){return t=_toPropertyKey$d(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$d(e){var t=_toPrimitive$d(e,"string");return _typeof$d(t)=="symbol"?t:t+""}function _toPrimitive$d(e,t){if(_typeof$d(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$d(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var createScale=function(t){var n=t.data,i=t.startIndex,o=t.endIndex,l=t.x,h=t.width,d=t.travellerWidth;if(!n||!n.length)return{};var m=n.length,b=point().domain(range(0,m)).range([l,l+h-d]),v=b.domain().map(function(w){return b(w)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:b(i),endX:b(o),scale:b,scaleValues:v}},isTouch=function(t){return t.changedTouches&&!!t.changedTouches.length},Brush=(function(e){function t(n){var i;return _classCallCheck$a(this,t),i=_callSuper$8(this,t,[n]),_defineProperty$d(i,"handleDrag",function(o){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(o):i.state.isSlideMoving&&i.handleSlideDrag(o)}),_defineProperty$d(i,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&i.handleDrag(o.changedTouches[0])}),_defineProperty$d(i,"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=i.props,l=o.endIndex,h=o.onDragEnd,d=o.startIndex;h?.({endIndex:l,startIndex:d})}),i.detachDragEndListener()}),_defineProperty$d(i,"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),_defineProperty$d(i,"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),_defineProperty$d(i,"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),_defineProperty$d(i,"handleSlideDragStart",function(o){var l=isTouch(o)?o.changedTouches[0]:o;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:l.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(i,"startX"),endX:i.handleTravellerDragStart.bind(i,"endX")},i.state={},i}return _inherits$8(t,e),_createClass$a(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var o=i.startX,l=i.endX,h=this.state.scaleValues,d=this.props,m=d.gap,b=d.data,v=b.length-1,w=Math.min(o,l),C=Math.max(o,l),R=t.getIndexInRange(h,w),T=t.getIndexInRange(h,C);return{startIndex:R-R%m,endIndex:T===v?v:T-T%m}}},{key:"getTextOfTick",value:function(i){var o=this.props,l=o.data,h=o.tickFormatter,d=o.dataKey,m=getValueByDataKey(l[i],d,i);return isFunction(h)?h(m,i):m}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var o=this.state,l=o.slideMoveStartX,h=o.startX,d=o.endX,m=this.props,b=m.x,v=m.width,w=m.travellerWidth,C=m.startIndex,R=m.endIndex,T=m.onChange,E=i.pageX-l;E>0?E=Math.min(E,b+v-w-d,b+v-w-h):E<0&&(E=Math.max(E,b-h,b-d));var f=this.getIndex({startX:h+E,endX:d+E});(f.startIndex!==C||f.endIndex!==R)&&T&&T(f),this.setState({startX:h+E,endX:d+E,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,o){var l=isTouch(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:l.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var o=this.state,l=o.brushMoveStartX,h=o.movingTravellerId,d=o.endX,m=o.startX,b=this.state[h],v=this.props,w=v.x,C=v.width,R=v.travellerWidth,T=v.onChange,E=v.gap,f=v.data,g={startX:this.state.startX,endX:this.state.endX},S=i.pageX-l;S>0?S=Math.min(S,w+C-R-b):S<0&&(S=Math.max(S,w-b)),g[h]=b+S;var O=this.getIndex(g),D=O.startIndex,M=O.endIndex,_=function(){var j=f.length-1;return h==="startX"&&(d>m?D%E===0:M%E===0)||d<m&&M===j||h==="endX"&&(d>m?M%E===0:D%E===0)||d>m&&M===j};this.setState(_defineProperty$d(_defineProperty$d({},h,b+S),"brushMoveStartX",i.pageX),function(){T&&_()&&T(O)})}},{key:"handleTravellerMoveKeyboard",value:function(i,o){var l=this,h=this.state,d=h.scaleValues,m=h.startX,b=h.endX,v=this.state[o],w=d.indexOf(v);if(w!==-1){var C=w+i;if(!(C===-1||C>=d.length)){var R=d[C];o==="startX"&&R>=b||o==="endX"&&R<=m||this.setState(_defineProperty$d({},o,R),function(){l.props.onChange(l.getIndex({startX:l.state.startX,endX:l.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,o=i.x,l=i.y,h=i.width,d=i.height,m=i.fill,b=i.stroke;return React.createElement("rect",{stroke:b,fill:m,x:o,y:l,width:h,height:d})}},{key:"renderPanorama",value:function(){var i=this.props,o=i.x,l=i.y,h=i.width,d=i.height,m=i.data,b=i.children,v=i.padding,w=reactExports.Children.only(b);return w?React.cloneElement(w,{x:o,y:l,width:h,height:d,margin:v,compact:!0,data:m}):null}},{key:"renderTravellerLayer",value:function(i,o){var l,h,d=this,m=this.props,b=m.y,v=m.travellerWidth,w=m.height,C=m.traveller,R=m.ariaLabel,T=m.data,E=m.startIndex,f=m.endIndex,g=Math.max(i,this.props.x),S=_objectSpread$a(_objectSpread$a({},filterProps(this.props,!1)),{},{x:g,y:b,width:v,height:w}),O=R||"Min value: ".concat((l=T[E])===null||l===void 0?void 0:l.name,", Max value: ").concat((h=T[f])===null||h===void 0?void 0:h.name);return React.createElement(Layer,{tabIndex:0,role:"slider","aria-label":O,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(M){["ArrowLeft","ArrowRight"].includes(M.key)&&(M.preventDefault(),M.stopPropagation(),d.handleTravellerMoveKeyboard(M.key==="ArrowRight"?1:-1,o))},onFocus:function(){d.setState({isTravellerFocused:!0})},onBlur:function(){d.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(C,S))}},{key:"renderSlide",value:function(i,o){var l=this.props,h=l.y,d=l.height,m=l.stroke,b=l.travellerWidth,v=Math.min(i,o)+b,w=Math.max(Math.abs(o-i)-b,0);return React.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:m,fillOpacity:.2,x:v,y:h,width:w,height:d})}},{key:"renderText",value:function(){var i=this.props,o=i.startIndex,l=i.endIndex,h=i.y,d=i.height,m=i.travellerWidth,b=i.stroke,v=this.state,w=v.startX,C=v.endX,R=5,T={pointerEvents:"none",fill:b};return React.createElement(Layer,{className:"recharts-brush-texts"},React.createElement(Text,_extends$9({textAnchor:"end",verticalAnchor:"middle",x:Math.min(w,C)-R,y:h+d/2},T),this.getTextOfTick(o)),React.createElement(Text,_extends$9({textAnchor:"start",verticalAnchor:"middle",x:Math.max(w,C)+m+R,y:h+d/2},T),this.getTextOfTick(l)))}},{key:"render",value:function(){var i=this.props,o=i.data,l=i.className,h=i.children,d=i.x,m=i.y,b=i.width,v=i.height,w=i.alwaysShowText,C=this.state,R=C.startX,T=C.endX,E=C.isTextActive,f=C.isSlideMoving,g=C.isTravellerMoving,S=C.isTravellerFocused;if(!o||!o.length||!isNumber(d)||!isNumber(m)||!isNumber(b)||!isNumber(v)||b<=0||v<=0)return null;var O=clsx("recharts-brush",l),D=React.Children.count(h)===1,M=generatePrefixStyle("userSelect","none");return React.createElement(Layer,{className:O,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:M},this.renderBackground(),D&&this.renderPanorama(),this.renderSlide(R,T),this.renderTravellerLayer(R,"startX"),this.renderTravellerLayer(T,"endX"),(E||f||g||S||w)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var o=i.x,l=i.y,h=i.width,d=i.height,m=i.stroke,b=Math.floor(l+d/2)-1;return React.createElement(React.Fragment,null,React.createElement("rect",{x:o,y:l,width:h,height:d,fill:m,stroke:"none"}),React.createElement("line",{x1:o+1,y1:b,x2:o+h-1,y2:b,fill:"none",stroke:"#fff"}),React.createElement("line",{x1:o+1,y1:b+2,x2:o+h-1,y2:b+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,o){var l;return React.isValidElement(i)?l=React.cloneElement(i,o):isFunction(i)?l=i(o):l=t.renderDefaultTraveller(o),l}},{key:"getDerivedStateFromProps",value:function(i,o){var l=i.data,h=i.width,d=i.x,m=i.travellerWidth,b=i.updateId,v=i.startIndex,w=i.endIndex;if(l!==o.prevData||b!==o.prevUpdateId)return _objectSpread$a({prevData:l,prevTravellerWidth:m,prevUpdateId:b,prevX:d,prevWidth:h},l&&l.length?createScale({data:l,width:h,x:d,travellerWidth:m,startIndex:v,endIndex:w}):{scale:null,scaleValues:null});if(o.scale&&(h!==o.prevWidth||d!==o.prevX||m!==o.prevTravellerWidth)){o.scale.range([d,d+h-m]);var C=o.scale.domain().map(function(R){return o.scale(R)});return{prevData:l,prevTravellerWidth:m,prevUpdateId:b,prevX:d,prevWidth:h,startX:o.scale(i.startIndex),endX:o.scale(i.endIndex),scaleValues:C}}return null}},{key:"getIndexInRange",value:function(i,o){for(var l=i.length,h=0,d=l-1;d-h>1;){var m=Math.floor((h+d)/2);i[m]>o?d=m:h=m}return o>=i[d]?d:h}}])})(reactExports.PureComponent);_defineProperty$d(Brush,"displayName","Brush");_defineProperty$d(Brush,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var _baseSome,hasRequired_baseSome;function require_baseSome(){if(hasRequired_baseSome)return _baseSome;hasRequired_baseSome=1;var e=require_baseEach();function t(n,i){var o;return e(n,function(l,h,d){return o=i(l,h,d),!o}),!!o}return _baseSome=t,_baseSome}var some_1,hasRequiredSome;function requireSome(){if(hasRequiredSome)return some_1;hasRequiredSome=1;var e=require_arraySome(),t=require_baseIteratee(),n=require_baseSome(),i=requireIsArray(),o=require_isIterateeCall();function l(h,d,m){var b=i(h)?e:n;return m&&o(h,d,m)&&(d=void 0),b(h,t(d,3))}return some_1=l,some_1}var someExports=requireSome();const some=getDefaultExportFromCjs(someExports);var ifOverflowMatches=function(t,n){var i=t.alwaysShow,o=t.ifOverflow;return i&&(o="extendDomain"),o===n},_baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var e=require_defineProperty();function t(n,i,o){i=="__proto__"&&e?e(n,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[i]=o}return _baseAssignValue=t,_baseAssignValue}var mapValues_1,hasRequiredMapValues;function requireMapValues(){if(hasRequiredMapValues)return mapValues_1;hasRequiredMapValues=1;var e=require_baseAssignValue(),t=require_baseForOwn(),n=require_baseIteratee();function i(o,l){var h={};return l=n(l,3),t(o,function(d,m,b){e(h,m,l(d,m,b))}),h}return mapValues_1=i,mapValues_1}var mapValuesExports=requireMapValues();const mapValues=getDefaultExportFromCjs(mapValuesExports);var _arrayEvery,hasRequired_arrayEvery;function require_arrayEvery(){if(hasRequired_arrayEvery)return _arrayEvery;hasRequired_arrayEvery=1;function e(t,n){for(var i=-1,o=t==null?0:t.length;++i<o;)if(!n(t[i],i,t))return!1;return!0}return _arrayEvery=e,_arrayEvery}var _baseEvery,hasRequired_baseEvery;function require_baseEvery(){if(hasRequired_baseEvery)return _baseEvery;hasRequired_baseEvery=1;var e=require_baseEach();function t(n,i){var o=!0;return e(n,function(l,h,d){return o=!!i(l,h,d),o}),o}return _baseEvery=t,_baseEvery}var every_1,hasRequiredEvery;function requireEvery(){if(hasRequiredEvery)return every_1;hasRequiredEvery=1;var e=require_arrayEvery(),t=require_baseEvery(),n=require_baseIteratee(),i=requireIsArray(),o=require_isIterateeCall();function l(h,d,m){var b=i(h)?e:t;return m&&o(h,d,m)&&(d=void 0),b(h,n(d,3))}return every_1=l,every_1}var everyExports=requireEvery();const every=getDefaultExportFromCjs(everyExports);var _excluded$3=["x","y"];function _typeof$c(e){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$c(e)}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$8.apply(this,arguments)}function ownKeys$9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$9(Object(n),!0).forEach(function(i){_defineProperty$c(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$c(e,t,n){return t=_toPropertyKey$c(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$c(e){var t=_toPrimitive$c(e,"string");return _typeof$c(t)=="symbol"?t:t+""}function _toPrimitive$c(e,t){if(_typeof$c(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$c(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$3(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$3(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$3(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function typeguardBarRectangleProps(e,t){var n=e.x,i=e.y,o=_objectWithoutProperties$3(e,_excluded$3),l="".concat(n),h=parseInt(l,10),d="".concat(i),m=parseInt(d,10),b="".concat(t.height||o.height),v=parseInt(b,10),w="".concat(t.width||o.width),C=parseInt(w,10);return _objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9({},t),o),h?{x:h}:{}),m?{y:m}:{}),{},{height:v,width:C,name:t.name,radius:t.radius})}function BarRectangle(e){return React.createElement(Shape,_extends$8({shapeType:"rectangle",propTransformer:typeguardBarRectangleProps,activeClassName:"recharts-active-bar"},e))}var minPointSizeCallback=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(i,o){if(typeof t=="number")return t;var l=isNumber(i)||isNullish(i);return l?t(i,o):(l||invariant(),n)}},_excluded$2=["value","background"],_Bar;function _typeof$b(e){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$b(e)}function _objectWithoutProperties$2(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$2(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$2(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$7.apply(this,arguments)}function ownKeys$8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$8(Object(n),!0).forEach(function(i){_defineProperty$b(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _classCallCheck$9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$b(i.key),i)}}function _createClass$9(e,t,n){return t&&_defineProperties$9(e.prototype,t),n&&_defineProperties$9(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$7(e,t,n){return t=_getPrototypeOf$7(t),_possibleConstructorReturn$7(e,_isNativeReflectConstruct$7()?Reflect.construct(t,n||[],_getPrototypeOf$7(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$7(e,t){if(t&&(_typeof$b(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$7(e)}function _assertThisInitialized$7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$7=function(){return!!e})()}function _getPrototypeOf$7(e){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$7(e)}function _inherits$7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$7(e,t)}function _setPrototypeOf$7(e,t){return _setPrototypeOf$7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$7(e,t)}function _defineProperty$b(e,t,n){return t=_toPropertyKey$b(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$b(e){var t=_toPrimitive$b(e,"string");return _typeof$b(t)=="symbol"?t:t+""}function _toPrimitive$b(e,t){if(_typeof$b(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$b(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bar=(function(e){function t(){var n;_classCallCheck$9(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return n=_callSuper$7(this,t,[].concat(o)),_defineProperty$b(n,"state",{isAnimationFinished:!1}),_defineProperty$b(n,"id",uniqueId("recharts-bar-")),_defineProperty$b(n,"handleAnimationEnd",function(){var h=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),h&&h()}),_defineProperty$b(n,"handleAnimationStart",function(){var h=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),h&&h()}),n}return _inherits$7(t,e),_createClass$9(t,[{key:"renderRectanglesStatically",value:function(i){var o=this,l=this.props,h=l.shape,d=l.dataKey,m=l.activeIndex,b=l.activeBar,v=filterProps(this.props,!1);return i&&i.map(function(w,C){var R=C===m,T=R?b:h,E=_objectSpread$8(_objectSpread$8(_objectSpread$8({},v),w),{},{isActive:R,option:T,index:C,dataKey:d,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return React.createElement(Layer,_extends$7({className:"recharts-bar-rectangle"},adaptEventsOfChild(o.props,w,C),{key:"rectangle-".concat(w?.x,"-").concat(w?.y,"-").concat(w?.value,"-").concat(C)}),React.createElement(BarRectangle,E))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,o=this.props,l=o.data,h=o.layout,d=o.isAnimationActive,m=o.animationBegin,b=o.animationDuration,v=o.animationEasing,w=o.animationId,C=this.state.prevData;return React.createElement(Animate,{begin:m,duration:b,isActive:d,easing:v,from:{t:0},to:{t:1},key:"bar-".concat(w),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(R){var T=R.t,E=l.map(function(f,g){var S=C&&C[g];if(S){var O=interpolateNumber$2(S.x,f.x),D=interpolateNumber$2(S.y,f.y),M=interpolateNumber$2(S.width,f.width),_=interpolateNumber$2(S.height,f.height);return _objectSpread$8(_objectSpread$8({},f),{},{x:O(T),y:D(T),width:M(T),height:_(T)})}if(h==="horizontal"){var A=interpolateNumber$2(0,f.height),j=A(T);return _objectSpread$8(_objectSpread$8({},f),{},{y:f.y+f.height-j,height:j})}var L=interpolateNumber$2(0,f.width),$=L(T);return _objectSpread$8(_objectSpread$8({},f),{},{width:$})});return React.createElement(Layer,null,i.renderRectanglesStatically(E))})}},{key:"renderRectangles",value:function(){var i=this.props,o=i.data,l=i.isAnimationActive,h=this.state.prevData;return l&&o&&o.length&&(!h||!isEqual(h,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var i=this,o=this.props,l=o.data,h=o.dataKey,d=o.activeIndex,m=filterProps(this.props.background,!1);return l.map(function(b,v){b.value;var w=b.background,C=_objectWithoutProperties$2(b,_excluded$2);if(!w)return null;var R=_objectSpread$8(_objectSpread$8(_objectSpread$8(_objectSpread$8(_objectSpread$8({},C),{},{fill:"#eee"},w),m),adaptEventsOfChild(i.props,b,v)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:h,index:v,className:"recharts-bar-background-rectangle"});return React.createElement(BarRectangle,_extends$7({key:"background-bar-".concat(v),option:i.props.background,isActive:v===d},R))})}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.data,d=l.xAxis,m=l.yAxis,b=l.layout,v=l.children,w=findAllByType(v,ErrorBar);if(!w)return null;var C=b==="vertical"?h[0].height/2:h[0].width/2,R=function(f,g){var S=Array.isArray(f.value)?f.value[1]:f.value;return{x:f.x,y:f.y,value:S,errorVal:getValueByDataKey(f,g)}},T={clipPath:i?"url(#clipPath-".concat(o,")"):null};return React.createElement(Layer,T,w.map(function(E){return React.cloneElement(E,{key:"error-bar-".concat(o,"-").concat(E.props.dataKey),data:h,xAxis:d,yAxis:m,layout:b,offset:C,dataPointFormatter:R})}))}},{key:"render",value:function(){var i=this.props,o=i.hide,l=i.data,h=i.className,d=i.xAxis,m=i.yAxis,b=i.left,v=i.top,w=i.width,C=i.height,R=i.isAnimationActive,T=i.background,E=i.id;if(o||!l||!l.length)return null;var f=this.state.isAnimationFinished,g=clsx("recharts-bar",h),S=d&&d.allowDataOverflow,O=m&&m.allowDataOverflow,D=S||O,M=isNil(E)?this.id:E;return React.createElement(Layer,{className:g},S||O?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(M)},React.createElement("rect",{x:S?b:b-w/2,y:O?v:v-C/2,width:S?w:w*2,height:O?C:C*2}))):null,React.createElement(Layer,{className:"recharts-bar-rectangles",clipPath:D?"url(#clipPath-".concat(M,")"):null},T?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(D,M),(!R||f)&&LabelList.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:o.curData}:i.data!==o.curData?{curData:i.data}:null}}])})(reactExports.PureComponent);_Bar=Bar;_defineProperty$b(Bar,"displayName","Bar");_defineProperty$b(Bar,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_defineProperty$b(Bar,"getComposedData",function(e){var t=e.props,n=e.item,i=e.barPosition,o=e.bandSize,l=e.xAxis,h=e.yAxis,d=e.xAxisTicks,m=e.yAxisTicks,b=e.stackedData,v=e.dataStartIndex,w=e.displayedData,C=e.offset,R=findPositionOfBar(i,n);if(!R)return null;var T=t.layout,E=n.type.defaultProps,f=E!==void 0?_objectSpread$8(_objectSpread$8({},E),n.props):n.props,g=f.dataKey,S=f.children,O=f.minPointSize,D=T==="horizontal"?h:l,M=b?D.scale.domain():null,_=getBaseValueOfBar({numericAxis:D}),A=findAllByType(S,Cell),j=w.map(function(L,$){var F,W,U,q,H,Y;b?F=truncateByDomain(b[v+$],M):(F=getValueByDataKey(L,g),Array.isArray(F)||(F=[_,F]));var Z=minPointSizeCallback(O,_Bar.defaultProps.minPointSize)(F[1],$);if(T==="horizontal"){var X,J=[h.scale(F[0]),h.scale(F[1])],Q=J[0],G=J[1];W=getCateCoordinateOfBar({axis:l,ticks:d,bandSize:o,offset:R.offset,entry:L,index:$}),U=(X=G??Q)!==null&&X!==void 0?X:void 0,q=R.size;var te=Q-G;if(H=Number.isNaN(te)?0:te,Y={x:W,y:h.y,width:q,height:h.height},Math.abs(Z)>0&&Math.abs(H)<Math.abs(Z)){var ue=mathSign(H||Z)*(Math.abs(Z)-Math.abs(H));U-=ue,H+=ue}}else{var de=[l.scale(F[0]),l.scale(F[1])],xe=de[0],ve=de[1];if(W=xe,U=getCateCoordinateOfBar({axis:h,ticks:m,bandSize:o,offset:R.offset,entry:L,index:$}),q=ve-xe,H=R.size,Y={x:l.x,y:U,width:l.width,height:H},Math.abs(Z)>0&&Math.abs(q)<Math.abs(Z)){var Se=mathSign(q||Z)*(Math.abs(Z)-Math.abs(q));q+=Se}}return _objectSpread$8(_objectSpread$8(_objectSpread$8({},L),{},{x:W,y:U,width:q,height:H,value:b?F:F[1],payload:L,background:Y},A&&A[$]&&A[$].props),{},{tooltipPayload:[getTooltipItem(n,L)],tooltipPosition:{x:W+q/2,y:U+H/2}})});return _objectSpread$8({data:j,layout:T},C)});function _typeof$a(e){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$a(e)}function _classCallCheck$8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$a(i.key),i)}}function _createClass$8(e,t,n){return t&&_defineProperties$8(e.prototype,t),n&&_defineProperties$8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ownKeys$7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$7(Object(n),!0).forEach(function(i){_defineProperty$a(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$a(e,t,n){return t=_toPropertyKey$a(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$a(e){var t=_toPrimitive$a(e,"string");return _typeof$a(t)=="symbol"?t:t+""}function _toPrimitive$a(e,t){if(_typeof$a(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$a(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var formatAxisMap=function(t,n,i,o,l){var h=t.width,d=t.height,m=t.layout,b=t.children,v=Object.keys(n),w={left:i.left,leftMirror:i.left,right:h-i.right,rightMirror:h-i.right,top:i.top,topMirror:i.top,bottom:d-i.bottom,bottomMirror:d-i.bottom},C=!!findChildByType(b,Bar);return v.reduce(function(R,T){var E=n[T],f=E.orientation,g=E.domain,S=E.padding,O=S===void 0?{}:S,D=E.mirror,M=E.reversed,_="".concat(f).concat(D?"Mirror":""),A,j,L,$,F;if(E.type==="number"&&(E.padding==="gap"||E.padding==="no-gap")){var W=g[1]-g[0],U=1/0,q=E.categoricalDomain.sort(compareValues);if(q.forEach(function(de,xe){xe>0&&(U=Math.min((de||0)-(q[xe-1]||0),U))}),Number.isFinite(U)){var H=U/W,Y=E.layout==="vertical"?i.height:i.width;if(E.padding==="gap"&&(A=H*Y/2),E.padding==="no-gap"){var Z=getPercentValue(t.barCategoryGap,H*Y),X=H*Y/2;A=X-Z-(X-Z)/Y*Z}}}o==="xAxis"?j=[i.left+(O.left||0)+(A||0),i.left+i.width-(O.right||0)-(A||0)]:o==="yAxis"?j=m==="horizontal"?[i.top+i.height-(O.bottom||0),i.top+(O.top||0)]:[i.top+(O.top||0)+(A||0),i.top+i.height-(O.bottom||0)-(A||0)]:j=E.range,M&&(j=[j[1],j[0]]);var J=parseScale(E,l,C),Q=J.scale,G=J.realScaleType;Q.domain(g).range(j),checkDomainOfScale(Q);var te=getTicksOfScale(Q,_objectSpread$7(_objectSpread$7({},E),{},{realScaleType:G}));o==="xAxis"?(F=f==="top"&&!D||f==="bottom"&&D,L=i.left,$=w[_]-F*E.height):o==="yAxis"&&(F=f==="left"&&!D||f==="right"&&D,L=w[_]-F*E.width,$=i.top);var ue=_objectSpread$7(_objectSpread$7(_objectSpread$7({},E),te),{},{realScaleType:G,x:L,y:$,scale:Q,width:o==="xAxis"?i.width:E.width,height:o==="yAxis"?i.height:E.height});return ue.bandSize=getBandSizeOfAxis(ue,te),!E.hide&&o==="xAxis"?w[_]+=(F?-1:1)*ue.height:E.hide||(w[_]+=(F?-1:1)*ue.width),_objectSpread$7(_objectSpread$7({},R),{},_defineProperty$a({},T,ue))},{})},rectWithPoints=function(t,n){var i=t.x,o=t.y,l=n.x,h=n.y;return{x:Math.min(i,l),y:Math.min(o,h),width:Math.abs(l-i),height:Math.abs(h-o)}},rectWithCoords=function(t){var n=t.x1,i=t.y1,o=t.x2,l=t.y2;return rectWithPoints({x:n,y:i},{x:o,y:l})},ScaleHelper=(function(){function e(t){_classCallCheck$8(this,e),this.scale=t}return _createClass$8(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;if(n!==void 0){if(l)switch(l){case"start":return this.scale(n);case"middle":{var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+h}case"end":{var d=this.bandwidth?this.bandwidth():0;return this.scale(n)+d}default:return this.scale(n)}if(o){var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+m}return this.scale(n)}}},{key:"isInRange",value:function(n){var i=this.range(),o=i[0],l=i[i.length-1];return o<=l?n>=o&&n<=l:n>=l&&n<=o}}],[{key:"create",value:function(n){return new e(n)}}])})();_defineProperty$a(ScaleHelper,"EPS",1e-4);var createLabeledScales=function(t){var n=Object.keys(t).reduce(function(i,o){return _objectSpread$7(_objectSpread$7({},i),{},_defineProperty$a({},o,ScaleHelper.create(t[o])))},{});return _objectSpread$7(_objectSpread$7({},n),{},{apply:function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=l.bandAware,d=l.position;return mapValues(o,function(m,b){return n[b].apply(m,{bandAware:h,position:d})})},isInRange:function(o){return every(o,function(l,h){return n[h].isInRange(l)})}})};function normalizeAngle(e){return(e%180+180)%180}var getAngledRectangleWidth=function(t){var n=t.width,i=t.height,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=normalizeAngle(o),h=l*Math.PI/180,d=Math.atan(i/n),m=h>d&&h<Math.PI-d?i/Math.sin(h):n/Math.cos(h);return Math.abs(m)},_createFind,hasRequired_createFind;function require_createFind(){if(hasRequired_createFind)return _createFind;hasRequired_createFind=1;var e=require_baseIteratee(),t=requireIsArrayLike(),n=requireKeys();function i(o){return function(l,h,d){var m=Object(l);if(!t(l)){var b=e(h,3);l=n(l),h=function(w){return b(m[w],w,m)}}var v=o(l,h,d);return v>-1?m[b?l[v]:v]:void 0}}return _createFind=i,_createFind}var toInteger_1,hasRequiredToInteger;function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var e=requireToFinite();function t(n){var i=e(n),o=i%1;return i===i?o?i-o:i:0}return toInteger_1=t,toInteger_1}var findIndex_1,hasRequiredFindIndex;function requireFindIndex(){if(hasRequiredFindIndex)return findIndex_1;hasRequiredFindIndex=1;var e=require_baseFindIndex(),t=require_baseIteratee(),n=requireToInteger(),i=Math.max;function o(l,h,d){var m=l==null?0:l.length;if(!m)return-1;var b=d==null?0:n(d);return b<0&&(b=i(m+b,0)),e(l,t(h,3),b)}return findIndex_1=o,findIndex_1}var find_1,hasRequiredFind;function requireFind(){if(hasRequiredFind)return find_1;hasRequiredFind=1;var e=require_createFind(),t=requireFindIndex(),n=e(t);return find_1=n,find_1}requireFind();var memoizeExports=requireMemoize();const memoize=getDefaultExportFromCjs(memoizeExports);var calculateViewBox=memoize(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),XAxisContext=reactExports.createContext(void 0),YAxisContext=reactExports.createContext(void 0),ViewBoxContext=reactExports.createContext(void 0),OffsetContext=reactExports.createContext({}),ClipPathIdContext=reactExports.createContext(void 0),ChartHeightContext=reactExports.createContext(0),ChartWidthContext=reactExports.createContext(0),ChartLayoutContextProvider=function(t){var n=t.state,i=n.xAxisMap,o=n.yAxisMap,l=n.offset,h=t.clipPathId,d=t.children,m=t.width,b=t.height,v=calculateViewBox(l);return React.createElement(XAxisContext.Provider,{value:i},React.createElement(YAxisContext.Provider,{value:o},React.createElement(OffsetContext.Provider,{value:l},React.createElement(ViewBoxContext.Provider,{value:v},React.createElement(ClipPathIdContext.Provider,{value:h},React.createElement(ChartHeightContext.Provider,{value:b},React.createElement(ChartWidthContext.Provider,{value:m},d)))))))},useClipPathId=function(){return reactExports.useContext(ClipPathIdContext)},useXAxisOrThrow=function(t){var n=reactExports.useContext(XAxisContext);n==null&&invariant();var i=n[t];return i==null&&invariant(),i},useYAxisOrThrow=function(t){var n=reactExports.useContext(YAxisContext);n==null&&invariant();var i=n[t];return i==null&&invariant(),i},useViewBox=function(){var t=reactExports.useContext(ViewBoxContext);return t},useChartWidth=function(){return reactExports.useContext(ChartWidthContext)},useChartHeight=function(){return reactExports.useContext(ChartHeightContext)};function _typeof$9(e){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$9(e)}function _classCallCheck$7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$9(i.key),i)}}function _createClass$7(e,t,n){return t&&_defineProperties$7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$6(e,t,n){return t=_getPrototypeOf$6(t),_possibleConstructorReturn$6(e,_isNativeReflectConstruct$6()?Reflect.construct(t,n||[],_getPrototypeOf$6(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$6(e,t){if(t&&(_typeof$9(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$6(e)}function _assertThisInitialized$6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$6=function(){return!!e})()}function _getPrototypeOf$6(e){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$6(e)}function _inherits$6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$6(e,t)}function _setPrototypeOf$6(e,t){return _setPrototypeOf$6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$6(e,t)}function ownKeys$6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$6(Object(n),!0).forEach(function(i){_defineProperty$9(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$9(e,t,n){return t=_toPropertyKey$9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$9(e){var t=_toPrimitive$9(e,"string");return _typeof$9(t)=="symbol"?t:t+""}function _toPrimitive$9(e,t){if(_typeof$9(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$9(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_unsupportedIterableToArray$2(e,t)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$2(e,t)}}function _arrayLikeToArray$2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit$1(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t!==0)for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$6.apply(this,arguments)}var renderLine=function(t,n){var i;return React.isValidElement(t)?i=React.cloneElement(t,n):isFunction(t)?i=t(n):i=React.createElement("line",_extends$6({},n,{className:"recharts-reference-line-line"})),i},getEndPoints=function(t,n,i,o,l,h,d,m,b){var v=l.x,w=l.y,C=l.width,R=l.height;if(i){var T=b.y,E=t.y.apply(T,{position:h});if(ifOverflowMatches(b,"discard")&&!t.y.isInRange(E))return null;var f=[{x:v+C,y:E},{x:v,y:E}];return m==="left"?f.reverse():f}if(n){var g=b.x,S=t.x.apply(g,{position:h});if(ifOverflowMatches(b,"discard")&&!t.x.isInRange(S))return null;var O=[{x:S,y:w+R},{x:S,y:w}];return d==="top"?O.reverse():O}if(o){var D=b.segment,M=D.map(function(_){return t.apply(_,{position:h})});return ifOverflowMatches(b,"discard")&&some(M,function(_){return!t.isInRange(_)})?null:M}return null};function ReferenceLineImpl(e){var t=e.x,n=e.y,i=e.segment,o=e.xAxisId,l=e.yAxisId,h=e.shape,d=e.className,m=e.alwaysShow,b=useClipPathId(),v=useXAxisOrThrow(o),w=useYAxisOrThrow(l),C=useViewBox();if(!b||!C)return null;warn(m===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var R=createLabeledScales({x:v.scale,y:w.scale}),T=isNumOrStr(t),E=isNumOrStr(n),f=i&&i.length===2,g=getEndPoints(R,T,E,f,C,e.position,v.orientation,w.orientation,e);if(!g)return null;var S=_slicedToArray$1(g,2),O=S[0],D=O.x,M=O.y,_=S[1],A=_.x,j=_.y,L=ifOverflowMatches(e,"hidden")?"url(#".concat(b,")"):void 0,$=_objectSpread$6(_objectSpread$6({clipPath:L},filterProps(e,!0)),{},{x1:D,y1:M,x2:A,y2:j});return React.createElement(Layer,{className:clsx("recharts-reference-line",d)},renderLine(h,$),Label.renderCallByParent(e,rectWithCoords({x1:D,y1:M,x2:A,y2:j})))}var ReferenceLine=(function(e){function t(){return _classCallCheck$7(this,t),_callSuper$6(this,t,arguments)}return _inherits$6(t,e),_createClass$7(t,[{key:"render",value:function(){return React.createElement(ReferenceLineImpl,this.props)}}])})(React.Component);_defineProperty$9(ReferenceLine,"displayName","ReferenceLine");_defineProperty$9(ReferenceLine,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$5.apply(this,arguments)}function _typeof$8(e){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$8(e)}function ownKeys$5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$5(Object(n),!0).forEach(function(i){_defineProperty$8(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _classCallCheck$6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$8(i.key),i)}}function _createClass$6(e,t,n){return t&&_defineProperties$6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$5(e,t,n){return t=_getPrototypeOf$5(t),_possibleConstructorReturn$5(e,_isNativeReflectConstruct$5()?Reflect.construct(t,n||[],_getPrototypeOf$5(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$5(e,t){if(t&&(_typeof$8(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(e)}function _assertThisInitialized$5(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$5=function(){return!!e})()}function _getPrototypeOf$5(e){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$5(e)}function _inherits$5(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$5(e,t)}function _setPrototypeOf$5(e,t){return _setPrototypeOf$5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$5(e,t)}function _defineProperty$8(e,t,n){return t=_toPropertyKey$8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$8(e){var t=_toPrimitive$8(e,"string");return _typeof$8(t)=="symbol"?t:t+""}function _toPrimitive$8(e,t){if(_typeof$8(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$8(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var getCoordinate=function(t){var n=t.x,i=t.y,o=t.xAxis,l=t.yAxis,h=createLabeledScales({x:o.scale,y:l.scale}),d=h.apply({x:n,y:i},{bandAware:!0});return ifOverflowMatches(t,"discard")&&!h.isInRange(d)?null:d},ReferenceDot=(function(e){function t(){return _classCallCheck$6(this,t),_callSuper$5(this,t,arguments)}return _inherits$5(t,e),_createClass$6(t,[{key:"render",value:function(){var i=this.props,o=i.x,l=i.y,h=i.r,d=i.alwaysShow,m=i.clipPathId,b=isNumOrStr(o),v=isNumOrStr(l);if(warn(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!b||!v)return null;var w=getCoordinate(this.props);if(!w)return null;var C=w.x,R=w.y,T=this.props,E=T.shape,f=T.className,g=ifOverflowMatches(this.props,"hidden")?"url(#".concat(m,")"):void 0,S=_objectSpread$5(_objectSpread$5({clipPath:g},filterProps(this.props,!0)),{},{cx:C,cy:R});return React.createElement(Layer,{className:clsx("recharts-reference-dot",f)},t.renderDot(E,S),Label.renderCallByParent(this.props,{x:C-h,y:R-h,width:2*h,height:2*h}))}}])})(React.Component);_defineProperty$8(ReferenceDot,"displayName","ReferenceDot");_defineProperty$8(ReferenceDot,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_defineProperty$8(ReferenceDot,"renderDot",function(e,t){var n;return React.isValidElement(e)?n=React.cloneElement(e,t):isFunction(e)?n=e(t):n=React.createElement(Dot,_extends$5({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$4.apply(this,arguments)}function _typeof$7(e){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$7(e)}function ownKeys$4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$4(Object(n),!0).forEach(function(i){_defineProperty$7(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$7(i.key),i)}}function _createClass$5(e,t,n){return t&&_defineProperties$5(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$4(e,t,n){return t=_getPrototypeOf$4(t),_possibleConstructorReturn$4(e,_isNativeReflectConstruct$4()?Reflect.construct(t,n||[],_getPrototypeOf$4(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$4(e,t){if(t&&(_typeof$7(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(e)}function _assertThisInitialized$4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$4=function(){return!!e})()}function _getPrototypeOf$4(e){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$4(e)}function _inherits$4(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$4(e,t)}function _setPrototypeOf$4(e,t){return _setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$4(e,t)}function _defineProperty$7(e,t,n){return t=_toPropertyKey$7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$7(e){var t=_toPrimitive$7(e,"string");return _typeof$7(t)=="symbol"?t:t+""}function _toPrimitive$7(e,t){if(_typeof$7(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$7(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var getRect=function(t,n,i,o,l){var h=l.x1,d=l.x2,m=l.y1,b=l.y2,v=l.xAxis,w=l.yAxis;if(!v||!w)return null;var C=createLabeledScales({x:v.scale,y:w.scale}),R={x:t?C.x.apply(h,{position:"start"}):C.x.rangeMin,y:i?C.y.apply(m,{position:"start"}):C.y.rangeMin},T={x:n?C.x.apply(d,{position:"end"}):C.x.rangeMax,y:o?C.y.apply(b,{position:"end"}):C.y.rangeMax};return ifOverflowMatches(l,"discard")&&(!C.isInRange(R)||!C.isInRange(T))?null:rectWithPoints(R,T)},ReferenceArea=(function(e){function t(){return _classCallCheck$5(this,t),_callSuper$4(this,t,arguments)}return _inherits$4(t,e),_createClass$5(t,[{key:"render",value:function(){var i=this.props,o=i.x1,l=i.x2,h=i.y1,d=i.y2,m=i.className,b=i.alwaysShow,v=i.clipPathId;warn(b===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var w=isNumOrStr(o),C=isNumOrStr(l),R=isNumOrStr(h),T=isNumOrStr(d),E=this.props.shape;if(!w&&!C&&!R&&!T&&!E)return null;var f=getRect(w,C,R,T,this.props);if(!f&&!E)return null;var g=ifOverflowMatches(this.props,"hidden")?"url(#".concat(v,")"):void 0;return React.createElement(Layer,{className:clsx("recharts-reference-area",m)},t.renderRect(E,_objectSpread$4(_objectSpread$4({clipPath:g},filterProps(this.props,!0)),f)),Label.renderCallByParent(this.props,f))}}])})(React.Component);_defineProperty$7(ReferenceArea,"displayName","ReferenceArea");_defineProperty$7(ReferenceArea,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_defineProperty$7(ReferenceArea,"renderRect",function(e,t){var n;return React.isValidElement(e)?n=React.cloneElement(e,t):isFunction(e)?n=e(t):n=React.createElement(Rectangle,_extends$4({},t,{className:"recharts-reference-area-rect"})),n});function getEveryNthWithCondition(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var i=[],o=0;o<e.length;o+=t)i.push(e[o]);return i}function getAngledTickWidth(e,t,n){var i={width:e.width+t.width,height:e.height+t.height};return getAngledRectangleWidth(i,n)}function getTickBoundaries(e,t,n){var i=n==="width",o=e.x,l=e.y,h=e.width,d=e.height;return t===1?{start:i?o:l,end:i?o+h:l+d}:{start:i?o+h:l+d,end:i?o:l}}function isVisible(e,t,n,i,o){if(e*t<e*i||e*t>e*o)return!1;var l=n();return e*(t-e*l/2-i)>=0&&e*(t+e*l/2-o)<=0}function getNumberIntervalTicks(e,t){return getEveryNthWithCondition(e,t+1)}function getEquidistantTicks(e,t,n,i,o){for(var l=(i||[]).slice(),h=t.start,d=t.end,m=0,b=1,v=h,w=function(){var T=i?.[m];if(T===void 0)return{v:getEveryNthWithCondition(i,b)};var E=m,f,g=function(){return f===void 0&&(f=n(T,E)),f},S=T.coordinate,O=m===0||isVisible(e,S,g,v,d);O||(m=0,v=h,b+=1),O&&(v=S+e*(g()/2+o),m+=b)},C;b<=l.length;)if(C=w(),C)return C.v;return[]}function _typeof$6(e){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(e)}function ownKeys$3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$3(Object(n),!0).forEach(function(i){_defineProperty$6(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$6(e,t,n){return t=_toPropertyKey$6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$6(e){var t=_toPrimitive$6(e,"string");return _typeof$6(t)=="symbol"?t:t+""}function _toPrimitive$6(e,t){if(_typeof$6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$6(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getTicksEnd(e,t,n,i,o){for(var l=(i||[]).slice(),h=l.length,d=t.start,m=t.end,b=function(C){var R=l[C],T,E=function(){return T===void 0&&(T=n(R,C)),T};if(C===h-1){var f=e*(R.coordinate+e*E()/2-m);l[C]=R=_objectSpread$3(_objectSpread$3({},R),{},{tickCoord:f>0?R.coordinate-f*e:R.coordinate})}else l[C]=R=_objectSpread$3(_objectSpread$3({},R),{},{tickCoord:R.coordinate});var g=isVisible(e,R.tickCoord,E,d,m);g&&(m=R.tickCoord-e*(E()/2+o),l[C]=_objectSpread$3(_objectSpread$3({},R),{},{isShow:!0}))},v=h-1;v>=0;v--)b(v);return l}function getTicksStart(e,t,n,i,o,l){var h=(i||[]).slice(),d=h.length,m=t.start,b=t.end;if(l){var v=i[d-1],w=n(v,d-1),C=e*(v.coordinate+e*w/2-b);h[d-1]=v=_objectSpread$3(_objectSpread$3({},v),{},{tickCoord:C>0?v.coordinate-C*e:v.coordinate});var R=isVisible(e,v.tickCoord,function(){return w},m,b);R&&(b=v.tickCoord-e*(w/2+o),h[d-1]=_objectSpread$3(_objectSpread$3({},v),{},{isShow:!0}))}for(var T=l?d-1:d,E=function(S){var O=h[S],D,M=function(){return D===void 0&&(D=n(O,S)),D};if(S===0){var _=e*(O.coordinate-e*M()/2-m);h[S]=O=_objectSpread$3(_objectSpread$3({},O),{},{tickCoord:_<0?O.coordinate-_*e:O.coordinate})}else h[S]=O=_objectSpread$3(_objectSpread$3({},O),{},{tickCoord:O.coordinate});var A=isVisible(e,O.tickCoord,M,m,b);A&&(m=O.tickCoord+e*(M()/2+o),h[S]=_objectSpread$3(_objectSpread$3({},O),{},{isShow:!0}))},f=0;f<T;f++)E(f);return h}function getTicks(e,t,n){var i=e.tick,o=e.ticks,l=e.viewBox,h=e.minTickGap,d=e.orientation,m=e.interval,b=e.tickFormatter,v=e.unit,w=e.angle;if(!o||!o.length||!i)return[];if(isNumber(m)||Global.isSsr)return getNumberIntervalTicks(o,typeof m=="number"&&isNumber(m)?m:0);var C=[],R=d==="top"||d==="bottom"?"width":"height",T=v&&R==="width"?getStringSize(v,{fontSize:t,letterSpacing:n}):{width:0,height:0},E=function(O,D){var M=isFunction(b)?b(O.value,D):O.value;return R==="width"?getAngledTickWidth(getStringSize(M,{fontSize:t,letterSpacing:n}),T,w):getStringSize(M,{fontSize:t,letterSpacing:n})[R]},f=o.length>=2?mathSign(o[1].coordinate-o[0].coordinate):1,g=getTickBoundaries(l,f,R);return m==="equidistantPreserveStart"?getEquidistantTicks(f,g,E,o,h):(m==="preserveStart"||m==="preserveStartEnd"?C=getTicksStart(f,g,E,o,h,m==="preserveStartEnd"):C=getTicksEnd(f,g,E,o,h),C.filter(function(S){return S.isShow}))}var _excluded$1=["viewBox"],_excluded2$1=["viewBox"],_excluded3=["ticks"];function _typeof$5(e){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(e)}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$3.apply(this,arguments)}function ownKeys$2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$2(Object(n),!0).forEach(function(i){_defineProperty$5(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _objectWithoutProperties$1(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose$1(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose$1(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$5(i.key),i)}}function _createClass$4(e,t,n){return t&&_defineProperties$4(e.prototype,t),n&&_defineProperties$4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$3(e,t,n){return t=_getPrototypeOf$3(t),_possibleConstructorReturn$3(e,_isNativeReflectConstruct$3()?Reflect.construct(t,n||[],_getPrototypeOf$3(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$3(e,t){if(t&&(_typeof$5(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(e)}function _assertThisInitialized$3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$3=function(){return!!e})()}function _getPrototypeOf$3(e){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$3(e)}function _inherits$3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$3(e,t)}function _setPrototypeOf$3(e,t){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$3(e,t)}function _defineProperty$5(e,t,n){return t=_toPropertyKey$5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$5(e){var t=_toPrimitive$5(e,"string");return _typeof$5(t)=="symbol"?t:t+""}function _toPrimitive$5(e,t){if(_typeof$5(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$5(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var CartesianAxis=(function(e){function t(n){var i;return _classCallCheck$4(this,t),i=_callSuper$3(this,t,[n]),i.state={fontSize:"",letterSpacing:""},i}return _inherits$3(t,e),_createClass$4(t,[{key:"shouldComponentUpdate",value:function(i,o){var l=i.viewBox,h=_objectWithoutProperties$1(i,_excluded$1),d=this.props,m=d.viewBox,b=_objectWithoutProperties$1(d,_excluded2$1);return!shallowEqual(l,m)||!shallowEqual(h,b)||!shallowEqual(o,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var o=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var o=this.props,l=o.x,h=o.y,d=o.width,m=o.height,b=o.orientation,v=o.tickSize,w=o.mirror,C=o.tickMargin,R,T,E,f,g,S,O=w?-1:1,D=i.tickSize||v,M=isNumber(i.tickCoord)?i.tickCoord:i.coordinate;switch(b){case"top":R=T=i.coordinate,f=h+ +!w*m,E=f-O*D,S=E-O*C,g=M;break;case"left":E=f=i.coordinate,T=l+ +!w*d,R=T-O*D,g=R-O*C,S=M;break;case"right":E=f=i.coordinate,T=l+ +w*d,R=T+O*D,g=R+O*C,S=M;break;default:R=T=i.coordinate,f=h+ +w*m,E=f+O*D,S=E+O*C,g=M;break}return{line:{x1:R,y1:E,x2:T,y2:f},tick:{x:g,y:S}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,o=i.orientation,l=i.mirror,h;switch(o){case"left":h=l?"start":"end";break;case"right":h=l?"end":"start";break;default:h="middle";break}return h}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,o=i.orientation,l=i.mirror,h="end";switch(o){case"left":case"right":h="middle";break;case"top":h=l?"start":"end";break;default:h=l?"end":"start";break}return h}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.x,l=i.y,h=i.width,d=i.height,m=i.orientation,b=i.mirror,v=i.axisLine,w=_objectSpread$2(_objectSpread$2(_objectSpread$2({},filterProps(this.props,!1)),filterProps(v,!1)),{},{fill:"none"});if(m==="top"||m==="bottom"){var C=+(m==="top"&&!b||m==="bottom"&&b);w=_objectSpread$2(_objectSpread$2({},w),{},{x1:o,y1:l+C*d,x2:o+h,y2:l+C*d})}else{var R=+(m==="left"&&!b||m==="right"&&b);w=_objectSpread$2(_objectSpread$2({},w),{},{x1:o+R*h,y1:l,x2:o+R*h,y2:l+d})}return React.createElement("line",_extends$3({},w,{className:clsx("recharts-cartesian-axis-line",get(v,"className"))}))}},{key:"renderTicks",value:function(i,o,l){var h=this,d=this.props,m=d.tickLine,b=d.stroke,v=d.tick,w=d.tickFormatter,C=d.unit,R=getTicks(_objectSpread$2(_objectSpread$2({},this.props),{},{ticks:i}),o,l),T=this.getTickTextAnchor(),E=this.getTickVerticalAnchor(),f=filterProps(this.props,!1),g=filterProps(v,!1),S=_objectSpread$2(_objectSpread$2({},f),{},{fill:"none"},filterProps(m,!1)),O=R.map(function(D,M){var _=h.getTickLineCoord(D),A=_.line,j=_.tick,L=_objectSpread$2(_objectSpread$2(_objectSpread$2(_objectSpread$2({textAnchor:T,verticalAnchor:E},f),{},{stroke:"none",fill:b},g),j),{},{index:M,payload:D,visibleTicksCount:R.length,tickFormatter:w});return React.createElement(Layer,_extends$3({className:"recharts-cartesian-axis-tick",key:"tick-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},adaptEventsOfChild(h.props,D,M)),m&&React.createElement("line",_extends$3({},S,A,{className:clsx("recharts-cartesian-axis-tick-line",get(m,"className"))})),v&&t.renderTickItem(v,L,"".concat(isFunction(w)?w(D.value,M):D.value).concat(C||"")))});return React.createElement("g",{className:"recharts-cartesian-axis-ticks"},O)}},{key:"render",value:function(){var i=this,o=this.props,l=o.axisLine,h=o.width,d=o.height,m=o.ticksGenerator,b=o.className,v=o.hide;if(v)return null;var w=this.props,C=w.ticks,R=_objectWithoutProperties$1(w,_excluded3),T=C;return isFunction(m)&&(T=C&&C.length>0?m(this.props):m(R)),h<=0||d<=0||!T||!T.length?null:React.createElement(Layer,{className:clsx("recharts-cartesian-axis",b),ref:function(f){i.layerReference=f}},l&&this.renderAxisLine(),this.renderTicks(T,this.state.fontSize,this.state.letterSpacing),Label.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,o,l){var h,d=clsx(o.className,"recharts-cartesian-axis-tick-value");return React.isValidElement(i)?h=React.cloneElement(i,_objectSpread$2(_objectSpread$2({},o),{},{className:d})):isFunction(i)?h=i(_objectSpread$2(_objectSpread$2({},o),{},{className:d})):h=React.createElement(Text,_extends$3({},o,{className:"recharts-cartesian-axis-tick-value"}),l),h}}])})(reactExports.Component);_defineProperty$5(CartesianAxis,"displayName","CartesianAxis");_defineProperty$5(CartesianAxis,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});function _typeof$4(e){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(e)}function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$4(i.key),i)}}function _createClass$3(e,t,n){return t&&_defineProperties$3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$2(e,t,n){return t=_getPrototypeOf$2(t),_possibleConstructorReturn$2(e,_isNativeReflectConstruct$2()?Reflect.construct(t,n||[],_getPrototypeOf$2(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$2(e,t){if(t&&(_typeof$4(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(e)}function _assertThisInitialized$2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$2=function(){return!!e})()}function _getPrototypeOf$2(e){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$2(e)}function _inherits$2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$2(e,t)}function _setPrototypeOf$2(e,t){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$2(e,t)}function _defineProperty$4(e,t,n){return t=_toPropertyKey$4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$4(e){var t=_toPrimitive$4(e,"string");return _typeof$4(t)=="symbol"?t:t+""}function _toPrimitive$4(e,t){if(_typeof$4(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$4(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$2.apply(this,arguments)}function XAxisImpl(e){var t=e.xAxisId,n=useChartWidth(),i=useChartHeight(),o=useXAxisOrThrow(t);return o==null?null:reactExports.createElement(CartesianAxis,_extends$2({},o,{className:clsx("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(h){return getTicksOfAxis(h,!0)}}))}var XAxis=(function(e){function t(){return _classCallCheck$3(this,t),_callSuper$2(this,t,arguments)}return _inherits$2(t,e),_createClass$3(t,[{key:"render",value:function(){return reactExports.createElement(XAxisImpl,this.props)}}])})(reactExports.Component);_defineProperty$4(XAxis,"displayName","XAxis");_defineProperty$4(XAxis,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _typeof$3(e){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(e)}function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$3(i.key),i)}}function _createClass$2(e,t,n){return t&&_defineProperties$2(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper$1(e,t,n){return t=_getPrototypeOf$1(t),_possibleConstructorReturn$1(e,_isNativeReflectConstruct$1()?Reflect.construct(t,n||[],_getPrototypeOf$1(e).constructor):t.apply(e,n))}function _possibleConstructorReturn$1(e,t){if(t&&(_typeof$3(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(e)}function _assertThisInitialized$1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!e})()}function _getPrototypeOf$1(e){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$1(e)}function _inherits$1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$1(e,t)}function _setPrototypeOf$1(e,t){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$1(e,t)}function _defineProperty$3(e,t,n){return t=_toPropertyKey$3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$3(e){var t=_toPrimitive$3(e,"string");return _typeof$3(t)=="symbol"?t:t+""}function _toPrimitive$3(e,t){if(_typeof$3(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$3(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$1.apply(this,arguments)}var YAxisImpl=function(t){var n=t.yAxisId,i=useChartWidth(),o=useChartHeight(),l=useYAxisOrThrow(n);return l==null?null:reactExports.createElement(CartesianAxis,_extends$1({},l,{className:clsx("recharts-".concat(l.axisType," ").concat(l.axisType),l.className),viewBox:{x:0,y:0,width:i,height:o},ticksGenerator:function(d){return getTicksOfAxis(d,!0)}}))},YAxis=(function(e){function t(){return _classCallCheck$2(this,t),_callSuper$1(this,t,arguments)}return _inherits$1(t,e),_createClass$2(t,[{key:"render",value:function(){return reactExports.createElement(YAxisImpl,this.props)}}])})(reactExports.Component);_defineProperty$3(YAxis,"displayName","YAxis");_defineProperty$3(YAxis,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray$1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(e,t)}}function _iterableToArray$1(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function _arrayLikeToArray$1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var detectReferenceElementsDomain=function(t,n,i,o,l){var h=findAllByType(t,ReferenceLine),d=findAllByType(t,ReferenceDot),m=[].concat(_toConsumableArray$1(h),_toConsumableArray$1(d)),b=findAllByType(t,ReferenceArea),v="".concat(o,"Id"),w=o[0],C=n;if(m.length&&(C=m.reduce(function(E,f){if(f.props[v]===i&&ifOverflowMatches(f.props,"extendDomain")&&isNumber(f.props[w])){var g=f.props[w];return[Math.min(E[0],g),Math.max(E[1],g)]}return E},C)),b.length){var R="".concat(w,"1"),T="".concat(w,"2");C=b.reduce(function(E,f){if(f.props[v]===i&&ifOverflowMatches(f.props,"extendDomain")&&isNumber(f.props[R])&&isNumber(f.props[T])){var g=f.props[R],S=f.props[T];return[Math.min(E[0],g,S),Math.max(E[1],g,S)]}return E},C)}return l&&l.length&&(C=l.reduce(function(E,f){return isNumber(f)?[Math.min(E[0],f),Math.max(E[1],f)]:E},C)),C},eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function o(m,b,v){this.fn=m,this.context=b,this.once=v||!1}function l(m,b,v,w,C){if(typeof v!="function")throw new TypeError("The listener must be a function");var R=new o(v,w||m,C),T=n?n+b:b;return m._events[T]?m._events[T].fn?m._events[T]=[m._events[T],R]:m._events[T].push(R):(m._events[T]=R,m._eventsCount++),m}function h(m,b){--m._eventsCount===0?m._events=new i:delete m._events[b]}function d(){this._events=new i,this._eventsCount=0}d.prototype.eventNames=function(){var b=[],v,w;if(this._eventsCount===0)return b;for(w in v=this._events)t.call(v,w)&&b.push(n?w.slice(1):w);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(v)):b},d.prototype.listeners=function(b){var v=n?n+b:b,w=this._events[v];if(!w)return[];if(w.fn)return[w.fn];for(var C=0,R=w.length,T=new Array(R);C<R;C++)T[C]=w[C].fn;return T},d.prototype.listenerCount=function(b){var v=n?n+b:b,w=this._events[v];return w?w.fn?1:w.length:0},d.prototype.emit=function(b,v,w,C,R,T){var E=n?n+b:b;if(!this._events[E])return!1;var f=this._events[E],g=arguments.length,S,O;if(f.fn){switch(f.once&&this.removeListener(b,f.fn,void 0,!0),g){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,v),!0;case 3:return f.fn.call(f.context,v,w),!0;case 4:return f.fn.call(f.context,v,w,C),!0;case 5:return f.fn.call(f.context,v,w,C,R),!0;case 6:return f.fn.call(f.context,v,w,C,R,T),!0}for(O=1,S=new Array(g-1);O<g;O++)S[O-1]=arguments[O];f.fn.apply(f.context,S)}else{var D=f.length,M;for(O=0;O<D;O++)switch(f[O].once&&this.removeListener(b,f[O].fn,void 0,!0),g){case 1:f[O].fn.call(f[O].context);break;case 2:f[O].fn.call(f[O].context,v);break;case 3:f[O].fn.call(f[O].context,v,w);break;case 4:f[O].fn.call(f[O].context,v,w,C);break;default:if(!S)for(M=1,S=new Array(g-1);M<g;M++)S[M-1]=arguments[M];f[O].fn.apply(f[O].context,S)}}return!0},d.prototype.on=function(b,v,w){return l(this,b,v,w,!1)},d.prototype.once=function(b,v,w){return l(this,b,v,w,!0)},d.prototype.removeListener=function(b,v,w,C){var R=n?n+b:b;if(!this._events[R])return this;if(!v)return h(this,R),this;var T=this._events[R];if(T.fn)T.fn===v&&(!C||T.once)&&(!w||T.context===w)&&h(this,R);else{for(var E=0,f=[],g=T.length;E<g;E++)(T[E].fn!==v||C&&!T[E].once||w&&T[E].context!==w)&&f.push(T[E]);f.length?this._events[R]=f.length===1?f[0]:f:h(this,R)}return this},d.prototype.removeAllListeners=function(b){var v;return b?(v=n?n+b:b,this._events[v]&&h(this,v)):(this._events=new i,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter,SYNC_EVENT="recharts.syncMouseEvents";function _typeof$2(e){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(e)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$2(i.key),i)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$2(e,t,n){return t=_toPropertyKey$2(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return _typeof$2(t)=="symbol"?t:t+""}function _toPrimitive$2(e,t){if(_typeof$2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$2(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var AccessibilityManager=(function(){function e(){_classCallCheck$1(this,e),_defineProperty$2(this,"activeIndex",0),_defineProperty$2(this,"coordinateList",[]),_defineProperty$2(this,"layout","horizontal")}return _createClass$1(e,[{key:"setDetails",value:function(n){var i,o=n.coordinateList,l=o===void 0?null:o,h=n.container,d=h===void 0?null:h,m=n.layout,b=m===void 0?null:m,v=n.offset,w=v===void 0?null:v,C=n.mouseHandlerCallback,R=C===void 0?null:C;this.coordinateList=(i=l??this.coordinateList)!==null&&i!==void 0?i:[],this.container=d??this.container,this.layout=b??this.layout,this.offset=w??this.offset,this.mouseHandlerCallback=R??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,i;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var o=this.container.getBoundingClientRect(),l=o.x,h=o.y,d=o.height,m=this.coordinateList[this.activeIndex].coordinate,b=((n=window)===null||n===void 0?void 0:n.scrollX)||0,v=((i=window)===null||i===void 0?void 0:i.scrollY)||0,w=l+m+b,C=h+this.offset.top+d/2+v;this.mouseHandlerCallback({pageX:w,pageY:C})}}}])})();function isDomainSpecifiedByUser(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var i=e?.[0],o=e?.[1];if(i&&o&&isNumber(i)&&isNumber(o))return!0}return!1}function getCursorRectangle(e,t,n,i){var o=i/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-o:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-o,width:e==="horizontal"?i:n.width-1,height:e==="horizontal"?n.height-1:i}}function getRadialCursorPoints(e){var t=e.cx,n=e.cy,i=e.radius,o=e.startAngle,l=e.endAngle,h=polarToCartesian(t,n,i,o),d=polarToCartesian(t,n,i,l);return{points:[h,d],cx:t,cy:n,radius:i,startAngle:o,endAngle:l}}function getCursorPoints(e,t,n){var i,o,l,h;if(e==="horizontal")i=t.x,l=i,o=n.top,h=n.top+n.height;else if(e==="vertical")o=t.y,h=o,i=n.left,l=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var d=t.cx,m=t.cy,b=t.innerRadius,v=t.outerRadius,w=t.angle,C=polarToCartesian(d,m,b,w),R=polarToCartesian(d,m,v,w);i=C.x,o=C.y,l=R.x,h=R.y}else return getRadialCursorPoints(t);return[{x:i,y:o},{x:l,y:h}]}function _typeof$1(e){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(e)}function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach(function(i){_defineProperty$1(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty$1(e,t,n){return t=_toPropertyKey$1(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return _typeof$1(t)=="symbol"?t:t+""}function _toPrimitive$1(e,t){if(_typeof$1(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof$1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cursor(e){var t,n,i=e.element,o=e.tooltipEventType,l=e.isActive,h=e.activeCoordinate,d=e.activePayload,m=e.offset,b=e.activeTooltipIndex,v=e.tooltipAxisBandSize,w=e.layout,C=e.chartName,R=(t=i.props.cursor)!==null&&t!==void 0?t:(n=i.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!i||!R||!l||!h||C!=="ScatterChart"&&o!=="axis")return null;var T,E=Curve;if(C==="ScatterChart")T=h,E=Cross;else if(C==="BarChart")T=getCursorRectangle(w,h,m,v),E=Rectangle;else if(w==="radial"){var f=getRadialCursorPoints(h),g=f.cx,S=f.cy,O=f.radius,D=f.startAngle,M=f.endAngle;T={cx:g,cy:S,startAngle:D,endAngle:M,innerRadius:O,outerRadius:O},E=Sector}else T={points:getCursorPoints(w,h,m)},E=Curve;var _=_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({stroke:"#ccc",pointerEvents:"none"},m),T),filterProps(R,!1)),{},{payload:d,payloadIndex:b,className:clsx("recharts-tooltip-cursor",R.className)});return reactExports.isValidElement(R)?reactExports.cloneElement(R,_):reactExports.createElement(E,_)}var _excluded=["item"],_excluded2=["children","className","width","height","style","compact","title","desc"];function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends.apply(this,arguments)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,l,h,d=[],m=!0,b=!1;try{if(l=(n=n.call(e)).next,t!==0)for(;!(m=(i=l.call(n)).done)&&(d.push(i.value),d.length!==t);m=!0);}catch(v){b=!0,o=v}finally{try{if(!m&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(b)throw o}}return d}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _objectWithoutProperties(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper(e,t,n){return t=_getPrototypeOf(t),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,n||[],_getPrototypeOf(e).constructor):t.apply(e,n))}function _possibleConstructorReturn(e,t){if(t&&(_typeof(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(e)}function _inherits(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf(e,t)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(i){_defineProperty(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _defineProperty(e,t,n){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return _typeof(t)=="symbol"?t:t+""}function _toPrimitive(e,t){if(_typeof(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_typeof(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ORIENT_MAP={xAxis:["bottom","top"],yAxis:["left","right"]},FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%"},originCoordinate={x:0,y:0};function renderAsIs(e){return e}var calculateTooltipPos=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},getActiveCoordinate=function(t,n,i,o){var l=n.find(function(v){return v&&v.index===i});if(l){if(t==="horizontal")return{x:l.coordinate,y:o.y};if(t==="vertical")return{x:o.x,y:l.coordinate};if(t==="centric"){var h=l.coordinate,d=o.radius;return _objectSpread(_objectSpread(_objectSpread({},o),polarToCartesian(o.cx,o.cy,d,h)),{},{angle:h,radius:d})}var m=l.coordinate,b=o.angle;return _objectSpread(_objectSpread(_objectSpread({},o),polarToCartesian(o.cx,o.cy,m,b)),{},{angle:b,radius:m})}return originCoordinate},getDisplayedData=function(t,n){var i=n.graphicalItems,o=n.dataStartIndex,l=n.dataEndIndex,h=(i??[]).reduce(function(d,m){var b=m.props.data;return b&&b.length?[].concat(_toConsumableArray(d),_toConsumableArray(b)):d},[]);return h.length>0?h:t&&t.length&&isNumber(o)&&isNumber(l)?t.slice(o,l+1):[]};function getDefaultDomainByAxisType(e){return e==="number"?[0,"auto"]:void 0}var getTooltipContent=function(t,n,i,o){var l=t.graphicalItems,h=t.tooltipAxis,d=getDisplayedData(n,t);return i<0||!l||!l.length||i>=d.length?null:l.reduce(function(m,b){var v,w=(v=b.props.data)!==null&&v!==void 0?v:n;w&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=i&&(w=w.slice(t.dataStartIndex,t.dataEndIndex+1));var C;if(h.dataKey&&!h.allowDuplicatedCategory){var R=w===void 0?d:w;C=findEntryInArray(R,h.dataKey,o)}else C=w&&w[i]||d[i];return C?[].concat(_toConsumableArray(m),[getTooltipItem(b,C)]):m},[])},getTooltipData=function(t,n,i,o){var l=o||{x:t.chartX,y:t.chartY},h=calculateTooltipPos(l,i),d=t.orderedTooltipTicks,m=t.tooltipAxis,b=t.tooltipTicks,v=calculateActiveTickIndex(h,d,b,m);if(v>=0&&b){var w=b[v]&&b[v].value,C=getTooltipContent(t,n,v,w),R=getActiveCoordinate(i,d,v,l);return{activeTooltipIndex:v,activeLabel:w,activePayload:C,activeCoordinate:R}}return null},getAxisMapByAxes=function(t,n){var i=n.axes,o=n.graphicalItems,l=n.axisType,h=n.axisIdKey,d=n.stackGroups,m=n.dataStartIndex,b=n.dataEndIndex,v=t.layout,w=t.children,C=t.stackOffset,R=isCategoricalAxis(v,l);return i.reduce(function(T,E){var f,g=E.type.defaultProps!==void 0?_objectSpread(_objectSpread({},E.type.defaultProps),E.props):E.props,S=g.type,O=g.dataKey,D=g.allowDataOverflow,M=g.allowDuplicatedCategory,_=g.scale,A=g.ticks,j=g.includeHidden,L=g[h];if(T[L])return T;var $=getDisplayedData(t.data,{graphicalItems:o.filter(function(te){var ue,de=h in te.props?te.props[h]:(ue=te.type.defaultProps)===null||ue===void 0?void 0:ue[h];return de===L}),dataStartIndex:m,dataEndIndex:b}),F=$.length,W,U,q;isDomainSpecifiedByUser(g.domain,D,S)&&(W=parseSpecifiedDomain(g.domain,null,D),R&&(S==="number"||_!=="auto")&&(q=getDomainOfDataByKey($,O,"category")));var H=getDefaultDomainByAxisType(S);if(!W||W.length===0){var Y,Z=(Y=g.domain)!==null&&Y!==void 0?Y:H;if(O){if(W=getDomainOfDataByKey($,O,S),S==="category"&&R){var X=hasDuplicate(W);M&&X?(U=W,W=range(0,F)):M||(W=parseDomainOfCategoryAxis(Z,W,E).reduce(function(te,ue){return te.indexOf(ue)>=0?te:[].concat(_toConsumableArray(te),[ue])},[]))}else if(S==="category")M?W=W.filter(function(te){return te!==""&&!isNil(te)}):W=parseDomainOfCategoryAxis(Z,W,E).reduce(function(te,ue){return te.indexOf(ue)>=0||ue===""||isNil(ue)?te:[].concat(_toConsumableArray(te),[ue])},[]);else if(S==="number"){var J=parseErrorBarsOfAxis($,o.filter(function(te){var ue,de,xe=h in te.props?te.props[h]:(ue=te.type.defaultProps)===null||ue===void 0?void 0:ue[h],ve="hide"in te.props?te.props.hide:(de=te.type.defaultProps)===null||de===void 0?void 0:de.hide;return xe===L&&(j||!ve)}),O,l,v);J&&(W=J)}R&&(S==="number"||_!=="auto")&&(q=getDomainOfDataByKey($,O,"category"))}else R?W=range(0,F):d&&d[L]&&d[L].hasStack&&S==="number"?W=C==="expand"?[0,1]:getDomainOfStackGroups(d[L].stackGroups,m,b):W=getDomainOfItemsWithSameAxis($,o.filter(function(te){var ue=h in te.props?te.props[h]:te.type.defaultProps[h],de="hide"in te.props?te.props.hide:te.type.defaultProps.hide;return ue===L&&(j||!de)}),S,v,!0);if(S==="number")W=detectReferenceElementsDomain(w,W,L,l,A),Z&&(W=parseSpecifiedDomain(Z,W,D));else if(S==="category"&&Z){var Q=Z,G=W.every(function(te){return Q.indexOf(te)>=0});G&&(W=Q)}}return _objectSpread(_objectSpread({},T),{},_defineProperty({},L,_objectSpread(_objectSpread({},g),{},{axisType:l,domain:W,categoricalDomain:q,duplicateDomain:U,originalDomain:(f=g.domain)!==null&&f!==void 0?f:H,isCategorical:R,layout:v})))},{})},getAxisMapByItems=function(t,n){var i=n.graphicalItems,o=n.Axis,l=n.axisType,h=n.axisIdKey,d=n.stackGroups,m=n.dataStartIndex,b=n.dataEndIndex,v=t.layout,w=t.children,C=getDisplayedData(t.data,{graphicalItems:i,dataStartIndex:m,dataEndIndex:b}),R=C.length,T=isCategoricalAxis(v,l),E=-1;return i.reduce(function(f,g){var S=g.type.defaultProps!==void 0?_objectSpread(_objectSpread({},g.type.defaultProps),g.props):g.props,O=S[h],D=getDefaultDomainByAxisType("number");if(!f[O]){E++;var M;return T?M=range(0,R):d&&d[O]&&d[O].hasStack?(M=getDomainOfStackGroups(d[O].stackGroups,m,b),M=detectReferenceElementsDomain(w,M,O,l)):(M=parseSpecifiedDomain(D,getDomainOfItemsWithSameAxis(C,i.filter(function(_){var A,j,L=h in _.props?_.props[h]:(A=_.type.defaultProps)===null||A===void 0?void 0:A[h],$="hide"in _.props?_.props.hide:(j=_.type.defaultProps)===null||j===void 0?void 0:j.hide;return L===O&&!$}),"number",v),o.defaultProps.allowDataOverflow),M=detectReferenceElementsDomain(w,M,O,l)),_objectSpread(_objectSpread({},f),{},_defineProperty({},O,_objectSpread(_objectSpread({axisType:l},o.defaultProps),{},{hide:!0,orientation:get(ORIENT_MAP,"".concat(l,".").concat(E%2),null),domain:M,originalDomain:D,isCategorical:T,layout:v})))}return f},{})},getAxisMap=function(t,n){var i=n.axisType,o=i===void 0?"xAxis":i,l=n.AxisComp,h=n.graphicalItems,d=n.stackGroups,m=n.dataStartIndex,b=n.dataEndIndex,v=t.children,w="".concat(o,"Id"),C=findAllByType(v,l),R={};return C&&C.length?R=getAxisMapByAxes(t,{axes:C,graphicalItems:h,axisType:o,axisIdKey:w,stackGroups:d,dataStartIndex:m,dataEndIndex:b}):h&&h.length&&(R=getAxisMapByItems(t,{Axis:l,graphicalItems:h,axisType:o,axisIdKey:w,stackGroups:d,dataStartIndex:m,dataEndIndex:b})),R},tooltipTicksGenerator=function(t){var n=getAnyElementOfObject(t),i=getTicksOfAxis(n,!1,!0);return{tooltipTicks:i,orderedTooltipTicks:sortBy(i,function(o){return o.coordinate}),tooltipAxis:n,tooltipAxisBandSize:getBandSizeOfAxis(n,i)}},createDefaultState=function(t){var n=t.children,i=t.defaultShowTooltip,o=findChildByType(n,Brush),l=0,h=0;return t.data&&t.data.length!==0&&(h=t.data.length-1),o&&o.props&&(o.props.startIndex>=0&&(l=o.props.startIndex),o.props.endIndex>=0&&(h=o.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:l,dataEndIndex:h,activeTooltipIndex:-1,isTooltipActive:!!i}},hasGraphicalBarItem=function(t){return!t||!t.length?!1:t.some(function(n){var i=getDisplayName(n&&n.type);return i&&i.indexOf("Bar")>=0})},getAxisNameByLayout=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},calculateOffset=function(t,n){var i=t.props,o=t.graphicalItems,l=t.xAxisMap,h=l===void 0?{}:l,d=t.yAxisMap,m=d===void 0?{}:d,b=i.width,v=i.height,w=i.children,C=i.margin||{},R=findChildByType(w,Brush),T=findChildByType(w,Legend),E=Object.keys(m).reduce(function(M,_){var A=m[_],j=A.orientation;return!A.mirror&&!A.hide?_objectSpread(_objectSpread({},M),{},_defineProperty({},j,M[j]+A.width)):M},{left:C.left||0,right:C.right||0}),f=Object.keys(h).reduce(function(M,_){var A=h[_],j=A.orientation;return!A.mirror&&!A.hide?_objectSpread(_objectSpread({},M),{},_defineProperty({},j,get(M,"".concat(j))+A.height)):M},{top:C.top||0,bottom:C.bottom||0}),g=_objectSpread(_objectSpread({},f),E),S=g.bottom;R&&(g.bottom+=R.props.height||Brush.defaultProps.height),T&&n&&(g=appendOffsetOfLegend(g,o,i,n));var O=b-g.left-g.right,D=v-g.top-g.bottom;return _objectSpread(_objectSpread({brushBottom:S},g),{},{width:Math.max(O,0),height:Math.max(D,0)})},getCartesianAxisSize=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},generateCategoricalChart=function(t){var n=t.chartName,i=t.GraphicalChild,o=t.defaultTooltipEventType,l=o===void 0?"axis":o,h=t.validateTooltipEventTypes,d=h===void 0?["axis"]:h,m=t.axisComponents,b=t.legendContent,v=t.formatAxisMap,w=t.defaultProps,C=function(g,S){var O=S.graphicalItems,D=S.stackGroups,M=S.offset,_=S.updateId,A=S.dataStartIndex,j=S.dataEndIndex,L=g.barSize,$=g.layout,F=g.barGap,W=g.barCategoryGap,U=g.maxBarSize,q=getAxisNameByLayout($),H=q.numericAxisName,Y=q.cateAxisName,Z=hasGraphicalBarItem(O),X=[];return O.forEach(function(J,Q){var G=getDisplayedData(g.data,{graphicalItems:[J],dataStartIndex:A,dataEndIndex:j}),te=J.type.defaultProps!==void 0?_objectSpread(_objectSpread({},J.type.defaultProps),J.props):J.props,ue=te.dataKey,de=te.maxBarSize,xe=te["".concat(H,"Id")],ve=te["".concat(Y,"Id")],Se={},Ee=m.reduce(function(Je,rt){var et=S["".concat(rt.axisType,"Map")],Qe=te["".concat(rt.axisType,"Id")];et&&et[Qe]||rt.axisType==="zAxis"||invariant();var ct=et[Qe];return _objectSpread(_objectSpread({},Je),{},_defineProperty(_defineProperty({},rt.axisType,ct),"".concat(rt.axisType,"Ticks"),getTicksOfAxis(ct)))},Se),he=Ee[Y],Re=Ee["".concat(Y,"Ticks")],je=D&&D[xe]&&D[xe].hasStack&&getStackedDataOfItem(J,D[xe].stackGroups),Ce=getDisplayName(J.type).indexOf("Bar")>=0,Le=getBandSizeOfAxis(he,Re),me=[],Ie=Z&&getBarSizeList({barSize:L,stackGroups:D,totalSize:getCartesianAxisSize(Ee,Y)});if(Ce){var Ve,nt,it=isNil(de)?U:de,ot=(Ve=(nt=getBandSizeOfAxis(he,Re,!0))!==null&&nt!==void 0?nt:it)!==null&&Ve!==void 0?Ve:0;me=getBarPosition({barGap:F,barCategoryGap:W,bandSize:ot!==Le?ot:Le,sizeList:Ie[ve],maxBarSize:it}),ot!==Le&&(me=me.map(function(Je){return _objectSpread(_objectSpread({},Je),{},{position:_objectSpread(_objectSpread({},Je.position),{},{offset:Je.position.offset-ot/2})})}))}var at=J&&J.type&&J.type.getComposedData;at&&X.push({props:_objectSpread(_objectSpread({},at(_objectSpread(_objectSpread({},Ee),{},{displayedData:G,props:g,dataKey:ue,item:J,bandSize:Le,barPosition:me,offset:M,stackedData:je,layout:$,dataStartIndex:A,dataEndIndex:j}))),{},_defineProperty(_defineProperty(_defineProperty({key:J.key||"item-".concat(Q)},H,Ee[H]),Y,Ee[Y]),"animationId",_)),childIndex:parseChildIndex(J,g.children),item:J})}),X},R=function(g,S){var O=g.props,D=g.dataStartIndex,M=g.dataEndIndex,_=g.updateId;if(!validateWidthHeight({props:O}))return null;var A=O.children,j=O.layout,L=O.stackOffset,$=O.data,F=O.reverseStackOrder,W=getAxisNameByLayout(j),U=W.numericAxisName,q=W.cateAxisName,H=findAllByType(A,i),Y=getStackGroupsByAxisId($,H,"".concat(U,"Id"),"".concat(q,"Id"),L,F),Z=m.reduce(function(te,ue){var de="".concat(ue.axisType,"Map");return _objectSpread(_objectSpread({},te),{},_defineProperty({},de,getAxisMap(O,_objectSpread(_objectSpread({},ue),{},{graphicalItems:H,stackGroups:ue.axisType===U&&Y,dataStartIndex:D,dataEndIndex:M}))))},{}),X=calculateOffset(_objectSpread(_objectSpread({},Z),{},{props:O,graphicalItems:H}),S?.legendBBox);Object.keys(Z).forEach(function(te){Z[te]=v(O,Z[te],X,te.replace("Map",""),n)});var J=Z["".concat(q,"Map")],Q=tooltipTicksGenerator(J),G=C(O,_objectSpread(_objectSpread({},Z),{},{dataStartIndex:D,dataEndIndex:M,updateId:_,graphicalItems:H,stackGroups:Y,offset:X}));return _objectSpread(_objectSpread({formattedGraphicalItems:G,graphicalItems:H,offset:X,stackGroups:Y},Q),Z)},T=(function(f){function g(S){var O,D,M;return _classCallCheck(this,g),M=_callSuper(this,g,[S]),_defineProperty(M,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_defineProperty(M,"accessibilityManager",new AccessibilityManager),_defineProperty(M,"handleLegendBBoxUpdate",function(_){if(_){var A=M.state,j=A.dataStartIndex,L=A.dataEndIndex,$=A.updateId;M.setState(_objectSpread({legendBBox:_},R({props:M.props,dataStartIndex:j,dataEndIndex:L,updateId:$},_objectSpread(_objectSpread({},M.state),{},{legendBBox:_}))))}}),_defineProperty(M,"handleReceiveSyncEvent",function(_,A,j){if(M.props.syncId===_){if(j===M.eventEmitterSymbol&&typeof M.props.syncMethod!="function")return;M.applySyncEvent(A)}}),_defineProperty(M,"handleBrushChange",function(_){var A=_.startIndex,j=_.endIndex;if(A!==M.state.dataStartIndex||j!==M.state.dataEndIndex){var L=M.state.updateId;M.setState(function(){return _objectSpread({dataStartIndex:A,dataEndIndex:j},R({props:M.props,dataStartIndex:A,dataEndIndex:j,updateId:L},M.state))}),M.triggerSyncEvent({dataStartIndex:A,dataEndIndex:j})}}),_defineProperty(M,"handleMouseEnter",function(_){var A=M.getMouseInfo(_);if(A){var j=_objectSpread(_objectSpread({},A),{},{isTooltipActive:!0});M.setState(j),M.triggerSyncEvent(j);var L=M.props.onMouseEnter;isFunction(L)&&L(j,_)}}),_defineProperty(M,"triggeredAfterMouseMove",function(_){var A=M.getMouseInfo(_),j=A?_objectSpread(_objectSpread({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};M.setState(j),M.triggerSyncEvent(j);var L=M.props.onMouseMove;isFunction(L)&&L(j,_)}),_defineProperty(M,"handleItemMouseEnter",function(_){M.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),_defineProperty(M,"handleItemMouseLeave",function(){M.setState(function(){return{isTooltipActive:!1}})}),_defineProperty(M,"handleMouseMove",function(_){_.persist(),M.throttleTriggeredAfterMouseMove(_)}),_defineProperty(M,"handleMouseLeave",function(_){M.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};M.setState(A),M.triggerSyncEvent(A);var j=M.props.onMouseLeave;isFunction(j)&&j(A,_)}),_defineProperty(M,"handleOuterEvent",function(_){var A=getReactEventByType(_),j=get(M.props,"".concat(A));if(A&&isFunction(j)){var L,$;/.*touch.*/i.test(A)?$=M.getMouseInfo(_.changedTouches[0]):$=M.getMouseInfo(_),j((L=$)!==null&&L!==void 0?L:{},_)}}),_defineProperty(M,"handleClick",function(_){var A=M.getMouseInfo(_);if(A){var j=_objectSpread(_objectSpread({},A),{},{isTooltipActive:!0});M.setState(j),M.triggerSyncEvent(j);var L=M.props.onClick;isFunction(L)&&L(j,_)}}),_defineProperty(M,"handleMouseDown",function(_){var A=M.props.onMouseDown;if(isFunction(A)){var j=M.getMouseInfo(_);A(j,_)}}),_defineProperty(M,"handleMouseUp",function(_){var A=M.props.onMouseUp;if(isFunction(A)){var j=M.getMouseInfo(_);A(j,_)}}),_defineProperty(M,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&M.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),_defineProperty(M,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&M.handleMouseDown(_.changedTouches[0])}),_defineProperty(M,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&M.handleMouseUp(_.changedTouches[0])}),_defineProperty(M,"handleDoubleClick",function(_){var A=M.props.onDoubleClick;if(isFunction(A)){var j=M.getMouseInfo(_);A(j,_)}}),_defineProperty(M,"handleContextMenu",function(_){var A=M.props.onContextMenu;if(isFunction(A)){var j=M.getMouseInfo(_);A(j,_)}}),_defineProperty(M,"triggerSyncEvent",function(_){M.props.syncId!==void 0&&eventCenter.emit(SYNC_EVENT,M.props.syncId,_,M.eventEmitterSymbol)}),_defineProperty(M,"applySyncEvent",function(_){var A=M.props,j=A.layout,L=A.syncMethod,$=M.state.updateId,F=_.dataStartIndex,W=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)M.setState(_objectSpread({dataStartIndex:F,dataEndIndex:W},R({props:M.props,dataStartIndex:F,dataEndIndex:W,updateId:$},M.state)));else if(_.activeTooltipIndex!==void 0){var U=_.chartX,q=_.chartY,H=_.activeTooltipIndex,Y=M.state,Z=Y.offset,X=Y.tooltipTicks;if(!Z)return;if(typeof L=="function")H=L(X,_);else if(L==="value"){H=-1;for(var J=0;J<X.length;J++)if(X[J].value===_.activeLabel){H=J;break}}var Q=_objectSpread(_objectSpread({},Z),{},{x:Z.left,y:Z.top}),G=Math.min(U,Q.x+Q.width),te=Math.min(q,Q.y+Q.height),ue=X[H]&&X[H].value,de=getTooltipContent(M.state,M.props.data,H),xe=X[H]?{x:j==="horizontal"?X[H].coordinate:G,y:j==="horizontal"?te:X[H].coordinate}:originCoordinate;M.setState(_objectSpread(_objectSpread({},_),{},{activeLabel:ue,activeCoordinate:xe,activePayload:de,activeTooltipIndex:H}))}else M.setState(_)}),_defineProperty(M,"renderCursor",function(_){var A,j=M.state,L=j.isTooltipActive,$=j.activeCoordinate,F=j.activePayload,W=j.offset,U=j.activeTooltipIndex,q=j.tooltipAxisBandSize,H=M.getTooltipEventType(),Y=(A=_.props.active)!==null&&A!==void 0?A:L,Z=M.props.layout,X=_.key||"_recharts-cursor";return React.createElement(Cursor,{key:X,activeCoordinate:$,activePayload:F,activeTooltipIndex:U,chartName:n,element:_,isActive:Y,layout:Z,offset:W,tooltipAxisBandSize:q,tooltipEventType:H})}),_defineProperty(M,"renderPolarAxis",function(_,A,j){var L=get(_,"type.axisType"),$=get(M.state,"".concat(L,"Map")),F=_.type.defaultProps,W=F!==void 0?_objectSpread(_objectSpread({},F),_.props):_.props,U=$&&$[W["".concat(L,"Id")]];return reactExports.cloneElement(_,_objectSpread(_objectSpread({},U),{},{className:clsx(L,U.className),key:_.key||"".concat(A,"-").concat(j),ticks:getTicksOfAxis(U,!0)}))}),_defineProperty(M,"renderPolarGrid",function(_){var A=_.props,j=A.radialLines,L=A.polarAngles,$=A.polarRadius,F=M.state,W=F.radiusAxisMap,U=F.angleAxisMap,q=getAnyElementOfObject(W),H=getAnyElementOfObject(U),Y=H.cx,Z=H.cy,X=H.innerRadius,J=H.outerRadius;return reactExports.cloneElement(_,{polarAngles:Array.isArray(L)?L:getTicksOfAxis(H,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray($)?$:getTicksOfAxis(q,!0).map(function(Q){return Q.coordinate}),cx:Y,cy:Z,innerRadius:X,outerRadius:J,key:_.key||"polar-grid",radialLines:j})}),_defineProperty(M,"renderLegend",function(){var _=M.state.formattedGraphicalItems,A=M.props,j=A.children,L=A.width,$=A.height,F=M.props.margin||{},W=L-(F.left||0)-(F.right||0),U=getLegendProps({children:j,formattedGraphicalItems:_,legendWidth:W,legendContent:b});if(!U)return null;var q=U.item,H=_objectWithoutProperties(U,_excluded);return reactExports.cloneElement(q,_objectSpread(_objectSpread({},H),{},{chartWidth:L,chartHeight:$,margin:F,onBBoxUpdate:M.handleLegendBBoxUpdate}))}),_defineProperty(M,"renderTooltip",function(){var _,A=M.props,j=A.children,L=A.accessibilityLayer,$=findChildByType(j,Tooltip);if(!$)return null;var F=M.state,W=F.isTooltipActive,U=F.activeCoordinate,q=F.activePayload,H=F.activeLabel,Y=F.offset,Z=(_=$.props.active)!==null&&_!==void 0?_:W;return reactExports.cloneElement($,{viewBox:_objectSpread(_objectSpread({},Y),{},{x:Y.left,y:Y.top}),active:Z,label:H,payload:Z?q:[],coordinate:U,accessibilityLayer:L})}),_defineProperty(M,"renderBrush",function(_){var A=M.props,j=A.margin,L=A.data,$=M.state,F=$.offset,W=$.dataStartIndex,U=$.dataEndIndex,q=$.updateId;return reactExports.cloneElement(_,{key:_.key||"_recharts-brush",onChange:combineEventHandlers(M.handleBrushChange,_.props.onChange),data:L,x:isNumber(_.props.x)?_.props.x:F.left,y:isNumber(_.props.y)?_.props.y:F.top+F.height+F.brushBottom-(j.bottom||0),width:isNumber(_.props.width)?_.props.width:F.width,startIndex:W,endIndex:U,updateId:"brush-".concat(q)})}),_defineProperty(M,"renderReferenceElement",function(_,A,j){if(!_)return null;var L=M,$=L.clipPathId,F=M.state,W=F.xAxisMap,U=F.yAxisMap,q=F.offset,H=_.type.defaultProps||{},Y=_.props,Z=Y.xAxisId,X=Z===void 0?H.xAxisId:Z,J=Y.yAxisId,Q=J===void 0?H.yAxisId:J;return reactExports.cloneElement(_,{key:_.key||"".concat(A,"-").concat(j),xAxis:W[X],yAxis:U[Q],viewBox:{x:q.left,y:q.top,width:q.width,height:q.height},clipPathId:$})}),_defineProperty(M,"renderActivePoints",function(_){var A=_.item,j=_.activePoint,L=_.basePoint,$=_.childIndex,F=_.isRange,W=[],U=A.props.key,q=A.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},A.item.type.defaultProps),A.item.props):A.item.props,H=q.activeDot,Y=q.dataKey,Z=_objectSpread(_objectSpread({index:$,dataKey:Y,cx:j.x,cy:j.y,r:4,fill:getMainColorOfGraphicItem(A.item),strokeWidth:2,stroke:"#fff",payload:j.payload,value:j.value},filterProps(H,!1)),adaptEventHandlers(H));return W.push(g.renderActiveDot(H,Z,"".concat(U,"-activePoint-").concat($))),L?W.push(g.renderActiveDot(H,_objectSpread(_objectSpread({},Z),{},{cx:L.x,cy:L.y}),"".concat(U,"-basePoint-").concat($))):F&&W.push(null),W}),_defineProperty(M,"renderGraphicChild",function(_,A,j){var L=M.filterFormatItem(_,A,j);if(!L)return null;var $=M.getTooltipEventType(),F=M.state,W=F.isTooltipActive,U=F.tooltipAxis,q=F.activeTooltipIndex,H=F.activeLabel,Y=M.props.children,Z=findChildByType(Y,Tooltip),X=L.props,J=X.points,Q=X.isRange,G=X.baseLine,te=L.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},L.item.type.defaultProps),L.item.props):L.item.props,ue=te.activeDot,de=te.hide,xe=te.activeBar,ve=te.activeShape,Se=!!(!de&&W&&Z&&(ue||xe||ve)),Ee={};$!=="axis"&&Z&&Z.props.trigger==="click"?Ee={onClick:combineEventHandlers(M.handleItemMouseEnter,_.props.onClick)}:$!=="axis"&&(Ee={onMouseLeave:combineEventHandlers(M.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:combineEventHandlers(M.handleItemMouseEnter,_.props.onMouseEnter)});var he=reactExports.cloneElement(_,_objectSpread(_objectSpread({},L.props),Ee));function Re(rt){return typeof U.dataKey=="function"?U.dataKey(rt.payload):null}if(Se)if(q>=0){var je,Ce;if(U.dataKey&&!U.allowDuplicatedCategory){var Le=typeof U.dataKey=="function"?Re:"payload.".concat(U.dataKey.toString());je=findEntryInArray(J,Le,H),Ce=Q&&G&&findEntryInArray(G,Le,H)}else je=J?.[q],Ce=Q&&G&&G[q];if(ve||xe){var me=_.props.activeIndex!==void 0?_.props.activeIndex:q;return[reactExports.cloneElement(_,_objectSpread(_objectSpread(_objectSpread({},L.props),Ee),{},{activeIndex:me})),null,null]}if(!isNil(je))return[he].concat(_toConsumableArray(M.renderActivePoints({item:L,activePoint:je,basePoint:Ce,childIndex:q,isRange:Q})))}else{var Ie,Ve=(Ie=M.getItemByXY(M.state.activeCoordinate))!==null&&Ie!==void 0?Ie:{graphicalItem:he},nt=Ve.graphicalItem,it=nt.item,ot=it===void 0?_:it,at=nt.childIndex,Je=_objectSpread(_objectSpread(_objectSpread({},L.props),Ee),{},{activeIndex:at});return[reactExports.cloneElement(ot,Je),null,null]}return Q?[he,null,null]:[he,null]}),_defineProperty(M,"renderCustomized",function(_,A,j){return reactExports.cloneElement(_,_objectSpread(_objectSpread({key:"recharts-customized-".concat(j)},M.props),M.state))}),_defineProperty(M,"renderMap",{CartesianGrid:{handler:renderAsIs,once:!0},ReferenceArea:{handler:M.renderReferenceElement},ReferenceLine:{handler:renderAsIs},ReferenceDot:{handler:M.renderReferenceElement},XAxis:{handler:renderAsIs},YAxis:{handler:renderAsIs},Brush:{handler:M.renderBrush,once:!0},Bar:{handler:M.renderGraphicChild},Line:{handler:M.renderGraphicChild},Area:{handler:M.renderGraphicChild},Radar:{handler:M.renderGraphicChild},RadialBar:{handler:M.renderGraphicChild},Scatter:{handler:M.renderGraphicChild},Pie:{handler:M.renderGraphicChild},Funnel:{handler:M.renderGraphicChild},Tooltip:{handler:M.renderCursor,once:!0},PolarGrid:{handler:M.renderPolarGrid,once:!0},PolarAngleAxis:{handler:M.renderPolarAxis},PolarRadiusAxis:{handler:M.renderPolarAxis},Customized:{handler:M.renderCustomized}}),M.clipPathId="".concat((O=S.id)!==null&&O!==void 0?O:uniqueId("recharts"),"-clip"),M.throttleTriggeredAfterMouseMove=throttle(M.triggeredAfterMouseMove,(D=S.throttleDelay)!==null&&D!==void 0?D:1e3/60),M.state={},M}return _inherits(g,f),_createClass(g,[{key:"componentDidMount",value:function(){var O,D;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(D=this.props.margin.top)!==null&&D!==void 0?D:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var O=this.props,D=O.children,M=O.data,_=O.height,A=O.layout,j=findChildByType(D,Tooltip);if(j){var L=j.props.defaultIndex;if(!(typeof L!="number"||L<0||L>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[L]&&this.state.tooltipTicks[L].value,F=getTooltipContent(this.state,M,L,$),W=this.state.tooltipTicks[L].coordinate,U=(this.state.offset.top+_)/2,q=A==="horizontal",H=q?{x:W,y:U}:{y:W,x:U},Y=this.state.formattedGraphicalItems.find(function(X){var J=X.item;return J.type.name==="Scatter"});Y&&(H=_objectSpread(_objectSpread({},H),Y.props.points[L].tooltipPosition),F=Y.props.points[L].tooltipPayload);var Z={activeTooltipIndex:L,isTooltipActive:!0,activeLabel:$,activePayload:F,activeCoordinate:H};this.setState(Z),this.renderCursor(j),this.accessibilityManager.setIndex(L)}}}},{key:"getSnapshotBeforeUpdate",value:function(O,D){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==D.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==O.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==O.margin){var M,_;this.accessibilityManager.setDetails({offset:{left:(M=this.props.margin.left)!==null&&M!==void 0?M:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(O){isChildrenEqual([findChildByType(O.children,Tooltip)],[findChildByType(this.props.children,Tooltip)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var O=findChildByType(this.props.children,Tooltip);if(O&&typeof O.props.shared=="boolean"){var D=O.props.shared?"axis":"item";return d.indexOf(D)>=0?D:l}return l}},{key:"getMouseInfo",value:function(O){if(!this.container)return null;var D=this.container,M=D.getBoundingClientRect(),_=getOffset(M),A={chartX:Math.round(O.pageX-_.left),chartY:Math.round(O.pageY-_.top)},j=M.width/D.offsetWidth||1,L=this.inRange(A.chartX,A.chartY,j);if(!L)return null;var $=this.state,F=$.xAxisMap,W=$.yAxisMap,U=this.getTooltipEventType(),q=getTooltipData(this.state,this.props.data,this.props.layout,L);if(U!=="axis"&&F&&W){var H=getAnyElementOfObject(F).scale,Y=getAnyElementOfObject(W).scale,Z=H&&H.invert?H.invert(A.chartX):null,X=Y&&Y.invert?Y.invert(A.chartY):null;return _objectSpread(_objectSpread({},A),{},{xValue:Z,yValue:X},q)}return q?_objectSpread(_objectSpread({},A),q):null}},{key:"inRange",value:function(O,D){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,A=O/M,j=D/M;if(_==="horizontal"||_==="vertical"){var L=this.state.offset,$=A>=L.left&&A<=L.left+L.width&&j>=L.top&&j<=L.top+L.height;return $?{x:A,y:j}:null}var F=this.state,W=F.angleAxisMap,U=F.radiusAxisMap;if(W&&U){var q=getAnyElementOfObject(W);return inRangeOfSector({x:A,y:j},q)}return null}},{key:"parseEventsOfWrapper",value:function(){var O=this.props.children,D=this.getTooltipEventType(),M=findChildByType(O,Tooltip),_={};M&&D==="axis"&&(M.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=adaptEventHandlers(this.props,this.handleOuterEvent);return _objectSpread(_objectSpread({},A),_)}},{key:"addListener",value:function(){eventCenter.on(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){eventCenter.removeListener(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(O,D,M){for(var _=this.state.formattedGraphicalItems,A=0,j=_.length;A<j;A++){var L=_[A];if(L.item===O||L.props.key===O.key||D===getDisplayName(L.item.type)&&M===L.childIndex)return L}return null}},{key:"renderClipPath",value:function(){var O=this.clipPathId,D=this.state.offset,M=D.left,_=D.top,A=D.height,j=D.width;return React.createElement("defs",null,React.createElement("clipPath",{id:O},React.createElement("rect",{x:M,y:_,height:A,width:j})))}},{key:"getXScales",value:function(){var O=this.state.xAxisMap;return O?Object.entries(O).reduce(function(D,M){var _=_slicedToArray(M,2),A=_[0],j=_[1];return _objectSpread(_objectSpread({},D),{},_defineProperty({},A,j.scale))},{}):null}},{key:"getYScales",value:function(){var O=this.state.yAxisMap;return O?Object.entries(O).reduce(function(D,M){var _=_slicedToArray(M,2),A=_[0],j=_[1];return _objectSpread(_objectSpread({},D),{},_defineProperty({},A,j.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(O){var D;return(D=this.state.xAxisMap)===null||D===void 0||(D=D[O])===null||D===void 0?void 0:D.scale}},{key:"getYScaleByAxisId",value:function(O){var D;return(D=this.state.yAxisMap)===null||D===void 0||(D=D[O])===null||D===void 0?void 0:D.scale}},{key:"getItemByXY",value:function(O){var D=this.state,M=D.formattedGraphicalItems,_=D.activeItem;if(M&&M.length)for(var A=0,j=M.length;A<j;A++){var L=M[A],$=L.props,F=L.item,W=F.type.defaultProps!==void 0?_objectSpread(_objectSpread({},F.type.defaultProps),F.props):F.props,U=getDisplayName(F.type);if(U==="Bar"){var q=($.data||[]).find(function(X){return isInRectangle(O,X)});if(q)return{graphicalItem:L,payload:q}}else if(U==="RadialBar"){var H=($.data||[]).find(function(X){return inRangeOfSector(O,X)});if(H)return{graphicalItem:L,payload:H}}else if(isFunnel(L,_)||isPie(L,_)||isScatter(L,_)){var Y=getActiveShapeIndexForTooltip({graphicalItem:L,activeTooltipItem:_,itemData:W.data}),Z=W.activeIndex===void 0?Y:W.activeIndex;return{graphicalItem:_objectSpread(_objectSpread({},L),{},{childIndex:Z}),payload:isScatter(L,_)?W.data[Y]:L.props.data[Y]}}}return null}},{key:"render",value:function(){var O=this;if(!validateWidthHeight(this))return null;var D=this.props,M=D.children,_=D.className,A=D.width,j=D.height,L=D.style,$=D.compact,F=D.title,W=D.desc,U=_objectWithoutProperties(D,_excluded2),q=filterProps(U,!1);if($)return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement(Surface,_extends({},q,{width:A,height:j,title:F,desc:W}),this.renderClipPath(),renderByOrder(M,this.renderMap)));if(this.props.accessibilityLayer){var H,Y;q.tabIndex=(H=this.props.tabIndex)!==null&&H!==void 0?H:0,q.role=(Y=this.props.role)!==null&&Y!==void 0?Y:"application",q.onKeyDown=function(X){O.accessibilityManager.keyboardEvent(X)},q.onFocus=function(){O.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement("div",_extends({className:clsx("recharts-wrapper",_),style:_objectSpread({position:"relative",cursor:"default",width:A,height:j},L)},Z,{ref:function(J){O.container=J}}),React.createElement(Surface,_extends({},q,{width:A,height:j,title:F,desc:W,style:FULL_WIDTH_AND_HEIGHT}),this.renderClipPath(),renderByOrder(M,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(reactExports.Component);_defineProperty(T,"displayName",n),_defineProperty(T,"defaultProps",_objectSpread({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},w)),_defineProperty(T,"getDerivedStateFromProps",function(f,g){var S=f.dataKey,O=f.data,D=f.children,M=f.width,_=f.height,A=f.layout,j=f.stackOffset,L=f.margin,$=g.dataStartIndex,F=g.dataEndIndex;if(g.updateId===void 0){var W=createDefaultState(f);return _objectSpread(_objectSpread(_objectSpread({},W),{},{updateId:0},R(_objectSpread(_objectSpread({props:f},W),{},{updateId:0}),g)),{},{prevDataKey:S,prevData:O,prevWidth:M,prevHeight:_,prevLayout:A,prevStackOffset:j,prevMargin:L,prevChildren:D})}if(S!==g.prevDataKey||O!==g.prevData||M!==g.prevWidth||_!==g.prevHeight||A!==g.prevLayout||j!==g.prevStackOffset||!shallowEqual(L,g.prevMargin)){var U=createDefaultState(f),q={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},H=_objectSpread(_objectSpread({},getTooltipData(g,O,A)),{},{updateId:g.updateId+1}),Y=_objectSpread(_objectSpread(_objectSpread({},U),q),H);return _objectSpread(_objectSpread(_objectSpread({},Y),R(_objectSpread({props:f},Y),g)),{},{prevDataKey:S,prevData:O,prevWidth:M,prevHeight:_,prevLayout:A,prevStackOffset:j,prevMargin:L,prevChildren:D})}if(!isChildrenEqual(D,g.prevChildren)){var Z,X,J,Q,G=findChildByType(D,Brush),te=G&&(Z=(X=G.props)===null||X===void 0?void 0:X.startIndex)!==null&&Z!==void 0?Z:$,ue=G&&(J=(Q=G.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&J!==void 0?J:F,de=te!==$||ue!==F,xe=!isNil(O),ve=xe&&!de?g.updateId:g.updateId+1;return _objectSpread(_objectSpread({updateId:ve},R(_objectSpread(_objectSpread({props:f},g),{},{updateId:ve,dataStartIndex:te,dataEndIndex:ue}),g)),{},{prevChildren:D,dataStartIndex:te,dataEndIndex:ue})}return null}),_defineProperty(T,"renderActiveDot",function(f,g,S){var O;return reactExports.isValidElement(f)?O=reactExports.cloneElement(f,g):isFunction(f)?O=f(g):O=React.createElement(Dot,g),React.createElement(Layer,{className:"recharts-active-dot",key:S},O)});var E=reactExports.forwardRef(function(g,S){return React.createElement(T,_extends({},g,{ref:S}))});return E.displayName=T.displayName,E},BarChart=generateCategoricalChart({chartName:"BarChart",GraphicalChild:Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap});const API_BASE_URL="",apiClient=axios.create({baseURL:API_BASE_URL,headers:{"Content-Type":"application/json"},timeout:3e5});apiClient.interceptors.response.use(e=>e,e=>{const t=e.response?.data?.detail||e.message||"An error occurred";return Promise.reject(new Error(t))});const analysisAPI={analyzeSync:async e=>{const{data:t}=await apiClient.post("/analyze_sync",e);return t}},reactomeAPI={getPathwayDetails:async e=>{const{data:t}=await apiClient.get(`/api/reactome/pathway/${e}`);return t},getPathwayParticipants:async e=>{const{data:t}=await apiClient.get(`/api/reactome/pathway/${e}/participants`);return t},getRelatedPathways:async e=>{const{data:t}=await apiClient.get(`/api/reactome/pathway/${e}/related`);return t},getFullPathwayInfo:async e=>{const{data:t}=await apiClient.get(`/api/reactome/pathway/${e}/full`);return t}},pathwayPatterns=[{patterns:[/arachidonic acid/i,/prostaglandin/i,/leukotriene/i,/thromboxane/i,/eicosanoid/i],info:{bodySystems:["immune","cardiovascular","musculoskeletal"],primarySystem:"immune",healthImpact:"mixed",healthDescription:"Controls inflammation, pain signaling, and blood clotting. Modulating this pathway affects how your body responds to injury and infection.",clinicalRelevance:"Target of NSAIDs like ibuprofen and aspirin. Important for managing pain, fever, and inflammation.",relatedConditions:["Arthritis","Cardiovascular disease","Asthma","Inflammatory disorders"],physiologicalRole:"Produces signaling molecules that regulate inflammation, pain, fever, and blood vessel function.",icon:""}},{patterns:[/interleukin/i,/cytokine/i,/interferon/i,/tnf/i,/tumor necrosis/i],info:{bodySystems:["immune","cellular"],primarySystem:"immune",healthImpact:"mixed",healthDescription:"Regulates immune cell communication and inflammatory responses throughout the body.",clinicalRelevance:"Targeted by biologics for autoimmune diseases. Critical for fighting infections but can cause damage if overactive.",relatedConditions:["Rheumatoid arthritis","Psoriasis","Inflammatory bowel disease","COVID-19 cytokine storm"],physiologicalRole:"Coordinates immune responses between cells, activates defense mechanisms, and regulates inflammation duration.",icon:""}},{patterns:[/toll-like receptor/i,/pattern recognition/i,/innate immune/i,/nf-?kb/i],info:{bodySystems:["immune","cellular"],primarySystem:"immune",healthImpact:"mixed",healthDescription:"First line of defense against pathogens. Triggers rapid immune responses to infections.",clinicalRelevance:"Overactivation linked to chronic inflammation. Target for immunomodulatory therapies.",relatedConditions:["Sepsis","Autoimmune diseases","Chronic inflammation","Allergies"],physiologicalRole:"Detects invading microorganisms and damaged cells, initiating protective immune responses.",icon:""}},{patterns:[/platelet/i,/coagulation/i,/hemostasis/i,/fibrin/i,/thrombin/i,/clotting/i],info:{bodySystems:["cardiovascular"],primarySystem:"cardiovascular",healthImpact:"caution",healthDescription:"Controls blood clotting. Affects how quickly bleeding stops and risk of dangerous clots.",clinicalRelevance:"Critical consideration for patients on blood thinners or with clotting disorders.",relatedConditions:["Heart attack","Stroke","Deep vein thrombosis","Bleeding disorders"],physiologicalRole:"Balances blood fluidity with the ability to form clots to stop bleeding from injuries.",icon:""}},{patterns:[/nitric oxide/i,/vasodilation/i,/vascular/i,/endothel/i,/blood pressure/i],info:{bodySystems:["cardiovascular"],primarySystem:"cardiovascular",healthImpact:"beneficial",healthDescription:"Regulates blood vessel dilation and blood pressure. Supports healthy circulation.",clinicalRelevance:"Important for cardiovascular health. Dysfunction linked to hypertension and erectile dysfunction.",relatedConditions:["Hypertension","Atherosclerosis","Erectile dysfunction","Raynaud's disease"],physiologicalRole:"Controls blood vessel diameter, regulating blood flow and pressure throughout the body.",icon:""}},{patterns:[/cardiac/i,/heart/i,/myocardial/i,/atrial/i,/ventricular/i],info:{bodySystems:["cardiovascular"],primarySystem:"cardiovascular",healthImpact:"caution",healthDescription:"Directly affects heart muscle function and rhythm. Important for cardiac health monitoring.",clinicalRelevance:"Compounds affecting this pathway require cardiac safety evaluation.",relatedConditions:["Heart failure","Arrhythmias","Cardiomyopathy","Heart attack"],physiologicalRole:"Controls heart muscle contraction, rhythm, and the heart's ability to pump blood effectively.",icon:""}},{patterns:[/neuronal/i,/synap/i,/neurotransmit/i,/dopamine/i,/serotonin/i,/gaba/i,/glutamate/i],info:{bodySystems:["nervous"],primarySystem:"nervous",healthImpact:"mixed",healthDescription:"Affects brain signaling and nerve communication. May influence mood, cognition, and behavior.",clinicalRelevance:"Target of many psychiatric and neurological medications. Effects depend on specific neurotransmitter affected.",relatedConditions:["Depression","Anxiety","Parkinson's disease","Schizophrenia","ADHD"],physiologicalRole:"Enables communication between nerve cells, controlling thoughts, emotions, movement, and sensations.",icon:""}},{patterns:[/pain/i,/nocicept/i,/opioid/i,/analges/i],info:{bodySystems:["nervous","musculoskeletal"],primarySystem:"nervous",healthImpact:"beneficial",healthDescription:"Modulates pain perception and transmission. Can provide relief from acute and chronic pain.",clinicalRelevance:"Important for pain management. Some pathways carry addiction risk.",relatedConditions:["Chronic pain","Neuropathy","Fibromyalgia","Post-surgical pain"],physiologicalRole:"Processes and regulates pain signals from the body to the brain, determining pain intensity.",icon:""}},{patterns:[/acetylcholin/i,/cholinergic/i,/muscarinic/i,/nicotinic/i],info:{bodySystems:["nervous","musculoskeletal"],primarySystem:"nervous",healthImpact:"mixed",healthDescription:"Controls muscle movement and memory formation. Affects both voluntary movement and organ function.",clinicalRelevance:"Important in Alzheimer's treatment and anesthesia. Also affects digestion and heart rate.",relatedConditions:["Alzheimer's disease","Myasthenia gravis","Parkinson's disease"],physiologicalRole:"Enables nerve-to-muscle communication and is essential for learning and memory.",icon:""}},{patterns:[/glycolysis/i,/gluconeogenesis/i,/glucose/i,/insulin/i,/diabetes/i],info:{bodySystems:["metabolic","endocrine"],primarySystem:"metabolic",healthImpact:"mixed",healthDescription:"Regulates blood sugar levels and energy production from carbohydrates.",clinicalRelevance:"Critical for diabetes management. Affects energy levels and weight.",relatedConditions:["Type 2 diabetes","Metabolic syndrome","Hypoglycemia","Obesity"],physiologicalRole:"Converts glucose to energy and maintains stable blood sugar levels for cellular function.",icon:""}},{patterns:[/lipid/i,/cholesterol/i,/fatty acid/i,/triglyceride/i,/lipoprotein/i],info:{bodySystems:["metabolic","cardiovascular"],primarySystem:"metabolic",healthImpact:"mixed",healthDescription:"Controls fat processing and cholesterol levels. Impacts cardiovascular disease risk.",clinicalRelevance:"Target of statins and other lipid-lowering drugs. Important for heart disease prevention.",relatedConditions:["High cholesterol","Atherosclerosis","Fatty liver disease","Heart disease"],physiologicalRole:"Processes and transports fats throughout the body for energy storage and cell membrane building.",icon:""}},{patterns:[/mitochondr/i,/oxidative phosphorylation/i,/electron transport/i,/atp/i,/citric acid/i,/krebs/i,/tca cycle/i],info:{bodySystems:["metabolic","cellular"],primarySystem:"cellular",healthImpact:"neutral",healthDescription:"Cellular energy production. Affects how efficiently cells generate power for all body functions.",clinicalRelevance:"Mitochondrial dysfunction linked to fatigue, aging, and neurodegenerative diseases.",relatedConditions:["Chronic fatigue","Mitochondrial diseases","Aging-related decline"],physiologicalRole:"Produces ATP, the energy currency that powers all cellular activities.",icon:""}},{patterns:[/cytochrome p450/i,/cyp\d/i,/drug metabolism/i,/xenobiotic/i,/detoxification/i,/hepatic/i],info:{bodySystems:["digestive","metabolic"],primarySystem:"digestive",healthImpact:"caution",healthDescription:"Processes medications and toxins in the liver. Affects how long drugs stay active in your body.",clinicalRelevance:"Critical for drug interactions. May alter effectiveness or side effects of other medications.",relatedConditions:["Drug interactions","Liver disease","Medication toxicity"],physiologicalRole:"Chemically transforms drugs and toxins for elimination, determining drug duration and intensity.",icon:""}},{patterns:[/bile/i,/bilirubin/i,/gallbladder/i],info:{bodySystems:["digestive"],primarySystem:"digestive",healthImpact:"neutral",healthDescription:"Bile production and fat digestion. Supports absorption of fat-soluble vitamins.",clinicalRelevance:"Relevant for gallbladder conditions and fat malabsorption.",relatedConditions:["Gallstones","Jaundice","Fat malabsorption"],physiologicalRole:"Produces bile for fat digestion and eliminates waste products from red blood cell breakdown.",icon:""}},{patterns:[/apoptosis/i,/cell death/i,/caspase/i,/bcl-?2/i],info:{bodySystems:["cellular"],primarySystem:"cellular",healthImpact:"mixed",healthDescription:"Programmed cell death. Essential for removing damaged or potentially cancerous cells.",clinicalRelevance:"Target of cancer therapies. Dysregulation linked to cancer and autoimmune diseases.",relatedConditions:["Cancer","Autoimmune diseases","Neurodegenerative diseases"],physiologicalRole:"Eliminates old, damaged, or abnormal cells to maintain tissue health and prevent cancer.",icon:""}},{patterns:[/cell cycle/i,/proliferation/i,/mitosis/i,/cell division/i,/dna replication/i],info:{bodySystems:["cellular"],primarySystem:"cellular",healthImpact:"caution",healthDescription:"Controls cell division and growth. Affects tissue repair but also cancer development.",clinicalRelevance:"Target of chemotherapy drugs. Important for wound healing and immune cell production.",relatedConditions:["Cancer","Wound healing disorders","Bone marrow conditions"],physiologicalRole:"Regulates when and how cells divide, essential for growth, repair, and immune function.",icon:""}},{patterns:[/p53/i,/tumor suppress/i,/oncogene/i,/cancer/i,/carcinogen/i],info:{bodySystems:["cellular"],primarySystem:"cellular",healthImpact:"beneficial",healthDescription:"Cancer surveillance and prevention. Detects and eliminates potentially cancerous cells.",clinicalRelevance:"Critical for cancer prevention. Mutations in these pathways increase cancer risk.",relatedConditions:["Various cancers","Li-Fraumeni syndrome"],physiologicalRole:"Acts as the body's defense against cancer by stopping damaged cells from dividing.",icon:""}},{patterns:[/dna repair/i,/base excision/i,/nucleotide excision/i,/mismatch repair/i],info:{bodySystems:["cellular"],primarySystem:"cellular",healthImpact:"beneficial",healthDescription:"Fixes DNA damage to prevent mutations. Protects genetic integrity.",clinicalRelevance:"Important for cancer prevention and aging. Some chemotherapies target cancer cells' DNA repair.",relatedConditions:["Cancer susceptibility","Premature aging syndromes"],physiologicalRole:"Continuously repairs DNA damage from normal metabolism and environmental exposure.",icon:""}},{patterns:[/transcription/i,/gene expression/i,/chromatin/i,/histone/i,/epigenetic/i],info:{bodySystems:["cellular"],primarySystem:"cellular",healthImpact:"neutral",healthDescription:"Controls which genes are active. Affects how cells respond to their environment.",clinicalRelevance:"Emerging target for cancer and metabolic disease treatments.",relatedConditions:["Cancer","Developmental disorders","Metabolic diseases"],physiologicalRole:"Determines which proteins cells produce, adapting cell behavior to current needs.",icon:""}},{patterns:[/estrogen/i,/androgen/i,/testosterone/i,/steroid hormone/i,/progesterone/i],info:{bodySystems:["endocrine","reproductive"],primarySystem:"endocrine",healthImpact:"mixed",healthDescription:"Sex hormone signaling. Affects reproduction, bone health, mood, and metabolism.",clinicalRelevance:"Important for hormone replacement therapy. Some cancers are hormone-sensitive.",relatedConditions:["Breast cancer","Prostate cancer","Osteoporosis","Menopause symptoms"],physiologicalRole:"Regulates sexual development, reproductive function, and many metabolic processes.",icon:""}},{patterns:[/thyroid/i,/thyroxine/i,/t3/i,/t4/i],info:{bodySystems:["endocrine","metabolic"],primarySystem:"endocrine",healthImpact:"mixed",healthDescription:"Thyroid hormone function. Controls metabolic rate, energy, and body temperature.",clinicalRelevance:"Relevant for thyroid disorders. Affects weight, energy levels, and heart function.",relatedConditions:["Hypothyroidism","Hyperthyroidism","Goiter","Thyroid cancer"],physiologicalRole:"Sets the body's metabolic pace, affecting how fast you burn calories and produce energy.",icon:""}},{patterns:[/cortisol/i,/glucocorticoid/i,/adrenal/i,/stress hormone/i,/hpa axis/i],info:{bodySystems:["endocrine","immune"],primarySystem:"endocrine",healthImpact:"mixed",healthDescription:"Stress response and cortisol regulation. Affects immune function, metabolism, and inflammation.",clinicalRelevance:"Corticosteroids are powerful anti-inflammatories but have significant side effects.",relatedConditions:["Cushing's syndrome","Addison's disease","Chronic stress effects"],physiologicalRole:"Manages the body's stress response and helps regulate immune function and metabolism.",icon:""}},{patterns:[/respiratory/i,/pulmonary/i,/lung/i,/bronch/i,/airway/i],info:{bodySystems:["respiratory"],primarySystem:"respiratory",healthImpact:"mixed",healthDescription:"Lung and airway function. Affects breathing ease and oxygen delivery.",clinicalRelevance:"Important for asthma, COPD, and other respiratory conditions.",relatedConditions:["Asthma","COPD","Bronchitis","Pulmonary fibrosis"],physiologicalRole:"Controls airway diameter, mucus production, and gas exchange in the lungs.",icon:""}},{patterns:[/renal/i,/kidney/i,/nephro/i,/urinary/i,/diuretic/i],info:{bodySystems:["urinary"],primarySystem:"urinary",healthImpact:"caution",healthDescription:"Kidney function and fluid balance. Affects blood pressure and waste removal.",clinicalRelevance:"Many drugs require kidney function monitoring. NSAIDs can affect kidney blood flow.",relatedConditions:["Chronic kidney disease","Kidney stones","Hypertension","Edema"],physiologicalRole:"Filters blood, removes waste, and maintains fluid and electrolyte balance.",icon:""}},{patterns:[/bone/i,/osteoclast/i,/osteoblast/i,/calcium homeostasis/i,/bone remodel/i],info:{bodySystems:["musculoskeletal"],primarySystem:"musculoskeletal",healthImpact:"mixed",healthDescription:"Bone formation and resorption. Affects bone strength and fracture risk.",clinicalRelevance:"Important for osteoporosis prevention and treatment.",relatedConditions:["Osteoporosis","Osteoarthritis","Fractures","Paget's disease"],physiologicalRole:"Continuously rebuilds bone tissue, maintaining skeletal strength and calcium reserves.",icon:""}},{patterns:[/muscle/i,/myocyte/i,/skeletal/i,/sarco/i],info:{bodySystems:["musculoskeletal"],primarySystem:"musculoskeletal",healthImpact:"neutral",healthDescription:"Muscle function and development. Affects strength, movement, and metabolism.",clinicalRelevance:"Relevant for muscle disorders and some drug side effects (e.g., statins).",relatedConditions:["Muscular dystrophy","Myopathy","Sarcopenia"],physiologicalRole:"Controls muscle contraction, movement, and contributes to metabolic health.",icon:""}},{patterns:[/histamine/i,/mast cell/i,/allergy/i,/ige/i,/anaphyla/i],info:{bodySystems:["immune","respiratory"],primarySystem:"immune",healthImpact:"mixed",healthDescription:"Allergic response and histamine release. Affects allergic symptoms and inflammation.",clinicalRelevance:"Target of antihistamines. Important for allergy and anaphylaxis management.",relatedConditions:["Allergies","Asthma","Anaphylaxis","Urticaria"],physiologicalRole:"Triggers protective responses to allergens, causing symptoms like itching, swelling, and mucus production.",icon:""}},{patterns:[/antioxidant/i,/oxidative stress/i,/reactive oxygen/i,/ros/i,/glutathione/i,/nrf2/i,/free radical/i],info:{bodySystems:["cellular","metabolic"],primarySystem:"cellular",healthImpact:"beneficial",healthDescription:"Protects cells from oxidative damage. Supports cellular health and longevity.",clinicalRelevance:"Antioxidant support may help prevent chronic diseases and aging-related damage.",relatedConditions:["Aging","Neurodegenerative diseases","Cardiovascular disease","Cancer"],physiologicalRole:"Neutralizes harmful free radicals that can damage DNA, proteins, and cell membranes.",icon:""}}],defaultPathwayInfo={bodySystems:["cellular"],primarySystem:"cellular",healthImpact:"neutral",healthDescription:"Cellular biological process. May affect various aspects of cell function and health.",clinicalRelevance:"Biological significance depends on specific pathway involvement.",relatedConditions:[],physiologicalRole:"Contributes to cellular function and homeostasis.",icon:""};function getPathwayHealthInfo(e){for(const t of pathwayPatterns)for(const n of t.patterns)if(n.test(e))return t.info;return defaultPathwayInfo}function getBodySystemDisplayName(e){return{cardiovascular:"Cardiovascular System",nervous:"Nervous System",immune:"Immune System",digestive:"Digestive System",respiratory:"Respiratory System",musculoskeletal:"Musculoskeletal System",endocrine:"Endocrine System",urinary:"Urinary System",integumentary:"Skin & Integumentary",reproductive:"Reproductive System",metabolic:"Metabolism",cellular:"Cellular Processes"}[e]}function getHealthImpactColors(e){switch(e){case"beneficial":return{bg:"bg-green-50 dark:bg-green-900/20",text:"text-green-700 dark:text-green-300",border:"border-green-200 dark:border-green-700",dot:"bg-green-500"};case"caution":return{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-700",dot:"bg-amber-500"};case"mixed":return{bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-700",dot:"bg-blue-500"};default:return{bg:"bg-gray-50 dark:bg-gray-800",text:"text-gray-700 dark:text-gray-300",border:"border-gray-200 dark:border-gray-700",dot:"bg-gray-500"}}}function getBodySystemIcon(e){return{cardiovascular:"",nervous:"",immune:"",digestive:"",respiratory:"",musculoskeletal:"",endocrine:"",urinary:"",integumentary:"",reproductive:"",metabolic:"",cellular:""}[e]}const HealthImpactBadge=({impact:e})=>{const t=getHealthImpactColors(e),n={beneficial:"Beneficial",caution:"Use Caution",mixed:"Mixed Effects",neutral:"Neutral"};return jsxRuntimeExports.jsxs("span",{className:clsx("inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium",t.bg,t.text),children:[jsxRuntimeExports.jsx("span",{className:clsx("w-1.5 h-1.5 rounded-full",t.dot)}),n[e]]})},BodySystemPills=({systems:e,primarySystem:t})=>jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.map((n,i)=>jsxRuntimeExports.jsxs("span",{className:clsx("inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs",n===t?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 font-medium":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"),children:[jsxRuntimeExports.jsx("span",{children:getBodySystemIcon(n)}),getBodySystemDisplayName(n)]},i))}),LoadingSpinner=()=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"}),jsxRuntimeExports.jsx("span",{className:"ml-3 text-sm text-gray-500 dark:text-gray-400",children:"Loading Reactome data..."})]}),PathwayDetail=({pathway:e,isExpanded:t})=>{const[n,i]=reactExports.useState(null),[o,l]=reactExports.useState(!1),[h,d]=reactExports.useState(null),m=getPathwayHealthInfo(e.pathway_name),b=getHealthImpactColors(m.healthImpact);return reactExports.useEffect(()=>{t&&!n&&!o&&(l(!0),d(null),reactomeAPI.getFullPathwayInfo(e.pathway_id).then(v=>{i(v),l(!1)}).catch(v=>{console.error("Failed to fetch Reactome data:",v),d("Could not load pathway details from Reactome"),l(!1)}))},[t,e.pathway_id,n,o]),o?jsxRuntimeExports.jsx(LoadingSpinner,{}):jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[n?.summation&&jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsxs("h5",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Reactome Description"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 leading-relaxed",children:n.summation}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"Source: Reactome Database"})]}),h&&jsxRuntimeExports.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3 border border-amber-200 dark:border-amber-700",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:h})}),jsxRuntimeExports.jsx("div",{className:clsx("p-4 rounded-lg border",b.bg,b.border),children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:m.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Health Relevance Analysis"}),jsxRuntimeExports.jsx("p",{className:clsx("text-sm",b.text),children:m.healthDescription})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Physiological Role"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:m.physiologicalRole})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Clinical Relevance"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:m.clinicalRelevance})]})]}),n&&n.participants.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Pathway Participants (",n.total_participants," proteins)"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[n.participants.map((v,w)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-xs font-mono",children:v},w)),n.has_more_participants&&jsxRuntimeExports.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded text-xs",children:["+",n.total_participants-n.participants.length," more"]})]})]}),n&&n.related_pathways.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Related Pathways (",n.related_pathway_count,")"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1.5",children:n.related_pathways.map((v,w)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded text-xs font-mono",children:v},w))})]}),m.relatedConditions.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Related Health Conditions"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:m.relatedConditions.map((v,w)=>jsxRuntimeExports.jsx("span",{className:"px-2.5 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full text-xs text-gray-700 dark:text-gray-300",children:v},w))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Affected Body Systems"]}),jsxRuntimeExports.jsx(BodySystemPills,{systems:m.bodySystems,primarySystem:m.primarySystem})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),"Technical Details"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500 dark:text-gray-400 block",children:"Pathway ID"}),jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-white font-mono text-xs",children:e.pathway_id})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500 dark:text-gray-400 block",children:"Species"}),jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-white",children:e.pathway_species})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500 dark:text-gray-400 block",children:"Measured Targets"}),jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-white",children:e.measured_targets_count})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500 dark:text-gray-400 block",children:"Predicted Targets"}),jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-white",children:e.predicted_targets_count})]})]}),e.matched_targets.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Matched Targets"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:e.matched_targets.map((v,w)=>jsxRuntimeExports.jsx("span",{className:"px-1.5 py-0.5 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded text-xs font-mono",children:v},w))})]})]}),e.explanation&&jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 italic bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg p-3",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Analysis Note: "}),e.explanation]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 pt-2 border-t border-gray-200 dark:border-gray-700",children:"Pathway data from Reactome (reactome.org)  Health relevance analysis based on mechanism of action"})]})},PathwaysList=({pathways:e})=>{const[t,n]=reactExports.useState(null),[i,o]=reactExports.useState("cards"),l=[...e].sort((b,v)=>v.impact_score-b.impact_score),h=l.slice(0,10).map(b=>({name:b.pathway_name.length>30?b.pathway_name.substring(0,30)+"...":b.pathway_name,fullName:b.pathway_name,impact:b.impact_score*100,tier:b.confidence_tier})),d=b=>{const v={A:"#10b981",B:"#f59e0b",C:"#6b7280"};return v[b]||v.C},m=b=>{n(t===b?null:b)};return jsxRuntimeExports.jsxs(Card,{className:"animate-slide-up",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Affected Pathways"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.length," biological pathway",e.length!==1?"s":""," affected  Click to load Reactome details"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>o("cards"),className:clsx("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",i==="cards"?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Details"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>o("chart"),className:clsx("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",i==="chart"?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Chart"]})]})]}),i==="chart"&&h.length>0&&jsxRuntimeExports.jsx("div",{className:"mb-8",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:300,children:jsxRuntimeExports.jsxs(BarChart,{data:h,layout:"horizontal",children:[jsxRuntimeExports.jsx(XAxis,{type:"number",domain:[0,100],unit:"%",stroke:"#9ca3af"}),jsxRuntimeExports.jsx(YAxis,{dataKey:"name",type:"category",width:150,tick:{fontSize:12,fill:"#9ca3af"}}),jsxRuntimeExports.jsx(Tooltip,{content:({active:b,payload:v})=>{if(b&&v&&v.length){const w=v[0].payload;return jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:w.fullName}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Impact: ",w.impact.toFixed(1),"%"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["Tier ",w.tier]})]})}return null}}),jsxRuntimeExports.jsx(Bar,{dataKey:"impact",radius:[0,4,4,0],children:h.map((b,v)=>jsxRuntimeExports.jsx(Cell,{fill:d(b.tier)},`cell-${v}`))})]})})}),i==="cards"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[l.map((b,v)=>{const w=getPathwayHealthInfo(b.pathway_name),C=t===v;return jsxRuntimeExports.jsxs("div",{className:clsx("border rounded-xl transition-all duration-200 overflow-hidden",C?"border-primary-300 dark:border-primary-600 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-primary-200 dark:hover:border-primary-700"),children:[jsxRuntimeExports.jsxs("div",{onClick:()=>m(v),className:"p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:w.icon}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:b.pathway_name})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(HealthImpactBadge,{impact:w.healthImpact}),jsxRuntimeExports.jsxs(Badge,{tier:b.confidence_tier,children:["Tier ",b.confidence_tier]}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[getBodySystemIcon(w.primarySystem)," ",getBodySystemDisplayName(w.primarySystem)]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:w.healthDescription})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:formatImpactScore(b.impact_score)}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 block",children:"Impact"})]}),jsxRuntimeExports.jsx("button",{className:clsx("p-1.5 rounded-full transition-transform duration-200",C&&"rotate-180"),children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:jsxRuntimeExports.jsx("div",{className:"h-1.5 rounded-full transition-all duration-300",style:{width:`${b.impact_score*100}%`,backgroundColor:d(b.confidence_tier)}})})})]}),C&&jsxRuntimeExports.jsx("div",{className:"px-4 pb-4",children:jsxRuntimeExports.jsx(PathwayDetail,{pathway:b,isExpanded:C})})]},v)}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No pathways found for this compound."})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Health Impact Legend"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 text-xs",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Beneficial - Generally positive health effects"})]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Mixed - Both benefits and considerations"})]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-amber-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Caution - Monitor for potential effects"})]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Neutral - Standard biological process"})]})]})]})]})};var _3Dmol$1={exports:{}};var _3Dmol=_3Dmol$1.exports,hasRequired_3Dmol;function require_3Dmol(){return hasRequired_3Dmol||(hasRequired_3Dmol=1,(function(module,exports$1){(function(t,n){module.exports=n()})(_3Dmol,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js"(e,t,n){n.r(t),n.d(t,{IOBuffer:()=>d});var i=n("./node_modules/iobuffer/lib-esm/text.js");const o=1024*8,l=(()=>{const m=new Uint8Array(4),b=new Uint32Array(m.buffer);return!((b[0]=1)&m[0])})(),h={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class d{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(b=o,v={}){let w=!1;typeof b=="number"?b=new ArrayBuffer(b):(w=!0,this.lastWrittenByte=b.byteLength);const C=v.offset?v.offset>>>0:0,R=b.byteLength-C;let T=C;(ArrayBuffer.isView(b)||b instanceof d)&&(b.byteLength!==b.buffer.byteLength&&(T=b.byteOffset+C),b=b.buffer),w?this.lastWrittenByte=R:this.lastWrittenByte=0,this.buffer=b,this.length=R,this.byteLength=R,this.byteOffset=T,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,T,R),this._mark=0,this._marks=[]}available(b=1){return this.offset+b<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(b=1){return this.offset+=b,this}back(b=1){return this.offset-=b,this}seek(b){return this.offset=b,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const b=this._marks.pop();if(b===void 0)throw new Error("Mark stack empty");return this.seek(b),this}rewind(){return this.offset=0,this}ensureAvailable(b=1){if(!this.available(b)){const w=(this.offset+b)*2,C=new Uint8Array(w);C.set(new Uint8Array(this.buffer)),this.buffer=C.buffer,this.length=w,this.byteLength=w,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(b=1){return this.readArray(b,"uint8")}readArray(b,v){const w=h[v].BYTES_PER_ELEMENT*b,C=this.byteOffset+this.offset,R=this.buffer.slice(C,C+w);if(this.littleEndian===l&&v!=="uint8"&&v!=="int8"){const E=new Uint8Array(this.buffer.slice(C,C+w));E.reverse();const f=new h[v](E.buffer);return this.offset+=w,f.reverse(),f}const T=new h[v](R);return this.offset+=w,T}readInt16(){const b=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,b}readUint16(){const b=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,b}readInt32(){const b=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,b}readUint32(){const b=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,b}readFloat32(){const b=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,b}readFloat64(){const b=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,b}readBigInt64(){const b=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,b}readBigUint64(){const b=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,b}readChar(){return String.fromCharCode(this.readInt8())}readChars(b=1){let v="";for(let w=0;w<b;w++)v+=this.readChar();return v}readUtf8(b=1){return(0,i.decode)(this.readBytes(b))}decodeText(b=1,v="utf8"){return(0,i.decode)(this.readBytes(b),v)}writeBoolean(b){return this.writeUint8(b?255:0),this}writeInt8(b){return this.ensureAvailable(1),this._data.setInt8(this.offset++,b),this._updateLastWrittenByte(),this}writeUint8(b){return this.ensureAvailable(1),this._data.setUint8(this.offset++,b),this._updateLastWrittenByte(),this}writeByte(b){return this.writeUint8(b)}writeBytes(b){this.ensureAvailable(b.length);for(let v=0;v<b.length;v++)this._data.setUint8(this.offset++,b[v]);return this._updateLastWrittenByte(),this}writeInt16(b){return this.ensureAvailable(2),this._data.setInt16(this.offset,b,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(b){return this.ensureAvailable(2),this._data.setUint16(this.offset,b,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(b){return this.ensureAvailable(4),this._data.setInt32(this.offset,b,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(b){return this.ensureAvailable(4),this._data.setUint32(this.offset,b,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(b){return this.ensureAvailable(4),this._data.setFloat32(this.offset,b,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(b){return this.ensureAvailable(8),this._data.setFloat64(this.offset,b,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(b){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,b,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(b){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,b,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(b){return this.writeUint8(b.charCodeAt(0))}writeChars(b){for(let v=0;v<b.length;v++)this.writeUint8(b.charCodeAt(v));return this}writeUtf8(b){return this.writeBytes((0,i.encode)(b))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},"./node_modules/iobuffer/lib-esm/text.js"(e,t,n){n.r(t),n.d(t,{decode:()=>i,encode:()=>l});function i(h,d="utf8"){return new TextDecoder(d).decode(h)}const o=new TextEncoder;function l(h){return o.encode(h)}},"./node_modules/netcdfjs/lib-esm/data.js"(e,t,n){n.r(t),n.d(t,{nonRecord:()=>o,record:()=>l});var i=n("./node_modules/netcdfjs/lib-esm/types.js");function o(h,d){const m=(0,i.str2num)(d.type),b=d.size/(0,i.num2bytes)(m),v=new Array(b);for(let w=0;w<b;w++)v[w]=(0,i.readType)(h,m,1);return v}function l(h,d,m){const b=(0,i.str2num)(d.type),v=d.size?d.size/(0,i.num2bytes)(b):1,w=m.length,C=new Array(w),R=m.recordStep;if(R)for(let T=0;T<w;T++){const E=h.offset;C[T]=(0,i.readType)(h,b,v),h.seek(E+R)}else throw new Error("recordDimension.recordStep is undefined");return C}},"./node_modules/netcdfjs/lib-esm/header.js"(e,t,n){n.r(t),n.d(t,{header:()=>v});var i=n("./node_modules/netcdfjs/lib-esm/types.js"),o=n("./node_modules/netcdfjs/lib-esm/utils.js");const l=0,h=10,d=11,m=12,b=0;function v(T,E){const f={version:E},g={length:T.readUint32()},S=w(T);Array.isArray(S)||(g.id=S.recordId,g.name=S.recordName,f.dimensions=S.dimensions),f.globalAttributes=C(T);const O=R(T,g?.id,E);return Array.isArray(O)||(f.variables=O.variables,g.recordStep=O.recordStep),f.recordDimension=g,f}function w(T){const E={};let f,g;const S=T.readUint32();let O;if(S===l)return(0,o.notNetcdf)(T.readUint32()!==l,"wrong empty tag for list of dimensions"),[];{(0,o.notNetcdf)(S!==h,"wrong tag for list of dimensions");const D=T.readUint32();O=new Array(D);for(let M=0;M<D;M++){const _=(0,o.readName)(T),A=T.readUint32();A===b&&(f=M,g=_),O[M]={name:_,size:A}}}return f!==void 0&&(E.recordId=f),g!==void 0&&(E.recordName=g),E.dimensions=O,E}function C(T){const E=T.readUint32();let f;if(E===l)return(0,o.notNetcdf)(T.readUint32()!==l,"wrong empty tag for list of attributes"),[];{(0,o.notNetcdf)(E!==m,"wrong tag for list of attributes");const g=T.readUint32();f=new Array(g);for(let S=0;S<g;S++){const O=(0,o.readName)(T),D=T.readUint32();(0,o.notNetcdf)(D<1||D>6,`non valid type ${D}`);const M=T.readUint32(),_=(0,i.readType)(T,D,M);(0,o.padding)(T),f[S]={name:O,type:(0,i.num2str)(D),value:_}}}return f}function R(T,E,f){const g=T.readUint32();let S=0,O;if(g===l)return(0,o.notNetcdf)(T.readUint32()!==l,"wrong empty tag for list of variables"),[];{(0,o.notNetcdf)(g!==d,"wrong tag for list of variables");const D=T.readUint32();O=new Array(D);for(let M=0;M<D;M++){const _=(0,o.readName)(T),A=T.readUint32(),j=new Array(A);for(let q=0;q<A;q++)j[q]=T.readUint32();const L=C(T),$=T.readUint32();(0,o.notNetcdf)($<1&&$>6,`non valid type ${$}`);const F=T.readUint32();let W=T.readUint32();f===2&&((0,o.notNetcdf)(W>0,"offsets larger than 4GB not supported"),W=T.readUint32());let U=!1;typeof E<"u"&&j[0]===E&&(S+=F,U=!0),O[M]={name:_,dimensions:j,attributes:L,type:(0,i.num2str)($),size:F,offset:W,record:U}}}return{variables:O,recordStep:S}}},"./node_modules/netcdfjs/lib-esm/index.js"(e,t,n){n.r(t),n.d(t,{NetCDFReader:()=>i.NetCDFReader});var i=n("./node_modules/netcdfjs/lib-esm/parser.js")},"./node_modules/netcdfjs/lib-esm/parser.js"(e,t,n){n.r(t),n.d(t,{NetCDFReader:()=>m});var i=n("./node_modules/iobuffer/lib-esm/IOBuffer.js"),o=n("./node_modules/netcdfjs/lib-esm/data.js"),l=n("./node_modules/netcdfjs/lib-esm/header.js"),h=n("./node_modules/netcdfjs/lib-esm/toString.js"),d=n("./node_modules/netcdfjs/lib-esm/utils.js");class m{constructor(v){this.toString=h.toString;const w=new i.IOBuffer(v);w.setBigEndian(),(0,d.notNetcdf)(w.readChars(3)!=="CDF","should start with CDF");const C=w.readByte();(0,d.notNetcdf)(C>2,"unknown version"),this.header=(0,l.header)(w,C),this.buffer=w}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(v){const w=this.globalAttributes.find(C=>C.name===v);return w?w.value:null}getDataVariableAsString(v){const w=this.getDataVariable(v);return w?w.join(""):null}get variables(){return this.header.variables}getDataVariable(v){let w;if(typeof v=="string"?w=this.header.variables.find(C=>C.name===v):w=v,w===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(w.offset),w.record?(0,o.record)(this.buffer,w,this.header.recordDimension):(0,o.nonRecord)(this.buffer,w)}dataVariableExists(v){return this.header.variables.find(C=>C.name===v)!==void 0}attributeExists(v){return this.globalAttributes.find(C=>C.name===v)!==void 0}}},"./node_modules/netcdfjs/lib-esm/toString.js"(e,t,n){n.r(t),n.d(t,{toString:()=>i});function i(){const o=[];o.push("DIMENSIONS");for(const h of this.dimensions)o.push(`  ${h.name.padEnd(30)} = size: ${h.size}`);o.push(""),o.push("GLOBAL ATTRIBUTES");for(const h of this.globalAttributes)o.push(`  ${h.name.padEnd(30)} = ${h.value}`);const l=JSON.parse(JSON.stringify(this.variables));o.push(""),o.push("VARIABLES:");for(const h of l){h.value=this.getDataVariable(h);let d=JSON.stringify(h.value);d.length>50&&(d=d.substring(0,50)),isNaN(h.value.length)||(d+=` (length: ${h.value.length})`),o.push(`  ${h.name.padEnd(30)} = ${d}`)}return o.join(`
`)}},"./node_modules/netcdfjs/lib-esm/types.js"(e,t,n){n.r(t),n.d(t,{num2bytes:()=>l,num2str:()=>o,readType:()=>m,str2num:()=>h});const i={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function o(v){switch(Number(v)){case i.BYTE:return"byte";case i.CHAR:return"char";case i.SHORT:return"short";case i.INT:return"int";case i.FLOAT:return"float";case i.DOUBLE:return"double";default:return"undefined"}}function l(v){switch(Number(v)){case i.BYTE:return 1;case i.CHAR:return 1;case i.SHORT:return 2;case i.INT:return 4;case i.FLOAT:return 4;case i.DOUBLE:return 8;default:return-1}}function h(v){switch(String(v)){case"byte":return i.BYTE;case"char":return i.CHAR;case"short":return i.SHORT;case"int":return i.INT;case"float":return i.FLOAT;case"double":return i.DOUBLE;default:return-1}}function d(v,w){if(v!==1){const C=new Array(v);for(let R=0;R<v;R++)C[R]=w();return C}else return w()}function m(v,w,C){switch(w){case i.BYTE:return Array.from(v.readBytes(C));case i.CHAR:return b(v.readChars(C));case i.SHORT:return d(C,v.readInt16.bind(v));case i.INT:return d(C,v.readInt32.bind(v));case i.FLOAT:return d(C,v.readFloat32.bind(v));case i.DOUBLE:return d(C,v.readFloat64.bind(v));default:throw new Error(`non valid type ${w}`)}}function b(v){return v.charCodeAt(v.length-1)===0?v.substring(0,v.length-1):v}},"./node_modules/netcdfjs/lib-esm/utils.js"(e,t,n){n.r(t),n.d(t,{notNetcdf:()=>i,padding:()=>o,readName:()=>l});function i(h,d){if(h)throw new TypeError(`Not a valid NetCDF v3.x file: ${d}`)}function o(h){h.offset%4!==0&&h.skip(4-h.offset%4)}function l(h){const d=h.readUint32(),m=h.readChars(d);return o(h),m}},"./node_modules/pako/dist/pako.esm.mjs"(e,t,n){n.r(t),n.d(t,{Deflate:()=>ws,Inflate:()=>Ss,constants:()=>Kn,default:()=>$a,deflate:()=>an,deflateRaw:()=>Zi,gzip:()=>Na,inflate:()=>vo,inflateRaw:()=>xn,ungzip:()=>Vn});const i=4,o=0,l=1,h=2;function d(N){let ne=N.length;for(;--ne>=0;)N[ne]=0}const m=0,b=1,v=2,w=3,C=258,R=29,T=256,E=T+1+R,f=30,g=19,S=2*E+1,O=15,D=16,M=7,_=256,A=16,j=17,L=18,$=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),F=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),W=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),q=512,H=new Array((E+2)*2);d(H);const Y=new Array(f*2);d(Y);const Z=new Array(q);d(Z);const X=new Array(C-w+1);d(X);const J=new Array(R);d(J);const Q=new Array(f);d(Q);function G(N,ne,z,ce,ye){this.static_tree=N,this.extra_bits=ne,this.extra_base=z,this.elems=ce,this.max_length=ye,this.has_stree=N&&N.length}let te,ue,de;function xe(N,ne){this.dyn_tree=N,this.max_code=0,this.stat_desc=ne}const ve=N=>N<256?Z[N]:Z[256+(N>>>7)],Se=(N,ne)=>{N.pending_buf[N.pending++]=ne&255,N.pending_buf[N.pending++]=ne>>>8&255},Ee=(N,ne,z)=>{N.bi_valid>D-z?(N.bi_buf|=ne<<N.bi_valid&65535,Se(N,N.bi_buf),N.bi_buf=ne>>D-N.bi_valid,N.bi_valid+=z-D):(N.bi_buf|=ne<<N.bi_valid&65535,N.bi_valid+=z)},he=(N,ne,z)=>{Ee(N,z[ne*2],z[ne*2+1])},Re=(N,ne)=>{let z=0;do z|=N&1,N>>>=1,z<<=1;while(--ne>0);return z>>>1},je=N=>{N.bi_valid===16?(Se(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):N.bi_valid>=8&&(N.pending_buf[N.pending++]=N.bi_buf&255,N.bi_buf>>=8,N.bi_valid-=8)},Ce=(N,ne)=>{const z=ne.dyn_tree,ce=ne.max_code,ye=ne.stat_desc.static_tree,ge=ne.stat_desc.has_stree,We=ne.stat_desc.extra_bits,$e=ne.stat_desc.extra_base,_t=ne.stat_desc.max_length;let Pe,ze,$t,ht,st,Rt,ur=0;for(ht=0;ht<=O;ht++)N.bl_count[ht]=0;for(z[N.heap[N.heap_max]*2+1]=0,Pe=N.heap_max+1;Pe<S;Pe++)ze=N.heap[Pe],ht=z[z[ze*2+1]*2+1]+1,ht>_t&&(ht=_t,ur++),z[ze*2+1]=ht,!(ze>ce)&&(N.bl_count[ht]++,st=0,ze>=$e&&(st=We[ze-$e]),Rt=z[ze*2],N.opt_len+=Rt*(ht+st),ge&&(N.static_len+=Rt*(ye[ze*2+1]+st)));if(ur!==0){do{for(ht=_t-1;N.bl_count[ht]===0;)ht--;N.bl_count[ht]--,N.bl_count[ht+1]+=2,N.bl_count[_t]--,ur-=2}while(ur>0);for(ht=_t;ht!==0;ht--)for(ze=N.bl_count[ht];ze!==0;)$t=N.heap[--Pe],!($t>ce)&&(z[$t*2+1]!==ht&&(N.opt_len+=(ht-z[$t*2+1])*z[$t*2],z[$t*2+1]=ht),ze--)}},Le=(N,ne,z)=>{const ce=new Array(O+1);let ye=0,ge,We;for(ge=1;ge<=O;ge++)ye=ye+z[ge-1]<<1,ce[ge]=ye;for(We=0;We<=ne;We++){let $e=N[We*2+1];$e!==0&&(N[We*2]=Re(ce[$e]++,$e))}},me=()=>{let N,ne,z,ce,ye;const ge=new Array(O+1);for(z=0,ce=0;ce<R-1;ce++)for(J[ce]=z,N=0;N<1<<$[ce];N++)X[z++]=ce;for(X[z-1]=ce,ye=0,ce=0;ce<16;ce++)for(Q[ce]=ye,N=0;N<1<<F[ce];N++)Z[ye++]=ce;for(ye>>=7;ce<f;ce++)for(Q[ce]=ye<<7,N=0;N<1<<F[ce]-7;N++)Z[256+ye++]=ce;for(ne=0;ne<=O;ne++)ge[ne]=0;for(N=0;N<=143;)H[N*2+1]=8,N++,ge[8]++;for(;N<=255;)H[N*2+1]=9,N++,ge[9]++;for(;N<=279;)H[N*2+1]=7,N++,ge[7]++;for(;N<=287;)H[N*2+1]=8,N++,ge[8]++;for(Le(H,E+1,ge),N=0;N<f;N++)Y[N*2+1]=5,Y[N*2]=Re(N,5);te=new G(H,$,T+1,E,O),ue=new G(Y,F,0,f,O),de=new G(new Array(0),W,0,g,M)},Ie=N=>{let ne;for(ne=0;ne<E;ne++)N.dyn_ltree[ne*2]=0;for(ne=0;ne<f;ne++)N.dyn_dtree[ne*2]=0;for(ne=0;ne<g;ne++)N.bl_tree[ne*2]=0;N.dyn_ltree[_*2]=1,N.opt_len=N.static_len=0,N.sym_next=N.matches=0},Ve=N=>{N.bi_valid>8?Se(N,N.bi_buf):N.bi_valid>0&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0},nt=(N,ne,z,ce)=>{const ye=ne*2,ge=z*2;return N[ye]<N[ge]||N[ye]===N[ge]&&ce[ne]<=ce[z]},it=(N,ne,z)=>{const ce=N.heap[z];let ye=z<<1;for(;ye<=N.heap_len&&(ye<N.heap_len&&nt(ne,N.heap[ye+1],N.heap[ye],N.depth)&&ye++,!nt(ne,ce,N.heap[ye],N.depth));)N.heap[z]=N.heap[ye],z=ye,ye<<=1;N.heap[z]=ce},ot=(N,ne,z)=>{let ce,ye,ge=0,We,$e;if(N.sym_next!==0)do ce=N.pending_buf[N.sym_buf+ge++]&255,ce+=(N.pending_buf[N.sym_buf+ge++]&255)<<8,ye=N.pending_buf[N.sym_buf+ge++],ce===0?he(N,ye,ne):(We=X[ye],he(N,We+T+1,ne),$e=$[We],$e!==0&&(ye-=J[We],Ee(N,ye,$e)),ce--,We=ve(ce),he(N,We,z),$e=F[We],$e!==0&&(ce-=Q[We],Ee(N,ce,$e)));while(ge<N.sym_next);he(N,_,ne)},at=(N,ne)=>{const z=ne.dyn_tree,ce=ne.stat_desc.static_tree,ye=ne.stat_desc.has_stree,ge=ne.stat_desc.elems;let We,$e,_t=-1,Pe;for(N.heap_len=0,N.heap_max=S,We=0;We<ge;We++)z[We*2]!==0?(N.heap[++N.heap_len]=_t=We,N.depth[We]=0):z[We*2+1]=0;for(;N.heap_len<2;)Pe=N.heap[++N.heap_len]=_t<2?++_t:0,z[Pe*2]=1,N.depth[Pe]=0,N.opt_len--,ye&&(N.static_len-=ce[Pe*2+1]);for(ne.max_code=_t,We=N.heap_len>>1;We>=1;We--)it(N,z,We);Pe=ge;do We=N.heap[1],N.heap[1]=N.heap[N.heap_len--],it(N,z,1),$e=N.heap[1],N.heap[--N.heap_max]=We,N.heap[--N.heap_max]=$e,z[Pe*2]=z[We*2]+z[$e*2],N.depth[Pe]=(N.depth[We]>=N.depth[$e]?N.depth[We]:N.depth[$e])+1,z[We*2+1]=z[$e*2+1]=Pe,N.heap[1]=Pe++,it(N,z,1);while(N.heap_len>=2);N.heap[--N.heap_max]=N.heap[1],Ce(N,ne),Le(z,_t,N.bl_count)},Je=(N,ne,z)=>{let ce,ye=-1,ge,We=ne[1],$e=0,_t=7,Pe=4;for(We===0&&(_t=138,Pe=3),ne[(z+1)*2+1]=65535,ce=0;ce<=z;ce++)ge=We,We=ne[(ce+1)*2+1],!(++$e<_t&&ge===We)&&($e<Pe?N.bl_tree[ge*2]+=$e:ge!==0?(ge!==ye&&N.bl_tree[ge*2]++,N.bl_tree[A*2]++):$e<=10?N.bl_tree[j*2]++:N.bl_tree[L*2]++,$e=0,ye=ge,We===0?(_t=138,Pe=3):ge===We?(_t=6,Pe=3):(_t=7,Pe=4))},rt=(N,ne,z)=>{let ce,ye=-1,ge,We=ne[1],$e=0,_t=7,Pe=4;for(We===0&&(_t=138,Pe=3),ce=0;ce<=z;ce++)if(ge=We,We=ne[(ce+1)*2+1],!(++$e<_t&&ge===We)){if($e<Pe)do he(N,ge,N.bl_tree);while(--$e!==0);else ge!==0?(ge!==ye&&(he(N,ge,N.bl_tree),$e--),he(N,A,N.bl_tree),Ee(N,$e-3,2)):$e<=10?(he(N,j,N.bl_tree),Ee(N,$e-3,3)):(he(N,L,N.bl_tree),Ee(N,$e-11,7));$e=0,ye=ge,We===0?(_t=138,Pe=3):ge===We?(_t=6,Pe=3):(_t=7,Pe=4)}},et=N=>{let ne;for(Je(N,N.dyn_ltree,N.l_desc.max_code),Je(N,N.dyn_dtree,N.d_desc.max_code),at(N,N.bl_desc),ne=g-1;ne>=3&&N.bl_tree[U[ne]*2+1]===0;ne--);return N.opt_len+=3*(ne+1)+5+5+4,ne},Qe=(N,ne,z,ce)=>{let ye;for(Ee(N,ne-257,5),Ee(N,z-1,5),Ee(N,ce-4,4),ye=0;ye<ce;ye++)Ee(N,N.bl_tree[U[ye]*2+1],3);rt(N,N.dyn_ltree,ne-1),rt(N,N.dyn_dtree,z-1)},ct=N=>{let ne=4093624447,z;for(z=0;z<=31;z++,ne>>>=1)if(ne&1&&N.dyn_ltree[z*2]!==0)return o;if(N.dyn_ltree[18]!==0||N.dyn_ltree[20]!==0||N.dyn_ltree[26]!==0)return l;for(z=32;z<T;z++)if(N.dyn_ltree[z*2]!==0)return l;return o};let pt=!1;const oe=N=>{pt||(me(),pt=!0),N.l_desc=new xe(N.dyn_ltree,te),N.d_desc=new xe(N.dyn_dtree,ue),N.bl_desc=new xe(N.bl_tree,de),N.bi_buf=0,N.bi_valid=0,Ie(N)},fe=(N,ne,z,ce)=>{Ee(N,(m<<1)+(ce?1:0),3),Ve(N),Se(N,z),Se(N,~z),z&&N.pending_buf.set(N.window.subarray(ne,ne+z),N.pending),N.pending+=z},pe=N=>{Ee(N,b<<1,3),he(N,_,H),je(N)},Be=(N,ne,z,ce)=>{let ye,ge,We=0;N.level>0?(N.strm.data_type===h&&(N.strm.data_type=ct(N)),at(N,N.l_desc),at(N,N.d_desc),We=et(N),ye=N.opt_len+3+7>>>3,ge=N.static_len+3+7>>>3,ge<=ye&&(ye=ge)):ye=ge=z+5,z+4<=ye&&ne!==-1?fe(N,ne,z,ce):N.strategy===i||ge===ye?(Ee(N,(b<<1)+(ce?1:0),3),ot(N,H,Y)):(Ee(N,(v<<1)+(ce?1:0),3),Qe(N,N.l_desc.max_code+1,N.d_desc.max_code+1,We+1),ot(N,N.dyn_ltree,N.dyn_dtree)),Ie(N),ce&&Ve(N)},ke=(N,ne,z)=>(N.pending_buf[N.sym_buf+N.sym_next++]=ne,N.pending_buf[N.sym_buf+N.sym_next++]=ne>>8,N.pending_buf[N.sym_buf+N.sym_next++]=z,ne===0?N.dyn_ltree[z*2]++:(N.matches++,ne--,N.dyn_ltree[(X[z]+T+1)*2]++,N.dyn_dtree[ve(ne)*2]++),N.sym_next===N.sym_end);var Ke=oe,Ye=fe,ie=Be,Ae=ke,Ne=pe,Ze={_tr_init:Ke,_tr_stored_block:Ye,_tr_flush_block:ie,_tr_tally:Ae,_tr_align:Ne},Ge=(N,ne,z,ce)=>{let ye=N&65535|0,ge=N>>>16&65535|0,We=0;for(;z!==0;){We=z>2e3?2e3:z,z-=We;do ye=ye+ne[ce++]|0,ge=ge+ye|0;while(--We);ye%=65521,ge%=65521}return ye|ge<<16|0};const ae=()=>{let N,ne=[];for(var z=0;z<256;z++){N=z;for(var ce=0;ce<8;ce++)N=N&1?3988292384^N>>>1:N>>>1;ne[z]=N}return ne},He=new Uint32Array(ae());var K=(N,ne,z,ce)=>{const ye=He,ge=ce+z;N^=-1;for(let We=ce;We<ge;We++)N=N>>>8^ye[(N^ne[We])&255];return N^-1},Me={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Te={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:le,_tr_stored_block:we,_tr_flush_block:Fe,_tr_tally:yt,_tr_align:mt}=Ze,{Z_NO_FLUSH:ft,Z_PARTIAL_FLUSH:Ot,Z_FULL_FLUSH:nr,Z_FINISH:Pt,Z_BLOCK:At,Z_OK:Ct,Z_STREAM_END:Ut,Z_STREAM_ERROR:Ft,Z_DATA_ERROR:fr,Z_BUF_ERROR:Qt,Z_DEFAULT_COMPRESSION:Dt,Z_FILTERED:Lt,Z_HUFFMAN_ONLY:It,Z_RLE:Jt,Z_FIXED:rr,Z_DEFAULT_STRATEGY:cr,Z_UNKNOWN:vr,Z_DEFLATED:xr}=Te,en=9,ti=15,lr=8,oa=256+1+29,la=30,Ko=19,Bs=2*oa+1,ua=15,Nt=3,Sn=258,pr=Sn+Nt+1,Xo=32,ni=42,Va=57,ii=69,ai=73,kn=91,si=103,Nn=113,ki=666,br=1,$n=2,fn=3,tn=4,Yo=3,dn=(N,ne)=>(N.msg=Me[ne],ne),er=N=>N*2-(N>4?9:0),hn=N=>{let ne=N.length;for(;--ne>=0;)N[ne]=0},Fs=N=>{let ne,z,ce,ye=N.w_size;ne=N.hash_size,ce=ne;do z=N.head[--ce],N.head[ce]=z>=ye?z-ye:0;while(--ne);ne=ye,ce=ne;do z=N.prev[--ce],N.prev[ce]=z>=ye?z-ye:0;while(--ne)};let pn=(N,ne,z)=>(ne<<N.hash_shift^z)&N.hash_mask;const Mr=N=>{const ne=N.state;let z=ne.pending;z>N.avail_out&&(z=N.avail_out),z!==0&&(N.output.set(ne.pending_buf.subarray(ne.pending_out,ne.pending_out+z),N.next_out),N.next_out+=z,ne.pending_out+=z,N.total_out+=z,N.avail_out-=z,ne.pending-=z,ne.pending===0&&(ne.pending_out=0))},jr=(N,ne)=>{Fe(N,N.block_start>=0?N.block_start:-1,N.strstart-N.block_start,ne),N.block_start=N.strstart,Mr(N.strm)},Kt=(N,ne)=>{N.pending_buf[N.pending++]=ne},An=(N,ne)=>{N.pending_buf[N.pending++]=ne>>>8&255,N.pending_buf[N.pending++]=ne&255},rn=(N,ne,z,ce)=>{let ye=N.avail_in;return ye>ce&&(ye=ce),ye===0?0:(N.avail_in-=ye,ne.set(N.input.subarray(N.next_in,N.next_in+ye),z),N.state.wrap===1?N.adler=Ge(N.adler,ne,ye,z):N.state.wrap===2&&(N.adler=K(N.adler,ne,ye,z)),N.next_in+=ye,N.total_in+=ye,ye)},mn=(N,ne)=>{let z=N.max_chain_length,ce=N.strstart,ye,ge,We=N.prev_length,$e=N.nice_match;const _t=N.strstart>N.w_size-pr?N.strstart-(N.w_size-pr):0,Pe=N.window,ze=N.w_mask,$t=N.prev,ht=N.strstart+Sn;let st=Pe[ce+We-1],Rt=Pe[ce+We];N.prev_length>=N.good_match&&(z>>=2),$e>N.lookahead&&($e=N.lookahead);do if(ye=ne,!(Pe[ye+We]!==Rt||Pe[ye+We-1]!==st||Pe[ye]!==Pe[ce]||Pe[++ye]!==Pe[ce+1])){ce+=2,ye++;do;while(Pe[++ce]===Pe[++ye]&&Pe[++ce]===Pe[++ye]&&Pe[++ce]===Pe[++ye]&&Pe[++ce]===Pe[++ye]&&Pe[++ce]===Pe[++ye]&&Pe[++ce]===Pe[++ye]&&Pe[++ce]===Pe[++ye]&&Pe[++ce]===Pe[++ye]&&ce<ht);if(ge=Sn-(ht-ce),ce=ht-Sn,ge>We){if(N.match_start=ne,We=ge,ge>=$e)break;st=Pe[ce+We-1],Rt=Pe[ce+We]}}while((ne=$t[ne&ze])>_t&&--z!==0);return We<=N.lookahead?We:N.lookahead},zr=N=>{const ne=N.w_size;let z,ce,ye;do{if(ce=N.window_size-N.lookahead-N.strstart,N.strstart>=ne+(ne-pr)&&(N.window.set(N.window.subarray(ne,ne+ne-ce),0),N.match_start-=ne,N.strstart-=ne,N.block_start-=ne,N.insert>N.strstart&&(N.insert=N.strstart),Fs(N),ce+=ne),N.strm.avail_in===0)break;if(z=rn(N.strm,N.window,N.strstart+N.lookahead,ce),N.lookahead+=z,N.lookahead+N.insert>=Nt)for(ye=N.strstart-N.insert,N.ins_h=N.window[ye],N.ins_h=pn(N,N.ins_h,N.window[ye+1]);N.insert&&(N.ins_h=pn(N,N.ins_h,N.window[ye+Nt-1]),N.prev[ye&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=ye,ye++,N.insert--,!(N.lookahead+N.insert<Nt)););}while(N.lookahead<pr&&N.strm.avail_in!==0)},oi=(N,ne)=>{let z=N.pending_buf_size-5>N.w_size?N.w_size:N.pending_buf_size-5,ce,ye,ge,We=0,$e=N.strm.avail_in;do{if(ce=65535,ge=N.bi_valid+42>>3,N.strm.avail_out<ge||(ge=N.strm.avail_out-ge,ye=N.strstart-N.block_start,ce>ye+N.strm.avail_in&&(ce=ye+N.strm.avail_in),ce>ge&&(ce=ge),ce<z&&(ce===0&&ne!==Pt||ne===ft||ce!==ye+N.strm.avail_in)))break;We=ne===Pt&&ce===ye+N.strm.avail_in?1:0,we(N,0,0,We),N.pending_buf[N.pending-4]=ce,N.pending_buf[N.pending-3]=ce>>8,N.pending_buf[N.pending-2]=~ce,N.pending_buf[N.pending-1]=~ce>>8,Mr(N.strm),ye&&(ye>ce&&(ye=ce),N.strm.output.set(N.window.subarray(N.block_start,N.block_start+ye),N.strm.next_out),N.strm.next_out+=ye,N.strm.avail_out-=ye,N.strm.total_out+=ye,N.block_start+=ye,ce-=ye),ce&&(rn(N.strm,N.strm.output,N.strm.next_out,ce),N.strm.next_out+=ce,N.strm.avail_out-=ce,N.strm.total_out+=ce)}while(We===0);return $e-=N.strm.avail_in,$e&&($e>=N.w_size?(N.matches=2,N.window.set(N.strm.input.subarray(N.strm.next_in-N.w_size,N.strm.next_in),0),N.strstart=N.w_size,N.insert=N.strstart):(N.window_size-N.strstart<=$e&&(N.strstart-=N.w_size,N.window.set(N.window.subarray(N.w_size,N.w_size+N.strstart),0),N.matches<2&&N.matches++,N.insert>N.strstart&&(N.insert=N.strstart)),N.window.set(N.strm.input.subarray(N.strm.next_in-$e,N.strm.next_in),N.strstart),N.strstart+=$e,N.insert+=$e>N.w_size-N.insert?N.w_size-N.insert:$e),N.block_start=N.strstart),N.high_water<N.strstart&&(N.high_water=N.strstart),We?tn:ne!==ft&&ne!==Pt&&N.strm.avail_in===0&&N.strstart===N.block_start?$n:(ge=N.window_size-N.strstart,N.strm.avail_in>ge&&N.block_start>=N.w_size&&(N.block_start-=N.w_size,N.strstart-=N.w_size,N.window.set(N.window.subarray(N.w_size,N.w_size+N.strstart),0),N.matches<2&&N.matches++,ge+=N.w_size,N.insert>N.strstart&&(N.insert=N.strstart)),ge>N.strm.avail_in&&(ge=N.strm.avail_in),ge&&(rn(N.strm,N.window,N.strstart,ge),N.strstart+=ge,N.insert+=ge>N.w_size-N.insert?N.w_size-N.insert:ge),N.high_water<N.strstart&&(N.high_water=N.strstart),ge=N.bi_valid+42>>3,ge=N.pending_buf_size-ge>65535?65535:N.pending_buf_size-ge,z=ge>N.w_size?N.w_size:ge,ye=N.strstart-N.block_start,(ye>=z||(ye||ne===Pt)&&ne!==ft&&N.strm.avail_in===0&&ye<=ge)&&(ce=ye>ge?ge:ye,We=ne===Pt&&N.strm.avail_in===0&&ce===ye?1:0,we(N,N.block_start,ce,We),N.block_start+=ce,Mr(N.strm)),We?fn:br)},Bn=(N,ne)=>{let z,ce;for(;;){if(N.lookahead<pr){if(zr(N),N.lookahead<pr&&ne===ft)return br;if(N.lookahead===0)break}if(z=0,N.lookahead>=Nt&&(N.ins_h=pn(N,N.ins_h,N.window[N.strstart+Nt-1]),z=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),z!==0&&N.strstart-z<=N.w_size-pr&&(N.match_length=mn(N,z)),N.match_length>=Nt)if(ce=yt(N,N.strstart-N.match_start,N.match_length-Nt),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=Nt){N.match_length--;do N.strstart++,N.ins_h=pn(N,N.ins_h,N.window[N.strstart+Nt-1]),z=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart;while(--N.match_length!==0);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=pn(N,N.ins_h,N.window[N.strstart+1]);else ce=yt(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(ce&&(jr(N,!1),N.strm.avail_out===0))return br}return N.insert=N.strstart<Nt-1?N.strstart:Nt-1,ne===Pt?(jr(N,!0),N.strm.avail_out===0?fn:tn):N.sym_next&&(jr(N,!1),N.strm.avail_out===0)?br:$n},Ur=(N,ne)=>{let z,ce,ye;for(;;){if(N.lookahead<pr){if(zr(N),N.lookahead<pr&&ne===ft)return br;if(N.lookahead===0)break}if(z=0,N.lookahead>=Nt&&(N.ins_h=pn(N,N.ins_h,N.window[N.strstart+Nt-1]),z=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=Nt-1,z!==0&&N.prev_length<N.max_lazy_match&&N.strstart-z<=N.w_size-pr&&(N.match_length=mn(N,z),N.match_length<=5&&(N.strategy===Lt||N.match_length===Nt&&N.strstart-N.match_start>4096)&&(N.match_length=Nt-1)),N.prev_length>=Nt&&N.match_length<=N.prev_length){ye=N.strstart+N.lookahead-Nt,ce=yt(N,N.strstart-1-N.prev_match,N.prev_length-Nt),N.lookahead-=N.prev_length-1,N.prev_length-=2;do++N.strstart<=ye&&(N.ins_h=pn(N,N.ins_h,N.window[N.strstart+Nt-1]),z=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart);while(--N.prev_length!==0);if(N.match_available=0,N.match_length=Nt-1,N.strstart++,ce&&(jr(N,!1),N.strm.avail_out===0))return br}else if(N.match_available){if(ce=yt(N,0,N.window[N.strstart-1]),ce&&jr(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return br}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(ce=yt(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<Nt-1?N.strstart:Nt-1,ne===Pt?(jr(N,!0),N.strm.avail_out===0?fn:tn):N.sym_next&&(jr(N,!1),N.strm.avail_out===0)?br:$n},Zo=(N,ne)=>{let z,ce,ye,ge;const We=N.window;for(;;){if(N.lookahead<=Sn){if(zr(N),N.lookahead<=Sn&&ne===ft)return br;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=Nt&&N.strstart>0&&(ye=N.strstart-1,ce=We[ye],ce===We[++ye]&&ce===We[++ye]&&ce===We[++ye])){ge=N.strstart+Sn;do;while(ce===We[++ye]&&ce===We[++ye]&&ce===We[++ye]&&ce===We[++ye]&&ce===We[++ye]&&ce===We[++ye]&&ce===We[++ye]&&ce===We[++ye]&&ye<ge);N.match_length=Sn-(ge-ye),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=Nt?(z=yt(N,1,N.match_length-Nt),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(z=yt(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),z&&(jr(N,!1),N.strm.avail_out===0))return br}return N.insert=0,ne===Pt?(jr(N,!0),N.strm.avail_out===0?fn:tn):N.sym_next&&(jr(N,!1),N.strm.avail_out===0)?br:$n},Us=(N,ne)=>{let z;for(;;){if(N.lookahead===0&&(zr(N),N.lookahead===0)){if(ne===ft)return br;break}if(N.match_length=0,z=yt(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,z&&(jr(N,!1),N.strm.avail_out===0))return br}return N.insert=0,ne===Pt?(jr(N,!0),N.strm.avail_out===0?fn:tn):N.sym_next&&(jr(N,!1),N.strm.avail_out===0)?br:$n};function Dr(N,ne,z,ce,ye){this.good_length=N,this.max_lazy=ne,this.nice_length=z,this.max_chain=ce,this.func=ye}const Ni=[new Dr(0,0,0,0,oi),new Dr(4,4,8,4,Bn),new Dr(4,5,16,8,Bn),new Dr(4,6,32,32,Bn),new Dr(4,4,16,16,Ur),new Dr(8,16,32,32,Ur),new Dr(8,16,128,128,Ur),new Dr(8,32,128,256,Ur),new Dr(32,128,258,1024,Ur),new Dr(32,258,258,4096,Ur)],Ws=N=>{N.window_size=2*N.w_size,hn(N.head),N.max_lazy_match=Ni[N.level].max_lazy,N.good_match=Ni[N.level].good_length,N.nice_match=Ni[N.level].nice_length,N.max_chain_length=Ni[N.level].max_chain,N.strstart=0,N.block_start=0,N.lookahead=0,N.insert=0,N.match_length=N.prev_length=Nt-1,N.match_available=0,N.ins_h=0};function ca(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Bs*2),this.dyn_dtree=new Uint16Array((2*la+1)*2),this.bl_tree=new Uint16Array((2*Ko+1)*2),hn(this.dyn_ltree),hn(this.dyn_dtree),hn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ua+1),this.heap=new Uint16Array(2*oa+1),hn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*oa+1),hn(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const li=N=>{if(!N)return 1;const ne=N.state;return!ne||ne.strm!==N||ne.status!==ni&&ne.status!==Va&&ne.status!==ii&&ne.status!==ai&&ne.status!==kn&&ne.status!==si&&ne.status!==Nn&&ne.status!==ki?1:0},Gs=N=>{if(li(N))return dn(N,Ft);N.total_in=N.total_out=0,N.data_type=vr;const ne=N.state;return ne.pending=0,ne.pending_out=0,ne.wrap<0&&(ne.wrap=-ne.wrap),ne.status=ne.wrap===2?Va:ne.wrap?ni:Nn,N.adler=ne.wrap===2?0:1,ne.last_flush=-2,le(ne),Ct},ui=N=>{const ne=Gs(N);return ne===Ct&&Ws(N.state),ne},$i=(N,ne)=>li(N)||N.state.wrap!==2?Ft:(N.state.gzhead=ne,Ct),Fn=(N,ne,z,ce,ye,ge)=>{if(!N)return Ft;let We=1;if(ne===Dt&&(ne=6),ce<0?(We=0,ce=-ce):ce>15&&(We=2,ce-=16),ye<1||ye>en||z!==xr||ce<8||ce>15||ne<0||ne>9||ge<0||ge>rr||ce===8&&We!==1)return dn(N,Ft);ce===8&&(ce=9);const $e=new ca;return N.state=$e,$e.strm=N,$e.status=ni,$e.wrap=We,$e.gzhead=null,$e.w_bits=ce,$e.w_size=1<<$e.w_bits,$e.w_mask=$e.w_size-1,$e.hash_bits=ye+7,$e.hash_size=1<<$e.hash_bits,$e.hash_mask=$e.hash_size-1,$e.hash_shift=~~(($e.hash_bits+Nt-1)/Nt),$e.window=new Uint8Array($e.w_size*2),$e.head=new Uint16Array($e.hash_size),$e.prev=new Uint16Array($e.w_size),$e.lit_bufsize=1<<ye+6,$e.pending_buf_size=$e.lit_bufsize*4,$e.pending_buf=new Uint8Array($e.pending_buf_size),$e.sym_buf=$e.lit_bufsize,$e.sym_end=($e.lit_bufsize-1)*3,$e.level=ne,$e.strategy=ge,$e.method=z,ui(N)},fa=(N,ne)=>Fn(N,ne,xr,ti,lr,cr),Qo=(N,ne)=>{if(li(N)||ne>At||ne<0)return N?dn(N,Ft):Ft;const z=N.state;if(!N.output||N.avail_in!==0&&!N.input||z.status===ki&&ne!==Pt)return dn(N,N.avail_out===0?Qt:Ft);const ce=z.last_flush;if(z.last_flush=ne,z.pending!==0){if(Mr(N),N.avail_out===0)return z.last_flush=-1,Ct}else if(N.avail_in===0&&er(ne)<=er(ce)&&ne!==Pt)return dn(N,Qt);if(z.status===ki&&N.avail_in!==0)return dn(N,Qt);if(z.status===ni&&z.wrap===0&&(z.status=Nn),z.status===ni){let ye=xr+(z.w_bits-8<<4)<<8,ge=-1;if(z.strategy>=It||z.level<2?ge=0:z.level<6?ge=1:z.level===6?ge=2:ge=3,ye|=ge<<6,z.strstart!==0&&(ye|=Xo),ye+=31-ye%31,An(z,ye),z.strstart!==0&&(An(z,N.adler>>>16),An(z,N.adler&65535)),N.adler=1,z.status=Nn,Mr(N),z.pending!==0)return z.last_flush=-1,Ct}if(z.status===Va){if(N.adler=0,Kt(z,31),Kt(z,139),Kt(z,8),z.gzhead)Kt(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),Kt(z,z.gzhead.time&255),Kt(z,z.gzhead.time>>8&255),Kt(z,z.gzhead.time>>16&255),Kt(z,z.gzhead.time>>24&255),Kt(z,z.level===9?2:z.strategy>=It||z.level<2?4:0),Kt(z,z.gzhead.os&255),z.gzhead.extra&&z.gzhead.extra.length&&(Kt(z,z.gzhead.extra.length&255),Kt(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(N.adler=K(N.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=ii;else if(Kt(z,0),Kt(z,0),Kt(z,0),Kt(z,0),Kt(z,0),Kt(z,z.level===9?2:z.strategy>=It||z.level<2?4:0),Kt(z,Yo),z.status=Nn,Mr(N),z.pending!==0)return z.last_flush=-1,Ct}if(z.status===ii){if(z.gzhead.extra){let ye=z.pending,ge=(z.gzhead.extra.length&65535)-z.gzindex;for(;z.pending+ge>z.pending_buf_size;){let $e=z.pending_buf_size-z.pending;if(z.pending_buf.set(z.gzhead.extra.subarray(z.gzindex,z.gzindex+$e),z.pending),z.pending=z.pending_buf_size,z.gzhead.hcrc&&z.pending>ye&&(N.adler=K(N.adler,z.pending_buf,z.pending-ye,ye)),z.gzindex+=$e,Mr(N),z.pending!==0)return z.last_flush=-1,Ct;ye=0,ge-=$e}let We=new Uint8Array(z.gzhead.extra);z.pending_buf.set(We.subarray(z.gzindex,z.gzindex+ge),z.pending),z.pending+=ge,z.gzhead.hcrc&&z.pending>ye&&(N.adler=K(N.adler,z.pending_buf,z.pending-ye,ye)),z.gzindex=0}z.status=ai}if(z.status===ai){if(z.gzhead.name){let ye=z.pending,ge;do{if(z.pending===z.pending_buf_size){if(z.gzhead.hcrc&&z.pending>ye&&(N.adler=K(N.adler,z.pending_buf,z.pending-ye,ye)),Mr(N),z.pending!==0)return z.last_flush=-1,Ct;ye=0}z.gzindex<z.gzhead.name.length?ge=z.gzhead.name.charCodeAt(z.gzindex++)&255:ge=0,Kt(z,ge)}while(ge!==0);z.gzhead.hcrc&&z.pending>ye&&(N.adler=K(N.adler,z.pending_buf,z.pending-ye,ye)),z.gzindex=0}z.status=kn}if(z.status===kn){if(z.gzhead.comment){let ye=z.pending,ge;do{if(z.pending===z.pending_buf_size){if(z.gzhead.hcrc&&z.pending>ye&&(N.adler=K(N.adler,z.pending_buf,z.pending-ye,ye)),Mr(N),z.pending!==0)return z.last_flush=-1,Ct;ye=0}z.gzindex<z.gzhead.comment.length?ge=z.gzhead.comment.charCodeAt(z.gzindex++)&255:ge=0,Kt(z,ge)}while(ge!==0);z.gzhead.hcrc&&z.pending>ye&&(N.adler=K(N.adler,z.pending_buf,z.pending-ye,ye))}z.status=si}if(z.status===si){if(z.gzhead.hcrc){if(z.pending+2>z.pending_buf_size&&(Mr(N),z.pending!==0))return z.last_flush=-1,Ct;Kt(z,N.adler&255),Kt(z,N.adler>>8&255),N.adler=0}if(z.status=Nn,Mr(N),z.pending!==0)return z.last_flush=-1,Ct}if(N.avail_in!==0||z.lookahead!==0||ne!==ft&&z.status!==ki){let ye=z.level===0?oi(z,ne):z.strategy===It?Us(z,ne):z.strategy===Jt?Zo(z,ne):Ni[z.level].func(z,ne);if((ye===fn||ye===tn)&&(z.status=ki),ye===br||ye===fn)return N.avail_out===0&&(z.last_flush=-1),Ct;if(ye===$n&&(ne===Ot?mt(z):ne!==At&&(we(z,0,0,!1),ne===nr&&(hn(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),Mr(N),N.avail_out===0))return z.last_flush=-1,Ct}return ne!==Pt?Ct:z.wrap<=0?Ut:(z.wrap===2?(Kt(z,N.adler&255),Kt(z,N.adler>>8&255),Kt(z,N.adler>>16&255),Kt(z,N.adler>>24&255),Kt(z,N.total_in&255),Kt(z,N.total_in>>8&255),Kt(z,N.total_in>>16&255),Kt(z,N.total_in>>24&255)):(An(z,N.adler>>>16),An(z,N.adler&65535)),Mr(N),z.wrap>0&&(z.wrap=-z.wrap),z.pending!==0?Ct:Ut)},Jo=N=>{if(li(N))return Ft;const ne=N.state.status;return N.state=null,ne===Nn?dn(N,fr):Ct},Ka=(N,ne)=>{let z=ne.length;if(li(N))return Ft;const ce=N.state,ye=ce.wrap;if(ye===2||ye===1&&ce.status!==ni||ce.lookahead)return Ft;if(ye===1&&(N.adler=Ge(N.adler,ne,z,0)),ce.wrap=0,z>=ce.w_size){ye===0&&(hn(ce.head),ce.strstart=0,ce.block_start=0,ce.insert=0);let _t=new Uint8Array(ce.w_size);_t.set(ne.subarray(z-ce.w_size,z),0),ne=_t,z=ce.w_size}const ge=N.avail_in,We=N.next_in,$e=N.input;for(N.avail_in=z,N.next_in=0,N.input=ne,zr(ce);ce.lookahead>=Nt;){let _t=ce.strstart,Pe=ce.lookahead-(Nt-1);do ce.ins_h=pn(ce,ce.ins_h,ce.window[_t+Nt-1]),ce.prev[_t&ce.w_mask]=ce.head[ce.ins_h],ce.head[ce.ins_h]=_t,_t++;while(--Pe);ce.strstart=_t,ce.lookahead=Nt-1,zr(ce)}return ce.strstart+=ce.lookahead,ce.block_start=ce.strstart,ce.insert=ce.lookahead,ce.lookahead=0,ce.match_length=ce.prev_length=Nt-1,ce.match_available=0,N.next_in=We,N.input=$e,N.avail_in=ge,ce.wrap=ye,Ct};var da=fa,Xa=Fn,qs=ui,Cn=Gs,Ya=$i,ha=Qo,Hs=Jo,pa=Ka,ma="pako deflate (from Nodeca project)",ci={deflateInit:da,deflateInit2:Xa,deflateReset:qs,deflateResetKeep:Cn,deflateSetHeader:Ya,deflate:ha,deflateEnd:Hs,deflateSetDictionary:pa,deflateInfo:ma};const Wr=(N,ne)=>Object.prototype.hasOwnProperty.call(N,ne);var fi=function(N){const ne=Array.prototype.slice.call(arguments,1);for(;ne.length;){const z=ne.shift();if(z){if(typeof z!="object")throw new TypeError(z+"must be non-object");for(const ce in z)Wr(z,ce)&&(N[ce]=z[ce])}}return N},Za=N=>{let ne=0;for(let ce=0,ye=N.length;ce<ye;ce++)ne+=N[ce].length;const z=new Uint8Array(ne);for(let ce=0,ye=0,ge=N.length;ce<ge;ce++){let We=N[ce];z.set(We,ye),ye+=We.length}return z},On={assign:fi,flattenChunks:Za};let Vs=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Vs=!1}const zn=new Uint8Array(256);for(let N=0;N<256;N++)zn[N]=N>=252?6:N>=248?5:N>=240?4:N>=224?3:N>=192?2:1;zn[254]=zn[254]=1;var Qa=N=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(N);let ne,z,ce,ye,ge,We=N.length,$e=0;for(ye=0;ye<We;ye++)z=N.charCodeAt(ye),(z&64512)===55296&&ye+1<We&&(ce=N.charCodeAt(ye+1),(ce&64512)===56320&&(z=65536+(z-55296<<10)+(ce-56320),ye++)),$e+=z<128?1:z<2048?2:z<65536?3:4;for(ne=new Uint8Array($e),ge=0,ye=0;ge<$e;ye++)z=N.charCodeAt(ye),(z&64512)===55296&&ye+1<We&&(ce=N.charCodeAt(ye+1),(ce&64512)===56320&&(z=65536+(z-55296<<10)+(ce-56320),ye++)),z<128?ne[ge++]=z:z<2048?(ne[ge++]=192|z>>>6,ne[ge++]=128|z&63):z<65536?(ne[ge++]=224|z>>>12,ne[ge++]=128|z>>>6&63,ne[ge++]=128|z&63):(ne[ge++]=240|z>>>18,ne[ge++]=128|z>>>12&63,ne[ge++]=128|z>>>6&63,ne[ge++]=128|z&63);return ne};const Bi=(N,ne)=>{if(ne<65534&&N.subarray&&Vs)return String.fromCharCode.apply(null,N.length===ne?N:N.subarray(0,ne));let z="";for(let ce=0;ce<ne;ce++)z+=String.fromCharCode(N[ce]);return z};var ga=(N,ne)=>{const z=ne||N.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(N.subarray(0,ne));let ce,ye;const ge=new Array(z*2);for(ye=0,ce=0;ce<z;){let We=N[ce++];if(We<128){ge[ye++]=We;continue}let $e=zn[We];if($e>4){ge[ye++]=65533,ce+=$e-1;continue}for(We&=$e===2?31:$e===3?15:7;$e>1&&ce<z;)We=We<<6|N[ce++]&63,$e--;if($e>1){ge[ye++]=65533;continue}We<65536?ge[ye++]=We:(We-=65536,ge[ye++]=55296|We>>10&1023,ge[ye++]=56320|We&1023)}return Bi(ge,ye)},Ks=(N,ne)=>{ne=ne||N.length,ne>N.length&&(ne=N.length);let z=ne-1;for(;z>=0&&(N[z]&192)===128;)z--;return z<0||z===0?ne:z+zn[N[z]]>ne?z:ne},Fi={string2buf:Qa,buf2string:ga,utf8border:Ks};function el(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Xs=el;const ya=Object.prototype.toString,{Z_NO_FLUSH:tl,Z_SYNC_FLUSH:rl,Z_FULL_FLUSH:nl,Z_FINISH:il,Z_OK:va,Z_STREAM_END:Ys,Z_DEFAULT_COMPRESSION:al,Z_DEFAULT_STRATEGY:sl,Z_DEFLATED:ol}=Te;function zi(N){this.options=On.assign({level:al,method:ol,chunkSize:16384,windowBits:15,memLevel:8,strategy:sl},N||{});let ne=this.options;ne.raw&&ne.windowBits>0?ne.windowBits=-ne.windowBits:ne.gzip&&ne.windowBits>0&&ne.windowBits<16&&(ne.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xs,this.strm.avail_out=0;let z=ci.deflateInit2(this.strm,ne.level,ne.method,ne.windowBits,ne.memLevel,ne.strategy);if(z!==va)throw new Error(Me[z]);if(ne.header&&ci.deflateSetHeader(this.strm,ne.header),ne.dictionary){let ce;if(typeof ne.dictionary=="string"?ce=Fi.string2buf(ne.dictionary):ya.call(ne.dictionary)==="[object ArrayBuffer]"?ce=new Uint8Array(ne.dictionary):ce=ne.dictionary,z=ci.deflateSetDictionary(this.strm,ce),z!==va)throw new Error(Me[z]);this._dict_set=!0}}zi.prototype.push=function(N,ne){const z=this.strm,ce=this.options.chunkSize;let ye,ge;if(this.ended)return!1;for(ne===~~ne?ge=ne:ge=ne===!0?il:tl,typeof N=="string"?z.input=Fi.string2buf(N):ya.call(N)==="[object ArrayBuffer]"?z.input=new Uint8Array(N):z.input=N,z.next_in=0,z.avail_in=z.input.length;;){if(z.avail_out===0&&(z.output=new Uint8Array(ce),z.next_out=0,z.avail_out=ce),(ge===rl||ge===nl)&&z.avail_out<=6){this.onData(z.output.subarray(0,z.next_out)),z.avail_out=0;continue}if(ye=ci.deflate(z,ge),ye===Ys)return z.next_out>0&&this.onData(z.output.subarray(0,z.next_out)),ye=ci.deflateEnd(this.strm),this.onEnd(ye),this.ended=!0,ye===va;if(z.avail_out===0){this.onData(z.output);continue}if(ge>0&&z.next_out>0){this.onData(z.output.subarray(0,z.next_out)),z.avail_out=0;continue}if(z.avail_in===0)break}return!0},zi.prototype.onData=function(N){this.chunks.push(N)},zi.prototype.onEnd=function(N){N===va&&(this.result=On.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg};function Ui(N,ne){const z=new zi(ne);if(z.push(N,!0),z.err)throw z.msg||Me[z.err];return z.result}function ll(N,ne){return ne=ne||{},ne.raw=!0,Ui(N,ne)}function ul(N,ne){return ne=ne||{},ne.gzip=!0,Ui(N,ne)}var cl=zi,Zs=Ui,fl=ll,dl=ul,hl={Deflate:cl,deflate:Zs,deflateRaw:fl,gzip:dl};const xa=16209,pl=16191;var ml=function(ne,z){let ce,ye,ge,We,$e,_t,Pe,ze,$t,ht,st,Rt,ur,qt,zt,Xt,Wt,vt,Ht,mr,Tt,Yt,Gt,Bt;const Vt=ne.state;ce=ne.next_in,Gt=ne.input,ye=ce+(ne.avail_in-5),ge=ne.next_out,Bt=ne.output,We=ge-(z-ne.avail_out),$e=ge+(ne.avail_out-257),_t=Vt.dmax,Pe=Vt.wsize,ze=Vt.whave,$t=Vt.wnext,ht=Vt.window,st=Vt.hold,Rt=Vt.bits,ur=Vt.lencode,qt=Vt.distcode,zt=(1<<Vt.lenbits)-1,Xt=(1<<Vt.distbits)-1;e:do{Rt<15&&(st+=Gt[ce++]<<Rt,Rt+=8,st+=Gt[ce++]<<Rt,Rt+=8),Wt=ur[st&zt];t:for(;;){if(vt=Wt>>>24,st>>>=vt,Rt-=vt,vt=Wt>>>16&255,vt===0)Bt[ge++]=Wt&65535;else if(vt&16){Ht=Wt&65535,vt&=15,vt&&(Rt<vt&&(st+=Gt[ce++]<<Rt,Rt+=8),Ht+=st&(1<<vt)-1,st>>>=vt,Rt-=vt),Rt<15&&(st+=Gt[ce++]<<Rt,Rt+=8,st+=Gt[ce++]<<Rt,Rt+=8),Wt=qt[st&Xt];r:for(;;){if(vt=Wt>>>24,st>>>=vt,Rt-=vt,vt=Wt>>>16&255,vt&16){if(mr=Wt&65535,vt&=15,Rt<vt&&(st+=Gt[ce++]<<Rt,Rt+=8,Rt<vt&&(st+=Gt[ce++]<<Rt,Rt+=8)),mr+=st&(1<<vt)-1,mr>_t){ne.msg="invalid distance too far back",Vt.mode=xa;break e}if(st>>>=vt,Rt-=vt,vt=ge-We,mr>vt){if(vt=mr-vt,vt>ze&&Vt.sane){ne.msg="invalid distance too far back",Vt.mode=xa;break e}if(Tt=0,Yt=ht,$t===0){if(Tt+=Pe-vt,vt<Ht){Ht-=vt;do Bt[ge++]=ht[Tt++];while(--vt);Tt=ge-mr,Yt=Bt}}else if($t<vt){if(Tt+=Pe+$t-vt,vt-=$t,vt<Ht){Ht-=vt;do Bt[ge++]=ht[Tt++];while(--vt);if(Tt=0,$t<Ht){vt=$t,Ht-=vt;do Bt[ge++]=ht[Tt++];while(--vt);Tt=ge-mr,Yt=Bt}}}else if(Tt+=$t-vt,vt<Ht){Ht-=vt;do Bt[ge++]=ht[Tt++];while(--vt);Tt=ge-mr,Yt=Bt}for(;Ht>2;)Bt[ge++]=Yt[Tt++],Bt[ge++]=Yt[Tt++],Bt[ge++]=Yt[Tt++],Ht-=3;Ht&&(Bt[ge++]=Yt[Tt++],Ht>1&&(Bt[ge++]=Yt[Tt++]))}else{Tt=ge-mr;do Bt[ge++]=Bt[Tt++],Bt[ge++]=Bt[Tt++],Bt[ge++]=Bt[Tt++],Ht-=3;while(Ht>2);Ht&&(Bt[ge++]=Bt[Tt++],Ht>1&&(Bt[ge++]=Bt[Tt++]))}}else if((vt&64)===0){Wt=qt[(Wt&65535)+(st&(1<<vt)-1)];continue r}else{ne.msg="invalid distance code",Vt.mode=xa;break e}break}}else if((vt&64)===0){Wt=ur[(Wt&65535)+(st&(1<<vt)-1)];continue t}else if(vt&32){Vt.mode=pl;break e}else{ne.msg="invalid literal/length code",Vt.mode=xa;break e}break}}while(ce<ye&&ge<$e);Ht=Rt>>3,ce-=Ht,Rt-=Ht<<3,st&=(1<<Rt)-1,ne.next_in=ce,ne.next_out=ge,ne.avail_in=ce<ye?5+(ye-ce):5-(ce-ye),ne.avail_out=ge<$e?257+($e-ge):257-(ge-$e),Vt.hold=st,Vt.bits=Rt};const di=15,_a=852,hi=592,Qs=0,ba=1,Ja=2,Js=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eo=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),to=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),mi=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Wi=(N,ne,z,ce,ye,ge,We,$e)=>{const _t=$e.bits;let Pe=0,ze=0,$t=0,ht=0,st=0,Rt=0,ur=0,qt=0,zt=0,Xt=0,Wt,vt,Ht,mr,Tt,Yt=null,Gt;const Bt=new Uint16Array(di+1),Vt=new Uint16Array(di+1);let Vr=null,As,Xn,Yn;for(Pe=0;Pe<=di;Pe++)Bt[Pe]=0;for(ze=0;ze<ce;ze++)Bt[ne[z+ze]]++;for(st=_t,ht=di;ht>=1&&Bt[ht]===0;ht--);if(st>ht&&(st=ht),ht===0)return ye[ge++]=1<<24|64<<16|0,ye[ge++]=1<<24|64<<16|0,$e.bits=1,0;for($t=1;$t<ht&&Bt[$t]===0;$t++);for(st<$t&&(st=$t),qt=1,Pe=1;Pe<=di;Pe++)if(qt<<=1,qt-=Bt[Pe],qt<0)return-1;if(qt>0&&(N===Qs||ht!==1))return-1;for(Vt[1]=0,Pe=1;Pe<di;Pe++)Vt[Pe+1]=Vt[Pe]+Bt[Pe];for(ze=0;ze<ce;ze++)ne[z+ze]!==0&&(We[Vt[ne[z+ze]]++]=ze);if(N===Qs?(Yt=Vr=We,Gt=20):N===ba?(Yt=Js,Vr=eo,Gt=257):(Yt=to,Vr=mi,Gt=0),Xt=0,ze=0,Pe=$t,Tt=ge,Rt=st,ur=0,Ht=-1,zt=1<<st,mr=zt-1,N===ba&&zt>_a||N===Ja&&zt>hi)return 1;for(;;){As=Pe-ur,We[ze]+1<Gt?(Xn=0,Yn=We[ze]):We[ze]>=Gt?(Xn=Vr[We[ze]-Gt],Yn=Yt[We[ze]-Gt]):(Xn=96,Yn=0),Wt=1<<Pe-ur,vt=1<<Rt,$t=vt;do vt-=Wt,ye[Tt+(Xt>>ur)+vt]=As<<24|Xn<<16|Yn|0;while(vt!==0);for(Wt=1<<Pe-1;Xt&Wt;)Wt>>=1;if(Wt!==0?(Xt&=Wt-1,Xt+=Wt):Xt=0,ze++,--Bt[Pe]===0){if(Pe===ht)break;Pe=ne[z+We[ze]]}if(Pe>st&&(Xt&mr)!==Ht){for(ur===0&&(ur=st),Tt+=$t,Rt=Pe-ur,qt=1<<Rt;Rt+ur<ht&&(qt-=Bt[Rt+ur],!(qt<=0));)Rt++,qt<<=1;if(zt+=1<<Rt,N===ba&&zt>_a||N===Ja&&zt>hi)return 1;Ht=Xt&mr,ye[Ht]=st<<24|Rt<<16|Tt-ge|0}}return Xt!==0&&(ye[Tt+Xt]=Pe-ur<<24|64<<16|0),$e.bits=st,0};const gl=0,es=1,ts=2,{Z_FINISH:gi,Z_BLOCK:Gi,Z_TREES:Ea,Z_OK:nn,Z_STREAM_END:yl,Z_NEED_DICT:ro,Z_STREAM_ERROR:Ir,Z_DATA_ERROR:wa,Z_MEM_ERROR:rs,Z_BUF_ERROR:no,Z_DEFLATED:ns}=Te,Sa=16180,io=16181,ao=16182,so=16183,oo=16184,Hr=16185,yi=16186,is=16187,as=16188,ss=16189,qi=16190,Zr=16191,os=16192,lo=16193,Rn=16194,Aa=16195,vi=16196,Ca=16197,ls=16198,Un=16199,gn=16200,Oa=16201,us=16202,Hi=16203,cs=16204,fs=16205,Ra=16206,ds=16207,hs=16208,sr=16209,yn=16210,Pa=16211,ps=852,vl=592,Vi=15,uo=N=>(N>>>24&255)+(N>>>8&65280)+((N&65280)<<8)+((N&255)<<24);function co(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Pn=N=>{if(!N)return 1;const ne=N.state;return!ne||ne.strm!==N||ne.mode<Sa||ne.mode>Pa?1:0},ir=N=>{if(Pn(N))return Ir;const ne=N.state;return N.total_in=N.total_out=ne.total=0,N.msg="",ne.wrap&&(N.adler=ne.wrap&1),ne.mode=Sa,ne.last=0,ne.havedict=0,ne.flags=-1,ne.dmax=32768,ne.head=null,ne.hold=0,ne.bits=0,ne.lencode=ne.lendyn=new Int32Array(ps),ne.distcode=ne.distdyn=new Int32Array(vl),ne.sane=1,ne.back=-1,nn},Ta=N=>{if(Pn(N))return Ir;const ne=N.state;return ne.wsize=0,ne.whave=0,ne.wnext=0,ir(N)},Ki=(N,ne)=>{let z;if(Pn(N))return Ir;const ce=N.state;return ne<0?(z=0,ne=-ne):(z=(ne>>4)+5,ne<48&&(ne&=15)),ne&&(ne<8||ne>15)?Ir:(ce.window!==null&&ce.wbits!==ne&&(ce.window=null),ce.wrap=z,ce.wbits=ne,Ta(N))},xi=(N,ne)=>{if(!N)return Ir;const z=new co;N.state=z,z.strm=N,z.window=null,z.mode=Sa;const ce=Ki(N,ne);return ce!==nn&&(N.state=null),ce},fo=N=>xi(N,Vi);let Ma=!0,Wn,_i;const bi=N=>{if(Ma){Wn=new Int32Array(512),_i=new Int32Array(32);let ne=0;for(;ne<144;)N.lens[ne++]=8;for(;ne<256;)N.lens[ne++]=9;for(;ne<280;)N.lens[ne++]=7;for(;ne<288;)N.lens[ne++]=8;for(Wi(es,N.lens,0,288,Wn,0,N.work,{bits:9}),ne=0;ne<32;)N.lens[ne++]=5;Wi(ts,N.lens,0,32,_i,0,N.work,{bits:5}),Ma=!1}N.lencode=Wn,N.lenbits=9,N.distcode=_i,N.distbits=5},ms=(N,ne,z,ce)=>{let ye;const ge=N.state;return ge.window===null&&(ge.wsize=1<<ge.wbits,ge.wnext=0,ge.whave=0,ge.window=new Uint8Array(ge.wsize)),ce>=ge.wsize?(ge.window.set(ne.subarray(z-ge.wsize,z),0),ge.wnext=0,ge.whave=ge.wsize):(ye=ge.wsize-ge.wnext,ye>ce&&(ye=ce),ge.window.set(ne.subarray(z-ce,z-ce+ye),ge.wnext),ce-=ye,ce?(ge.window.set(ne.subarray(z-ce,z),0),ge.wnext=ce,ge.whave=ge.wsize):(ge.wnext+=ye,ge.wnext===ge.wsize&&(ge.wnext=0),ge.whave<ge.wsize&&(ge.whave+=ye))),0},xl=(N,ne)=>{let z,ce,ye,ge,We,$e,_t,Pe,ze,$t,ht,st,Rt,ur,qt=0,zt,Xt,Wt,vt,Ht,mr,Tt,Yt;const Gt=new Uint8Array(4);let Bt,Vt;const Vr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Pn(N)||!N.output||!N.input&&N.avail_in!==0)return Ir;z=N.state,z.mode===Zr&&(z.mode=os),We=N.next_out,ye=N.output,_t=N.avail_out,ge=N.next_in,ce=N.input,$e=N.avail_in,Pe=z.hold,ze=z.bits,$t=$e,ht=_t,Yt=nn;e:for(;;)switch(z.mode){case Sa:if(z.wrap===0){z.mode=os;break}for(;ze<16;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if(z.wrap&2&&Pe===35615){z.wbits===0&&(z.wbits=15),z.check=0,Gt[0]=Pe&255,Gt[1]=Pe>>>8&255,z.check=K(z.check,Gt,2,0),Pe=0,ze=0,z.mode=io;break}if(z.head&&(z.head.done=!1),!(z.wrap&1)||(((Pe&255)<<8)+(Pe>>8))%31){N.msg="incorrect header check",z.mode=sr;break}if((Pe&15)!==ns){N.msg="unknown compression method",z.mode=sr;break}if(Pe>>>=4,ze-=4,Tt=(Pe&15)+8,z.wbits===0&&(z.wbits=Tt),Tt>15||Tt>z.wbits){N.msg="invalid window size",z.mode=sr;break}z.dmax=1<<z.wbits,z.flags=0,N.adler=z.check=1,z.mode=Pe&512?ss:Zr,Pe=0,ze=0;break;case io:for(;ze<16;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if(z.flags=Pe,(z.flags&255)!==ns){N.msg="unknown compression method",z.mode=sr;break}if(z.flags&57344){N.msg="unknown header flags set",z.mode=sr;break}z.head&&(z.head.text=Pe>>8&1),z.flags&512&&z.wrap&4&&(Gt[0]=Pe&255,Gt[1]=Pe>>>8&255,z.check=K(z.check,Gt,2,0)),Pe=0,ze=0,z.mode=ao;case ao:for(;ze<32;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}z.head&&(z.head.time=Pe),z.flags&512&&z.wrap&4&&(Gt[0]=Pe&255,Gt[1]=Pe>>>8&255,Gt[2]=Pe>>>16&255,Gt[3]=Pe>>>24&255,z.check=K(z.check,Gt,4,0)),Pe=0,ze=0,z.mode=so;case so:for(;ze<16;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}z.head&&(z.head.xflags=Pe&255,z.head.os=Pe>>8),z.flags&512&&z.wrap&4&&(Gt[0]=Pe&255,Gt[1]=Pe>>>8&255,z.check=K(z.check,Gt,2,0)),Pe=0,ze=0,z.mode=oo;case oo:if(z.flags&1024){for(;ze<16;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}z.length=Pe,z.head&&(z.head.extra_len=Pe),z.flags&512&&z.wrap&4&&(Gt[0]=Pe&255,Gt[1]=Pe>>>8&255,z.check=K(z.check,Gt,2,0)),Pe=0,ze=0}else z.head&&(z.head.extra=null);z.mode=Hr;case Hr:if(z.flags&1024&&(st=z.length,st>$e&&(st=$e),st&&(z.head&&(Tt=z.head.extra_len-z.length,z.head.extra||(z.head.extra=new Uint8Array(z.head.extra_len)),z.head.extra.set(ce.subarray(ge,ge+st),Tt)),z.flags&512&&z.wrap&4&&(z.check=K(z.check,ce,st,ge)),$e-=st,ge+=st,z.length-=st),z.length))break e;z.length=0,z.mode=yi;case yi:if(z.flags&2048){if($e===0)break e;st=0;do Tt=ce[ge+st++],z.head&&Tt&&z.length<65536&&(z.head.name+=String.fromCharCode(Tt));while(Tt&&st<$e);if(z.flags&512&&z.wrap&4&&(z.check=K(z.check,ce,st,ge)),$e-=st,ge+=st,Tt)break e}else z.head&&(z.head.name=null);z.length=0,z.mode=is;case is:if(z.flags&4096){if($e===0)break e;st=0;do Tt=ce[ge+st++],z.head&&Tt&&z.length<65536&&(z.head.comment+=String.fromCharCode(Tt));while(Tt&&st<$e);if(z.flags&512&&z.wrap&4&&(z.check=K(z.check,ce,st,ge)),$e-=st,ge+=st,Tt)break e}else z.head&&(z.head.comment=null);z.mode=as;case as:if(z.flags&512){for(;ze<16;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if(z.wrap&4&&Pe!==(z.check&65535)){N.msg="header crc mismatch",z.mode=sr;break}Pe=0,ze=0}z.head&&(z.head.hcrc=z.flags>>9&1,z.head.done=!0),N.adler=z.check=0,z.mode=Zr;break;case ss:for(;ze<32;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}N.adler=z.check=uo(Pe),Pe=0,ze=0,z.mode=qi;case qi:if(z.havedict===0)return N.next_out=We,N.avail_out=_t,N.next_in=ge,N.avail_in=$e,z.hold=Pe,z.bits=ze,ro;N.adler=z.check=1,z.mode=Zr;case Zr:if(ne===Gi||ne===Ea)break e;case os:if(z.last){Pe>>>=ze&7,ze-=ze&7,z.mode=Ra;break}for(;ze<3;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}switch(z.last=Pe&1,Pe>>>=1,ze-=1,Pe&3){case 0:z.mode=lo;break;case 1:if(bi(z),z.mode=Un,ne===Ea){Pe>>>=2,ze-=2;break e}break;case 2:z.mode=vi;break;case 3:N.msg="invalid block type",z.mode=sr}Pe>>>=2,ze-=2;break;case lo:for(Pe>>>=ze&7,ze-=ze&7;ze<32;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if((Pe&65535)!==(Pe>>>16^65535)){N.msg="invalid stored block lengths",z.mode=sr;break}if(z.length=Pe&65535,Pe=0,ze=0,z.mode=Rn,ne===Ea)break e;case Rn:z.mode=Aa;case Aa:if(st=z.length,st){if(st>$e&&(st=$e),st>_t&&(st=_t),st===0)break e;ye.set(ce.subarray(ge,ge+st),We),$e-=st,ge+=st,_t-=st,We+=st,z.length-=st;break}z.mode=Zr;break;case vi:for(;ze<14;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if(z.nlen=(Pe&31)+257,Pe>>>=5,ze-=5,z.ndist=(Pe&31)+1,Pe>>>=5,ze-=5,z.ncode=(Pe&15)+4,Pe>>>=4,ze-=4,z.nlen>286||z.ndist>30){N.msg="too many length or distance symbols",z.mode=sr;break}z.have=0,z.mode=Ca;case Ca:for(;z.have<z.ncode;){for(;ze<3;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}z.lens[Vr[z.have++]]=Pe&7,Pe>>>=3,ze-=3}for(;z.have<19;)z.lens[Vr[z.have++]]=0;if(z.lencode=z.lendyn,z.lenbits=7,Bt={bits:z.lenbits},Yt=Wi(gl,z.lens,0,19,z.lencode,0,z.work,Bt),z.lenbits=Bt.bits,Yt){N.msg="invalid code lengths set",z.mode=sr;break}z.have=0,z.mode=ls;case ls:for(;z.have<z.nlen+z.ndist;){for(;qt=z.lencode[Pe&(1<<z.lenbits)-1],zt=qt>>>24,Xt=qt>>>16&255,Wt=qt&65535,!(zt<=ze);){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if(Wt<16)Pe>>>=zt,ze-=zt,z.lens[z.have++]=Wt;else{if(Wt===16){for(Vt=zt+2;ze<Vt;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if(Pe>>>=zt,ze-=zt,z.have===0){N.msg="invalid bit length repeat",z.mode=sr;break}Tt=z.lens[z.have-1],st=3+(Pe&3),Pe>>>=2,ze-=2}else if(Wt===17){for(Vt=zt+3;ze<Vt;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}Pe>>>=zt,ze-=zt,Tt=0,st=3+(Pe&7),Pe>>>=3,ze-=3}else{for(Vt=zt+7;ze<Vt;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}Pe>>>=zt,ze-=zt,Tt=0,st=11+(Pe&127),Pe>>>=7,ze-=7}if(z.have+st>z.nlen+z.ndist){N.msg="invalid bit length repeat",z.mode=sr;break}for(;st--;)z.lens[z.have++]=Tt}}if(z.mode===sr)break;if(z.lens[256]===0){N.msg="invalid code -- missing end-of-block",z.mode=sr;break}if(z.lenbits=9,Bt={bits:z.lenbits},Yt=Wi(es,z.lens,0,z.nlen,z.lencode,0,z.work,Bt),z.lenbits=Bt.bits,Yt){N.msg="invalid literal/lengths set",z.mode=sr;break}if(z.distbits=6,z.distcode=z.distdyn,Bt={bits:z.distbits},Yt=Wi(ts,z.lens,z.nlen,z.ndist,z.distcode,0,z.work,Bt),z.distbits=Bt.bits,Yt){N.msg="invalid distances set",z.mode=sr;break}if(z.mode=Un,ne===Ea)break e;case Un:z.mode=gn;case gn:if($e>=6&&_t>=258){N.next_out=We,N.avail_out=_t,N.next_in=ge,N.avail_in=$e,z.hold=Pe,z.bits=ze,ml(N,ht),We=N.next_out,ye=N.output,_t=N.avail_out,ge=N.next_in,ce=N.input,$e=N.avail_in,Pe=z.hold,ze=z.bits,z.mode===Zr&&(z.back=-1);break}for(z.back=0;qt=z.lencode[Pe&(1<<z.lenbits)-1],zt=qt>>>24,Xt=qt>>>16&255,Wt=qt&65535,!(zt<=ze);){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if(Xt&&(Xt&240)===0){for(vt=zt,Ht=Xt,mr=Wt;qt=z.lencode[mr+((Pe&(1<<vt+Ht)-1)>>vt)],zt=qt>>>24,Xt=qt>>>16&255,Wt=qt&65535,!(vt+zt<=ze);){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}Pe>>>=vt,ze-=vt,z.back+=vt}if(Pe>>>=zt,ze-=zt,z.back+=zt,z.length=Wt,Xt===0){z.mode=fs;break}if(Xt&32){z.back=-1,z.mode=Zr;break}if(Xt&64){N.msg="invalid literal/length code",z.mode=sr;break}z.extra=Xt&15,z.mode=Oa;case Oa:if(z.extra){for(Vt=z.extra;ze<Vt;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}z.length+=Pe&(1<<z.extra)-1,Pe>>>=z.extra,ze-=z.extra,z.back+=z.extra}z.was=z.length,z.mode=us;case us:for(;qt=z.distcode[Pe&(1<<z.distbits)-1],zt=qt>>>24,Xt=qt>>>16&255,Wt=qt&65535,!(zt<=ze);){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if((Xt&240)===0){for(vt=zt,Ht=Xt,mr=Wt;qt=z.distcode[mr+((Pe&(1<<vt+Ht)-1)>>vt)],zt=qt>>>24,Xt=qt>>>16&255,Wt=qt&65535,!(vt+zt<=ze);){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}Pe>>>=vt,ze-=vt,z.back+=vt}if(Pe>>>=zt,ze-=zt,z.back+=zt,Xt&64){N.msg="invalid distance code",z.mode=sr;break}z.offset=Wt,z.extra=Xt&15,z.mode=Hi;case Hi:if(z.extra){for(Vt=z.extra;ze<Vt;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}z.offset+=Pe&(1<<z.extra)-1,Pe>>>=z.extra,ze-=z.extra,z.back+=z.extra}if(z.offset>z.dmax){N.msg="invalid distance too far back",z.mode=sr;break}z.mode=cs;case cs:if(_t===0)break e;if(st=ht-_t,z.offset>st){if(st=z.offset-st,st>z.whave&&z.sane){N.msg="invalid distance too far back",z.mode=sr;break}st>z.wnext?(st-=z.wnext,Rt=z.wsize-st):Rt=z.wnext-st,st>z.length&&(st=z.length),ur=z.window}else ur=ye,Rt=We-z.offset,st=z.length;st>_t&&(st=_t),_t-=st,z.length-=st;do ye[We++]=ur[Rt++];while(--st);z.length===0&&(z.mode=gn);break;case fs:if(_t===0)break e;ye[We++]=z.length,_t--,z.mode=gn;break;case Ra:if(z.wrap){for(;ze<32;){if($e===0)break e;$e--,Pe|=ce[ge++]<<ze,ze+=8}if(ht-=_t,N.total_out+=ht,z.total+=ht,z.wrap&4&&ht&&(N.adler=z.check=z.flags?K(z.check,ye,ht,We-ht):Ge(z.check,ye,ht,We-ht)),ht=_t,z.wrap&4&&(z.flags?Pe:uo(Pe))!==z.check){N.msg="incorrect data check",z.mode=sr;break}Pe=0,ze=0}z.mode=ds;case ds:if(z.wrap&&z.flags){for(;ze<32;){if($e===0)break e;$e--,Pe+=ce[ge++]<<ze,ze+=8}if(z.wrap&4&&Pe!==(z.total&4294967295)){N.msg="incorrect length check",z.mode=sr;break}Pe=0,ze=0}z.mode=hs;case hs:Yt=yl;break e;case sr:Yt=wa;break e;case yn:return rs;case Pa:default:return Ir}return N.next_out=We,N.avail_out=_t,N.next_in=ge,N.avail_in=$e,z.hold=Pe,z.bits=ze,(z.wsize||ht!==N.avail_out&&z.mode<sr&&(z.mode<Ra||ne!==gi))&&ms(N,N.output,N.next_out,ht-N.avail_out),$t-=N.avail_in,ht-=N.avail_out,N.total_in+=$t,N.total_out+=ht,z.total+=ht,z.wrap&4&&ht&&(N.adler=z.check=z.flags?K(z.check,ye,ht,N.next_out-ht):Ge(z.check,ye,ht,N.next_out-ht)),N.data_type=z.bits+(z.last?64:0)+(z.mode===Zr?128:0)+(z.mode===Un||z.mode===Rn?256:0),($t===0&&ht===0||ne===gi)&&Yt===nn&&(Yt=no),Yt},_l=N=>{if(Pn(N))return Ir;let ne=N.state;return ne.window&&(ne.window=null),N.state=null,nn},ho=(N,ne)=>{if(Pn(N))return Ir;const z=N.state;return(z.wrap&2)===0?Ir:(z.head=ne,ne.done=!1,nn)},ja=(N,ne)=>{const z=ne.length;let ce,ye,ge;return Pn(N)||(ce=N.state,ce.wrap!==0&&ce.mode!==qi)?Ir:ce.mode===qi&&(ye=1,ye=Ge(ye,ne,z,0),ye!==ce.check)?wa:(ge=ms(N,ne,z,z),ge?(ce.mode=yn,rs):(ce.havedict=1,nn))};var Da=Ta,gs=Ki,ys=ir,vs=fo,xs=xi,bl=xl,po=_l,El=ho,wl=ja,_s="pako inflate (from Nodeca project)",Sr={inflateReset:Da,inflateReset2:gs,inflateResetKeep:ys,inflateInit:vs,inflateInit2:xs,inflate:bl,inflateEnd:po,inflateGetHeader:El,inflateSetDictionary:wl,inflateInfo:_s};function mo(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ei=mo;const Qr=Object.prototype.toString,{Z_NO_FLUSH:Xi,Z_FINISH:vn,Z_OK:Gn,Z_STREAM_END:bs,Z_NEED_DICT:Es,Z_STREAM_ERROR:qn,Z_DATA_ERROR:wi,Z_MEM_ERROR:Si}=Te;function Tn(N){this.options=On.assign({chunkSize:65536,windowBits:15,to:""},N||{});const ne=this.options;ne.raw&&ne.windowBits>=0&&ne.windowBits<16&&(ne.windowBits=-ne.windowBits,ne.windowBits===0&&(ne.windowBits=-15)),ne.windowBits>=0&&ne.windowBits<16&&!(N&&N.windowBits)&&(ne.windowBits+=32),ne.windowBits>15&&ne.windowBits<48&&(ne.windowBits&15)===0&&(ne.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xs,this.strm.avail_out=0;let z=Sr.inflateInit2(this.strm,ne.windowBits);if(z!==Gn)throw new Error(Me[z]);if(this.header=new Ei,Sr.inflateGetHeader(this.strm,this.header),ne.dictionary&&(typeof ne.dictionary=="string"?ne.dictionary=Fi.string2buf(ne.dictionary):Qr.call(ne.dictionary)==="[object ArrayBuffer]"&&(ne.dictionary=new Uint8Array(ne.dictionary)),ne.raw&&(z=Sr.inflateSetDictionary(this.strm,ne.dictionary),z!==Gn)))throw new Error(Me[z])}Tn.prototype.push=function(N,ne){const z=this.strm,ce=this.options.chunkSize,ye=this.options.dictionary;let ge,We,$e;if(this.ended)return!1;for(ne===~~ne?We=ne:We=ne===!0?vn:Xi,Qr.call(N)==="[object ArrayBuffer]"?z.input=new Uint8Array(N):z.input=N,z.next_in=0,z.avail_in=z.input.length;;){for(z.avail_out===0&&(z.output=new Uint8Array(ce),z.next_out=0,z.avail_out=ce),ge=Sr.inflate(z,We),ge===Es&&ye&&(ge=Sr.inflateSetDictionary(z,ye),ge===Gn?ge=Sr.inflate(z,We):ge===wi&&(ge=Es));z.avail_in>0&&ge===bs&&z.state.wrap>0&&N[z.next_in]!==0;)Sr.inflateReset(z),ge=Sr.inflate(z,We);switch(ge){case qn:case wi:case Es:case Si:return this.onEnd(ge),this.ended=!0,!1}if($e=z.avail_out,z.next_out&&(z.avail_out===0||ge===bs))if(this.options.to==="string"){let _t=Fi.utf8border(z.output,z.next_out),Pe=z.next_out-_t,ze=Fi.buf2string(z.output,_t);z.next_out=Pe,z.avail_out=ce-Pe,Pe&&z.output.set(z.output.subarray(_t,_t+Pe),0),this.onData(ze)}else this.onData(z.output.length===z.next_out?z.output:z.output.subarray(0,z.next_out));if(!(ge===Gn&&$e===0)){if(ge===bs)return ge=Sr.inflateEnd(this.strm),this.onEnd(ge),this.ended=!0,!0;if(z.avail_in===0)break}}return!0},Tn.prototype.onData=function(N){this.chunks.push(N)},Tn.prototype.onEnd=function(N){N===Gn&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=On.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg};function Yi(N,ne){const z=new Tn(ne);if(z.push(N),z.err)throw z.msg||Me[z.err];return z.result}function Ai(N,ne){return ne=ne||{},ne.raw=!0,Yi(N,ne)}var Mn=Tn,or=Yi,ar=Ai,jn=Yi,Ar={Inflate:Mn,inflate:or,inflateRaw:ar,ungzip:jn};const{Deflate:Lr,deflate:Hn,deflateRaw:Ci,gzip:Nr}=hl,{Inflate:Ia,inflate:go,inflateRaw:yo,ungzip:La}=Ar;var ws=Lr,an=Hn,Zi=Ci,Na=Nr,Ss=Ia,vo=go,xn=yo,Vn=La,Kn=Te,$a={Deflate:ws,deflate:an,deflateRaw:Zi,gzip:Na,Inflate:Ss,inflate:vo,inflateRaw:xn,ungzip:Vn,constants:Kn}},"./node_modules/upng-js/UPNG.js"(e,t,n){(function(){var i={},o;e.exports=i,o=n("./node_modules/upng-js/node_modules/pako/index.js"),(function(l,h){l.toRGBA8=function(d){var m=d.width,b=d.height;if(d.tabs.acTL==null)return[l.toRGBA8.decodeImage(d.data,m,b,d).buffer];var v=[];d.frames[0].data==null&&(d.frames[0].data=d.data);for(var w,C=new Uint8Array(m*b*4),R=0;R<d.frames.length;R++){var T=d.frames[R],E=T.rect.x,f=T.rect.y,g=T.rect.width,S=T.rect.height,O=l.toRGBA8.decodeImage(T.data,g,S,d);if(R==0?w=O:T.blend==0?l._copyTile(O,g,S,w,m,b,E,f,0):T.blend==1&&l._copyTile(O,g,S,w,m,b,E,f,1),v.push(w.buffer),w=w.slice(0),T.dispose!=0){if(T.dispose==1)l._copyTile(C,g,S,w,m,b,E,f,0);else if(T.dispose==2){for(var D=R-1;d.frames[D].dispose==2;)D--;w=new Uint8Array(v[D]).slice(0)}}}return v},l.toRGBA8.decodeImage=function(d,m,b,v){var w=m*b,C=l.decode._getBPP(v),R=Math.ceil(m*C/8),T=new Uint8Array(w*4),E=new Uint32Array(T.buffer),f=v.ctype,g=v.depth,S=l._bin.readUshort;if(f==6){var O=w<<2;if(g==8)for(var D=0;D<O;D++)T[D]=d[D];if(g==16)for(var D=0;D<O;D++)T[D]=d[D<<1]}else if(f==2){var M=v.tabs.tRNS,_=-1,A=-1,j=-1;if(M&&(_=M[0],A=M[1],j=M[2]),g==8)for(var D=0;D<w;D++){var L=D<<2,$=D*3;T[L]=d[$],T[L+1]=d[$+1],T[L+2]=d[$+2],T[L+3]=255,_!=-1&&d[$]==_&&d[$+1]==A&&d[$+2]==j&&(T[L+3]=0)}if(g==16)for(var D=0;D<w;D++){var L=D<<2,$=D*6;T[L]=d[$],T[L+1]=d[$+2],T[L+2]=d[$+4],T[L+3]=255,_!=-1&&S(d,$)==_&&S(d,$+2)==A&&S(d,$+4)==j&&(T[L+3]=0)}}else if(f==3){var F=v.tabs.PLTE,W=v.tabs.tRNS,U=W?W.length:0;if(g==1)for(var q=0;q<b;q++)for(var H=q*R,Y=q*m,D=0;D<m;D++){var L=Y+D<<2,Z=d[H+(D>>3)]>>7-((D&7)<<0)&1,X=3*Z;T[L]=F[X],T[L+1]=F[X+1],T[L+2]=F[X+2],T[L+3]=Z<U?W[Z]:255}if(g==2)for(var q=0;q<b;q++)for(var H=q*R,Y=q*m,D=0;D<m;D++){var L=Y+D<<2,Z=d[H+(D>>2)]>>6-((D&3)<<1)&3,X=3*Z;T[L]=F[X],T[L+1]=F[X+1],T[L+2]=F[X+2],T[L+3]=Z<U?W[Z]:255}if(g==4)for(var q=0;q<b;q++)for(var H=q*R,Y=q*m,D=0;D<m;D++){var L=Y+D<<2,Z=d[H+(D>>1)]>>4-((D&1)<<2)&15,X=3*Z;T[L]=F[X],T[L+1]=F[X+1],T[L+2]=F[X+2],T[L+3]=Z<U?W[Z]:255}if(g==8)for(var D=0;D<w;D++){var L=D<<2,Z=d[D],X=3*Z;T[L]=F[X],T[L+1]=F[X+1],T[L+2]=F[X+2],T[L+3]=Z<U?W[Z]:255}}else if(f==4){if(g==8)for(var D=0;D<w;D++){var L=D<<2,J=D<<1,Q=d[J];T[L]=Q,T[L+1]=Q,T[L+2]=Q,T[L+3]=d[J+1]}if(g==16)for(var D=0;D<w;D++){var L=D<<2,J=D<<2,Q=d[J];T[L]=Q,T[L+1]=Q,T[L+2]=Q,T[L+3]=d[J+2]}}else if(f==0){var _=v.tabs.tRNS?v.tabs.tRNS:-1;if(g==1)for(var D=0;D<w;D++){var Q=255*(d[D>>3]>>7-(D&7)&1),G=Q==_*255?0:255;E[D]=G<<24|Q<<16|Q<<8|Q}if(g==2)for(var D=0;D<w;D++){var Q=85*(d[D>>2]>>6-((D&3)<<1)&3),G=Q==_*85?0:255;E[D]=G<<24|Q<<16|Q<<8|Q}if(g==4)for(var D=0;D<w;D++){var Q=17*(d[D>>1]>>4-((D&1)<<2)&15),G=Q==_*17?0:255;E[D]=G<<24|Q<<16|Q<<8|Q}if(g==8)for(var D=0;D<w;D++){var Q=d[D],G=Q==_?0:255;E[D]=G<<24|Q<<16|Q<<8|Q}if(g==16)for(var D=0;D<w;D++){var Q=d[D<<1],G=S(d,D<<1)==_?0:255;E[D]=G<<24|Q<<16|Q<<8|Q}}return T},l.decode=function(d){for(var m=new Uint8Array(d),b=8,v=l._bin,w=v.readUshort,C=v.readUint,R={tabs:{},frames:[]},T=new Uint8Array(m.length),E=0,f,g=0,S=[137,80,78,71,13,10,26,10],O=0;O<8;O++)if(m[O]!=S[O])throw"The input is not a PNG file!";for(;b<m.length;){var D=v.readUint(m,b);b+=4;var M=v.readASCII(m,b,4);if(b+=4,M=="IHDR")l.decode._IHDR(m,b,R);else if(M=="IDAT"){for(var O=0;O<D;O++)T[E+O]=m[b+O];E+=D}else if(M=="acTL")R.tabs[M]={num_frames:C(m,b),num_plays:C(m,b+4)},f=new Uint8Array(m.length);else if(M=="fcTL"){if(g!=0){var _=R.frames[R.frames.length-1];_.data=l.decode._decompress(R,f.slice(0,g),_.rect.width,_.rect.height),g=0}var A={x:C(m,b+12),y:C(m,b+16),width:C(m,b+4),height:C(m,b+8)},j=w(m,b+22);j=w(m,b+20)/(j==0?100:j);var L={rect:A,delay:Math.round(j*1e3),dispose:m[b+24],blend:m[b+25]};R.frames.push(L)}else if(M=="fdAT"){for(var O=0;O<D-4;O++)f[g+O]=m[b+O+4];g+=D-4}else if(M=="pHYs")R.tabs[M]=[v.readUint(m,b),v.readUint(m,b+4),m[b+8]];else if(M=="cHRM"){R.tabs[M]=[];for(var O=0;O<8;O++)R.tabs[M].push(v.readUint(m,b+O*4))}else if(M=="tEXt"){R.tabs[M]==null&&(R.tabs[M]={});var $=v.nextZero(m,b),F=v.readASCII(m,b,$-b),W=v.readASCII(m,$+1,b+D-$-1);R.tabs[M][F]=W}else if(M=="iTXt"){R.tabs[M]==null&&(R.tabs[M]={});var $=0,U=b;$=v.nextZero(m,U);var F=v.readASCII(m,U,$-U);U=$+1,m[U],m[U+1],U+=2,$=v.nextZero(m,U),v.readASCII(m,U,$-U),U=$+1,$=v.nextZero(m,U),v.readUTF8(m,U,$-U),U=$+1;var W=v.readUTF8(m,U,D-(U-b));R.tabs[M][F]=W}else if(M=="PLTE")R.tabs[M]=v.readBytes(m,b,D);else if(M=="hIST"){var q=R.tabs.PLTE.length/3;R.tabs[M]=[];for(var O=0;O<q;O++)R.tabs[M].push(w(m,b+O*2))}else if(M=="tRNS")R.ctype==3?R.tabs[M]=v.readBytes(m,b,D):R.ctype==0?R.tabs[M]=w(m,b):R.ctype==2&&(R.tabs[M]=[w(m,b),w(m,b+2),w(m,b+4)]);else if(M=="gAMA")R.tabs[M]=v.readUint(m,b)/1e5;else if(M=="sRGB")R.tabs[M]=m[b];else if(M=="bKGD")R.ctype==0||R.ctype==4?R.tabs[M]=[w(m,b)]:R.ctype==2||R.ctype==6?R.tabs[M]=[w(m,b),w(m,b+2),w(m,b+4)]:R.ctype==3&&(R.tabs[M]=m[b]);else if(M=="IEND"){if(g!=0){var _=R.frames[R.frames.length-1];_.data=l.decode._decompress(R,f.slice(0,g),_.rect.width,_.rect.height),g=0}R.data=l.decode._decompress(R,T,R.width,R.height);break}b+=D,v.readUint(m,b),b+=4}return delete R.compress,delete R.interlace,delete R.filter,R},l.decode._decompress=function(d,m,b,v){return d.compress==0&&(m=l.decode._inflate(m)),d.interlace==0?m=l.decode._filterZero(m,d,0,b,v):d.interlace==1&&(m=l.decode._readInterlace(m,d)),m},l.decode._inflate=function(d){return h.inflate(d)},l.decode._readInterlace=function(d,m){for(var b=m.width,v=m.height,w=l.decode._getBPP(m),C=w>>3,R=Math.ceil(b*w/8),T=new Uint8Array(v*R),E=0,f=[0,0,4,0,2,0,1],g=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],O=[8,8,4,4,2,2,1],D=0;D<7;){for(var M=S[D],_=O[D],A=0,j=0,L=f[D];L<v;)L+=M,j++;for(var $=g[D];$<b;)$+=_,A++;var F=Math.ceil(A*w/8);l.decode._filterZero(d,m,E,A,j);for(var W=0,U=f[D];U<v;){for(var q=g[D],H=E+W*F<<3;q<b;){if(w==1){var Y=d[H>>3];Y=Y>>7-(H&7)&1,T[U*R+(q>>3)]|=Y<<7-((q&3)<<0)}if(w==2){var Y=d[H>>3];Y=Y>>6-(H&7)&3,T[U*R+(q>>2)]|=Y<<6-((q&3)<<1)}if(w==4){var Y=d[H>>3];Y=Y>>4-(H&7)&15,T[U*R+(q>>1)]|=Y<<4-((q&1)<<2)}if(w>=8)for(var Z=U*R+q*C,X=0;X<C;X++)T[Z+X]=d[(H>>3)+X];H+=w,q+=_}W++,U+=M}A*j!=0&&(E+=j*(1+F)),D=D+1}return T},l.decode._getBPP=function(d){var m=[1,null,3,1,2,null,4][d.ctype];return m*d.depth},l.decode._filterZero=function(d,m,b,v,w){var C=l.decode._getBPP(m),R=Math.ceil(v*C/8),T=l.decode._paeth;C=Math.ceil(C/8);for(var E=0;E<w;E++){var f=b+E*R,g=f+E+1,S=d[g-1];if(S==0)for(var O=0;O<R;O++)d[f+O]=d[g+O];else if(S==1){for(var O=0;O<C;O++)d[f+O]=d[g+O];for(var O=C;O<R;O++)d[f+O]=d[g+O]+d[f+O-C]&255}else if(E==0){for(var O=0;O<C;O++)d[f+O]=d[g+O];if(S==2)for(var O=C;O<R;O++)d[f+O]=d[g+O]&255;if(S==3)for(var O=C;O<R;O++)d[f+O]=d[g+O]+(d[f+O-C]>>1)&255;if(S==4)for(var O=C;O<R;O++)d[f+O]=d[g+O]+T(d[f+O-C],0,0)&255}else{if(S==2)for(var O=0;O<R;O++)d[f+O]=d[g+O]+d[f+O-R]&255;if(S==3){for(var O=0;O<C;O++)d[f+O]=d[g+O]+(d[f+O-R]>>1)&255;for(var O=C;O<R;O++)d[f+O]=d[g+O]+(d[f+O-R]+d[f+O-C]>>1)&255}if(S==4){for(var O=0;O<C;O++)d[f+O]=d[g+O]+T(0,d[f+O-R],0)&255;for(var O=C;O<R;O++)d[f+O]=d[g+O]+T(d[f+O-C],d[f+O-R],d[f+O-C-R])&255}}}return d},l.decode._paeth=function(d,m,b){var v=d+m-b,w=Math.abs(v-d),C=Math.abs(v-m),R=Math.abs(v-b);return w<=C&&w<=R?d:C<=R?m:b},l.decode._IHDR=function(d,m,b){var v=l._bin;b.width=v.readUint(d,m),m+=4,b.height=v.readUint(d,m),m+=4,b.depth=d[m],m++,b.ctype=d[m],m++,b.compress=d[m],m++,b.filter=d[m],m++,b.interlace=d[m],m++},l._bin={nextZero:function(d,m){for(;d[m]!=0;)m++;return m},readUshort:function(d,m){return d[m]<<8|d[m+1]},writeUshort:function(d,m,b){d[m]=b>>8&255,d[m+1]=b&255},readUint:function(d,m){return d[m]*16777216+(d[m+1]<<16|d[m+2]<<8|d[m+3])},writeUint:function(d,m,b){d[m]=b>>24&255,d[m+1]=b>>16&255,d[m+2]=b>>8&255,d[m+3]=b&255},readASCII:function(d,m,b){for(var v="",w=0;w<b;w++)v+=String.fromCharCode(d[m+w]);return v},writeASCII:function(d,m,b){for(var v=0;v<b.length;v++)d[m+v]=b.charCodeAt(v)},readBytes:function(d,m,b){for(var v=[],w=0;w<b;w++)v.push(d[m+w]);return v},pad:function(d){return d.length<2?"0"+d:d},readUTF8:function(d,m,b){for(var v="",w,C=0;C<b;C++)v+="%"+l._bin.pad(d[m+C].toString(16));try{w=decodeURIComponent(v)}catch{return l._bin.readASCII(d,m,b)}return w}},l._copyTile=function(d,m,b,v,w,C,R,T,E){for(var f=Math.min(m,w),g=Math.min(b,C),S=0,O=0,D=0;D<g;D++)for(var M=0;M<f;M++)if(R>=0&&T>=0?(S=D*m+M<<2,O=(T+D)*w+R+M<<2):(S=(-T+D)*m-R+M<<2,O=D*w+M<<2),E==0)v[O]=d[S],v[O+1]=d[S+1],v[O+2]=d[S+2],v[O+3]=d[S+3];else if(E==1){var _=d[S+3]*.00392156862745098,A=d[S]*_,j=d[S+1]*_,L=d[S+2]*_,$=v[O+3]*(1/255),F=v[O]*$,W=v[O+1]*$,U=v[O+2]*$,q=1-_,H=_+$*q,Y=H==0?0:1/H;v[O+3]=255*H,v[O+0]=(A+F*q)*Y,v[O+1]=(j+W*q)*Y,v[O+2]=(L+U*q)*Y}else if(E==2){var _=d[S+3],A=d[S],j=d[S+1],L=d[S+2],$=v[O+3],F=v[O],W=v[O+1],U=v[O+2];_==$&&A==F&&j==W&&L==U?(v[O]=0,v[O+1]=0,v[O+2]=0,v[O+3]=0):(v[O]=A,v[O+1]=j,v[O+2]=L,v[O+3]=_)}else if(E==3){var _=d[S+3],A=d[S],j=d[S+1],L=d[S+2],$=v[O+3],F=v[O],W=v[O+1],U=v[O+2];if(_==$&&A==F&&j==W&&L==U)continue;if(_<220&&$>20)return!1}return!0},l.encode=function(d,m,b,v,w,C){v==null&&(v=0),C==null&&(C=!1);for(var R=new Uint8Array(d[0].byteLength*d.length+100),T=[137,80,78,71,13,10,26,10],E=0;E<8;E++)R[E]=T[E];var f=8,g=l._bin,S=l.crc.crc,O=g.writeUint,D=g.writeUshort,M=g.writeASCII,_=l.encode.compressPNG(d,m,b,v,C);O(R,f,13),f+=4,M(R,f,"IHDR"),f+=4,O(R,f,m),f+=4,O(R,f,b),f+=4,R[f]=_.depth,f++,R[f]=_.ctype,f++,R[f]=0,f++,R[f]=0,f++,R[f]=0,f++,O(R,f,S(R,f-17,17)),f+=4,O(R,f,1),f+=4,M(R,f,"sRGB"),f+=4,R[f]=1,f++,O(R,f,S(R,f-5,5)),f+=4;var A=d.length>1;if(A&&(O(R,f,8),f+=4,M(R,f,"acTL"),f+=4,O(R,f,d.length),f+=4,O(R,f,0),f+=4,O(R,f,S(R,f-12,12)),f+=4),_.ctype==3){var j=_.plte.length;O(R,f,j*3),f+=4,M(R,f,"PLTE"),f+=4;for(var E=0;E<j;E++){var L=E*3,$=_.plte[E],F=$&255,W=$>>8&255,U=$>>16&255;R[f+L+0]=F,R[f+L+1]=W,R[f+L+2]=U}if(f+=j*3,O(R,f,S(R,f-j*3-4,j*3+4)),f+=4,_.gotAlpha){O(R,f,j),f+=4,M(R,f,"tRNS"),f+=4;for(var E=0;E<j;E++)R[f+E]=_.plte[E]>>24&255;f+=j,O(R,f,S(R,f-j-4,j+4)),f+=4}}for(var q=0,H=0;H<_.frames.length;H++){var Y=_.frames[H];A&&(O(R,f,26),f+=4,M(R,f,"fcTL"),f+=4,O(R,f,q++),f+=4,O(R,f,Y.rect.width),f+=4,O(R,f,Y.rect.height),f+=4,O(R,f,Y.rect.x),f+=4,O(R,f,Y.rect.y),f+=4,D(R,f,w[H]),f+=2,D(R,f,1e3),f+=2,R[f]=Y.dispose,f++,R[f]=Y.blend,f++,O(R,f,S(R,f-30,30)),f+=4);var Z=Y.cimg,j=Z.length;O(R,f,j+(H==0?0:4)),f+=4;var X=f;M(R,f,H==0?"IDAT":"fdAT"),f+=4,H!=0&&(O(R,f,q++),f+=4);for(var E=0;E<j;E++)R[f+E]=Z[E];f+=j,O(R,f,S(R,X,f-X)),f+=4}return O(R,f,0),f+=4,M(R,f,"IEND"),f+=4,O(R,f,S(R,f-4,4)),f+=4,R.buffer.slice(0,f)},l.encode.compressPNG=function(d,m,b,v,w){for(var C=l.encode.compress(d,m,b,v,!1,w),R=0;R<d.length;R++){var T=C.frames[R];T.rect.width;var E=T.rect.height,f=T.bpl,g=T.bpp,S=new Uint8Array(E*f+E);T.cimg=l.encode._filterZero(T.img,E,g,f,S)}return C},l.encode.compress=function(d,m,b,v,w,C){C==null&&(C=!1);for(var R=6,T=8,E=4,f=255,g=0;g<d.length;g++)for(var S=new Uint8Array(d[g]),O=S.length,D=0;D<O;D+=4)f&=S[D+3];var M=f!=255,_={},A=[];if(d.length!=0&&(_[0]=0,A.push(0),v!=0&&v--),v!=0){var j=l.quantize(d,v,w);d=j.bufs;for(var D=0;D<j.plte.length;D++){var L=j.plte[D].est.rgba;_[L]==null&&(_[L]=A.length,A.push(L))}}else for(var g=0;g<d.length;g++)for(var $=new Uint32Array(d[g]),O=$.length,D=0;D<O;D++){var L=$[D];if((D<m||L!=$[D-1]&&L!=$[D-m])&&_[L]==null&&(_[L]=A.length,A.push(L),A.length>=300))break}var F=M?w:!1,W=A.length;W<=256&&C==!1&&(W<=2?T=1:W<=4?T=2:W<=16?T=4:T=8,w&&(T=8),M=!0);for(var U=[],g=0;g<d.length;g++){var q=new Uint8Array(d[g]),H=new Uint32Array(q.buffer),Y=0,Z=0,X=m,J=b,Q=0;if(g!=0&&!F){for(var G=w||g==1||U[U.length-2].dispose==2?1:2,te=0,ue=1e9,de=0;de<G;de++){for(var Le=new Uint8Array(d[g-1-de]),xe=new Uint32Array(d[g-1-de]),ve=m,Se=b,Ee=-1,he=-1,Re=0;Re<b;Re++)for(var je=0;je<m;je++){var D=Re*m+je;H[D]!=xe[D]&&(je<ve&&(ve=je),je>Ee&&(Ee=je),Re<Se&&(Se=Re),Re>he&&(he=Re))}var Ce=Ee==-1?1:(Ee-ve+1)*(he-Se+1);Ce<ue&&(ue=Ce,te=de,Ee==-1?(Y=Z=0,X=J=1):(Y=ve,Z=Se,X=Ee-ve+1,J=he-Se+1))}var Le=new Uint8Array(d[g-1-te]);te==1&&(U[U.length-1].dispose=2);var me=new Uint8Array(X*J*4);new Uint32Array(me.buffer),l._copyTile(Le,m,b,me,X,J,-Y,-Z,0),l._copyTile(q,m,b,me,X,J,-Y,-Z,3)?(l._copyTile(q,m,b,me,X,J,-Y,-Z,2),Q=1):(l._copyTile(q,m,b,me,X,J,-Y,-Z,0),Q=0),q=me,H=new Uint32Array(q.buffer)}var Ie=4*X;if(W<=256&&C==!1){Ie=Math.ceil(T*X/8);for(var me=new Uint8Array(Ie*J),Re=0;Re<J;Re++){var D=Re*Ie,Ve=Re*X;if(T==8)for(var je=0;je<X;je++)me[D+je]=_[H[Ve+je]];else if(T==4)for(var je=0;je<X;je++)me[D+(je>>1)]|=_[H[Ve+je]]<<4-(je&1)*4;else if(T==2)for(var je=0;je<X;je++)me[D+(je>>2)]|=_[H[Ve+je]]<<6-(je&3)*2;else if(T==1)for(var je=0;je<X;je++)me[D+(je>>3)]|=_[H[Ve+je]]<<7-(je&7)*1}q=me,R=3,E=1}else if(M==!1&&d.length==1){for(var me=new Uint8Array(X*J*3),nt=X*J,D=0;D<nt;D++){var it=D*3,ot=D*4;me[it]=q[ot],me[it+1]=q[ot+1],me[it+2]=q[ot+2]}q=me,R=2,E=3,Ie=3*X}U.push({rect:{x:Y,y:Z,width:X,height:J},img:q,bpl:Ie,bpp:E,blend:Q,dispose:F?1:0})}return{ctype:R,depth:T,plte:A,gotAlpha:M,frames:U}},l.encode._filterZero=function(d,m,b,v,w){for(var C=[],R=0;R<5;R++)if(!(m*v>5e5&&(R==2||R==3||R==4))){for(var T=0;T<m;T++)l.encode._filterLine(w,d,T,v,b,R);if(C.push(h.deflate(w)),b==1)break}for(var E,f=1e9,g=0;g<C.length;g++)C[g].length<f&&(E=g,f=C[g].length);return C[E]},l.encode._filterLine=function(d,m,b,v,w,C){var R=b*v,T=R+b,E=l.decode._paeth;if(d[T]=C,T++,C==0)for(var f=0;f<v;f++)d[T+f]=m[R+f];else if(C==1){for(var f=0;f<w;f++)d[T+f]=m[R+f];for(var f=w;f<v;f++)d[T+f]=m[R+f]-m[R+f-w]+256&255}else if(b==0){for(var f=0;f<w;f++)d[T+f]=m[R+f];if(C==2)for(var f=w;f<v;f++)d[T+f]=m[R+f];if(C==3)for(var f=w;f<v;f++)d[T+f]=m[R+f]-(m[R+f-w]>>1)+256&255;if(C==4)for(var f=w;f<v;f++)d[T+f]=m[R+f]-E(m[R+f-w],0,0)+256&255}else{if(C==2)for(var f=0;f<v;f++)d[T+f]=m[R+f]+256-m[R+f-v]&255;if(C==3){for(var f=0;f<w;f++)d[T+f]=m[R+f]+256-(m[R+f-v]>>1)&255;for(var f=w;f<v;f++)d[T+f]=m[R+f]+256-(m[R+f-v]+m[R+f-w]>>1)&255}if(C==4){for(var f=0;f<w;f++)d[T+f]=m[R+f]+256-E(0,m[R+f-v],0)&255;for(var f=w;f<v;f++)d[T+f]=m[R+f]+256-E(m[R+f-w],m[R+f-v],m[R+f-w-v])&255}}},l.crc={table:(function(){for(var d=new Uint32Array(256),m=0;m<256;m++){for(var b=m,v=0;v<8;v++)b&1?b=3988292384^b>>>1:b=b>>>1;d[m]=b}return d})(),update:function(d,m,b,v){for(var w=0;w<v;w++)d=l.crc.table[(d^m[b+w])&255]^d>>>8;return d},crc:function(d,m,b){return l.crc.update(4294967295,d,m,b)^4294967295}},l.quantize=function(d,m,b){for(var v=[],w=0,C=0;C<d.length;C++)v.push(l.encode.alphaMul(new Uint8Array(d[C]),b)),w+=d[C].byteLength;for(var R=new Uint8Array(w),T=new Uint32Array(R.buffer),E=0,C=0;C<v.length;C++){for(var f=v[C],g=f.length,S=0;S<g;S++)R[E+S]=f[S];E+=g}var O={i0:0,i1:R.length,bst:null,est:null,tdst:0,left:null,right:null};O.bst=l.quantize.stats(R,O.i0,O.i1),O.est=l.quantize.estats(O.bst);for(var D=[O];D.length<m;){for(var M=0,_=0,C=0;C<D.length;C++)D[C].est.L>M&&(M=D[C].est.L,_=C);if(M<.001)break;var A=D[_],j=l.quantize.splitPixels(R,T,A.i0,A.i1,A.est.e,A.est.eMq255),L={i0:A.i0,i1:j,bst:null,est:null,tdst:0,left:null,right:null};L.bst=l.quantize.stats(R,L.i0,L.i1),L.est=l.quantize.estats(L.bst);var $={i0:j,i1:A.i1,bst:null,est:null,tdst:0,left:null,right:null};$.bst={R:[],m:[],N:A.bst.N-L.bst.N};for(var C=0;C<16;C++)$.bst.R[C]=A.bst.R[C]-L.bst.R[C];for(var C=0;C<4;C++)$.bst.m[C]=A.bst.m[C]-L.bst.m[C];$.est=l.quantize.estats($.bst),A.left=L,A.right=$,D[_]=L,D.push($)}D.sort(function(G,te){return te.bst.N-G.bst.N});for(var F=0;F<v.length;F++){for(var W=l.quantize.planeDst,U=new Uint8Array(v[F].buffer),q=new Uint32Array(v[F].buffer),H=U.length,C=0;C<H;C+=4){for(var Y=U[C]*.00392156862745098,Z=U[C+1]*(1/255),X=U[C+2]*(1/255),J=U[C+3]*(1/255),Q=O;Q.left;)Q=W(Q.est,Y,Z,X,J)<=0?Q.left:Q.right;q[C>>2]=Q.est.rgba}v[F]=q.buffer}return{bufs:v,plte:D}},l.quantize.getNearest=function(d,m,b,v,w){if(d.left==null)return d.tdst=l.quantize.dist(d.est.q,m,b,v,w),d;var C=l.quantize.planeDst(d.est,m,b,v,w),R=d.left,T=d.right;C>0&&(R=d.right,T=d.left);var E=l.quantize.getNearest(R,m,b,v,w);if(E.tdst<=C*C)return E;var f=l.quantize.getNearest(T,m,b,v,w);return f.tdst<E.tdst?f:E},l.quantize.planeDst=function(d,m,b,v,w){var C=d.e;return C[0]*m+C[1]*b+C[2]*v+C[3]*w-d.eMq},l.quantize.dist=function(d,m,b,v,w){var C=m-d[0],R=b-d[1],T=v-d[2],E=w-d[3];return C*C+R*R+T*T+E*E},l.quantize.splitPixels=function(d,m,b,v,w,C){var R=l.quantize.vecDot;for(v-=4;b<v;){for(;R(d,b,w)<=C;)b+=4;for(;R(d,v,w)>C;)v-=4;if(b>=v)break;var T=m[b>>2];m[b>>2]=m[v>>2],m[v>>2]=T,b+=4,v-=4}for(;R(d,b,w)>C;)b-=4;return b+4},l.quantize.vecDot=function(d,m,b){return d[m]*b[0]+d[m+1]*b[1]+d[m+2]*b[2]+d[m+3]*b[3]},l.quantize.stats=function(d,m,b){for(var v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=[0,0,0,0],C=b-m>>2,R=m;R<b;R+=4){var T=d[R]*.00392156862745098,E=d[R+1]*(1/255),f=d[R+2]*(1/255),g=d[R+3]*(1/255);w[0]+=T,w[1]+=E,w[2]+=f,w[3]+=g,v[0]+=T*T,v[1]+=T*E,v[2]+=T*f,v[3]+=T*g,v[5]+=E*E,v[6]+=E*f,v[7]+=E*g,v[10]+=f*f,v[11]+=f*g,v[15]+=g*g}return v[4]=v[1],v[8]=v[2],v[12]=v[3],v[9]=v[6],v[13]=v[7],v[14]=v[11],{R:v,m:w,N:C}},l.quantize.estats=function(d){var m=d.R,b=d.m,v=d.N,w=b[0],C=b[1],R=b[2],T=b[3],E=v==0?0:1/v,f=[m[0]-w*w*E,m[1]-w*C*E,m[2]-w*R*E,m[3]-w*T*E,m[4]-C*w*E,m[5]-C*C*E,m[6]-C*R*E,m[7]-C*T*E,m[8]-R*w*E,m[9]-R*C*E,m[10]-R*R*E,m[11]-R*T*E,m[12]-T*w*E,m[13]-T*C*E,m[14]-T*R*E,m[15]-T*T*E],g=f,S=l.M4,O=[.5,.5,.5,.5],D=0,M=0;if(v!=0)for(var _=0;_<10&&(O=S.multVec(g,O),M=Math.sqrt(S.dot(O,O)),O=S.sml(1/M,O),!(Math.abs(M-D)<1e-9));_++)D=M;var A=[w*E,C*E,R*E,T*E],j=S.dot(S.sml(255,A),O),L=A[3]<.001?0:1/A[3];return{Cov:f,q:A,e:O,L:D,eMq255:j,eMq:S.dot(O,A),rgba:(Math.round(255*A[3])<<24|Math.round(255*A[2]*L)<<16|Math.round(255*A[1]*L)<<8|Math.round(255*A[0]*L)<<0)>>>0}},l.M4={multVec:function(d,m){return[d[0]*m[0]+d[1]*m[1]+d[2]*m[2]+d[3]*m[3],d[4]*m[0]+d[5]*m[1]+d[6]*m[2]+d[7]*m[3],d[8]*m[0]+d[9]*m[1]+d[10]*m[2]+d[11]*m[3],d[12]*m[0]+d[13]*m[1]+d[14]*m[2]+d[15]*m[3]]},dot:function(d,m){return d[0]*m[0]+d[1]*m[1]+d[2]*m[2]+d[3]*m[3]},sml:function(d,m){return[d*m[0],d*m[1],d*m[2],d*m[3]]}},l.encode.alphaMul=function(d,m){for(var b=new Uint8Array(d.length),v=d.length>>2,w=0;w<v;w++){var C=w<<2,R=d[C+3];m&&(R=R<128?0:255);var T=R*(1/255);b[C+0]=d[C+0]*T,b[C+1]=d[C+1]*T,b[C+2]=d[C+2]*T,b[C+3]=R}return b}})(i,o)})()},"./node_modules/upng-js/node_modules/pako/index.js"(e,t,n){var i=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,o=n("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),l=n("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),h=n("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),d={};i(d,o,l,h),e.exports=d},"./node_modules/upng-js/node_modules/pako/lib/deflate.js"(e,t,n){var i=n("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),o=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),l=n("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),h=n("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),d=n("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),m=Object.prototype.toString,b=0,v=4,w=0,C=1,R=2,T=-1,E=0,f=8;function g(M){if(!(this instanceof g))return new g(M);this.options=o.assign({level:T,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:E,to:""},M||{});var _=this.options;_.raw&&_.windowBits>0?_.windowBits=-_.windowBits:_.gzip&&_.windowBits>0&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var A=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(A!==w)throw new Error(h[A]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var j;if(typeof _.dictionary=="string"?j=l.string2buf(_.dictionary):m.call(_.dictionary)==="[object ArrayBuffer]"?j=new Uint8Array(_.dictionary):j=_.dictionary,A=i.deflateSetDictionary(this.strm,j),A!==w)throw new Error(h[A]);this._dict_set=!0}}g.prototype.push=function(M,_){var A=this.strm,j=this.options.chunkSize,L,$;if(this.ended)return!1;$=_===~~_?_:_===!0?v:b,typeof M=="string"?A.input=l.string2buf(M):m.call(M)==="[object ArrayBuffer]"?A.input=new Uint8Array(M):A.input=M,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(j),A.next_out=0,A.avail_out=j),L=i.deflate(A,$),L!==C&&L!==w)return this.onEnd(L),this.ended=!0,!1;(A.avail_out===0||A.avail_in===0&&($===v||$===R))&&(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((A.avail_in>0||A.avail_out===0)&&L!==C);return $===v?(L=i.deflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===w):($===R&&(this.onEnd(w),A.avail_out=0),!0)},g.prototype.onData=function(M){this.chunks.push(M)},g.prototype.onEnd=function(M){M===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=M,this.msg=this.strm.msg};function S(M,_){var A=new g(_);if(A.push(M,!0),A.err)throw A.msg||h[A.err];return A.result}function O(M,_){return _=_||{},_.raw=!0,S(M,_)}function D(M,_){return _=_||{},_.gzip=!0,S(M,_)}t.Deflate=g,t.deflate=S,t.deflateRaw=O,t.gzip=D},"./node_modules/upng-js/node_modules/pako/lib/inflate.js"(e,t,n){var i=n("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),o=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),l=n("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),h=n("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),d=n("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),m=n("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),b=n("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),v=Object.prototype.toString;function w(T){if(!(this instanceof w))return new w(T);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},T||{});var E=this.options;E.raw&&E.windowBits>=0&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),E.windowBits>=0&&E.windowBits<16&&!(T&&T.windowBits)&&(E.windowBits+=32),E.windowBits>15&&E.windowBits<48&&(E.windowBits&15)===0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var f=i.inflateInit2(this.strm,E.windowBits);if(f!==h.Z_OK)throw new Error(d[f]);if(this.header=new b,i.inflateGetHeader(this.strm,this.header),E.dictionary&&(typeof E.dictionary=="string"?E.dictionary=l.string2buf(E.dictionary):v.call(E.dictionary)==="[object ArrayBuffer]"&&(E.dictionary=new Uint8Array(E.dictionary)),E.raw&&(f=i.inflateSetDictionary(this.strm,E.dictionary),f!==h.Z_OK)))throw new Error(d[f])}w.prototype.push=function(T,E){var f=this.strm,g=this.options.chunkSize,S=this.options.dictionary,O,D,M,_,A,j=!1;if(this.ended)return!1;D=E===~~E?E:E===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof T=="string"?f.input=l.binstring2buf(T):v.call(T)==="[object ArrayBuffer]"?f.input=new Uint8Array(T):f.input=T,f.next_in=0,f.avail_in=f.input.length;do{if(f.avail_out===0&&(f.output=new o.Buf8(g),f.next_out=0,f.avail_out=g),O=i.inflate(f,h.Z_NO_FLUSH),O===h.Z_NEED_DICT&&S&&(O=i.inflateSetDictionary(this.strm,S)),O===h.Z_BUF_ERROR&&j===!0&&(O=h.Z_OK,j=!1),O!==h.Z_STREAM_END&&O!==h.Z_OK)return this.onEnd(O),this.ended=!0,!1;f.next_out&&(f.avail_out===0||O===h.Z_STREAM_END||f.avail_in===0&&(D===h.Z_FINISH||D===h.Z_SYNC_FLUSH))&&(this.options.to==="string"?(M=l.utf8border(f.output,f.next_out),_=f.next_out-M,A=l.buf2string(f.output,M),f.next_out=_,f.avail_out=g-_,_&&o.arraySet(f.output,f.output,M,_,0),this.onData(A)):this.onData(o.shrinkBuf(f.output,f.next_out))),f.avail_in===0&&f.avail_out===0&&(j=!0)}while((f.avail_in>0||f.avail_out===0)&&O!==h.Z_STREAM_END);return O===h.Z_STREAM_END&&(D=h.Z_FINISH),D===h.Z_FINISH?(O=i.inflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===h.Z_OK):(D===h.Z_SYNC_FLUSH&&(this.onEnd(h.Z_OK),f.avail_out=0),!0)},w.prototype.onData=function(T){this.chunks.push(T)},w.prototype.onEnd=function(T){T===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function C(T,E){var f=new w(E);if(f.push(T,!0),f.err)throw f.msg||d[f.err];return f.result}function R(T,E){return E=E||{},E.raw=!0,C(T,E)}t.Inflate=w,t.inflate=C,t.inflateRaw=R,t.ungzip=C},"./node_modules/upng-js/node_modules/pako/lib/utils/common.js"(e,t){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function i(h,d){return Object.prototype.hasOwnProperty.call(h,d)}t.assign=function(h){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var m=d.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var b in m)i(m,b)&&(h[b]=m[b])}}return h},t.shrinkBuf=function(h,d){return h.length===d?h:h.subarray?h.subarray(0,d):(h.length=d,h)};var o={arraySet:function(h,d,m,b,v){if(d.subarray&&h.subarray){h.set(d.subarray(m,m+b),v);return}for(var w=0;w<b;w++)h[v+w]=d[m+w]},flattenChunks:function(h){var d,m,b,v,w,C;for(b=0,d=0,m=h.length;d<m;d++)b+=h[d].length;for(C=new Uint8Array(b),v=0,d=0,m=h.length;d<m;d++)w=h[d],C.set(w,v),v+=w.length;return C}},l={arraySet:function(h,d,m,b,v){for(var w=0;w<b;w++)h[v+w]=d[m+w]},flattenChunks:function(h){return[].concat.apply([],h)}};t.setTyped=function(h){h?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,l))},t.setTyped(n)},"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"(e,t,n){var i=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var h=new i.Buf8(256),d=0;d<256;d++)h[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;h[254]=h[254]=1,t.string2buf=function(b){var v,w,C,R,T,E=b.length,f=0;for(R=0;R<E;R++)w=b.charCodeAt(R),(w&64512)===55296&&R+1<E&&(C=b.charCodeAt(R+1),(C&64512)===56320&&(w=65536+(w-55296<<10)+(C-56320),R++)),f+=w<128?1:w<2048?2:w<65536?3:4;for(v=new i.Buf8(f),T=0,R=0;T<f;R++)w=b.charCodeAt(R),(w&64512)===55296&&R+1<E&&(C=b.charCodeAt(R+1),(C&64512)===56320&&(w=65536+(w-55296<<10)+(C-56320),R++)),w<128?v[T++]=w:w<2048?(v[T++]=192|w>>>6,v[T++]=128|w&63):w<65536?(v[T++]=224|w>>>12,v[T++]=128|w>>>6&63,v[T++]=128|w&63):(v[T++]=240|w>>>18,v[T++]=128|w>>>12&63,v[T++]=128|w>>>6&63,v[T++]=128|w&63);return v};function m(b,v){if(v<65534&&(b.subarray&&l||!b.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(b,v));for(var w="",C=0;C<v;C++)w+=String.fromCharCode(b[C]);return w}t.buf2binstring=function(b){return m(b,b.length)},t.binstring2buf=function(b){for(var v=new i.Buf8(b.length),w=0,C=v.length;w<C;w++)v[w]=b.charCodeAt(w);return v},t.buf2string=function(b,v){var w,C,R,T,E=v||b.length,f=new Array(E*2);for(C=0,w=0;w<E;){if(R=b[w++],R<128){f[C++]=R;continue}if(T=h[R],T>4){f[C++]=65533,w+=T-1;continue}for(R&=T===2?31:T===3?15:7;T>1&&w<E;)R=R<<6|b[w++]&63,T--;if(T>1){f[C++]=65533;continue}R<65536?f[C++]=R:(R-=65536,f[C++]=55296|R>>10&1023,f[C++]=56320|R&1023)}return m(f,C)},t.utf8border=function(b,v){var w;for(v=v||b.length,v>b.length&&(v=b.length),w=v-1;w>=0&&(b[w]&192)===128;)w--;return w<0||w===0?v:w+h[b[w]]>v?w:v}},"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"(e){function t(n,i,o,l){for(var h=n&65535|0,d=n>>>16&65535|0,m=0;o!==0;){m=o>2e3?2e3:o,o-=m;do h=h+i[l++]|0,d=d+h|0;while(--m);h%=65521,d%=65521}return h|d<<16|0}e.exports=t},"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"(e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"(e){function t(){for(var o,l=[],h=0;h<256;h++){o=h;for(var d=0;d<8;d++)o=o&1?3988292384^o>>>1:o>>>1;l[h]=o}return l}var n=t();function i(o,l,h,d){var m=n,b=d+h;o^=-1;for(var v=d;v<b;v++)o=o>>>8^m[(o^l[v])&255];return o^-1}e.exports=i},"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"(e,t,n){var i=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=n("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),l=n("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),h=n("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),d=n("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),m=0,b=1,v=3,w=4,C=5,R=0,T=1,E=-2,f=-3,g=-5,S=-1,O=1,D=2,M=3,_=4,A=0,j=2,L=8,$=9,F=15,W=8,U=29,q=256,H=q+1+U,Y=30,Z=19,X=2*H+1,J=15,Q=3,G=258,te=G+Q+1,ue=32,de=42,xe=69,ve=73,Se=91,Ee=103,he=113,Re=666,je=1,Ce=2,Le=3,me=4,Ie=3;function Ve(K,Me){return K.msg=d[Me],Me}function nt(K){return(K<<1)-(K>4?9:0)}function it(K){for(var Me=K.length;--Me>=0;)K[Me]=0}function ot(K){var Me=K.state,Te=Me.pending;Te>K.avail_out&&(Te=K.avail_out),Te!==0&&(i.arraySet(K.output,Me.pending_buf,Me.pending_out,Te,K.next_out),K.next_out+=Te,Me.pending_out+=Te,K.total_out+=Te,K.avail_out-=Te,Me.pending-=Te,Me.pending===0&&(Me.pending_out=0))}function at(K,Me){o._tr_flush_block(K,K.block_start>=0?K.block_start:-1,K.strstart-K.block_start,Me),K.block_start=K.strstart,ot(K.strm)}function Je(K,Me){K.pending_buf[K.pending++]=Me}function rt(K,Me){K.pending_buf[K.pending++]=Me>>>8&255,K.pending_buf[K.pending++]=Me&255}function et(K,Me,Te,le){var we=K.avail_in;return we>le&&(we=le),we===0?0:(K.avail_in-=we,i.arraySet(Me,K.input,K.next_in,we,Te),K.state.wrap===1?K.adler=l(K.adler,Me,we,Te):K.state.wrap===2&&(K.adler=h(K.adler,Me,we,Te)),K.next_in+=we,K.total_in+=we,we)}function Qe(K,Me){var Te=K.max_chain_length,le=K.strstart,we,Fe,yt=K.prev_length,mt=K.nice_match,ft=K.strstart>K.w_size-te?K.strstart-(K.w_size-te):0,Ot=K.window,nr=K.w_mask,Pt=K.prev,At=K.strstart+G,Ct=Ot[le+yt-1],Ut=Ot[le+yt];K.prev_length>=K.good_match&&(Te>>=2),mt>K.lookahead&&(mt=K.lookahead);do if(we=Me,!(Ot[we+yt]!==Ut||Ot[we+yt-1]!==Ct||Ot[we]!==Ot[le]||Ot[++we]!==Ot[le+1])){le+=2,we++;do;while(Ot[++le]===Ot[++we]&&Ot[++le]===Ot[++we]&&Ot[++le]===Ot[++we]&&Ot[++le]===Ot[++we]&&Ot[++le]===Ot[++we]&&Ot[++le]===Ot[++we]&&Ot[++le]===Ot[++we]&&Ot[++le]===Ot[++we]&&le<At);if(Fe=G-(At-le),le=At-G,Fe>yt){if(K.match_start=Me,yt=Fe,Fe>=mt)break;Ct=Ot[le+yt-1],Ut=Ot[le+yt]}}while((Me=Pt[Me&nr])>ft&&--Te!==0);return yt<=K.lookahead?yt:K.lookahead}function ct(K){var Me=K.w_size,Te,le,we,Fe,yt;do{if(Fe=K.window_size-K.lookahead-K.strstart,K.strstart>=Me+(Me-te)){i.arraySet(K.window,K.window,Me,Me,0),K.match_start-=Me,K.strstart-=Me,K.block_start-=Me,le=K.hash_size,Te=le;do we=K.head[--Te],K.head[Te]=we>=Me?we-Me:0;while(--le);le=Me,Te=le;do we=K.prev[--Te],K.prev[Te]=we>=Me?we-Me:0;while(--le);Fe+=Me}if(K.strm.avail_in===0)break;if(le=et(K.strm,K.window,K.strstart+K.lookahead,Fe),K.lookahead+=le,K.lookahead+K.insert>=Q)for(yt=K.strstart-K.insert,K.ins_h=K.window[yt],K.ins_h=(K.ins_h<<K.hash_shift^K.window[yt+1])&K.hash_mask;K.insert&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[yt+Q-1])&K.hash_mask,K.prev[yt&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=yt,yt++,K.insert--,!(K.lookahead+K.insert<Q)););}while(K.lookahead<te&&K.strm.avail_in!==0)}function pt(K,Me){var Te=65535;for(Te>K.pending_buf_size-5&&(Te=K.pending_buf_size-5);;){if(K.lookahead<=1){if(ct(K),K.lookahead===0&&Me===m)return je;if(K.lookahead===0)break}K.strstart+=K.lookahead,K.lookahead=0;var le=K.block_start+Te;if((K.strstart===0||K.strstart>=le)&&(K.lookahead=K.strstart-le,K.strstart=le,at(K,!1),K.strm.avail_out===0)||K.strstart-K.block_start>=K.w_size-te&&(at(K,!1),K.strm.avail_out===0))return je}return K.insert=0,Me===w?(at(K,!0),K.strm.avail_out===0?Le:me):(K.strstart>K.block_start&&(at(K,!1),K.strm.avail_out===0),je)}function oe(K,Me){for(var Te,le;;){if(K.lookahead<te){if(ct(K),K.lookahead<te&&Me===m)return je;if(K.lookahead===0)break}if(Te=0,K.lookahead>=Q&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+Q-1])&K.hash_mask,Te=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),Te!==0&&K.strstart-Te<=K.w_size-te&&(K.match_length=Qe(K,Te)),K.match_length>=Q)if(le=o._tr_tally(K,K.strstart-K.match_start,K.match_length-Q),K.lookahead-=K.match_length,K.match_length<=K.max_lazy_match&&K.lookahead>=Q){K.match_length--;do K.strstart++,K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+Q-1])&K.hash_mask,Te=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart;while(--K.match_length!==0);K.strstart++}else K.strstart+=K.match_length,K.match_length=0,K.ins_h=K.window[K.strstart],K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+1])&K.hash_mask;else le=o._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++;if(le&&(at(K,!1),K.strm.avail_out===0))return je}return K.insert=K.strstart<Q-1?K.strstart:Q-1,Me===w?(at(K,!0),K.strm.avail_out===0?Le:me):K.last_lit&&(at(K,!1),K.strm.avail_out===0)?je:Ce}function fe(K,Me){for(var Te,le,we;;){if(K.lookahead<te){if(ct(K),K.lookahead<te&&Me===m)return je;if(K.lookahead===0)break}if(Te=0,K.lookahead>=Q&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+Q-1])&K.hash_mask,Te=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),K.prev_length=K.match_length,K.prev_match=K.match_start,K.match_length=Q-1,Te!==0&&K.prev_length<K.max_lazy_match&&K.strstart-Te<=K.w_size-te&&(K.match_length=Qe(K,Te),K.match_length<=5&&(K.strategy===O||K.match_length===Q&&K.strstart-K.match_start>4096)&&(K.match_length=Q-1)),K.prev_length>=Q&&K.match_length<=K.prev_length){we=K.strstart+K.lookahead-Q,le=o._tr_tally(K,K.strstart-1-K.prev_match,K.prev_length-Q),K.lookahead-=K.prev_length-1,K.prev_length-=2;do++K.strstart<=we&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+Q-1])&K.hash_mask,Te=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart);while(--K.prev_length!==0);if(K.match_available=0,K.match_length=Q-1,K.strstart++,le&&(at(K,!1),K.strm.avail_out===0))return je}else if(K.match_available){if(le=o._tr_tally(K,0,K.window[K.strstart-1]),le&&at(K,!1),K.strstart++,K.lookahead--,K.strm.avail_out===0)return je}else K.match_available=1,K.strstart++,K.lookahead--}return K.match_available&&(le=o._tr_tally(K,0,K.window[K.strstart-1]),K.match_available=0),K.insert=K.strstart<Q-1?K.strstart:Q-1,Me===w?(at(K,!0),K.strm.avail_out===0?Le:me):K.last_lit&&(at(K,!1),K.strm.avail_out===0)?je:Ce}function pe(K,Me){for(var Te,le,we,Fe,yt=K.window;;){if(K.lookahead<=G){if(ct(K),K.lookahead<=G&&Me===m)return je;if(K.lookahead===0)break}if(K.match_length=0,K.lookahead>=Q&&K.strstart>0&&(we=K.strstart-1,le=yt[we],le===yt[++we]&&le===yt[++we]&&le===yt[++we])){Fe=K.strstart+G;do;while(le===yt[++we]&&le===yt[++we]&&le===yt[++we]&&le===yt[++we]&&le===yt[++we]&&le===yt[++we]&&le===yt[++we]&&le===yt[++we]&&we<Fe);K.match_length=G-(Fe-we),K.match_length>K.lookahead&&(K.match_length=K.lookahead)}if(K.match_length>=Q?(Te=o._tr_tally(K,1,K.match_length-Q),K.lookahead-=K.match_length,K.strstart+=K.match_length,K.match_length=0):(Te=o._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++),Te&&(at(K,!1),K.strm.avail_out===0))return je}return K.insert=0,Me===w?(at(K,!0),K.strm.avail_out===0?Le:me):K.last_lit&&(at(K,!1),K.strm.avail_out===0)?je:Ce}function Be(K,Me){for(var Te;;){if(K.lookahead===0&&(ct(K),K.lookahead===0)){if(Me===m)return je;break}if(K.match_length=0,Te=o._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++,Te&&(at(K,!1),K.strm.avail_out===0))return je}return K.insert=0,Me===w?(at(K,!0),K.strm.avail_out===0?Le:me):K.last_lit&&(at(K,!1),K.strm.avail_out===0)?je:Ce}function ke(K,Me,Te,le,we){this.good_length=K,this.max_lazy=Me,this.nice_length=Te,this.max_chain=le,this.func=we}var Ke;Ke=[new ke(0,0,0,0,pt),new ke(4,4,8,4,oe),new ke(4,5,16,8,oe),new ke(4,6,32,32,oe),new ke(4,4,16,16,fe),new ke(8,16,32,32,fe),new ke(8,16,128,128,fe),new ke(8,32,128,256,fe),new ke(32,128,258,1024,fe),new ke(32,258,258,4096,fe)];function Ye(K){K.window_size=2*K.w_size,it(K.head),K.max_lazy_match=Ke[K.level].max_lazy,K.good_match=Ke[K.level].good_length,K.nice_match=Ke[K.level].nice_length,K.max_chain_length=Ke[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=Q-1,K.match_available=0,K.ins_h=0}function ie(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=L,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(X*2),this.dyn_dtree=new i.Buf16((2*Y+1)*2),this.bl_tree=new i.Buf16((2*Z+1)*2),it(this.dyn_ltree),it(this.dyn_dtree),it(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(J+1),this.heap=new i.Buf16(2*H+1),it(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*H+1),it(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ae(K){var Me;return!K||!K.state?Ve(K,E):(K.total_in=K.total_out=0,K.data_type=j,Me=K.state,Me.pending=0,Me.pending_out=0,Me.wrap<0&&(Me.wrap=-Me.wrap),Me.status=Me.wrap?de:he,K.adler=Me.wrap===2?0:1,Me.last_flush=m,o._tr_init(Me),R)}function Ne(K){var Me=Ae(K);return Me===R&&Ye(K.state),Me}function Ze(K,Me){return!K||!K.state||K.state.wrap!==2?E:(K.state.gzhead=Me,R)}function _e(K,Me,Te,le,we,Fe){if(!K)return E;var yt=1;if(Me===S&&(Me=6),le<0?(yt=0,le=-le):le>15&&(yt=2,le-=16),we<1||we>$||Te!==L||le<8||le>15||Me<0||Me>9||Fe<0||Fe>_)return Ve(K,E);le===8&&(le=9);var mt=new ie;return K.state=mt,mt.strm=K,mt.wrap=yt,mt.gzhead=null,mt.w_bits=le,mt.w_size=1<<mt.w_bits,mt.w_mask=mt.w_size-1,mt.hash_bits=we+7,mt.hash_size=1<<mt.hash_bits,mt.hash_mask=mt.hash_size-1,mt.hash_shift=~~((mt.hash_bits+Q-1)/Q),mt.window=new i.Buf8(mt.w_size*2),mt.head=new i.Buf16(mt.hash_size),mt.prev=new i.Buf16(mt.w_size),mt.lit_bufsize=1<<we+6,mt.pending_buf_size=mt.lit_bufsize*4,mt.pending_buf=new i.Buf8(mt.pending_buf_size),mt.d_buf=1*mt.lit_bufsize,mt.l_buf=3*mt.lit_bufsize,mt.level=Me,mt.strategy=Fe,mt.method=Te,Ne(K)}function Ge(K,Me){return _e(K,Me,L,F,W,A)}function ae(K,Me){var Te,le,we,Fe;if(!K||!K.state||Me>C||Me<0)return K?Ve(K,E):E;if(le=K.state,!K.output||!K.input&&K.avail_in!==0||le.status===Re&&Me!==w)return Ve(K,K.avail_out===0?g:E);if(le.strm=K,Te=le.last_flush,le.last_flush=Me,le.status===de)if(le.wrap===2)K.adler=0,Je(le,31),Je(le,139),Je(le,8),le.gzhead?(Je(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),Je(le,le.gzhead.time&255),Je(le,le.gzhead.time>>8&255),Je(le,le.gzhead.time>>16&255),Je(le,le.gzhead.time>>24&255),Je(le,le.level===9?2:le.strategy>=D||le.level<2?4:0),Je(le,le.gzhead.os&255),le.gzhead.extra&&le.gzhead.extra.length&&(Je(le,le.gzhead.extra.length&255),Je(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(K.adler=h(K.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=xe):(Je(le,0),Je(le,0),Je(le,0),Je(le,0),Je(le,0),Je(le,le.level===9?2:le.strategy>=D||le.level<2?4:0),Je(le,Ie),le.status=he);else{var yt=L+(le.w_bits-8<<4)<<8,mt=-1;le.strategy>=D||le.level<2?mt=0:le.level<6?mt=1:le.level===6?mt=2:mt=3,yt|=mt<<6,le.strstart!==0&&(yt|=ue),yt+=31-yt%31,le.status=he,rt(le,yt),le.strstart!==0&&(rt(le,K.adler>>>16),rt(le,K.adler&65535)),K.adler=1}if(le.status===xe)if(le.gzhead.extra){for(we=le.pending;le.gzindex<(le.gzhead.extra.length&65535)&&!(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>we&&(K.adler=h(K.adler,le.pending_buf,le.pending-we,we)),ot(K),we=le.pending,le.pending===le.pending_buf_size));)Je(le,le.gzhead.extra[le.gzindex]&255),le.gzindex++;le.gzhead.hcrc&&le.pending>we&&(K.adler=h(K.adler,le.pending_buf,le.pending-we,we)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=ve)}else le.status=ve;if(le.status===ve)if(le.gzhead.name){we=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>we&&(K.adler=h(K.adler,le.pending_buf,le.pending-we,we)),ot(K),we=le.pending,le.pending===le.pending_buf_size)){Fe=1;break}le.gzindex<le.gzhead.name.length?Fe=le.gzhead.name.charCodeAt(le.gzindex++)&255:Fe=0,Je(le,Fe)}while(Fe!==0);le.gzhead.hcrc&&le.pending>we&&(K.adler=h(K.adler,le.pending_buf,le.pending-we,we)),Fe===0&&(le.gzindex=0,le.status=Se)}else le.status=Se;if(le.status===Se)if(le.gzhead.comment){we=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>we&&(K.adler=h(K.adler,le.pending_buf,le.pending-we,we)),ot(K),we=le.pending,le.pending===le.pending_buf_size)){Fe=1;break}le.gzindex<le.gzhead.comment.length?Fe=le.gzhead.comment.charCodeAt(le.gzindex++)&255:Fe=0,Je(le,Fe)}while(Fe!==0);le.gzhead.hcrc&&le.pending>we&&(K.adler=h(K.adler,le.pending_buf,le.pending-we,we)),Fe===0&&(le.status=Ee)}else le.status=Ee;if(le.status===Ee&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&ot(K),le.pending+2<=le.pending_buf_size&&(Je(le,K.adler&255),Je(le,K.adler>>8&255),K.adler=0,le.status=he)):le.status=he),le.pending!==0){if(ot(K),K.avail_out===0)return le.last_flush=-1,R}else if(K.avail_in===0&&nt(Me)<=nt(Te)&&Me!==w)return Ve(K,g);if(le.status===Re&&K.avail_in!==0)return Ve(K,g);if(K.avail_in!==0||le.lookahead!==0||Me!==m&&le.status!==Re){var ft=le.strategy===D?Be(le,Me):le.strategy===M?pe(le,Me):Ke[le.level].func(le,Me);if((ft===Le||ft===me)&&(le.status=Re),ft===je||ft===Le)return K.avail_out===0&&(le.last_flush=-1),R;if(ft===Ce&&(Me===b?o._tr_align(le):Me!==C&&(o._tr_stored_block(le,0,0,!1),Me===v&&(it(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),ot(K),K.avail_out===0))return le.last_flush=-1,R}return Me!==w?R:le.wrap<=0?T:(le.wrap===2?(Je(le,K.adler&255),Je(le,K.adler>>8&255),Je(le,K.adler>>16&255),Je(le,K.adler>>24&255),Je(le,K.total_in&255),Je(le,K.total_in>>8&255),Je(le,K.total_in>>16&255),Je(le,K.total_in>>24&255)):(rt(le,K.adler>>>16),rt(le,K.adler&65535)),ot(K),le.wrap>0&&(le.wrap=-le.wrap),le.pending!==0?R:T)}function He(K){var Me;return!K||!K.state?E:(Me=K.state.status,Me!==de&&Me!==xe&&Me!==ve&&Me!==Se&&Me!==Ee&&Me!==he&&Me!==Re?Ve(K,E):(K.state=null,Me===he?Ve(K,f):R))}function tt(K,Me){var Te=Me.length,le,we,Fe,yt,mt,ft,Ot,nr;if(!K||!K.state||(le=K.state,yt=le.wrap,yt===2||yt===1&&le.status!==de||le.lookahead))return E;for(yt===1&&(K.adler=l(K.adler,Me,Te,0)),le.wrap=0,Te>=le.w_size&&(yt===0&&(it(le.head),le.strstart=0,le.block_start=0,le.insert=0),nr=new i.Buf8(le.w_size),i.arraySet(nr,Me,Te-le.w_size,le.w_size,0),Me=nr,Te=le.w_size),mt=K.avail_in,ft=K.next_in,Ot=K.input,K.avail_in=Te,K.next_in=0,K.input=Me,ct(le);le.lookahead>=Q;){we=le.strstart,Fe=le.lookahead-(Q-1);do le.ins_h=(le.ins_h<<le.hash_shift^le.window[we+Q-1])&le.hash_mask,le.prev[we&le.w_mask]=le.head[le.ins_h],le.head[le.ins_h]=we,we++;while(--Fe);le.strstart=we,le.lookahead=Q-1,ct(le)}return le.strstart+=le.lookahead,le.block_start=le.strstart,le.insert=le.lookahead,le.lookahead=0,le.match_length=le.prev_length=Q-1,le.match_available=0,K.next_in=ft,K.input=Ot,K.avail_in=mt,le.wrap=yt,R}t.deflateInit=Ge,t.deflateInit2=_e,t.deflateReset=Ne,t.deflateResetKeep=Ae,t.deflateSetHeader=Ze,t.deflate=ae,t.deflateEnd=He,t.deflateSetDictionary=tt,t.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"(e){function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=t},"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"(e){var t=30,n=12;e.exports=function(o,l){var h,d,m,b,v,w,C,R,T,E,f,g,S,O,D,M,_,A,j,L,$,F,W,U,q;h=o.state,d=o.next_in,U=o.input,m=d+(o.avail_in-5),b=o.next_out,q=o.output,v=b-(l-o.avail_out),w=b+(o.avail_out-257),C=h.dmax,R=h.wsize,T=h.whave,E=h.wnext,f=h.window,g=h.hold,S=h.bits,O=h.lencode,D=h.distcode,M=(1<<h.lenbits)-1,_=(1<<h.distbits)-1;e:do{S<15&&(g+=U[d++]<<S,S+=8,g+=U[d++]<<S,S+=8),A=O[g&M];t:for(;;){if(j=A>>>24,g>>>=j,S-=j,j=A>>>16&255,j===0)q[b++]=A&65535;else if(j&16){L=A&65535,j&=15,j&&(S<j&&(g+=U[d++]<<S,S+=8),L+=g&(1<<j)-1,g>>>=j,S-=j),S<15&&(g+=U[d++]<<S,S+=8,g+=U[d++]<<S,S+=8),A=D[g&_];r:for(;;){if(j=A>>>24,g>>>=j,S-=j,j=A>>>16&255,j&16){if($=A&65535,j&=15,S<j&&(g+=U[d++]<<S,S+=8,S<j&&(g+=U[d++]<<S,S+=8)),$+=g&(1<<j)-1,$>C){o.msg="invalid distance too far back",h.mode=t;break e}if(g>>>=j,S-=j,j=b-v,$>j){if(j=$-j,j>T&&h.sane){o.msg="invalid distance too far back",h.mode=t;break e}if(F=0,W=f,E===0){if(F+=R-j,j<L){L-=j;do q[b++]=f[F++];while(--j);F=b-$,W=q}}else if(E<j){if(F+=R+E-j,j-=E,j<L){L-=j;do q[b++]=f[F++];while(--j);if(F=0,E<L){j=E,L-=j;do q[b++]=f[F++];while(--j);F=b-$,W=q}}}else if(F+=E-j,j<L){L-=j;do q[b++]=f[F++];while(--j);F=b-$,W=q}for(;L>2;)q[b++]=W[F++],q[b++]=W[F++],q[b++]=W[F++],L-=3;L&&(q[b++]=W[F++],L>1&&(q[b++]=W[F++]))}else{F=b-$;do q[b++]=q[F++],q[b++]=q[F++],q[b++]=q[F++],L-=3;while(L>2);L&&(q[b++]=q[F++],L>1&&(q[b++]=q[F++]))}}else if((j&64)===0){A=D[(A&65535)+(g&(1<<j)-1)];continue r}else{o.msg="invalid distance code",h.mode=t;break e}break}}else if((j&64)===0){A=O[(A&65535)+(g&(1<<j)-1)];continue t}else if(j&32){h.mode=n;break e}else{o.msg="invalid literal/length code",h.mode=t;break e}break}}while(d<m&&b<w);L=S>>3,d-=L,S-=L<<3,g&=(1<<S)-1,o.next_in=d,o.next_out=b,o.avail_in=d<m?5+(m-d):5-(d-m),o.avail_out=b<w?257+(w-b):257-(b-w),h.hold=g,h.bits=S}},"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"(e,t,n){var i=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=n("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),l=n("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),h=n("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),d=n("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),m=0,b=1,v=2,w=4,C=5,R=6,T=0,E=1,f=2,g=-2,S=-3,O=-4,D=-5,M=8,_=1,A=2,j=3,L=4,$=5,F=6,W=7,U=8,q=9,H=10,Y=11,Z=12,X=13,J=14,Q=15,G=16,te=17,ue=18,de=19,xe=20,ve=21,Se=22,Ee=23,he=24,Re=25,je=26,Ce=27,Le=28,me=29,Ie=30,Ve=31,nt=32,it=852,ot=592,at=15,Je=at;function rt(_e){return(_e>>>24&255)+(_e>>>8&65280)+((_e&65280)<<8)+((_e&255)<<24)}function et(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Qe(_e){var Ge;return!_e||!_e.state?g:(Ge=_e.state,_e.total_in=_e.total_out=Ge.total=0,_e.msg="",Ge.wrap&&(_e.adler=Ge.wrap&1),Ge.mode=_,Ge.last=0,Ge.havedict=0,Ge.dmax=32768,Ge.head=null,Ge.hold=0,Ge.bits=0,Ge.lencode=Ge.lendyn=new i.Buf32(it),Ge.distcode=Ge.distdyn=new i.Buf32(ot),Ge.sane=1,Ge.back=-1,T)}function ct(_e){var Ge;return!_e||!_e.state?g:(Ge=_e.state,Ge.wsize=0,Ge.whave=0,Ge.wnext=0,Qe(_e))}function pt(_e,Ge){var ae,He;return!_e||!_e.state||(He=_e.state,Ge<0?(ae=0,Ge=-Ge):(ae=(Ge>>4)+1,Ge<48&&(Ge&=15)),Ge&&(Ge<8||Ge>15))?g:(He.window!==null&&He.wbits!==Ge&&(He.window=null),He.wrap=ae,He.wbits=Ge,ct(_e))}function oe(_e,Ge){var ae,He;return _e?(He=new et,_e.state=He,He.window=null,ae=pt(_e,Ge),ae!==T&&(_e.state=null),ae):g}function fe(_e){return oe(_e,Je)}var pe=!0,Be,ke;function Ke(_e){if(pe){var Ge;for(Be=new i.Buf32(512),ke=new i.Buf32(32),Ge=0;Ge<144;)_e.lens[Ge++]=8;for(;Ge<256;)_e.lens[Ge++]=9;for(;Ge<280;)_e.lens[Ge++]=7;for(;Ge<288;)_e.lens[Ge++]=8;for(d(b,_e.lens,0,288,Be,0,_e.work,{bits:9}),Ge=0;Ge<32;)_e.lens[Ge++]=5;d(v,_e.lens,0,32,ke,0,_e.work,{bits:5}),pe=!1}_e.lencode=Be,_e.lenbits=9,_e.distcode=ke,_e.distbits=5}function Ye(_e,Ge,ae,He){var tt,K=_e.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new i.Buf8(K.wsize)),He>=K.wsize?(i.arraySet(K.window,Ge,ae-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(tt=K.wsize-K.wnext,tt>He&&(tt=He),i.arraySet(K.window,Ge,ae-He,tt,K.wnext),He-=tt,He?(i.arraySet(K.window,Ge,ae-He,He,0),K.wnext=He,K.whave=K.wsize):(K.wnext+=tt,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=tt))),0}function ie(_e,Ge){var ae,He,tt,K,Me,Te,le,we,Fe,yt,mt,ft,Ot,nr,Pt=0,At,Ct,Ut,Ft,fr,Qt,Dt,Lt,It=new i.Buf8(4),Jt,rr,cr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_e||!_e.state||!_e.output||!_e.input&&_e.avail_in!==0)return g;ae=_e.state,ae.mode===Z&&(ae.mode=X),Me=_e.next_out,tt=_e.output,le=_e.avail_out,K=_e.next_in,He=_e.input,Te=_e.avail_in,we=ae.hold,Fe=ae.bits,yt=Te,mt=le,Lt=T;e:for(;;)switch(ae.mode){case _:if(ae.wrap===0){ae.mode=X;break}for(;Fe<16;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if(ae.wrap&2&&we===35615){ae.check=0,It[0]=we&255,It[1]=we>>>8&255,ae.check=l(ae.check,It,2,0),we=0,Fe=0,ae.mode=A;break}if(ae.flags=0,ae.head&&(ae.head.done=!1),!(ae.wrap&1)||(((we&255)<<8)+(we>>8))%31){_e.msg="incorrect header check",ae.mode=Ie;break}if((we&15)!==M){_e.msg="unknown compression method",ae.mode=Ie;break}if(we>>>=4,Fe-=4,Dt=(we&15)+8,ae.wbits===0)ae.wbits=Dt;else if(Dt>ae.wbits){_e.msg="invalid window size",ae.mode=Ie;break}ae.dmax=1<<Dt,_e.adler=ae.check=1,ae.mode=we&512?H:Z,we=0,Fe=0;break;case A:for(;Fe<16;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if(ae.flags=we,(ae.flags&255)!==M){_e.msg="unknown compression method",ae.mode=Ie;break}if(ae.flags&57344){_e.msg="unknown header flags set",ae.mode=Ie;break}ae.head&&(ae.head.text=we>>8&1),ae.flags&512&&(It[0]=we&255,It[1]=we>>>8&255,ae.check=l(ae.check,It,2,0)),we=0,Fe=0,ae.mode=j;case j:for(;Fe<32;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}ae.head&&(ae.head.time=we),ae.flags&512&&(It[0]=we&255,It[1]=we>>>8&255,It[2]=we>>>16&255,It[3]=we>>>24&255,ae.check=l(ae.check,It,4,0)),we=0,Fe=0,ae.mode=L;case L:for(;Fe<16;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}ae.head&&(ae.head.xflags=we&255,ae.head.os=we>>8),ae.flags&512&&(It[0]=we&255,It[1]=we>>>8&255,ae.check=l(ae.check,It,2,0)),we=0,Fe=0,ae.mode=$;case $:if(ae.flags&1024){for(;Fe<16;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}ae.length=we,ae.head&&(ae.head.extra_len=we),ae.flags&512&&(It[0]=we&255,It[1]=we>>>8&255,ae.check=l(ae.check,It,2,0)),we=0,Fe=0}else ae.head&&(ae.head.extra=null);ae.mode=F;case F:if(ae.flags&1024&&(ft=ae.length,ft>Te&&(ft=Te),ft&&(ae.head&&(Dt=ae.head.extra_len-ae.length,ae.head.extra||(ae.head.extra=new Array(ae.head.extra_len)),i.arraySet(ae.head.extra,He,K,ft,Dt)),ae.flags&512&&(ae.check=l(ae.check,He,ft,K)),Te-=ft,K+=ft,ae.length-=ft),ae.length))break e;ae.length=0,ae.mode=W;case W:if(ae.flags&2048){if(Te===0)break e;ft=0;do Dt=He[K+ft++],ae.head&&Dt&&ae.length<65536&&(ae.head.name+=String.fromCharCode(Dt));while(Dt&&ft<Te);if(ae.flags&512&&(ae.check=l(ae.check,He,ft,K)),Te-=ft,K+=ft,Dt)break e}else ae.head&&(ae.head.name=null);ae.length=0,ae.mode=U;case U:if(ae.flags&4096){if(Te===0)break e;ft=0;do Dt=He[K+ft++],ae.head&&Dt&&ae.length<65536&&(ae.head.comment+=String.fromCharCode(Dt));while(Dt&&ft<Te);if(ae.flags&512&&(ae.check=l(ae.check,He,ft,K)),Te-=ft,K+=ft,Dt)break e}else ae.head&&(ae.head.comment=null);ae.mode=q;case q:if(ae.flags&512){for(;Fe<16;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if(we!==(ae.check&65535)){_e.msg="header crc mismatch",ae.mode=Ie;break}we=0,Fe=0}ae.head&&(ae.head.hcrc=ae.flags>>9&1,ae.head.done=!0),_e.adler=ae.check=0,ae.mode=Z;break;case H:for(;Fe<32;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}_e.adler=ae.check=rt(we),we=0,Fe=0,ae.mode=Y;case Y:if(ae.havedict===0)return _e.next_out=Me,_e.avail_out=le,_e.next_in=K,_e.avail_in=Te,ae.hold=we,ae.bits=Fe,f;_e.adler=ae.check=1,ae.mode=Z;case Z:if(Ge===C||Ge===R)break e;case X:if(ae.last){we>>>=Fe&7,Fe-=Fe&7,ae.mode=Ce;break}for(;Fe<3;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}switch(ae.last=we&1,we>>>=1,Fe-=1,we&3){case 0:ae.mode=J;break;case 1:if(Ke(ae),ae.mode=xe,Ge===R){we>>>=2,Fe-=2;break e}break;case 2:ae.mode=te;break;case 3:_e.msg="invalid block type",ae.mode=Ie}we>>>=2,Fe-=2;break;case J:for(we>>>=Fe&7,Fe-=Fe&7;Fe<32;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if((we&65535)!==(we>>>16^65535)){_e.msg="invalid stored block lengths",ae.mode=Ie;break}if(ae.length=we&65535,we=0,Fe=0,ae.mode=Q,Ge===R)break e;case Q:ae.mode=G;case G:if(ft=ae.length,ft){if(ft>Te&&(ft=Te),ft>le&&(ft=le),ft===0)break e;i.arraySet(tt,He,K,ft,Me),Te-=ft,K+=ft,le-=ft,Me+=ft,ae.length-=ft;break}ae.mode=Z;break;case te:for(;Fe<14;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if(ae.nlen=(we&31)+257,we>>>=5,Fe-=5,ae.ndist=(we&31)+1,we>>>=5,Fe-=5,ae.ncode=(we&15)+4,we>>>=4,Fe-=4,ae.nlen>286||ae.ndist>30){_e.msg="too many length or distance symbols",ae.mode=Ie;break}ae.have=0,ae.mode=ue;case ue:for(;ae.have<ae.ncode;){for(;Fe<3;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}ae.lens[cr[ae.have++]]=we&7,we>>>=3,Fe-=3}for(;ae.have<19;)ae.lens[cr[ae.have++]]=0;if(ae.lencode=ae.lendyn,ae.lenbits=7,Jt={bits:ae.lenbits},Lt=d(m,ae.lens,0,19,ae.lencode,0,ae.work,Jt),ae.lenbits=Jt.bits,Lt){_e.msg="invalid code lengths set",ae.mode=Ie;break}ae.have=0,ae.mode=de;case de:for(;ae.have<ae.nlen+ae.ndist;){for(;Pt=ae.lencode[we&(1<<ae.lenbits)-1],At=Pt>>>24,Ct=Pt>>>16&255,Ut=Pt&65535,!(At<=Fe);){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if(Ut<16)we>>>=At,Fe-=At,ae.lens[ae.have++]=Ut;else{if(Ut===16){for(rr=At+2;Fe<rr;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if(we>>>=At,Fe-=At,ae.have===0){_e.msg="invalid bit length repeat",ae.mode=Ie;break}Dt=ae.lens[ae.have-1],ft=3+(we&3),we>>>=2,Fe-=2}else if(Ut===17){for(rr=At+3;Fe<rr;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}we>>>=At,Fe-=At,Dt=0,ft=3+(we&7),we>>>=3,Fe-=3}else{for(rr=At+7;Fe<rr;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}we>>>=At,Fe-=At,Dt=0,ft=11+(we&127),we>>>=7,Fe-=7}if(ae.have+ft>ae.nlen+ae.ndist){_e.msg="invalid bit length repeat",ae.mode=Ie;break}for(;ft--;)ae.lens[ae.have++]=Dt}}if(ae.mode===Ie)break;if(ae.lens[256]===0){_e.msg="invalid code -- missing end-of-block",ae.mode=Ie;break}if(ae.lenbits=9,Jt={bits:ae.lenbits},Lt=d(b,ae.lens,0,ae.nlen,ae.lencode,0,ae.work,Jt),ae.lenbits=Jt.bits,Lt){_e.msg="invalid literal/lengths set",ae.mode=Ie;break}if(ae.distbits=6,ae.distcode=ae.distdyn,Jt={bits:ae.distbits},Lt=d(v,ae.lens,ae.nlen,ae.ndist,ae.distcode,0,ae.work,Jt),ae.distbits=Jt.bits,Lt){_e.msg="invalid distances set",ae.mode=Ie;break}if(ae.mode=xe,Ge===R)break e;case xe:ae.mode=ve;case ve:if(Te>=6&&le>=258){_e.next_out=Me,_e.avail_out=le,_e.next_in=K,_e.avail_in=Te,ae.hold=we,ae.bits=Fe,h(_e,mt),Me=_e.next_out,tt=_e.output,le=_e.avail_out,K=_e.next_in,He=_e.input,Te=_e.avail_in,we=ae.hold,Fe=ae.bits,ae.mode===Z&&(ae.back=-1);break}for(ae.back=0;Pt=ae.lencode[we&(1<<ae.lenbits)-1],At=Pt>>>24,Ct=Pt>>>16&255,Ut=Pt&65535,!(At<=Fe);){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if(Ct&&(Ct&240)===0){for(Ft=At,fr=Ct,Qt=Ut;Pt=ae.lencode[Qt+((we&(1<<Ft+fr)-1)>>Ft)],At=Pt>>>24,Ct=Pt>>>16&255,Ut=Pt&65535,!(Ft+At<=Fe);){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}we>>>=Ft,Fe-=Ft,ae.back+=Ft}if(we>>>=At,Fe-=At,ae.back+=At,ae.length=Ut,Ct===0){ae.mode=je;break}if(Ct&32){ae.back=-1,ae.mode=Z;break}if(Ct&64){_e.msg="invalid literal/length code",ae.mode=Ie;break}ae.extra=Ct&15,ae.mode=Se;case Se:if(ae.extra){for(rr=ae.extra;Fe<rr;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}ae.length+=we&(1<<ae.extra)-1,we>>>=ae.extra,Fe-=ae.extra,ae.back+=ae.extra}ae.was=ae.length,ae.mode=Ee;case Ee:for(;Pt=ae.distcode[we&(1<<ae.distbits)-1],At=Pt>>>24,Ct=Pt>>>16&255,Ut=Pt&65535,!(At<=Fe);){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if((Ct&240)===0){for(Ft=At,fr=Ct,Qt=Ut;Pt=ae.distcode[Qt+((we&(1<<Ft+fr)-1)>>Ft)],At=Pt>>>24,Ct=Pt>>>16&255,Ut=Pt&65535,!(Ft+At<=Fe);){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}we>>>=Ft,Fe-=Ft,ae.back+=Ft}if(we>>>=At,Fe-=At,ae.back+=At,Ct&64){_e.msg="invalid distance code",ae.mode=Ie;break}ae.offset=Ut,ae.extra=Ct&15,ae.mode=he;case he:if(ae.extra){for(rr=ae.extra;Fe<rr;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}ae.offset+=we&(1<<ae.extra)-1,we>>>=ae.extra,Fe-=ae.extra,ae.back+=ae.extra}if(ae.offset>ae.dmax){_e.msg="invalid distance too far back",ae.mode=Ie;break}ae.mode=Re;case Re:if(le===0)break e;if(ft=mt-le,ae.offset>ft){if(ft=ae.offset-ft,ft>ae.whave&&ae.sane){_e.msg="invalid distance too far back",ae.mode=Ie;break}ft>ae.wnext?(ft-=ae.wnext,Ot=ae.wsize-ft):Ot=ae.wnext-ft,ft>ae.length&&(ft=ae.length),nr=ae.window}else nr=tt,Ot=Me-ae.offset,ft=ae.length;ft>le&&(ft=le),le-=ft,ae.length-=ft;do tt[Me++]=nr[Ot++];while(--ft);ae.length===0&&(ae.mode=ve);break;case je:if(le===0)break e;tt[Me++]=ae.length,le--,ae.mode=ve;break;case Ce:if(ae.wrap){for(;Fe<32;){if(Te===0)break e;Te--,we|=He[K++]<<Fe,Fe+=8}if(mt-=le,_e.total_out+=mt,ae.total+=mt,mt&&(_e.adler=ae.check=ae.flags?l(ae.check,tt,mt,Me-mt):o(ae.check,tt,mt,Me-mt)),mt=le,(ae.flags?we:rt(we))!==ae.check){_e.msg="incorrect data check",ae.mode=Ie;break}we=0,Fe=0}ae.mode=Le;case Le:if(ae.wrap&&ae.flags){for(;Fe<32;){if(Te===0)break e;Te--,we+=He[K++]<<Fe,Fe+=8}if(we!==(ae.total&4294967295)){_e.msg="incorrect length check",ae.mode=Ie;break}we=0,Fe=0}ae.mode=me;case me:Lt=E;break e;case Ie:Lt=S;break e;case Ve:return O;case nt:default:return g}return _e.next_out=Me,_e.avail_out=le,_e.next_in=K,_e.avail_in=Te,ae.hold=we,ae.bits=Fe,(ae.wsize||mt!==_e.avail_out&&ae.mode<Ie&&(ae.mode<Ce||Ge!==w))&&Ye(_e,_e.output,_e.next_out,mt-_e.avail_out),yt-=_e.avail_in,mt-=_e.avail_out,_e.total_in+=yt,_e.total_out+=mt,ae.total+=mt,ae.wrap&&mt&&(_e.adler=ae.check=ae.flags?l(ae.check,tt,mt,_e.next_out-mt):o(ae.check,tt,mt,_e.next_out-mt)),_e.data_type=ae.bits+(ae.last?64:0)+(ae.mode===Z?128:0)+(ae.mode===xe||ae.mode===Q?256:0),(yt===0&&mt===0||Ge===w)&&Lt===T&&(Lt=D),Lt}function Ae(_e){if(!_e||!_e.state)return g;var Ge=_e.state;return Ge.window&&(Ge.window=null),_e.state=null,T}function Ne(_e,Ge){var ae;return!_e||!_e.state||(ae=_e.state,(ae.wrap&2)===0)?g:(ae.head=Ge,Ge.done=!1,T)}function Ze(_e,Ge){var ae=Ge.length,He,tt,K;return!_e||!_e.state||(He=_e.state,He.wrap!==0&&He.mode!==Y)?g:He.mode===Y&&(tt=1,tt=o(tt,Ge,ae,0),tt!==He.check)?S:(K=Ye(_e,Ge,ae,ae),K?(He.mode=Ve,O):(He.havedict=1,T))}t.inflateReset=ct,t.inflateReset2=pt,t.inflateResetKeep=Qe,t.inflateInit=fe,t.inflateInit2=oe,t.inflate=ie,t.inflateEnd=Ae,t.inflateGetHeader=Ne,t.inflateSetDictionary=Ze,t.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"(e,t,n){var i=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=15,l=852,h=592,d=0,m=1,b=2,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],w=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],R=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(E,f,g,S,O,D,M,_){var A=_.bits,j=0,L=0,$=0,F=0,W=0,U=0,q=0,H=0,Y=0,Z=0,X,J,Q,G,te,ue=null,de=0,xe,ve=new i.Buf16(o+1),Se=new i.Buf16(o+1),Ee=null,he=0,Re,je,Ce;for(j=0;j<=o;j++)ve[j]=0;for(L=0;L<S;L++)ve[f[g+L]]++;for(W=A,F=o;F>=1&&ve[F]===0;F--);if(W>F&&(W=F),F===0)return O[D++]=20971520,O[D++]=20971520,_.bits=1,0;for($=1;$<F&&ve[$]===0;$++);for(W<$&&(W=$),H=1,j=1;j<=o;j++)if(H<<=1,H-=ve[j],H<0)return-1;if(H>0&&(E===d||F!==1))return-1;for(Se[1]=0,j=1;j<o;j++)Se[j+1]=Se[j]+ve[j];for(L=0;L<S;L++)f[g+L]!==0&&(M[Se[f[g+L]]++]=L);if(E===d?(ue=Ee=M,xe=19):E===m?(ue=v,de-=257,Ee=w,he-=257,xe=256):(ue=C,Ee=R,xe=-1),Z=0,L=0,j=$,te=D,U=W,q=0,Q=-1,Y=1<<W,G=Y-1,E===m&&Y>l||E===b&&Y>h)return 1;for(;;){Re=j-q,M[L]<xe?(je=0,Ce=M[L]):M[L]>xe?(je=Ee[he+M[L]],Ce=ue[de+M[L]]):(je=96,Ce=0),X=1<<j-q,J=1<<U,$=J;do J-=X,O[te+(Z>>q)+J]=Re<<24|je<<16|Ce|0;while(J!==0);for(X=1<<j-1;Z&X;)X>>=1;if(X!==0?(Z&=X-1,Z+=X):Z=0,L++,--ve[j]===0){if(j===F)break;j=f[g+M[L]]}if(j>W&&(Z&G)!==Q){for(q===0&&(q=W),te+=$,U=j-q,H=1<<U;U+q<F&&(H-=ve[U+q],!(H<=0));)U++,H<<=1;if(Y+=1<<U,E===m&&Y>l||E===b&&Y>h)return 1;Q=Z&G,O[Q]=W<<24|U<<16|te-D|0}}return Z!==0&&(O[te+Z]=j-q<<24|4194304|0),_.bits=W,0}},"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"(e){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"(e,t,n){var i=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=4,l=0,h=1,d=2;function m(ie){for(var Ae=ie.length;--Ae>=0;)ie[Ae]=0}var b=0,v=1,w=2,C=3,R=258,T=29,E=256,f=E+1+T,g=30,S=19,O=2*f+1,D=15,M=16,_=7,A=256,j=16,L=17,$=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=512,Y=new Array((f+2)*2);m(Y);var Z=new Array(g*2);m(Z);var X=new Array(H);m(X);var J=new Array(R-C+1);m(J);var Q=new Array(T);m(Q);var G=new Array(g);m(G);function te(ie,Ae,Ne,Ze,_e){this.static_tree=ie,this.extra_bits=Ae,this.extra_base=Ne,this.elems=Ze,this.max_length=_e,this.has_stree=ie&&ie.length}var ue,de,xe;function ve(ie,Ae){this.dyn_tree=ie,this.max_code=0,this.stat_desc=Ae}function Se(ie){return ie<256?X[ie]:X[256+(ie>>>7)]}function Ee(ie,Ae){ie.pending_buf[ie.pending++]=Ae&255,ie.pending_buf[ie.pending++]=Ae>>>8&255}function he(ie,Ae,Ne){ie.bi_valid>M-Ne?(ie.bi_buf|=Ae<<ie.bi_valid&65535,Ee(ie,ie.bi_buf),ie.bi_buf=Ae>>M-ie.bi_valid,ie.bi_valid+=Ne-M):(ie.bi_buf|=Ae<<ie.bi_valid&65535,ie.bi_valid+=Ne)}function Re(ie,Ae,Ne){he(ie,Ne[Ae*2],Ne[Ae*2+1])}function je(ie,Ae){var Ne=0;do Ne|=ie&1,ie>>>=1,Ne<<=1;while(--Ae>0);return Ne>>>1}function Ce(ie){ie.bi_valid===16?(Ee(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):ie.bi_valid>=8&&(ie.pending_buf[ie.pending++]=ie.bi_buf&255,ie.bi_buf>>=8,ie.bi_valid-=8)}function Le(ie,Ae){var Ne=Ae.dyn_tree,Ze=Ae.max_code,_e=Ae.stat_desc.static_tree,Ge=Ae.stat_desc.has_stree,ae=Ae.stat_desc.extra_bits,He=Ae.stat_desc.extra_base,tt=Ae.stat_desc.max_length,K,Me,Te,le,we,Fe,yt=0;for(le=0;le<=D;le++)ie.bl_count[le]=0;for(Ne[ie.heap[ie.heap_max]*2+1]=0,K=ie.heap_max+1;K<O;K++)Me=ie.heap[K],le=Ne[Ne[Me*2+1]*2+1]+1,le>tt&&(le=tt,yt++),Ne[Me*2+1]=le,!(Me>Ze)&&(ie.bl_count[le]++,we=0,Me>=He&&(we=ae[Me-He]),Fe=Ne[Me*2],ie.opt_len+=Fe*(le+we),Ge&&(ie.static_len+=Fe*(_e[Me*2+1]+we)));if(yt!==0){do{for(le=tt-1;ie.bl_count[le]===0;)le--;ie.bl_count[le]--,ie.bl_count[le+1]+=2,ie.bl_count[tt]--,yt-=2}while(yt>0);for(le=tt;le!==0;le--)for(Me=ie.bl_count[le];Me!==0;)Te=ie.heap[--K],!(Te>Ze)&&(Ne[Te*2+1]!==le&&(ie.opt_len+=(le-Ne[Te*2+1])*Ne[Te*2],Ne[Te*2+1]=le),Me--)}}function me(ie,Ae,Ne){var Ze=new Array(D+1),_e=0,Ge,ae;for(Ge=1;Ge<=D;Ge++)Ze[Ge]=_e=_e+Ne[Ge-1]<<1;for(ae=0;ae<=Ae;ae++){var He=ie[ae*2+1];He!==0&&(ie[ae*2]=je(Ze[He]++,He))}}function Ie(){var ie,Ae,Ne,Ze,_e,Ge=new Array(D+1);for(Ne=0,Ze=0;Ze<T-1;Ze++)for(Q[Ze]=Ne,ie=0;ie<1<<F[Ze];ie++)J[Ne++]=Ze;for(J[Ne-1]=Ze,_e=0,Ze=0;Ze<16;Ze++)for(G[Ze]=_e,ie=0;ie<1<<W[Ze];ie++)X[_e++]=Ze;for(_e>>=7;Ze<g;Ze++)for(G[Ze]=_e<<7,ie=0;ie<1<<W[Ze]-7;ie++)X[256+_e++]=Ze;for(Ae=0;Ae<=D;Ae++)Ge[Ae]=0;for(ie=0;ie<=143;)Y[ie*2+1]=8,ie++,Ge[8]++;for(;ie<=255;)Y[ie*2+1]=9,ie++,Ge[9]++;for(;ie<=279;)Y[ie*2+1]=7,ie++,Ge[7]++;for(;ie<=287;)Y[ie*2+1]=8,ie++,Ge[8]++;for(me(Y,f+1,Ge),ie=0;ie<g;ie++)Z[ie*2+1]=5,Z[ie*2]=je(ie,5);ue=new te(Y,F,E+1,f,D),de=new te(Z,W,0,g,D),xe=new te(new Array(0),U,0,S,_)}function Ve(ie){var Ae;for(Ae=0;Ae<f;Ae++)ie.dyn_ltree[Ae*2]=0;for(Ae=0;Ae<g;Ae++)ie.dyn_dtree[Ae*2]=0;for(Ae=0;Ae<S;Ae++)ie.bl_tree[Ae*2]=0;ie.dyn_ltree[A*2]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function nt(ie){ie.bi_valid>8?Ee(ie,ie.bi_buf):ie.bi_valid>0&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function it(ie,Ae,Ne,Ze){nt(ie),Ee(ie,Ne),Ee(ie,~Ne),i.arraySet(ie.pending_buf,ie.window,Ae,Ne,ie.pending),ie.pending+=Ne}function ot(ie,Ae,Ne,Ze){var _e=Ae*2,Ge=Ne*2;return ie[_e]<ie[Ge]||ie[_e]===ie[Ge]&&Ze[Ae]<=Ze[Ne]}function at(ie,Ae,Ne){for(var Ze=ie.heap[Ne],_e=Ne<<1;_e<=ie.heap_len&&(_e<ie.heap_len&&ot(Ae,ie.heap[_e+1],ie.heap[_e],ie.depth)&&_e++,!ot(Ae,Ze,ie.heap[_e],ie.depth));)ie.heap[Ne]=ie.heap[_e],Ne=_e,_e<<=1;ie.heap[Ne]=Ze}function Je(ie,Ae,Ne){var Ze,_e,Ge=0,ae,He;if(ie.last_lit!==0)do Ze=ie.pending_buf[ie.d_buf+Ge*2]<<8|ie.pending_buf[ie.d_buf+Ge*2+1],_e=ie.pending_buf[ie.l_buf+Ge],Ge++,Ze===0?Re(ie,_e,Ae):(ae=J[_e],Re(ie,ae+E+1,Ae),He=F[ae],He!==0&&(_e-=Q[ae],he(ie,_e,He)),Ze--,ae=Se(Ze),Re(ie,ae,Ne),He=W[ae],He!==0&&(Ze-=G[ae],he(ie,Ze,He)));while(Ge<ie.last_lit);Re(ie,A,Ae)}function rt(ie,Ae){var Ne=Ae.dyn_tree,Ze=Ae.stat_desc.static_tree,_e=Ae.stat_desc.has_stree,Ge=Ae.stat_desc.elems,ae,He,tt=-1,K;for(ie.heap_len=0,ie.heap_max=O,ae=0;ae<Ge;ae++)Ne[ae*2]!==0?(ie.heap[++ie.heap_len]=tt=ae,ie.depth[ae]=0):Ne[ae*2+1]=0;for(;ie.heap_len<2;)K=ie.heap[++ie.heap_len]=tt<2?++tt:0,Ne[K*2]=1,ie.depth[K]=0,ie.opt_len--,_e&&(ie.static_len-=Ze[K*2+1]);for(Ae.max_code=tt,ae=ie.heap_len>>1;ae>=1;ae--)at(ie,Ne,ae);K=Ge;do ae=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],at(ie,Ne,1),He=ie.heap[1],ie.heap[--ie.heap_max]=ae,ie.heap[--ie.heap_max]=He,Ne[K*2]=Ne[ae*2]+Ne[He*2],ie.depth[K]=(ie.depth[ae]>=ie.depth[He]?ie.depth[ae]:ie.depth[He])+1,Ne[ae*2+1]=Ne[He*2+1]=K,ie.heap[1]=K++,at(ie,Ne,1);while(ie.heap_len>=2);ie.heap[--ie.heap_max]=ie.heap[1],Le(ie,Ae),me(Ne,tt,ie.bl_count)}function et(ie,Ae,Ne){var Ze,_e=-1,Ge,ae=Ae[1],He=0,tt=7,K=4;for(ae===0&&(tt=138,K=3),Ae[(Ne+1)*2+1]=65535,Ze=0;Ze<=Ne;Ze++)Ge=ae,ae=Ae[(Ze+1)*2+1],!(++He<tt&&Ge===ae)&&(He<K?ie.bl_tree[Ge*2]+=He:Ge!==0?(Ge!==_e&&ie.bl_tree[Ge*2]++,ie.bl_tree[j*2]++):He<=10?ie.bl_tree[L*2]++:ie.bl_tree[$*2]++,He=0,_e=Ge,ae===0?(tt=138,K=3):Ge===ae?(tt=6,K=3):(tt=7,K=4))}function Qe(ie,Ae,Ne){var Ze,_e=-1,Ge,ae=Ae[1],He=0,tt=7,K=4;for(ae===0&&(tt=138,K=3),Ze=0;Ze<=Ne;Ze++)if(Ge=ae,ae=Ae[(Ze+1)*2+1],!(++He<tt&&Ge===ae)){if(He<K)do Re(ie,Ge,ie.bl_tree);while(--He!==0);else Ge!==0?(Ge!==_e&&(Re(ie,Ge,ie.bl_tree),He--),Re(ie,j,ie.bl_tree),he(ie,He-3,2)):He<=10?(Re(ie,L,ie.bl_tree),he(ie,He-3,3)):(Re(ie,$,ie.bl_tree),he(ie,He-11,7));He=0,_e=Ge,ae===0?(tt=138,K=3):Ge===ae?(tt=6,K=3):(tt=7,K=4)}}function ct(ie){var Ae;for(et(ie,ie.dyn_ltree,ie.l_desc.max_code),et(ie,ie.dyn_dtree,ie.d_desc.max_code),rt(ie,ie.bl_desc),Ae=S-1;Ae>=3&&ie.bl_tree[q[Ae]*2+1]===0;Ae--);return ie.opt_len+=3*(Ae+1)+5+5+4,Ae}function pt(ie,Ae,Ne,Ze){var _e;for(he(ie,Ae-257,5),he(ie,Ne-1,5),he(ie,Ze-4,4),_e=0;_e<Ze;_e++)he(ie,ie.bl_tree[q[_e]*2+1],3);Qe(ie,ie.dyn_ltree,Ae-1),Qe(ie,ie.dyn_dtree,Ne-1)}function oe(ie){var Ae=4093624447,Ne;for(Ne=0;Ne<=31;Ne++,Ae>>>=1)if(Ae&1&&ie.dyn_ltree[Ne*2]!==0)return l;if(ie.dyn_ltree[18]!==0||ie.dyn_ltree[20]!==0||ie.dyn_ltree[26]!==0)return h;for(Ne=32;Ne<E;Ne++)if(ie.dyn_ltree[Ne*2]!==0)return h;return l}var fe=!1;function pe(ie){fe||(Ie(),fe=!0),ie.l_desc=new ve(ie.dyn_ltree,ue),ie.d_desc=new ve(ie.dyn_dtree,de),ie.bl_desc=new ve(ie.bl_tree,xe),ie.bi_buf=0,ie.bi_valid=0,Ve(ie)}function Be(ie,Ae,Ne,Ze){he(ie,(b<<1)+(Ze?1:0),3),it(ie,Ae,Ne)}function ke(ie){he(ie,v<<1,3),Re(ie,A,Y),Ce(ie)}function Ke(ie,Ae,Ne,Ze){var _e,Ge,ae=0;ie.level>0?(ie.strm.data_type===d&&(ie.strm.data_type=oe(ie)),rt(ie,ie.l_desc),rt(ie,ie.d_desc),ae=ct(ie),_e=ie.opt_len+3+7>>>3,Ge=ie.static_len+3+7>>>3,Ge<=_e&&(_e=Ge)):_e=Ge=Ne+5,Ne+4<=_e&&Ae!==-1?Be(ie,Ae,Ne,Ze):ie.strategy===o||Ge===_e?(he(ie,(v<<1)+(Ze?1:0),3),Je(ie,Y,Z)):(he(ie,(w<<1)+(Ze?1:0),3),pt(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,ae+1),Je(ie,ie.dyn_ltree,ie.dyn_dtree)),Ve(ie),Ze&&nt(ie)}function Ye(ie,Ae,Ne){return ie.pending_buf[ie.d_buf+ie.last_lit*2]=Ae>>>8&255,ie.pending_buf[ie.d_buf+ie.last_lit*2+1]=Ae&255,ie.pending_buf[ie.l_buf+ie.last_lit]=Ne&255,ie.last_lit++,Ae===0?ie.dyn_ltree[Ne*2]++:(ie.matches++,Ae--,ie.dyn_ltree[(J[Ne]+E+1)*2]++,ie.dyn_dtree[Se(Ae)*2]++),ie.last_lit===ie.lit_bufsize-1}t._tr_init=pe,t._tr_stored_block=Be,t._tr_flush_block=Ke,t._tr_tally=Ye,t._tr_align=ke},"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"(e){function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=t},"./src/3Dmol.ts"(e,t,n){n.r(t),n.d(t,{CAP:()=>h.CAP,CC:()=>o.CC,CONTEXTS_PER_VIEWPORT:()=>b.CONTEXTS_PER_VIEWPORT,Color:()=>o.Color,CustomLinear:()=>v.CustomLinear,Cylinder:()=>O.Cylinder,GLDraw:()=>h.GLDraw,GLModel:()=>d.GLModel,GLShape:()=>m.GLShape,GLViewer:()=>b.GLViewer,GLVolumetricRender:()=>g.GLVolumetricRender,Gradient:()=>v.Gradient,GradientType:()=>v.GradientType,Label:()=>w.Label,LabelCount:()=>w.LabelCount,MarchingCube:()=>T.MarchingCube,MarchingCubeInitializer:()=>T.MarchingCubeInitializer,Matrix3:()=>S.Matrix3,Matrix4:()=>S.Matrix4,Parsers:()=>C.Parsers,PausableTimer:()=>E.PausableTimer,PointGrid:()=>T.PointGrid,ProteinSurface:()=>T.ProteinSurface,Quaternion:()=>S.Quaternion,ROYGB:()=>v.ROYGB,RWB:()=>v.RWB,Ray:()=>S.Ray,Sinebow:()=>v.Sinebow,Sphere:()=>O.Sphere,SurfaceType:()=>T.SurfaceType,Triangle:()=>O.Triangle,Vector2:()=>S.Vector2,Vector3:()=>S.Vector3,VolumeData:()=>f.VolumeData,adjustVolumeStyle:()=>E.adjustVolumeStyle,applyPartialCharges:()=>R.applyPartialCharges,autoinit:()=>i.autoinit,autoload:()=>i.autoload,base64ToArray:()=>E.base64ToArray,bondLength:()=>C.bondLength,builtinColorSchemes:()=>o.builtinColorSchemes,builtinGradients:()=>v.builtinGradients,chains:()=>o.chains,clamp:()=>S.clamp,conversionMatrix3:()=>S.conversionMatrix3,createStereoViewer:()=>b.createStereoViewer,createViewer:()=>b.createViewer,createViewerGrid:()=>b.createViewerGrid,deepCopy:()=>E.deepCopy,degToRad:()=>S.degToRad,download:()=>E.download,drawCartoon:()=>l.drawCartoon,elementColors:()=>o.elementColors,extend:()=>E.extend,get:()=>E.get,getAtomProperty:()=>E.getAtomProperty,getColorFromStyle:()=>E.getColorFromStyle,getElement:()=>E.getElement,getExtent:()=>E.getExtent,getGradient:()=>v.getGradient,getPropertyRange:()=>E.getPropertyRange,getbin:()=>E.getbin,htmlColors:()=>o.htmlColors,inflateString:()=>E.inflateString,isEmptyObject:()=>E.isEmptyObject,isNumeric:()=>E.isNumeric,makeFunction:()=>E.makeFunction,mergeGeos:()=>E.mergeGeos,normalizeValue:()=>v.normalizeValue,partialCharges:()=>R.partialCharges,processing_autoinit:()=>i.processing_autoinit,residues:()=>o.residues,setBondLength:()=>C.setBondLength,setSyncSurface:()=>T.setSyncSurface,specStringToObject:()=>E.specStringToObject,splitMesh:()=>m.splitMesh,ssColors:()=>o.ssColors,subdivide_spline:()=>l.subdivide_spline,syncSurface:()=>T.syncSurface,viewers:()=>i.viewers});var i=n("./src/autoload.ts"),o=n("./src/colors.ts"),l=n("./src/glcartoon.ts"),h=n("./src/GLDraw.ts"),d=n("./src/GLModel.ts"),m=n("./src/GLShape.ts"),b=n("./src/GLViewer.ts"),v=n("./src/Gradient.ts"),w=n("./src/Label.ts"),C=n("./src/parsers/index.ts"),R=n("./src/partialCharges.ts"),T=n("./src/ProteinSurface4.ts");n("./src/specs.ts");var E=n("./src/utilities.ts"),f=n("./src/VolumeData.ts"),g=n("./src/VolumetricRender.ts"),S=n("./src/WebGL/math/index.ts"),O=n("./src/WebGL/shapes/index.ts")},"./src/GLDraw.ts"(e,t,n){n.r(t),n.d(t,{CAP:()=>o,GLDraw:()=>l});var i=n("./src/WebGL/math/index.ts"),o;(function(h){h[h.NONE=0]="NONE",h[h.FLAT=1]="FLAT",h[h.ROUND=2]="ROUND"})(o||(o={}));var l;(function(h){function d(E,f,g){var S=Math.hypot(E,f),O,D,M,_,A;S<1e-4?(D=0,M=1):(D=-E/S,M=f/S),f=-D*E+M*f,O=Math.hypot(f,g),O<1e-4?(_=0,A=1):(_=g/O,A=f/O);var j=new Float32Array(9);return j[0]=M,j[1]=D,j[2]=0,j[3]=-D*A,j[4]=M*A,j[5]=_,j[6]=D*_,j[7]=-M*_,j[8]=A,j}class m{constructor(){this.cache={};let f=[],g=4,S=Math.pow(2,g),O=2,D=Math.pow(2,O),M=S/D,_;for(f[0]=new i.Vector3(-1,0,0),f[M]=new i.Vector3(0,0,1),f[M*2]=new i.Vector3(1,0,0),f[M*3]=new i.Vector3(0,0,-1),O=3;O<=g;O++){for(D=Math.pow(2,O-1),M=S/D,_=0;_<D-1;_++)f[M/2+_*M]=f[_*M].clone().add(f[(_+1)*M]).normalize();_=D-1,f[M/2+_*M]=f[_*M].clone().add(f[0]).normalize()}this.basisVectors=f}getVerticesForRadius(f,g,S){if(typeof this.cache<"u"&&this.cache[f]!==void 0&&this.cache[f][g+S]!==void 0)return this.cache[f][g+S];for(var O=this.basisVectors.length,D=[],M=[],_,A=0;A<O;A++)D.push(this.basisVectors[A].clone().multiplyScalar(f)),D.push(this.basisVectors[A].clone().multiplyScalar(f)),_=this.basisVectors[A].clone().normalize(),M.push(_),M.push(_);var j=[],L=10,$=O,F=0,W=Math.PI*2,U=0,q=Math.PI,H,Y,Z=!1,X=!1;for(Y=0;Y<=L;Y++){Z=Y===0||Y===L,X=Y===L/2;var J=[],Q=[];for(H=0;H<=$;H++){if(X){var G=H<$?2*H:0;Q.push(G+1),J.push(G);continue}var te=H/$,ue=Y/L;if(!Z||H===0)if(H<$){var de=new i.Vector3;de.x=-f*Math.cos(F+te*W)*Math.sin(U+ue*q),g==1?de.y=0:de.y=f*Math.cos(U+ue*q),de.z=f*Math.sin(F+te*W)*Math.sin(U+ue*q),Math.abs(de.x)<1e-5&&(de.x=0),Math.abs(de.y)<1e-5&&(de.y=0),Math.abs(de.z)<1e-5&&(de.z=0),g==o.FLAT?(_=new i.Vector3(0,Math.cos(U+ue*q),0),_.normalize()):(_=new i.Vector3(de.x,de.y,de.z),_.normalize()),D.push(de),M.push(_),J.push(D.length-1)}else J.push(D.length-$);else Z&&J.push(D.length-1)}X&&j.push(Q),j.push(J)}var xe={vertices:D,normals:M,verticesRows:j,w:$,h:L};return f in this.cache||(this.cache[f]={}),this.cache[f][g+S]=xe,xe}}var b=new m;function v(E,f,g,S,O,D=0,M=0){if(!f||!g)return;let _=function(Fe){if(typeof Fe=="string"){let yt=Fe;return yt.toLowerCase()=="flat"?o.FLAT:yt.toLowerCase()=="round"?o.ROUND:o.NONE}else return Fe};D=_(D),M=_(M);var A=M||D;O=O||{r:0,g:0,b:0};var j=d(g.x-f.x,g.y-f.y,g.z-f.z),L=b.getVerticesForRadius(S,M,"to"),$=L.w,F=L.h,W=A?F*$+2:2*$,U=E.updateGeoGroup(W),q=L.vertices,H=L.normals,Y=L.verticesRows,Z=Y[F/2],X=Y[F/2+1],J=U.vertices,Q,G,te,ue,de,xe,ve=U.vertexArray,Se=U.normalArray,Ee=U.colorArray,he=U.faceArray;for(te=0;te<$;++te){var Re=2*te;ue=j[0]*q[Re].x+j[3]*q[Re].y+j[6]*q[Re].z,de=j[1]*q[Re].x+j[4]*q[Re].y+j[7]*q[Re].z,xe=j[5]*q[Re].y+j[8]*q[Re].z,Q=3*(J+Re),G=U.faceidx,ve[Q]=ue+f.x,ve[Q+1]=de+f.y,ve[Q+2]=xe+f.z,ve[Q+3]=ue+g.x,ve[Q+4]=de+g.y,ve[Q+5]=xe+g.z,Se[Q]=ue,Se[Q+3]=ue,Se[Q+1]=de,Se[Q+4]=de,Se[Q+2]=xe,Se[Q+5]=xe,Ee[Q]=O.r,Ee[Q+3]=O.r,Ee[Q+1]=O.g,Ee[Q+4]=O.g,Ee[Q+2]=O.b,Ee[Q+5]=O.b,he[G]=X[te]+J,he[G+1]=X[te+1]+J,he[G+2]=Z[te]+J,he[G+3]=Z[te]+J,he[G+4]=X[te+1]+J,he[G+5]=Z[te+1]+J,U.faceidx+=6}if(A){var je=M?0:F/2,Ce=D?F+1:F/2+1,Le,me,Ie,Ve,nt,it,ot,at,Je,rt,et,Qe,ct,pt,oe,fe,pe,Be,ke,Ke,Ye,ie,Ae,Ne,Ze,_e,Ge,ae,He,tt,K,Me;for(de=je;de<Ce;de++)if(de!==F/2){var Te=de<=F/2?g:f,le=b.getVerticesForRadius(S,M,"to"),we=b.getVerticesForRadius(S,D,"from");for(Te===g?(q=le.vertices,H=le.normals,Y=le.verticesRows):Te==f&&(q=we.vertices,H=we.normals,Y=we.verticesRows),ue=0;ue<$;ue++)G=U.faceidx,Le=Y[de][ue+1],He=(Le+J)*3,me=Y[de][ue],tt=(me+J)*3,Ie=Y[de+1][ue],K=(Ie+J)*3,Ve=Y[de+1][ue+1],Me=(Ve+J)*3,nt=j[0]*q[Le].x+j[3]*q[Le].y+j[6]*q[Le].z,it=j[0]*q[me].x+j[3]*q[me].y+j[6]*q[me].z,ot=j[0]*q[Ie].x+j[3]*q[Ie].y+j[6]*q[Ie].z,at=j[0]*q[Ve].x+j[3]*q[Ve].y+j[6]*q[Ve].z,Je=j[1]*q[Le].x+j[4]*q[Le].y+j[7]*q[Le].z,rt=j[1]*q[me].x+j[4]*q[me].y+j[7]*q[me].z,et=j[1]*q[Ie].x+j[4]*q[Ie].y+j[7]*q[Ie].z,Qe=j[1]*q[Ve].x+j[4]*q[Ve].y+j[7]*q[Ve].z,ct=j[5]*q[Le].y+j[8]*q[Le].z,pt=j[5]*q[me].y+j[8]*q[me].z,oe=j[5]*q[Ie].y+j[8]*q[Ie].z,fe=j[5]*q[Ve].y+j[8]*q[Ve].z,ve[He]=nt+Te.x,ve[tt]=it+Te.x,ve[K]=ot+Te.x,ve[Me]=at+Te.x,ve[He+1]=Je+Te.y,ve[tt+1]=rt+Te.y,ve[K+1]=et+Te.y,ve[Me+1]=Qe+Te.y,ve[He+2]=ct+Te.z,ve[tt+2]=pt+Te.z,ve[K+2]=oe+Te.z,ve[Me+2]=fe+Te.z,Ee[He]=O.r,Ee[tt]=O.r,Ee[K]=O.r,Ee[Me]=O.r,Ee[He+1]=O.g,Ee[tt+1]=O.g,Ee[K+1]=O.g,Ee[Me+1]=O.g,Ee[He+2]=O.b,Ee[tt+2]=O.b,Ee[K+2]=O.b,Ee[Me+2]=O.b,pe=j[0]*H[Le].x+j[3]*H[Le].y+j[6]*H[Le].z,Be=j[0]*H[me].x+j[3]*H[me].y+j[6]*H[me].z,ke=j[0]*H[Ie].x+j[3]*H[Ie].y+j[6]*H[Ie].z,Ke=j[0]*H[Ve].x+j[3]*H[Ve].y+j[6]*H[Ve].z,Ye=j[1]*H[Le].x+j[4]*H[Le].y+j[7]*H[Le].z,ie=j[1]*H[me].x+j[4]*H[me].y+j[7]*H[me].z,Ae=j[1]*H[Ie].x+j[4]*H[Ie].y+j[7]*H[Ie].z,Ne=j[1]*H[Ve].x+j[4]*H[Ve].y+j[7]*H[Ve].z,Ze=j[5]*H[Le].y+j[8]*H[Le].z,_e=j[5]*H[me].y+j[8]*H[me].z,Ge=j[5]*H[Ie].y+j[8]*H[Ie].z,ae=j[5]*H[Ve].y+j[8]*H[Ve].z,de===0?(Se[He]=pe,Se[K]=ke,Se[Me]=Ke,Se[He+1]=Ye,Se[K+1]=Ae,Se[Me+1]=Ne,Se[He+2]=Ze,Se[K+2]=Ge,Se[Me+2]=ae,he[G]=Le+J,he[G+1]=Ie+J,he[G+2]=Ve+J,U.faceidx+=3):de===Ce-1?(Se[He]=pe,Se[tt]=Be,Se[K]=ke,Se[He+1]=Ye,Se[tt+1]=ie,Se[K+1]=Ae,Se[He+2]=Ze,Se[tt+2]=_e,Se[K+2]=Ge,he[G]=Le+J,he[G+1]=me+J,he[G+2]=Ie+J,U.faceidx+=3):(Se[He]=pe,Se[tt]=Be,Se[Me]=Ke,Se[He+1]=Ye,Se[tt+1]=ie,Se[Me+1]=Ne,Se[He+2]=Ze,Se[tt+2]=_e,Se[Me+2]=ae,Se[tt]=Be,Se[K]=ke,Se[Me]=Ke,Se[tt+1]=ie,Se[K+1]=Ae,Se[Me+1]=Ne,Se[tt+2]=_e,Se[K+2]=Ge,Se[Me+2]=ae,he[G]=Le+J,he[G+1]=me+J,he[G+2]=Ve+J,he[G+3]=me+J,he[G+4]=Ie+J,he[G+5]=Ve+J,U.faceidx+=6)}}U.vertices+=W}h.drawCylinder=v;function w(E,f,g,S,O){if(!f||!g)return;O=O||{r:0,g:0,b:0};let D=new i.Vector3(g.x-f.x,g.y-f.y,g.z-f.z);var M=d(D.x,D.y,D.z);D=D.normalize();var _=b.basisVectors.length,A=b.basisVectors,j=_+2,L=E.updateGeoGroup(j),$=L.vertices,F,W,U,q,H,Y,Z=L.vertexArray,X=L.normalArray,J=L.colorArray,Q=L.faceArray;for(F=$*3,Z[F]=f.x,Z[F+1]=f.y,Z[F+2]=f.z,X[F]=-D.x,X[F+1]=-D.y,X[F+2]=-D.z,J[F]=O.r,J[F+1]=O.g,J[F+2]=O.b,Z[F+3]=g.x,Z[F+4]=g.y,Z[F+5]=g.z,X[F+3]=D.x,X[F+4]=D.y,X[F+5]=D.z,J[F+3]=O.r,J[F+4]=O.g,J[F+5]=O.b,F+=6,U=0;U<_;++U){var G=A[U].clone();G.multiplyScalar(S),q=M[0]*G.x+M[3]*G.y+M[6]*G.z,H=M[1]*G.x+M[4]*G.y+M[7]*G.z,Y=M[5]*G.y+M[8]*G.z,Z[F]=q+f.x,Z[F+1]=H+f.y,Z[F+2]=Y+f.z,X[F]=q,X[F+1]=H,X[F+2]=Y,J[F]=O.r,J[F+1]=O.g,J[F+2]=O.b,F+=3}for(L.vertices+=_+2,W=L.faceidx,U=0;U<_;U++){var te=$+2+U,ue=$+2+(U+1)%_;Q[W]=te,Q[W+1]=ue,Q[W+2]=$,W+=3,Q[W]=te,Q[W+1]=ue,Q[W+2]=$+1,W+=3}L.faceidx+=6*_}h.drawCone=w;class C{constructor(){this.cache=new Map}getVerticesForRadius(f,g){g=g||2,this.cache.has(g)||this.cache.set(g,new Map);let S=this.cache.get(g);if(S.has(f))return S.get(f);var O={vertices:[],verticesRows:[],normals:[]},D=16*g,M=10*g;f<1&&(D=10*g,M=8*g);var _=0,A=Math.PI*2,j=0,L=Math.PI,$,F;for(F=0;F<=M;F++){let U=[];for($=0;$<=D;$++){let q=$/D,H=F/M,Y=-f*Math.cos(_+q*A)*Math.sin(j+H*L),Z=f*Math.cos(j+H*L),X=f*Math.sin(_+q*A)*Math.sin(j+H*L);var W=new i.Vector3(Y,Z,X);W.normalize(),O.vertices.push({x:Y,y:Z,z:X}),O.normals.push(W),U.push(O.vertices.length-1)}O.verticesRows.push(U)}return S.set(f,O),O}}var R=new C;function T(E,f,g,S,O){var D=R.getVerticesForRadius(g,O),M=D.vertices,_=D.normals,A=E.updateGeoGroup(M.length),j=A.vertices,L=A.vertexArray,$=A.colorArray,F=A.faceArray,W=A.lineArray,U=A.normalArray;for(let Y=0,Z=M.length;Y<Z;++Y){let X=3*(j+Y),J=M[Y];L[X]=J.x+f.x,L[X+1]=J.y+f.y,L[X+2]=J.z+f.z,$[X]=S.r,$[X+1]=S.g,$[X+2]=S.b}A.vertices+=M.length;let q=D.verticesRows,H=q.length-1;for(let Y=0;Y<H;Y++){let Z=q[Y].length-1;for(let X=0;X<Z;X++){let J=A.faceidx,Q=A.lineidx,G=q[Y][X+1]+j,te=G*3,ue=q[Y][X]+j,de=ue*3,xe=q[Y+1][X]+j,ve=xe*3,Se=q[Y+1][X+1]+j,Ee=Se*3,he=_[G-j],Re=_[ue-j],je=_[xe-j],Ce=_[Se-j];Math.abs(M[G-j].y)===g?(U[te]=he.x,U[ve]=je.x,U[Ee]=Ce.x,U[te+1]=he.y,U[ve+1]=je.y,U[Ee+1]=Ce.y,U[te+2]=he.z,U[ve+2]=je.z,U[Ee+2]=Ce.z,F[J]=G,F[J+1]=xe,F[J+2]=Se,W[Q]=G,W[Q+1]=xe,W[Q+2]=G,W[Q+3]=Se,W[Q+4]=xe,W[Q+5]=Se,A.faceidx+=3,A.lineidx+=6):Math.abs(M[xe-j].y)===g?(U[te]=he.x,U[de]=Re.x,U[ve]=je.x,U[te+1]=he.y,U[de+1]=Re.y,U[ve+1]=je.y,U[te+2]=he.z,U[de+2]=Re.z,U[ve+2]=je.z,F[J]=G,F[J+1]=ue,F[J+2]=xe,W[Q]=G,W[Q+1]=ue,W[Q+2]=G,W[Q+3]=xe,W[Q+4]=ue,W[Q+5]=xe,A.faceidx+=3,A.lineidx+=6):(U[te]=he.x,U[de]=Re.x,U[Ee]=Ce.x,U[te+1]=he.y,U[de+1]=Re.y,U[Ee+1]=Ce.y,U[te+2]=he.z,U[de+2]=Re.z,U[Ee+2]=Ce.z,U[de]=Re.x,U[ve]=je.x,U[Ee]=Ce.x,U[de+1]=Re.y,U[ve+1]=je.y,U[Ee+1]=Ce.y,U[de+2]=Re.z,U[ve+2]=je.z,U[Ee+2]=Ce.z,F[J]=G,F[J+1]=ue,F[J+2]=Se,F[J+3]=ue,F[J+4]=xe,F[J+5]=Se,W[Q]=G,W[Q+1]=ue,W[Q+2]=G,W[Q+3]=Se,W[Q+4]=ue,W[Q+5]=xe,W[Q+6]=xe,W[Q+7]=Se,A.faceidx+=6,A.lineidx+=8)}}}h.drawSphere=T})(l||(l={}))},"./src/GLModel.ts"(e,t,n){n.r(t),n.d(t,{GLModel:()=>T});var i=n("./src/WebGL/index.ts"),o=n("./src/WebGL/shapes/index.ts"),l=n("./src/WebGL/math/index.ts"),h=n("./src/colors.ts"),d=n("./src/GLDraw.ts"),m=n("./src/glcartoon.ts"),b=n("./src/utilities.ts"),v=n("./src/Gradient.ts"),w=n("./src/parsers/index.ts"),C=n("./node_modules/netcdfjs/lib-esm/index.js"),R=n("./src/parsers/utils/assignBonds.ts");class T{static sameObj(f,g){return f&&g?JSON.stringify(f)==JSON.stringify(g):f==g}constructor(f,g,S){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new l.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=h.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=g||{},this.viewer=S,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:h.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=f}getRadiusFromStyle(f,g){var S=this.defaultSphereRadius;if(typeof g.radius<"u")S=g.radius;else if(T.vdwRadii[f.elem])S=T.vdwRadii[f.elem];else if(f.elem.length>1){let O=f.elem;O=O[0].toUpperCase()+O[1].toLowerCase(),T.vdwRadii[O]&&(S=T.vdwRadii[O])}return typeof g.scale<"u"&&(S*=g.scale),S}drawAtomCross(f,g){if(f.style.cross){var S=f.style.cross;if(!S.hidden){var O=S.linewidth||T.defaultlineWidth;g[O]||(g[O]=new i.Geometry);var D=g[O].updateGeoGroup(6),M=this.getRadiusFromStyle(f,S),_=[[M,0,0],[-M,0,0],[0,M,0],[0,-M,0],[0,0,M],[0,0,-M]],A=f.clickable||f.hoverable;A&&f.intersectionShape===void 0&&(f.intersectionShape={sphere:[],cylinder:[],line:[]});for(var j=(0,b.getColorFromStyle)(f,S),L=D.vertexArray,$=D.colorArray,F=0;F<6;F++){var W=D.vertices*3;if(D.vertices++,L[W]=f.x+_[F][0],L[W+1]=f.y+_[F][1],L[W+2]=f.z+_[F][2],$[W]=j.r,$[W+1]=j.g,$[W+2]=j.b,A){var U=new l.Vector3(_[F][0],_[F][1],_[F][2]);U.multiplyScalar(.1),U.set(U.x+f.x,U.y+f.y,U.z+f.z),f.intersectionShape.line.push(U)}}}}}getGoodCross(f,g,S,O){for(var D=null,M=-1,_=0,A=f.bonds.length;_<A;_++)if(f.bonds[_]!=g.index){let L=f.bonds[_],$=this.atoms[L],W=new l.Vector3($.x,$.y,$.z).clone();W.sub(S);let U=W.clone();U.cross(O);var j=U.lengthSq();if(j>M&&(M=j,D=U,M>.1))return D}return D}getSideBondV(f,g,S){var O,D,M,_,A,j=new l.Vector3(f.x,f.y,f.z),L=new l.Vector3(g.x,g.y,g.z),$=L.clone(),F=null;if($.sub(j),f.bonds.length===1)if(g.bonds.length===1)F=$.clone(),Math.abs(F.x)>1e-4?F.y+=1:F.x+=1;else{for(M=null,O=0;O<g.bonds.length;O++)if(D=g.bonds[O],D!==f.index){M=this.atoms[D];break}M?(_=new l.Vector3(M.x,M.y,M.z),A=_.clone(),A.sub(j),F=A.clone(),F.cross($)):(F=$.clone(),F.x+=1)}else if(F=this.getGoodCross(f,g,j,$),F.lengthSq()<.01){var W=this.getGoodCross(g,f,j,$);W!=null&&(F=W)}return F.lengthSq()<.01&&(F=$.clone(),Math.abs(F.x)>1e-4?F.y+=1:F.x+=1),F.cross($),F.normalize(),F}addLine(f,g,S,O,D,M){f[S]=O.x,f[S+1]=O.y,f[S+2]=O.z,g[S]=M.r,g[S+1]=M.g,g[S+2]=M.b,f[S+3]=D.x,f[S+4]=D.y,f[S+5]=D.z,g[S+3]=M.r,g[S+4]=M.g,g[S+5]=M.b}drawBondLines(f,g,S){if(f.style.line){var O=f.style.line;if(!O.hidden){var D,M,_,A,j=O.linewidth||T.defaultlineWidth;S[j]||(S[j]=new i.Geometry);for(var L=S[j].updateGeoGroup(6*f.bonds.length),$=L.vertexArray,F=L.colorArray,W=0;W<f.bonds.length;W++){var U=f.bonds[W],q=g[U];if(q.style.line&&!(f.index>=q.index)){var H=new l.Vector3(f.x,f.y,f.z),Y=new l.Vector3(q.x,q.y,q.z),Z=H.clone().add(Y).multiplyScalar(.5),X=!1,J=f.clickable||f.hoverable,Q=q.clickable||q.hoverable;(J||Q)&&(J&&(f.intersectionShape===void 0&&(f.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),f.intersectionShape.line.push(H),f.intersectionShape.line.push(Z)),Q&&(q.intersectionShape===void 0&&(q.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),q.intersectionShape.line.push(Z),q.intersectionShape.line.push(Y)));var G=(0,b.getColorFromStyle)(f,f.style.line),te=(0,b.getColorFromStyle)(q,q.style.line);if(f.bondStyles&&f.bondStyles[W]){var ue=f.bondStyles[W];if(!ue.iswire)continue;ue.singleBond&&(X=!0),typeof ue.color1<"u"&&(G=h.CC.color(ue.color1)),typeof ue.color2<"u"&&(te=h.CC.color(ue.color2))}var de=L.vertices*3,xe,ve;if(f.bondOrder[W]>1&&f.bondOrder[W]<4&&!X){var Se=this.getSideBondV(f,q,W),Ee=Y.clone();Ee.sub(H),f.bondOrder[W]==2?(Se.multiplyScalar(.1),D=H.clone(),D.add(Se),M=H.clone(),M.sub(Se),_=D.clone(),_.add(Ee),A=M.clone(),A.add(Ee),G==te?(L.vertices+=4,this.addLine($,F,de,D,_,G),this.addLine($,F,de+6,M,A,G)):(L.vertices+=8,Ee.multiplyScalar(.5),xe=D.clone(),xe.add(Ee),ve=M.clone(),ve.add(Ee),this.addLine($,F,de,D,xe,G),this.addLine($,F,de+6,xe,_,te),this.addLine($,F,de+12,M,ve,G),this.addLine($,F,de+18,ve,A,te))):f.bondOrder[W]==3&&(Se.multiplyScalar(.1),D=H.clone(),D.add(Se),M=H.clone(),M.sub(Se),_=D.clone(),_.add(Ee),A=M.clone(),A.add(Ee),G==te?(L.vertices+=6,this.addLine($,F,de,H,Y,G),this.addLine($,F,de+6,D,_,G),this.addLine($,F,de+12,M,A,G)):(L.vertices+=12,Ee.multiplyScalar(.5),xe=D.clone(),xe.add(Ee),ve=M.clone(),ve.add(Ee),this.addLine($,F,de,H,Z,G),this.addLine($,F,de+6,Z,Y,te),this.addLine($,F,de+12,D,xe,G),this.addLine($,F,de+18,xe,_,te),this.addLine($,F,de+24,M,ve,G),this.addLine($,F,de+30,ve,A,te)))}else G==te?(L.vertices+=2,this.addLine($,F,de,H,Y,G)):(L.vertices+=4,this.addLine($,F,de,H,Z,G),this.addLine($,F,de+6,Z,Y,te))}}}}}drawAtomSphere(f,g){if(f.style.sphere){var S=f.style.sphere;if(!S.hidden){var O=(0,b.getColorFromStyle)(f,S),D=this.getRadiusFromStyle(f,S);if((f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var M=new l.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new o.Sphere(M,D))}d.GLDraw.drawSphere(g,f,D,O)}}}drawAtomClickSphere(f){if(f.style.clicksphere){var g=f.style.clicksphere;if(!g.hidden){var S=this.getRadiusFromStyle(f,g);if((f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var O=new l.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new o.Sphere(O,S))}}}}drawAtomInstanced(f,g){if(f.style.sphere){var S=f.style.sphere;if(!S.hidden){var O=this.getRadiusFromStyle(f,S),D=(0,b.getColorFromStyle)(f,S),M=g.updateGeoGroup(1),_=M.vertices,A=_*3,j=M.vertexArray,L=M.colorArray,$=M.radiusArray;if(j[A]=f.x,j[A+1]=f.y,j[A+2]=f.z,L[A]=D.r,L[A+1]=D.g,L[A+2]=D.b,$[_]=O,(f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var F=new l.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new o.Sphere(F,O))}M.vertices+=1}}}drawSphereImposter(f,g,S,O){var D=f.updateGeoGroup(4),M,_=D.vertices,A=_*3,j=D.vertexArray,L=D.colorArray;for(M=0;M<4;M++)j[A+3*M]=g.x,j[A+3*M+1]=g.y,j[A+3*M+2]=g.z;var $=D.normalArray;for(M=0;M<4;M++)L[A+3*M]=O.r,L[A+3*M+1]=O.g,L[A+3*M+2]=O.b;$[A+0]=-S,$[A+1]=S,$[A+2]=0,$[A+3]=-S,$[A+4]=-S,$[A+5]=0,$[A+6]=S,$[A+7]=-S,$[A+8]=0,$[A+9]=S,$[A+10]=S,$[A+11]=0,D.vertices+=4;var F=D.faceArray,W=D.faceidx;F[W+0]=_,F[W+1]=_+1,F[W+2]=_+2,F[W+3]=_+2,F[W+4]=_+3,F[W+5]=_,D.faceidx+=6}drawAtomImposter(f,g){if(f.style.sphere){var S=f.style.sphere;if(!S.hidden){var O=this.getRadiusFromStyle(f,S),D=(0,b.getColorFromStyle)(f,S);if((f.clickable===!0||f.hoverable)&&f.intersectionShape!==void 0){var M=new l.Vector3(f.x,f.y,f.z);f.intersectionShape.sphere.push(new o.Sphere(M,O))}this.drawSphereImposter(g,f,O,D)}}}calculateDashes(f,g,S,O,D,M){var _=Math.sqrt(Math.pow(f.x-g.x,2)+Math.pow(f.y-g.y,2)+Math.pow(f.z-g.z,2));if(S=Math.max(S,0),D=Math.max(D,0)+2*S,O=Math.max(O,.001),O+D>_){var A=M&&M.length>0?M[0]:null;return[{from:new l.Vector3(f.x,f.y,f.z),to:new l.Vector3(g.x,g.y,g.z),color:A}]}var j=Math.floor((_-O)/(O+D))+1,L=j*O;D=(_-L)/j;for(var $,F=new l.Vector3(f.x,f.y,f.z),W=new l.Vector3((g.x-f.x)/(_/D),(g.y-f.y)/(_/D),(g.z-f.z)/(_/D)),U=new l.Vector3((g.x-f.x)/(_/O),(g.y-f.y)/(_/O),(g.z-f.z)/(_/O)),q=[],H=0;H<j;H++){$=new l.Vector3(F.x+U.x,F.y+U.y,F.z+U.z);var A=M&&M.length>1&&H>=j/2?M[1]:M?M[0]:null;q.push({from:F,to:$,color:A}),F=new l.Vector3($.x+W.x,$.y+W.y,$.z+W.z)}return q}calculateTwoColorSegments(f,g,S){var O=[];if(S.length<=1)O.push({from:new l.Vector3(f.x,f.y,f.z),to:new l.Vector3(g.x,g.y,g.z),color:S[0]});else{var D=new l.Vector3((f.x+g.x)/2,(f.y+g.y)/2,(f.z+g.z)/2);O.push({from:new l.Vector3(f.x,f.y,f.z),to:D,color:S[0]}),O.push({from:D,to:new l.Vector3(g.x,g.y,g.z),color:S[1]})}return O}chooseDashedPlusV(f,g,S,O,D){for(var M=new l.Vector3(0,0,0),_=0,A=!1,j=0;j<f.bonds.length;j++)if(f.bonds[j]!==g.index){var L=this.atoms[f.bonds[j]];if(L&&L.bonds&&L.bonds.length>1){A=!0;break}}if(!A){for(var j=0;j<g.bonds.length;j++)if(g.bonds[j]!==f.index){var L=this.atoms[g.bonds[j]];if(L&&L.bonds&&L.bonds.length>1){A=!0;break}}}var $=(q,H)=>{for(var Y=0;Y<q.bonds.length;Y++)if(q.bonds[Y]!==H){var Z=this.atoms[q.bonds[Y]];if(Z){var X=!Z.bonds||Z.bonds.length<=1,J=A&&X?.25:1;M.x+=Z.x*J,M.y+=Z.y*J,M.z+=Z.z*J,_+=J}}};if($(f,g.index),$(g,f.index),_<1e-8)return!1;M.multiplyScalar(1/_);var F=new l.Vector3().addVectors(S,O).multiplyScalar(.5),W=F.clone().add(D),U=F.clone().sub(D);return W.distanceToSquared(M)<U.distanceToSquared(M)}static drawStickImposter(f,g,S,O,D,M=0,_=0){for(var A=f.updateGeoGroup(4),j=A.vertices,L=j*3,$=A.vertexArray,F=A.colorArray,W=A.radiusArray,U=A.normalArray,q=D.r,H=D.g,Y=D.b,Z=function(te){var ue=-te;return ue==0&&(ue=-1e-4),ue},X=L,J=0;J<4;J++)$[X]=g.x,U[X]=S.x,F[X]=q,X++,$[X]=g.y,U[X]=S.y,F[X]=H,X++,$[X]=g.z,U[X]=S.z,J<2?F[X]=Y:F[X]=Z(Y),X++;A.vertices+=4,W[j]=-O,W[j+1]=O,W[j+2]=-O,W[j+3]=O;var Q=A.faceArray,G=A.faceidx;Q[G+0]=j,Q[G+1]=j+1,Q[G+2]=j+2,Q[G+3]=j+2,Q[G+4]=j+3,Q[G+5]=j,A.faceidx+=6}drawBondSticks(f,g,S){var O,D,M,_;if(f.style.stick){var A=f.style.stick;if(!A.hidden){var j=A.radius||this.defaultStickRadius,L=A.doubleBondScaling||.4,$=A.tripleBondScaling||.25,F=((O=A.dashedBondConfig)===null||O===void 0?void 0:O.dashLength)||.1,W=((D=A.dashedBondConfig)===null||D===void 0?void 0:D.gapLength)||.25,U=j,q=A.singleBonds||!1,H=A.dashedBonds||!1,Y=0,Z=0,X,J,Q,G,te,ue,de,xe,ve,Se,Ee,he=(0,b.getColorFromStyle)(f,A),Re,je,Ce;!f.capDrawn&&f.bonds.length<4&&(Y=2);var Le=!((M=A.dashedBondConfig)===null||M===void 0)&&M.solidColor?h.CC.color(A.dashedBondConfig.solidColor):null,me=!((_=A.dashedBondConfig)===null||_===void 0)&&_.dashedColor?h.CC.color(A.dashedBondConfig.dashedColor):null,Ie=this,Ve=Ct=>{var Ut=S.imposter?T.drawStickImposter:d.GLDraw.drawCylinder;return!H&&Ct%1===0?(Ft,fr,Qt,Dt,Lt,It,Jt=0,rr=0)=>{if(!It||Lt===It)Ut(Ft,fr,Qt,Dt,Lt,Jt,rr);else for(var cr=Ie.calculateTwoColorSegments(fr,Qt,[Lt,It]),vr=0;vr<cr.length;vr++){var xr=cr[vr],en=vr===0?Jt:0,ti=vr===cr.length-1?rr:0;Ut(Ft,xr.from,xr.to,Dt,xr.color,en,ti)}}:(Ft,fr,Qt,Dt,Lt,It,Jt=0,rr=0)=>{var cr=It?[Lt,It]:[Lt],vr=Ie.calculateDashes(fr,Qt,Dt,F,W,cr);vr.forEach(xr=>{Ut(Ft,xr.from,xr.to,Dt,xr.color,Jt,rr)})}};for(Q=0;Q<f.bonds.length;Q++){var nt=f.bondOrder[Q],it=nt===4?1.5:nt,ot=Ve(it),at=f.bonds[Q],Je=g[at];if(Re=je=Ce=null,f.index<Je.index){Z=0;var rt=Je.style;if(!rt.stick||rt.stick.hidden)continue;var et=(0,b.getColorFromStyle)(Je,rt.stick);if(U=j,G=q,f.bondStyles&&f.bondStyles[Q]){if(te=f.bondStyles[Q],te.iswire)continue;te.radius&&(U=te.radius),te.singleBond&&(G=!0),typeof te.color1<"u"&&(he=h.CC.color(te.color1)),typeof te.color2<"u"&&(et=h.CC.color(te.color2))}var Qe=new l.Vector3(f.x,f.y,f.z),ct=new l.Vector3(Je.x,Je.y,Je.z),pt=Le||he,oe=Le||et,fe=me||he,pe=me||et;if(it<=1||G||it>3){it<1&&(U*=it),!Je.capDrawn&&Je.bonds.length<4&&(Z=2);const Ct=H||it%1!==0;if(ot(S,Qe,ct,U,Ct?fe:he,Ct?pe:et,Y,Z),X=f.clickable||f.hoverable,J=Je.clickable||Je.hoverable,X||J){if(Re||(Re=new l.Vector3().addVectors(Qe,ct).multiplyScalar(.5)),X){var Be=new o.Cylinder(Qe,Re,U),ke=new o.Sphere(Qe,U);f.intersectionShape.cylinder.push(Be),f.intersectionShape.sphere.push(ke)}if(J){var Ke=new o.Cylinder(ct,Re,U),Ye=new o.Sphere(ct,U);Je.intersectionShape.cylinder.push(Ke),Je.intersectionShape.sphere.push(Ye)}}}else if(it>1){var ie=0,Ae=0;U!=j&&(ie=2,Ae=2);var Ne=ct.clone(),Ze=null;Ne.sub(Qe);var _e,Ge,ae,He,tt,K;Ze=this.getSideBondV(f,Je,Q);var Me=!1;if(it%1!==0&&(Me=this.chooseDashedPlusV(f,Je,Qe,ct,Ze)),it>1&&it<=2){_e=U*L,Ge=_e*(it-1),Ze.multiplyScalar(_e*1.5),ae=Qe.clone(),ae.add(Ze),He=Qe.clone(),He.sub(Ze),tt=ae.clone(),tt.add(Ne),K=He.clone(),K.add(Ne);var pt=Le||he,oe=Le||et,fe=me||he,pe=me||et,Te=S.imposter?T.drawStickImposter:d.GLDraw.drawCylinder,le=(Qt,Dt,Lt,It,Jt,rr,cr)=>{if(It!=Jt){var vr=new l.Vector3().addVectors(Qt,Dt).multiplyScalar(.5);Te(S,Qt,vr,Lt,It,rr,0),Te(S,vr,Dt,Lt,Jt,0,cr)}else Te(S,Qt,Dt,Lt,It,rr,cr)},we=(Qt,Dt,Lt,It,Jt,rr,cr)=>{var vr=It!=Jt?[It,Jt]:[It],xr=Ie.calculateDashes(Qt,Dt,Lt,F,W,vr);xr.forEach(en=>{Te(S,en.from,en.to,Lt,en.color||It,rr,cr)})};if(it==2?(le(ae,tt,_e,pt,oe,ie,Ae),le(He,K,_e,pt,oe,ie,Ae)):Me?(we(ae,tt,Ge,fe,pe,ie,Ae),le(He,K,_e,pt,oe,ie,Ae)):(le(ae,tt,_e,pt,oe,ie,Ae),we(He,K,Ge,fe,pe,ie,Ae)),X=f.clickable||f.hoverable,J=Je.clickable||Je.hoverable,X||J){Re||(Re=new l.Vector3().addVectors(ae,tt).multiplyScalar(.5)),je||(je=new l.Vector3().addVectors(He,K).multiplyScalar(.5));var Fe=it==2?_e:Me?Ge:_e,yt=it==2||Me?_e:Ge;X&&(ue=new o.Cylinder(ae,Re,Fe),de=new o.Cylinder(He,je,yt),f.intersectionShape.cylinder.push(ue),f.intersectionShape.cylinder.push(de)),J&&(ve=new o.Cylinder(tt,Re,Fe),Se=new o.Cylinder(K,je,yt),Je.intersectionShape.cylinder.push(ve),Je.intersectionShape.cylinder.push(Se))}}else if(it>2&&it<=3){_e=U*$;var mt=_e*(it-2);Ze.cross(Ne),Ze.normalize(),Ze.multiplyScalar(_e*3),ae=Qe.clone(),ae.add(Ze),He=Qe.clone(),He.sub(Ze),tt=ae.clone(),tt.add(Ne),K=He.clone(),K.add(Ne);var Te=S.imposter?T.drawStickImposter:d.GLDraw.drawCylinder,ft=(Ut,Ft,fr,Qt,Dt,Lt,It)=>{if(Qt!=Dt){var Jt=new l.Vector3().addVectors(Ut,Ft).multiplyScalar(.5);Te(S,Ut,Jt,fr,Qt,Lt,0),Te(S,Jt,Ft,fr,Dt,0,It)}else Te(S,Ut,Ft,fr,Qt,Lt,It)},Ot=(Ut,Ft,fr,Qt,Dt,Lt,It)=>{var Jt=Qt!=Dt?[Qt,Dt]:[Qt],rr=Ie.calculateDashes(Ut,Ft,fr,F,W,Jt);rr.forEach(cr=>{Te(S,cr.from,cr.to,fr,cr.color||Qt,Lt,It)})};if(it==3?(ft(ae,tt,_e,pt,oe,ie,Ae),ft(Qe,ct,_e,pt,oe,Y,Z),ft(He,K,_e,pt,oe,ie,Ae)):Me?(Ot(ae,tt,mt,fe,pe,ie,Ae),ft(Qe,ct,_e,pt,oe,Y,Z),ft(He,K,_e,pt,oe,ie,Ae)):(ft(ae,tt,_e,pt,oe,ie,Ae),ft(Qe,ct,_e,pt,oe,Y,Z),Ot(He,K,mt,fe,pe,ie,Ae)),X=f.clickable||f.hoverable,J=Je.clickable||Je.hoverable,X||J){Re||(Re=new l.Vector3().addVectors(ae,tt).multiplyScalar(.5)),je||(je=new l.Vector3().addVectors(He,K).multiplyScalar(.5)),Ce||(Ce=new l.Vector3().addVectors(Qe,ct).multiplyScalar(.5));var Fe=it==3?_e:Me?mt:_e,yt=it==3||Me?_e:mt;X&&(ue=new o.Cylinder(ae.clone(),Re.clone(),Fe),de=new o.Cylinder(He.clone(),je.clone(),yt),xe=new o.Cylinder(Qe.clone(),Ce.clone(),_e),f.intersectionShape.cylinder.push(ue),f.intersectionShape.cylinder.push(de),f.intersectionShape.cylinder.push(xe)),J&&(ve=new o.Cylinder(tt.clone(),Re.clone(),Fe),Se=new o.Cylinder(K.clone(),je.clone(),yt),Ee=new o.Cylinder(ct.clone(),Ce.clone(),_e),Je.intersectionShape.cylinder.push(ve),Je.intersectionShape.cylinder.push(Se),Je.intersectionShape.cylinder.push(Ee))}}}}}var nr=!1,Pt=0,At=!1;for(Q=0;Q<f.bonds.length;Q++)G=q,f.bondStyles&&f.bondStyles[Q]&&(te=f.bondStyles[Q],te.singleBond&&(G=!0),te.radius&&te.radius!=j&&(At=!0)),(G||f.bondOrder[Q]==1)&&Pt++;At?Pt>0&&(nr=!0):Pt==0&&(f.bonds.length>0||A.showNonBonded)&&(nr=!0),nr&&(U=j,S.imposter?this.drawSphereImposter(S.sphereGeometry,f,U,he):d.GLDraw.drawSphere(S,f,U,he))}}}createMolObj(f,g){g=g||{};var S=new i.Object3D,O=[],D={},M={},_=this.drawAtomSphere,A=null,j=null;g.supportsImposters?(_=this.drawAtomImposter,A=new i.Geometry(!0),A.imposter=!0,j=new i.Geometry(!0,!0),j.imposter=!0,j.sphereGeometry=new i.Geometry(!0),j.sphereGeometry.imposter=!0,j.drawnCaps={}):g.supportsAIA?(_=this.drawAtomInstanced,A=new i.Geometry(!1,!0,!0),A.instanced=!0,j=new i.Geometry(!0)):(A=new i.Geometry(!0),j=new i.Geometry(!0));var L,$,F,W,U={},q=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(L=0,F=f.length;L<F;L++){var H=f[L];if(H&&H.style){(H.clickable||H.hoverable)&&H.intersectionShape===void 0&&(H.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),W={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for($ in W)H.style[$]?H.style[$].opacity?W[$]=parseFloat(H.style[$].opacity):W[$]=1:W[$]=void 0,U[$]?W[$]!=null&&U[$]!=W[$]&&(console.log("Warning: "+$+" opacity is ambiguous"),U[$]=1):U[$]=W[$];_.call(this,H,A),this.drawAtomClickSphere(H),this.drawAtomCross(H,M),this.drawBondLines(H,f,D),this.drawBondSticks(H,f,j),typeof H.style.cartoon<"u"&&!H.style.cartoon.hidden&&(H.style.cartoon.color==="spectrum"&&typeof H.resi=="number"&&!H.hetflag&&(H.resi<q[0]&&(q[0]=H.resi),H.resi>q[1]&&(q[1]=H.resi)),O.push(H))}}if(O.length>0&&(0,m.drawCartoon)(S,O,q,this.defaultCartoonQuality),A&&A.vertices>0){A.initTypedArrays();var Y=null,Z=null;A.imposter?Y=new i.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):A.instanced?(Z=new i.Geometry(!0),d.GLDraw.drawSphere(Z,{x:0,y:0,z:0},1,new h.Color(.5,.5,.5)),Z.initTypedArrays(),Y=new i.InstancedMaterial({sphereMaterial:new i.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:Z})):Y=new i.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),U.sphere<1&&U.sphere>=0&&(Y.transparent=!0,Y.opacity=U.sphere),Z=new i.Mesh(A,Y),S.add(Z)}if(j.vertices>0){var X=null,J=null,Q=j.sphereGeometry;(!Q||typeof Q.vertices>"u"||Q.vertices==0)&&(Q=null),j.initTypedArrays(),Q&&Q.initTypedArrays();var G={ambient:0,vertexColors:!0,reflectivity:0};j.imposter?(X=new i.StickImposterMaterial(G),J=new i.SphereImposterMaterial(G)):(X=new i.MeshLambertMaterial(G),J=new i.MeshLambertMaterial(G),X.wireframe&&(j.setUpWireframe(),Q&&Q.setUpWireframe())),U.stick<1&&U.stick>=0&&(X.transparent=!0,X.opacity=U.stick,J.transparent=!0,J.opacity=U.stick);var te=new i.Mesh(j,X);if(S.add(te),Q){var ue=new i.Mesh(Q,J);S.add(ue)}}var de;for(L in D)if(D.hasOwnProperty(L)){de=L;var xe=new i.LineBasicMaterial({linewidth:de,vertexColors:!0});U.line<1&&U.line>=0&&(xe.transparent=!0,xe.opacity=U.line),D[L].initTypedArrays();var ve=new i.Line(D[L],xe,i.LineStyle.LinePieces);S.add(ve)}for(L in M)if(M.hasOwnProperty(L)){de=L;var Se=new i.LineBasicMaterial({linewidth:de,vertexColors:!0});U.cross<1&&U.cross>=0&&(Se.transparent=!0,Se.opacity=U.cross),M[L].initTypedArrays();var Ee=new i.Line(M[L],Se,i.LineStyle.LinePieces);S.add(Ee)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var he=new i.Object3D,Re;for(Re=0;Re<this.modelData.symmetries.length;Re++){var je=new i.Object3D;je=S.clone(),je.matrix.copy(this.modelData.symmetries[Re]),je.matrixAutoUpdate=!1,he.add(je)}return he}return S}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(f){this.atoms=f.atoms,this.frames=f.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const f=this.modelData.cryst;this.modelData.cryst.matrix=(0,l.conversionMatrix3)(f.a,f.b,f.c,f.alpha,f.beta,f.gamma)}return this.modelData.cryst}else return null}setCrystData(f,g,S,O,D,M){f=f||1,g=g||1,S=S||1,O=O||90,D=D||90,M=M||90;const _=(0,l.conversionMatrix3)(f,g,S,O,D,M);this.modelData.cryst={a:f,b:g,c:S,alpha:O,beta:D,gamma:M,matrix:_}}setCrystMatrix(f){f=f||new l.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:f}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(f){typeof f>"u"?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=f,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(f,g,S,O){var D=g-f;return D<-S?g+O:D>S?g-O:g}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var f=this.box[0],g=this.box[1],S=this.box[2],O=f*.9,D=g*.9,M=S*.9,_=0;_<this.atomdfs.length;_++)for(var A=this.atomdfs[_],j=1;j<A.length;j++){var L=this.atoms[A[j][0]],$=this.atoms[A[j][1]];L.x=this.adjustCoord($.x,L.x,O,f),L.y=this.adjustCoord($.y,L.y,D,g),L.z=this.adjustCoord($.z,L.z,M,S)}}setFrame(f){var g=this.getNumFrames();let S=this,O=this.viewer;return new Promise(function(D,M){if(g==0&&D(),(f<0||f>=g)&&(f=g-1),S.frames.url!=null){var _=S.frames.url;(0,b.getbin)(_+"/traj/frame/"+f+"/"+S.frames.path,void 0,"POST",void 0).then(function(A){for(var j=new Float32Array(A,44),L=0,$=0;$<S.atoms.length;$++)S.atoms[$].x=j[L++],S.atoms[$].y=j[L++],S.atoms[$].z=j[L++];S.box&&S.atomdfs&&S.adjustCoordinatesToBox(),D()}).catch(M)}else S.atoms=S.frames[f],D();S.molObj=null,S.modelDatas&&f<S.modelDatas.length&&(S.modelData=S.modelDatas[f],S.unitCellObjects&&O&&(O.removeUnitCell(S),O.addUnitCell(S)))})}addFrame(f){this.frames.push(f)}vibrate(f=10,g=1,S=!1,O){var D=0,M=f;let _=this.viewer;S&&(D=-f,M=f),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),D<M&&(this.frames=[]),S&&(this.frames.origIndex=f);for(var A=D;A<M;A++){var j=[],L=this.frames.length;if(A==0&&!O){this.frames.push(this.atoms);continue}for(var $=0;$<this.atoms.length;$++){var F=(0,b.getAtomProperty)(this.atoms[$],"dx"),W=(0,b.getAtomProperty)(this.atoms[$],"dy"),U=(0,b.getAtomProperty)(this.atoms[$],"dz"),q=new l.Vector3(F,W,U),H=new l.Vector3(this.atoms[$].x,this.atoms[$].y,this.atoms[$].z),Y=A*g/f;q.multiplyScalar(Y),H.add(q);var Z={};for(var X in this.atoms[$])Z[X]=this.atoms[$][X];if(Z.x=H.x,Z.y=H.y,Z.z=H.z,j.push(Z),_&&O){var J=(0,b.extend)({},O),Q=new l.Vector3(F,W,U);if(Q.multiplyScalar(g),Q.add(H),J.start=H,J.end=Q,J.frame=L,!J.color){var G=Z.style.sphere;G||(G=Z.style.stick),G||(G=Z.style.line),J.color=(0,b.getColorFromStyle)(Z,G)}_.addArrow(J)}}this.frames.push(j)}}setAtomDefaults(f){for(let g=0;g<f.length;g++){let S=f[g];S&&(S.style=S.style||(0,b.deepCopy)(T.defaultAtomStyle),S.color=S.color||this.ElementColors[S.elem]||this.defaultColor,S.model=this.id,(S.clickable||S.hoverable)&&(S.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(f,g,S={}){var O=T.parseMolData(f,g,S);this.dontDuplicateAtoms=!S.duplicateAssemblyAtoms;var D=O.modelData;if(D&&(Array.isArray(D)?(this.modelData=D[0],S.frames&&(this.modelDatas=D)):this.modelData=D),O.box?this.box=O.box:this.box=null,this.frames.length==0){for(let _=0;_<O.length;_++)O[_].length!=0&&this.frames.push(O[_]);this.frames[0]&&(this.atoms=this.frames[0])}else if(S.frames)for(let _=0;_<O.length;_++)this.frames.push(O[_]);else for(var M=0;M<O.length;M++)this.addAtoms(O[M]);for(let _=0;_<this.frames.length;_++)this.setAtomDefaults(this.frames[_]);S.vibrate&&S.vibrate.frames&&S.vibrate.amplitude&&this.vibrate(S.vibrate.frames,S.vibrate.amplitude),S.style&&this.setStyle({},S.style)}setDontDuplicateAtoms(f){this.dontDuplicateAtoms=f}setModelData(f){this.modelData=f}propertyMatches(f,g){if(f==g)return!0;if(typeof g=="string"&&typeof f=="number"){var S=g.match(/(-?\d+)\s*-\s*(-?\d+)/);if(S){var O=parseInt(S[1]),D=parseInt(S[2]);if(S&&f>=O&&f<=D)return!0}}return!1}static deepCopyAndCache(f,g){if(typeof f!="object"||f==null||f instanceof T||f.__cache_created)return f;const S={};for(const O in f){const D=f[O];if(Array.isArray(D)){S[O]=[];for(let M=0;M<D.length;M++)S[O].push(T.deepCopyAndCache(D[M],g))}else typeof D=="object"&&O!="properties"&&O!="model"?S[O]=T.deepCopyAndCache(D,g):S[O]=D;if(O=="and"||O=="or"){const M=[];for(const _ of S[O]){const A=new Set;for(const j of g.selectedAtoms(_))A.add(j.index);M.push(A)}if(O=="and"){const _=function(j,L){const $=new Set;for(const F of L)j.has(F)&&$.add(F);return $};let A=new Set(M[0]);for(const j of M.splice(1))A=_(A,j);S[O].__cached_results=A}else if(O=="or"){const _=new Set;for(const A of M)for(const j of A)_.add(j);S[O].__cached_results=_}}}return S.__cache_created=!0,S}atomIsSelected(f,g){if(typeof g>"u")return!0;var S=!!g.invert,O=!0;for(var D in g)if(D=="and"||D=="or"||D=="not"){if(D=="not"){if(this.atomIsSelected(f,g[D])){O=!1;break}}else if(g[D].__cached_results===void 0&&(g=T.deepCopyAndCache(g,this)),O=g[D].__cached_results.has(f.index),!O)break}else if(D==="predicate"){if(!g.predicate(f)){O=!1;break}}else if(D=="properties"&&f[D]){for(var M in g.properties)if(!M.startsWith("__cache")){if(typeof f.properties[M]>"u"){O=!1;break}if(f.properties[M]!=g.properties[M]){O=!1;break}}}else if(D=="model"){let L=g.model;if(typeof L=="number"&&L<0&&(L=this.viewer.getNextModelId()+L),Array.isArray(L)){let $=!1;for(let F=0;F<L.length;F++)if(L[F]==this||L[F]==this.id){$=!0;break}if(!$){O=!1;break}}else if(L!=this&&L!=this.id){O=!1;break}}else if(g.hasOwnProperty(D)&&!T.ignoredKeys.has(D)&&!D.startsWith("__cache")){if(typeof f[D]>"u"){O=!1;break}let L=!1;if(D==="bonds"){var _=g[D];if(_!=f.bonds.length){O=!1;break}}else if(Array.isArray(g[D])){var A=g[D],j=f[D];for(let $=0;$<A.length;$++)if(this.propertyMatches(j,A[$])){L=!0;break}if(!L){O=!1;break}}else{let $=g[D];if(!this.propertyMatches(f[D],$)){O=!1;break}}}return S?!O:O}static squaredDistance(f,g){var S=g.x-f.x,O=g.y-f.y,D=g.z-f.z;return S*S+O*O+D*D}expandAtomList(f,g){if(g<=0)return f;for(var S=(0,b.getExtent)(f,void 0),O=[[],[],[]],D=0;D<3;D++)O[0][D]=S[0][D]-g,O[1][D]=S[1][D]+g,O[2][D]=S[2][D];var M=[];for(let L=0;L<this.atoms.length;L++){var _=this.atoms[L].x,A=this.atoms[L].y,j=this.atoms[L].z;_>=O[0][0]&&_<=O[1][0]&&A>=O[0][1]&&A<=O[1][1]&&j>=O[0][2]&&j<=O[1][2]&&(_>=S[0][0]&&_<=S[1][0]&&A>=S[0][1]&&A<=S[1][1]&&j>=S[0][2]&&j<=S[1][2]||M.push(this.atoms[L]))}return M}static getFloat(f){return typeof f=="number"?f:parseFloat(f)}selectedAtoms(f,g){var S=[];f=T.deepCopyAndCache(f||{},this),g||(g=this.atoms);for(var O=g.length,D=0;D<O;D++){var M=g[D];M&&this.atomIsSelected(M,f)&&S.push(M)}if(f.hasOwnProperty("expand")){const Z=T.getFloat(f.expand);let X=this.expandAtomList(S,Z),J=S.length;const Q=Z*Z;for(let G=0;G<X.length;G++)for(let te=0;te<J;te++){var _=T.squaredDistance(X[G],S[te]);_<Q&&_>0&&S.push(X[G])}}if(f.hasOwnProperty("within")&&f.within.hasOwnProperty("sel")&&f.within.hasOwnProperty("distance")){var A=this.selectedAtoms(f.within.sel,this.atoms),j={};const Z=T.getFloat(f.within.distance),X=Z*Z;for(let J=0;J<A.length;J++)for(let Q=0;Q<S.length;Q++){let G=T.squaredDistance(A[J],S[Q]);G<X&&G>0&&(j[Q]=1)}var L=[];if(f.within.invert)for(let J=0;J<S.length;J++)j[J]||L.push(S[J]);else for(let J in j)L.push(S[J]);S=L}if(f.hasOwnProperty("byres")){var $={},F=[],W=[];for(let Z=0;Z<S.length;Z++){let X=S[Z];var U=X.chain,q=X.resi;if($[U]===void 0&&($[U]={}),X.hasOwnProperty("resi")&&$[U][q]===void 0){for($[U][q]=!0,W.push(X);W.length>0;)if(X=W.pop(),U=X.chain,q=X.resi,F[X.index]===void 0){F[X.index]=!0;for(var H=0;H<X.bonds.length;H++){var Y=this.atoms[X.bonds[H]];F[Y.index]===void 0&&Y.hasOwnProperty("resi")&&Y.chain==U&&Y.resi==q&&(W.push(Y),S.push(Y))}}}}}return S}addAtoms(f){this.molObj=null;var g=this.atoms.length,S=[],O;for(O=0;O<f.length;O++)typeof f[O].index>"u"&&(f[O].index=O),typeof f[O].serial>"u"&&(f[O].serial=O),S[f[O].index]=g+O;for(O=0;O<f.length;O++){var D=f[O],M=S[D.index],_=(0,b.extend)({},D);_.index=M,_.bonds=[],_.bondOrder=[],_.model=this.id,_.style=_.style||(0,b.deepCopy)(T.defaultAtomStyle),typeof _.color>"u"&&(_.color=this.ElementColors[_.elem]||this.defaultColor);for(var A=D.bonds?D.bonds.length:0,j=0;j<A;j++){var L=S[D.bonds[j]];typeof L<"u"&&(_.bonds.push(L),_.bondOrder.push(D.bondOrder?D.bondOrder[j]:1))}this.atoms.push(_)}}assignBonds(){(0,R.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(f){this.molObj=null;var g=[],S;for(S=0;S<f.length;S++)g[f[S].index]=!0;var O=[];for(S=0;S<this.atoms.length;S++){var D=this.atoms[S];g[D.index]||O.push(D)}this.atoms=[],this.addAtoms(O)}setStyle(f,g,S){typeof g>"u"&&typeof S>"u"&&(g=f,f={}),f=f,typeof g=="string"&&(g=(0,b.specStringToObject)(g));var O=!1,D=this,M=function(A){var j=D.selectedAtoms(f,A);for(let L=0;L<A.length;L++)A[L]&&(A[L].capDrawn=!1);for(let L=0;L<j.length;L++){O=!0,(j[L].clickable||j[L].hoverable)&&(j[L].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),S||(j[L].style={});for(let $ in g)g.hasOwnProperty($)&&(j[L].style[$]=j[L].style[$]||{},Object.assign(j[L].style[$],g[$]))}};if(f.frame!==void 0&&f.frame<this.frames.length){let A=f.frame;A<0&&(A=this.frames.length+A),M(this.frames[A])}else{M(this.atoms);for(var _=0;_<this.frames.length;_++)this.frames[_]!==this.atoms&&M(this.frames[_])}O&&(this.molObj=null)}setClickable(f,g,S){if(g=!!g,S=(0,b.makeFunction)(S),S===null){console.log("Callback is not a function");return}var O=this.selectedAtoms(f,this.atoms),D=O.length;for(let M=0;M<D;M++)O[M].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},O[M].clickable=g,S&&(O[M].callback=S);D>0&&(this.molObj=null)}setHoverable(f,g,S,O){if(g=!!g,S=(0,b.makeFunction)(S),O=(0,b.makeFunction)(O),S===null){console.log("Hover_callback is not a function");return}if(O===null){console.log("Unhover_callback is not a function");return}var D=this.selectedAtoms(f,this.atoms),M=D.length;for(let _=0;_<M;_++)D[_].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},D[_].hoverable=g,S&&(D[_].hover_callback=S),O&&(D[_].unhover_callback=O);M>0&&(this.molObj=null)}enableContextMenu(f,g){g=!!g;var S,O=this.selectedAtoms(f,this.atoms),D=O.length;for(S=0;S<D;S++)O[S].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},O[S].contextMenuEnabled=g;D>0&&(this.molObj=null)}setColorByElement(f,g){if(!(this.molObj!==null&&T.sameObj(g,this.lastColors))){this.lastColors=g;var S=this.selectedAtoms(f,S);S.length>0&&(this.molObj=null);for(var O=0;O<S.length;O++){var D=S[O];typeof g[D.elem]<"u"&&(D.color=g[D.elem])}}}setColorByProperty(f,g,S,O){var D,M,_=this.selectedAtoms(f,_);for(this.lastColors=null,_.length>0&&(this.molObj=null),typeof S=="string"&&typeof v.Gradient.builtinGradients[S]<"u"&&(S=new v.Gradient.builtinGradients[S]),S=S,O||(O=S.range()),O||(O=(0,b.getPropertyRange)(_,g)),D=0;D<_.length;D++){M=_[D];var A=(0,b.getAtomProperty)(M,g);A!=null&&(M.color=S.valueToHex(parseFloat(M.properties[g]),O))}}setColorByFunction(f,g){var S=this.selectedAtoms(f,S);if(typeof g=="function"){this.lastColors=null,S.length>0&&(this.molObj=null);for(let O=0;O<S.length;O++){let D=S[O];D.color=g(D)}}}toCDObject(f=!1){var g={a:[],b:[]};f&&(g.s=[]);for(let O=0;O<this.atoms.length;O++){let D={},M=this.atoms[O];if(D.x=M.x,D.y=M.y,D.z=M.z,M.elem!="C"&&(D.l=M.elem),f){for(var S=0;S<g.s.length&&JSON.stringify(M.style)!==JSON.stringify(g.s[S]);)S++;S===g.s.length&&g.s.push(M.style),S!==0&&(D.s=S)}g.a.push(D);for(let _=0;_<M.bonds.length;_++){let A=O,j=M.bonds[_];if(A>=j)continue;let L={b:A,e:j},$=M.bondOrder[_];$!=1&&(L.o=$),g.b.push(L)}}return g}globj(f,g){(this.molObj===null||g.regen)&&(this.molObj=this.createMolObj(this.atoms,g),this.renderedMolObj&&(f.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),f.add(this.renderedMolObj))}exportVRML(){var f=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return f.vrml()}removegl(f){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),f.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(f,g,S){let O=this.selectedAtoms(g),D=this.viewer,M=(0,b.deepCopy)(S);for(let A=0;A<O.length;A++){let j=O[A];var _=null;typeof j[f]<"u"?_=String(j[f]):typeof j.properties[f]<"u"&&(_=String(j.properties[f])),_!=null&&(M.position=j,D.addLabel(_,M))}}addResLabels(f,g,S=!1){let O=this.viewer;var D=[],M=function(A,j){for(var L=A.selectedAtoms(f,L),$={},F=0;F<L.length;F++){var W=L[F],U=W.chain,q=W.resn,H=W.resi,Y=q+""+H;$[U]||($[U]={}),$[U][Y]||($[U][Y]=[]),$[U][Y].push(W)}var Z=(0,b.deepCopy)(g);for(let J in $)if($.hasOwnProperty(J)){var X=$[J];for(let Q in X)if(X.hasOwnProperty(Q)){let G=X[Q],te=new l.Vector3(0,0,0);for(let de=0;de<G.length;de++){let xe=G[de];te.x+=xe.x,te.y+=xe.y,te.z+=xe.z}te.divideScalar(G.length),Z.position=te,Z.frame=j;let ue=O.addLabel(Q,Z,void 0,!0);D.push(ue)}}};if(S){var _=this.getNumFrames();let A=this.atoms;for(let j=0;j<_;j++)this.frames[j]&&(this.atoms=this.frames[j],M(this,j));this.atoms=A}else M(this);return D}setupDFS(){this.atomdfs=[];var f=this,g=new Int8Array(this.atoms.length);g.fill(0);for(var S=function(_,A,j){j.push([_,A]);var L=f.atoms[_];g[_]=1;for(var $=0;$<L.bonds.length;$++){var F=L.bonds[$];f.atoms[F]&&!g[F]&&S(F,_,j)}},O=0;O<this.atoms.length;O++){var D=this.atoms[O];if(D&&!g[O]){var M=[];S(O,-1,M),this.atomdfs.push(M)}}}setCoordinatesFromURL(f,g){this.frames=[];var S=this;return this.box&&this.setupDFS(),f.startsWith("http")||(f="http://"+f),(0,b.get)(f+"/traj/numframes/"+g,function(O){if(!isNaN(parseInt(O)))return S.frames.push(S.atoms),S.frames.numFrames=O,S.frames.url=f,S.frames.path=g,S.setFrame(0)})}setCoordinates(f,g){if(g=g||"",!f)return[];if(/\.gz$/.test(g)){g=g.replace(/\.gz$/,"");try{f=(0,b.inflateString)(f)}catch($){console.log($)}}var S={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(S.hasOwnProperty(g)){this.frames=[];for(var O=this.atoms.length,D=T.parseCrd(f,g),M=0;M<D.length;){for(var _=[],A=0;A<O;A++){var j={};for(var L in this.atoms[A])j[L]=this.atoms[A][L];_[A]=j,_[A].x=D[M++],_[A].y=D[M++],_[A].z=D[M++]}this.frames.push(_)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(f){}static parseCrd(f,g){var S=[],O=0;if(g=="pdb")for(var D=f.indexOf(`
ATOM`);D!=-1;){for(;f.slice(D,D+5)==`
ATOM`||f.slice(D,D+7)==`
HETATM`;)S[O++]=parseFloat(f.slice(D+31,D+39)),S[O++]=parseFloat(f.slice(D+39,D+47)),S[O++]=parseFloat(f.slice(D+47,D+55)),D=f.indexOf(`
`,D+54),f.slice(D,D+4)==`
TER`&&(D=f.indexOf(`
`,D+5));D=f.indexOf(`
ATOM`,D)}else if(g=="netcdf"){var M=new C.NetCDFReader(f);S=[].concat.apply([],M.getDataVariable("coordinates"))}else{if(g=="array"||Array.isArray(f))return f.flat(2);{let _=f.indexOf(`
`);g=="inpcrd"&&(_=f.indexOf(`
`,_+1)),f=f.slice(_+1),S=f.match(/\S+/g).map(parseFloat)}}return S}static parseMolData(f,g="",S){if(!f)return[];if(/\.gz$/.test(g)){g=g.replace(/\.gz$/,"");try{g.match(/bcif/i)?f=(0,b.inflateString)(f,!1):f=(0,b.inflateString)(f)}catch(M){console.log(M)}}typeof w.Parsers[g]>"u"&&(g=g.split(".").pop(),typeof w.Parsers[g]>"u"&&(console.log("Unknown format: "+g),f instanceof Uint8Array?g="bcif":f.match(/^@<TRIPOS>MOLECULE/gm)?g="mol2":f.match(/^data_/gm)&&f.match(/^loop_/gm)?g="cif":f.match(/^HETATM/gm)||f.match(/^ATOM/gm)?g="pdb":f.match(/ITEM: TIMESTEP/gm)?g="lammpstrj":f.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?g="sdf":f.match(/^%VERSION\s+VERSION_STAMP/gm)?g="prmtop":g="xyz",console.log("Best guess: "+g)));var O=w.Parsers[g],D=O(f,S);return D}}T.defaultAtomStyle={line:{}},T.defaultlineWidth=1,T.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},T.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"])},"./src/GLShape.ts"(e,t,n){n.r(t),n.d(t,{GLShape:()=>C,splitMesh:()=>R});var i=n("./src/WebGL/index.ts"),o=n("./src/WebGL/shapes/index.ts"),l=n("./src/WebGL/math/index.ts"),h=n("./src/colors.ts"),d=n("./src/ProteinSurface4.ts"),m=n("./src/VolumeData.ts"),b=n("./src/GLDraw.ts"),v=n("./src/glcartoon.ts"),w=n("./src/utilities.ts");class C{static finalizeGeo(E){var f=E.updateGeoGroup(0);f.vertices>0&&f.truncateArrayBuffers(!0,!0)}static updateColor(E,f){f=f||h.CC.color(f),E.colorsNeedUpdate=!0;var g,S,O;f.constructor!==Array&&(g=f.r,S=f.g,O=f.b);for(let D in E.geometryGroups){let M=E.geometryGroups[D],_=M.colorArray;for(let A=0,j=M.vertices;A<j;++A){if(f.constructor===Array){let L=f[A];g=L.r,S=L.g,O=L.b}_[A*3]=g,_[A*3+1]=S,_[A*3+2]=O}}}static drawArrow(E,f,g){var S=g.start,O=g.end,D=g.radius,M=g.radiusRatio,_=g.mid,A=g.midpos;if(!(S&&O))return;var j=f.updateGeoGroup(51),L=new l.Vector3(O.x,O.y,O.z).sub(S);if(A){let _e=L.length();A>0?_=A/_e:_=(_e+A)/_e}L.multiplyScalar(_);var $=new l.Vector3(S.x,S.y,S.z).add(L),F=L.clone().negate();let W=new l.Vector3(S.x,S.y,S.z);E.intersectionShape.cylinder.push(new o.Cylinder(W,$.clone(),D)),E.intersectionShape.sphere.push(new o.Sphere(W,D));var U=[];U[0]=L.clone(),Math.abs(U[0].x)>1e-4?U[0].y+=1:U[0].x+=1,U[0].cross(L),U[0].normalize(),U[4]=U[0].clone(),U[4].crossVectors(U[0],L),U[4].normalize(),U[8]=U[0].clone().negate(),U[12]=U[4].clone().negate(),U[2]=U[0].clone().add(U[4]).normalize(),U[6]=U[4].clone().add(U[8]).normalize(),U[10]=U[8].clone().add(U[12]).normalize(),U[14]=U[12].clone().add(U[0]).normalize(),U[1]=U[0].clone().add(U[2]).normalize(),U[3]=U[2].clone().add(U[4]).normalize(),U[5]=U[4].clone().add(U[6]).normalize(),U[7]=U[6].clone().add(U[8]).normalize(),U[9]=U[8].clone().add(U[10]).normalize(),U[11]=U[10].clone().add(U[12]).normalize(),U[13]=U[12].clone().add(U[14]).normalize(),U[15]=U[14].clone().add(U[0]).normalize();var q=j.vertices,H=j.vertexArray,Y=j.faceArray,Z=j.normalArray,X=j.lineArray,J,Q,G;for(Q=0,G=U.length;Q<G;++Q){J=3*(q+3*Q);var te=U[Q].clone().multiplyScalar(D).add(S),ue=U[Q].clone().multiplyScalar(D).add($),de=U[Q].clone().multiplyScalar(D*M).add($);if(H[J]=te.x,H[J+1]=te.y,H[J+2]=te.z,H[J+3]=ue.x,H[J+4]=ue.y,H[J+5]=ue.z,H[J+6]=de.x,H[J+7]=de.y,H[J+8]=de.z,Q>0){var xe=H[J-3],ve=H[J-2],Se=H[J-1],Ee=new l.Vector3(xe,ve,Se),he=new l.Vector3(O.x,O.y,O.z),Re=$.clone(),je=new l.Vector3(de.x,de.y,de.z);E.intersectionShape.triangle.push(new o.Triangle(je,he,Ee)),E.intersectionShape.triangle.push(new o.Triangle(Ee.clone(),Re,je.clone()))}}j.vertices+=48,J=j.vertices*3,H[J]=S.x,H[J+1]=S.y,H[J+2]=S.z,H[J+3]=$.x,H[J+4]=$.y,H[J+5]=$.z,H[J+6]=O.x,H[J+7]=O.y,H[J+8]=O.z,j.vertices+=3;var Ce,Le,me,Ie,Ve,nt,it,ot,at,Je,rt,et,Qe,ct,pt,oe,fe,pe,Be,ke=j.vertices-3,Ke=j.vertices-2,Ye=j.vertices-1,ie=ke*3,Ae=Ke*3,Ne=Ye*3;for(Q=0,G=U.length-1;Q<G;++Q){var Ze=q+3*Q;J=Ze*3,Le=j.faceidx,me=j.lineidx,Ie=Ze,Je=Ie*3,Ve=Ze+1,rt=Ve*3,nt=Ze+2,et=nt*3,it=Ze+4,Qe=it*3,ot=Ze+5,ct=ot*3,at=Ze+3,pt=at*3,oe=fe=U[Q],pe=Be=U[Q+1],Z[Je]=oe.x,Z[rt]=fe.x,Z[pt]=Be.x,Z[Je+1]=oe.y,Z[rt+1]=fe.y,Z[pt+1]=Be.y,Z[Je+2]=oe.z,Z[rt+2]=fe.z,Z[pt+2]=Be.z,Z[rt]=fe.x,Z[Qe]=pe.x,Z[pt]=Be.x,Z[rt+1]=fe.y,Z[Qe+1]=pe.y,Z[pt+1]=Be.y,Z[rt+2]=fe.z,Z[Qe+2]=pe.z,Z[pt+2]=Be.z,Z[et]=fe.x,Z[ct]=pe.x,Z[et+1]=fe.y,Z[ct+1]=pe.y,Z[et+2]=fe.z,Z[ct+2]=pe.z,Y[Le]=Ie,Y[Le+1]=Ve,Y[Le+2]=at,Y[Le+3]=Ve,Y[Le+4]=it,Y[Le+5]=at,Y[Le+6]=Ie,Y[Le+7]=at,Y[Le+8]=ke,Y[Le+9]=nt,Y[Le+10]=Ke,Y[Le+11]=ot,Y[Le+12]=nt,Y[Le+13]=Ye,Y[Le+14]=ot,X[me]=Ie,X[me+1]=Ve,X[me+2]=Ie,X[me+3]=at,X[me+4]=it,X[me+5]=at,X[me+6]=Ie,X[me+7]=at,X[me+8]=nt,X[me+9]=Ve,X[me+10]=nt,X[me+11]=ot,X[me+12]=it,X[me+13]=ot,X[me+14]=nt,X[me+15]=Ye,X[me+16]=nt,X[me+17]=ot,X[me+18]=Ye,X[me+19]=ot,j.faceidx+=15,j.lineidx+=20}Ce=[q+45,q+46,q+1,q,q+47,q+2],Le=j.faceidx,me=j.lineidx,Ie=Ce[0],Je=Ie*3,Ve=Ce[1],rt=Ve*3,nt=Ce[4],et=nt*3,it=Ce[2],Qe=it*3,ot=Ce[5],ct=ot*3,at=Ce[3],pt=at*3,oe=fe=U[15],pe=Be=U[0],Z[Je]=oe.x,Z[rt]=fe.x,Z[pt]=Be.x,Z[Je+1]=oe.y,Z[rt+1]=fe.y,Z[pt+1]=Be.y,Z[Je+2]=oe.z,Z[rt+2]=fe.z,Z[pt+2]=Be.z,Z[rt]=fe.x,Z[Qe]=pe.x,Z[pt]=Be.x,Z[rt+1]=fe.y,Z[Qe+1]=pe.y,Z[pt+1]=Be.y,Z[rt+2]=fe.z,Z[Qe+2]=pe.z,Z[pt+2]=Be.z,Z[et]=fe.x,Z[ct]=pe.x,Z[et+1]=fe.y,Z[ct+1]=pe.y,Z[et+2]=fe.z,Z[ct+2]=pe.z,L.normalize(),F.normalize(),Z[ie]=F.x,Z[Ae]=Z[Ne]=L.x,Z[ie+1]=F.y,Z[Ae+1]=Z[Ne+1]=L.y,Z[ie+2]=F.z,Z[Ae+2]=Z[Ne+2]=L.z,Y[Le]=Ie,Y[Le+1]=Ve,Y[Le+2]=at,Y[Le+3]=Ve,Y[Le+4]=it,Y[Le+5]=at,Y[Le+6]=Ie,Y[Le+7]=at,Y[Le+8]=ke,Y[Le+9]=nt,Y[Le+10]=Ke,Y[Le+11]=ot,Y[Le+12]=nt,Y[Le+13]=Ye,Y[Le+14]=ot,X[me]=Ie,X[me+1]=Ve,X[me+2]=Ie,X[me+3]=at,X[me+4]=it,X[me+5]=at,X[me+6]=Ie,X[me+7]=at,X[me+8]=nt,X[me+9]=Ve,X[me+10]=nt,X[me+11]=ot,X[me+12]=it,X[me+13]=ot,X[me+14]=nt,X[me+15]=Ye,X[me+16]=nt,X[me+17]=ot,X[me+18]=Ye,X[me+19]=ot,j.faceidx+=15,j.lineidx+=20}static updateBoundingFromPoints(E,f,g,S){E.center.set(0,0,0);let O=1/0,D=1/0,M=1/0,_=-1/0,A=-1/0,j=-1/0;E.box&&(O=E.box.min.x,_=E.box.max.x,D=E.box.min.y,A=E.box.max.y,M=E.box.min.z,j=E.box.max.z);for(let W=0,U=S;W<U;W++){var L=g[W*3],$=g[W*3+1],F=g[W*3+2];L<O&&(O=L),$<D&&(D=$),F<M&&(M=F),L>_&&(_=L),$>A&&(A=$),F>j&&(j=F)}E.center.set((_+O)/2,(A+D)/2,(j+M)/2),E.radius=E.center.distanceTo({x:_,y:A,z:j}),E.box={min:{x:O,y:D,z:M},max:{x:_,y:A,z:j}}}static addCustomGeo(E,f,g,S,O){var D=f.addGeoGroup(),M=g.vertexArr,_=g.normalArr,A=g.faceArr;D.vertices=M.length,D.faceidx=A.length;var j,L,$,F,W,U,q,H,Y,Z=D.vertexArray,X=D.colorArray;for(S.constructor!==Array&&(H=S.r,Y=S.g,F=S.b),U=0,q=D.vertices;U<q;++U)j=U*3,L=M[U],Z[j]=L.x,Z[j+1]=L.y,Z[j+2]=L.z,S.constructor===Array&&(W=S[U],H=W.r,Y=W.g,F=W.b),X[j]=H,X[j+1]=Y,X[j+2]=F;if(O)for(U=0,q=D.faceidx/3;U<q;++U){j=U*3,$=A[j],F=A[j+1],W=A[j+2];var J=new l.Vector3,Q=new l.Vector3,G=new l.Vector3;E.intersectionShape.triangle.push(new o.Triangle(J.copy(M[$]),Q.copy(M[F]),G.copy(M[W])))}if(O){var te=new l.Vector3(0,0,0),ue=0;for(let ve=0;ve<f.geometryGroups.length;ve++)te.add(f.geometryGroups[ve].getCentroid()),ue++;te.divideScalar(ue),C.updateBoundingFromPoints(E.boundingSphere,{centroid:te},Z,D.vertices)}if(D.faceArray=new Uint16Array(A),D.truncateArrayBuffers(!0,!0),_.length<D.vertices)D.setNormals();else{var de=D.normalArray=new Float32Array(D.vertices*3),xe;for(U=0,q=D.vertices;U<q;++U)j=U*3,xe=_[U],de[j]=xe.x,de[j+1]=xe.y,de[j+2]=xe.z}D.setLineIndices(),D.lineidx=D.lineArray.length}static updateFromStyle(E,f){typeof f.color<"u"?(E.color=f.color||new h.Color,f.color instanceof h.Color||(E.color=h.CC.color(f.color))):E.color=h.CC.color(0),E.wireframe=!!f.wireframe,E.opacity=f.alpha?(0,l.clamp)(f.alpha,0,1):1,typeof f.opacity<"u"&&(E.opacity=(0,l.clamp)(f.opacity,0,1)),E.side=f.side!==void 0?f.side:i.DoubleSide,E.linewidth=typeof f.linewidth>"u"?1:f.linewidth,E.clickable=!!f.clickable,E.callback=(0,w.makeFunction)(f.callback),E.hoverable=!!f.hoverable,E.hover_callback=(0,w.makeFunction)(f.hover_callback),E.unhover_callback=(0,w.makeFunction)(f.unhover_callback),E.contextMenuEnabled=!!f.contextMenuEnabled,E.hidden=f.hidden,E.frame=f.frame}constructor(E){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=i.DoubleSide,this.stylespec=E||{},this.boundingSphere=new o.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},C.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new i.Geometry(!0),this.linegeo=new i.Geometry(!0)}updateStyle(E){for(var f in E)this.stylespec[f]=E[f];if(C.updateFromStyle(this,this.stylespec),E.voldata&&E.volscheme){(0,w.adjustVolumeStyle)(E);const g=E.volscheme,S=E.voldata,O=h.CC,D=g.range()||[-1,1];this.geo.setColors(function(M,_,A){let j=S.getVal(M,_,A);return O.color(g.valueToHex(j,D))}),delete this.color}}addCustom(E){E.vertexArr=E.vertexArr||[],E.faceArr=E.faceArr||[],E.normalArr=E.normalArr||[],C.drawCustom(this,this.geo,E)}addSphere(E){E.center||(E.center=new l.Vector3(0,0,0)),E.radius=E.radius?(0,l.clamp)(E.radius,0,1/0):1.5,E.color=h.CC.color(E.color),this.intersectionShape.sphere.push(new o.Sphere(E.center,E.radius)),b.GLDraw.drawSphere(this.geo,E.center,E.radius,E.color,E.quality),this.components.push({centroid:new l.Vector3(E.center.x,E.center.y,E.center.z)});var f=this.geo.updateGeoGroup(0);C.updateBoundingFromPoints(this.boundingSphere,this.components,f.vertexArray,f.vertices)}addBox(E){var f=E.dimensions||{w:1,h:1,d:1},g;typeof f.w=="number"?g={x:f.w,y:0,z:0}:g=f.w;var S;typeof f.h=="number"?S={x:0,y:f.h,z:0}:S=f.h;var O;typeof f.d=="number"?O={x:0,y:0,z:f.d}:O=f.d;var D=E.corner;D==null&&(E.center!==void 0?D={x:E.center.x-.5*(g.x+S.x+O.x),y:E.center.y-.5*(g.y+S.y+O.y),z:E.center.z-.5*(g.z+S.z+O.z)}:D={x:0,y:0,z:0});var M=[{x:D.x,y:D.y,z:D.z},{x:D.x+g.x,y:D.y+g.y,z:D.z+g.z},{x:D.x+S.x,y:D.y+S.y,z:D.z+S.z},{x:D.x+g.x+S.x,y:D.y+g.y+S.y,z:D.z+g.z+S.z},{x:D.x+O.x,y:D.y+O.y,z:D.z+O.z},{x:D.x+g.x+O.x,y:D.y+g.y+O.y,z:D.z+g.z+O.z},{x:D.x+S.x+O.x,y:D.y+S.y+O.y,z:D.z+S.z+O.z},{x:D.x+g.x+S.x+O.x,y:D.y+g.y+S.y+O.y,z:D.z+g.z+S.z+O.z}],_=[],A=[];_.splice(_.length,0,M[0],M[1],M[2],M[3]),A.splice(A.length,0,0,2,1,1,2,3);var j=4;_.splice(_.length,0,M[2],M[3],M[6],M[7]),A.splice(A.length,0,j+0,j+2,j+1,j+1,j+2,j+3),j+=4,_.splice(_.length,0,M[4],M[5],M[0],M[1]),A.splice(A.length,0,j+0,j+2,j+1,j+1,j+2,j+3),j+=4,_.splice(_.length,0,M[6],M[7],M[4],M[5]),A.splice(A.length,0,j+0,j+2,j+1,j+1,j+2,j+3),j+=4,_.splice(_.length,0,M[3],M[1],M[7],M[5]),A.splice(A.length,0,j+0,j+2,j+1,j+1,j+2,j+3),j+=4,_.splice(_.length,0,M[2],M[6],M[0],M[4]),A.splice(A.length,0,j+0,j+2,j+1,j+1,j+2,j+3),j+=4;var L=(0,w.extend)({},E);L.vertexArr=_,L.faceArr=A,L.normalArr=[],C.drawCustom(this,this.geo,L);var $=new l.Vector3;this.components.push({centroid:$.addVectors(M[0],M[7]).multiplyScalar(.5)});var F=this.geo.updateGeoGroup(0);C.updateBoundingFromPoints(this.boundingSphere,this.components,F.vertexArray,F.vertices)}addCylinder(E){var f,g;E.start?f=new l.Vector3(E.start.x||0,E.start.y||0,E.start.z||0):f=new l.Vector3(0,0,0),E.end?(g=new l.Vector3(E.end.x,E.end.y||0,E.end.z||0),typeof g.x>"u"&&(g.x=3)):g=new l.Vector3(0,0,0);var S=E.radius||.1,O=h.CC.color(E.color);this.intersectionShape.cylinder.push(new o.Cylinder(f,g,S)),b.GLDraw.drawCylinder(this.geo,f,g,S,O,E.fromCap,E.toCap);var D=new l.Vector3;this.components.push({centroid:D.addVectors(f,g).multiplyScalar(.5)});var M=this.geo.updateGeoGroup(0);C.updateBoundingFromPoints(this.boundingSphere,this.components,M.vertexArray,M.vertices)}addDashedCylinder(E){E.dashLength=E.dashLength||.25,E.gapLength=E.gapLength||.25;var f;E.start?f=new l.Vector3(E.start.x||0,E.start.y||0,E.start.z||0):f=new l.Vector3(0,0,0);var g;E.end?(g=new l.Vector3(E.end.x,E.end.y||0,E.end.z||0),typeof g.x>"u"&&(g.x=3)):g=new l.Vector3(3,0,0);for(var S=E.radius||.1,O=h.CC.color(E.color),D=Math.sqrt(Math.pow(f.x-g.x,2)+Math.pow(f.y-g.y,2)+Math.pow(f.z-g.z,2)),M=D/(E.gapLength+E.dashLength),_=new l.Vector3(E.start.x||0,E.start.y||0,E.start.z||0),A=new l.Vector3(E.end.x,E.end.y||0,E.end.z||0),j=new l.Vector3((g.x-f.x)/(D/E.gapLength),(g.y-f.y)/(D/E.gapLength),(g.z-f.z)/(D/E.gapLength)),L=new l.Vector3((g.x-f.x)/(D/E.dashLength),(g.y-f.y)/(D/E.dashLength),(g.z-f.z)/(D/E.dashLength)),$=0;$<M;$++)A=new l.Vector3(_.x+L.x,_.y+L.y,_.z+L.z),this.intersectionShape.cylinder.push(new o.Cylinder(_,A,S)),b.GLDraw.drawCylinder(this.geo,_,A,S,O,E.fromCap,E.toCap),_=new l.Vector3(A.x+j.x,A.y+j.y,A.z+j.z);var F=new l.Vector3;this.components.push({centroid:F.addVectors(f,g).multiplyScalar(.5)});var W=this.geo.updateGeoGroup(0);C.updateBoundingFromPoints(this.boundingSphere,this.components,W.vertexArray,W.vertices)}addCurve(E){E.points=E.points||[],E.smooth=E.smooth||10,typeof E.fromCap>"u"&&(E.fromCap=2),typeof E.toCap>"u"&&(E.toCap=2);var f=(0,v.subdivide_spline)(E.points,E.smooth);if(f.length<3){console.log("Too few points in addCurve");return}var g=E.radius||.1,S=h.CC.color(E.color),O=0,D=f.length-1,M=f[0].distanceTo(f[1]),_=Math.ceil(2*g/M);if(E.toArrow){D-=_;let $={start:f[D],end:f[f.length-1],radius:g,color:S,mid:1e-4};this.addArrow($)}if(E.fromArrow){O+=_;let $={start:f[O],end:f[0],radius:g,color:S,mid:1e-4};this.addArrow($)}for(var A=Math.ceil(f.length/2),j={radius:g,color:S,fromCap:2,toCap:2},L=O;L<D;L++)j.start=f[L],j.end=f[L+1],j.fromCap=2,j.toCap=2,L<A?(j.fromCap=2,j.toCap=0):L>A?(j.fromCap=0,j.toCap=2):(j.fromCap=2,j.toCap=2),this.addCylinder(j)}addLine(E){var f,g;E.start?f=new l.Vector3(E.start.x||0,E.start.y||0,E.start.z||0):f=new l.Vector3(0,0,0),E.end?(g=new l.Vector3(E.end.x,E.end.y||0,E.end.z||0),typeof g.x>"u"&&(g.x=3)):g=new l.Vector3(3,0,0);var S=this.geo.updateGeoGroup(2),O=S.vertices,D=O*3,M=S.vertexArray;M[D]=f.x,M[D+1]=f.y,M[D+2]=f.z,M[D+3]=g.x,M[D+4]=g.y,M[D+5]=g.z,S.vertices+=2;var _=S.lineArray,A=S.lineidx;_[A]=O,_[A+1]=O+1,S.lineidx+=2;var j=new l.Vector3;this.components.push({centroid:j.addVectors(f,g).multiplyScalar(.5)}),S=this.geo.updateGeoGroup(0),C.updateBoundingFromPoints(this.boundingSphere,this.components,S.vertexArray,S.vertices)}addArrow(E){if(E.start?E.start=new l.Vector3(E.start.x||0,E.start.y||0,E.start.z||0):E.start=new l.Vector3(0,0,0),E.dir instanceof l.Vector3&&typeof E.length=="number"){var f=E.dir.clone().multiplyScalar(E.length).add(E.start);E.end=f}else E.end?(E.end=new l.Vector3(E.end.x,E.end.y||0,E.end.z||0),typeof E.end.x>"u"&&(E.end.x=3)):E.end=new l.Vector3(3,0,0);E.radius=E.radius||.1,E.radiusRatio=E.radiusRatio||1.618034,E.mid=0<E.mid&&E.mid<1?E.mid:.618034,C.drawArrow(this,this.geo,E);var g=new l.Vector3;this.components.push({centroid:g.addVectors(E.start,E.end).multiplyScalar(.5)});var S=this.geo.updateGeoGroup(0);C.updateBoundingFromPoints(this.boundingSphere,this.components,S.vertexArray,S.vertices)}static distance_from(E,f){return Math.sqrt(Math.pow(E.x-f.x,2)+Math.pow(E.y-f.y,2)+Math.pow(E.z-f.z,2))}static inSelectedRegion(E,f,g){for(var S=0;S<f.length;S++)if(C.distance_from(f[S],E)<=g)return!0;return!1}addIsosurface(E,f,g,S){var O=f.isoval!==void 0&&typeof f.isoval=="number"?f.isoval:0,D=!!f.voxel,M=f.smoothness===void 0?1:f.smoothness,_=E.size.x,A=E.size.y,j=E.size.z,L=new Int16Array(_*A*j),$=E.data,F,W;for(F=0,W=L.length;F<W;++F)L[F]=-1;var U=new Uint8Array(_*A*j);for(F=0,W=$.length;F<W;++F){var q=O>=0?$[F]-O:O-$[F];q>0&&(U[F]|=C.ISDONE)}var H=[],Y=[];d.MarchingCube.march(U,H,Y,{fulltable:!0,voxel:D,unitCube:E.unit,origin:E.origin,matrix:E.matrix,nX:_,nY:A,nZ:j}),!D&&M>0&&d.MarchingCube.laplacianSmooth(M,H,Y);var Z=[],X=[],J=[];if(f.selectedRegion&&f.coords===void 0&&(f.coords=f.selectedRegion),f.coords===void 0&&f.selection!==void 0&&(S?f.coords=S.selectedAtoms(f.selection):console.log("addIsosurface needs viewer is selection provided.")),f.coords!==void 0){var Q=f.coords[0].x,G=f.coords[0].y,te=f.coords[0].z,ue=f.coords[0].x,de=f.coords[0].y,xe=f.coords[0].z;for(let me=0;me<f.coords.length;me++)f.coords[me].x>Q?Q=f.coords[me].x:f.coords[me].x<ue&&(ue=f.coords[me].x),f.coords[me].y>G?G=f.coords[me].y:f.coords[me].y<de&&(de=f.coords[me].y),f.coords[me].z>te?te=f.coords[me].z:f.coords[me].z<xe&&(xe=f.coords[me].z);var ve=2;f.radius!==void 0&&(ve=f.radius),f.selectedOffset!==void 0&&(ve=f.selectedOffset),f.seldist!==void 0&&(ve=f.seldist),ue-=ve,Q+=ve,de-=ve,G+=ve,xe-=ve,te+=ve;for(let me=0;me<H.length;me++)H[me].x>ue&&H[me].x<Q&&H[me].y>de&&H[me].y<G&&H[me].z>xe&&H[me].z<te&&C.inSelectedRegion(H[me],f.coords,ve)?(Z.push(X.length),X.push(H[me])):Z.push(-1);for(let me=0;me+2<Y.length;me+=3)Z[Y[me]]!==-1&&Z[Y[me+1]]!==-1&&Z[Y[me+2]]!==-1&&(J.push(Y[me]-(Y[me]-Z[Y[me]])),J.push(Y[me+1]-(Y[me+1]-Z[Y[me+1]])),J.push(Y[me+2]-(Y[me+2]-Z[Y[me+2]])));H=X,Y=J}C.drawCustom(this,this.geo,{vertexArr:H,faceArr:Y,normalArr:[],clickable:f.clickable,hoverable:f.hoverable}),this.updateStyle(f);var Se=new l.Vector3(E.origin.x,E.origin.y,E.origin.z),Ee=new l.Vector3(E.size.x*E.unit.x,E.size.y*E.unit.y,E.size.z*E.unit.z),he=new l.Vector3(0,0,0),Re=Se.clone(),je=Se.clone().add(Ee);for(let me=0;me<H.length;me++)he.add(H[me]),Re.max(H[me]),je.min(H[me]);he.divideScalar(H.length);var Ce=he.distanceTo(je),Le=he.distanceTo(Re);this.boundingSphere.center=he,this.boundingSphere.radius=Math.max(Ce,Le),typeof g=="function"&&g()}addVolumetricData(E,f,g){E=new m.VolumeData(E,f),this.addIsosurface(E,g)}finalize(){return C.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(E){if(this.renderedShapeObj&&(E.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){C.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&C.updateColor(this.geo,this.color),this.shapeObj=new i.Object3D;var f=null;this.side==i.DoubleSide?f=new i.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:i.Coloring.VertexColors}):f=new i.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:i.Coloring.VertexColors});var g=new i.Mesh(this.geo,f);if(this.shapeObj.add(g),this.linegeo&&this.linegeo.vertices>0){var S=new i.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),O=new i.Line(this.linegeo,S,i.LineStyle.LinePieces);this.shapeObj.add(O)}this.renderedShapeObj=this.shapeObj.clone(),E.add(this.renderedShapeObj)}}removegl(E){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),E.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}C.ISDONE=2,C.drawCustom=function(T,E,f){var g=f,S=g.vertexArr,O=g.faceArr;(S.length===0||O.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var D=f.color;typeof D>"u"&&(D=T.color),D=h.CC.color(D);for(var M=R(g),_=0,A=M.length;_<A;_++)C.addCustomGeo(T,E,M[_],M[_].colorArr?M[_].colorArr:D,f.clickable)};function R(T){var E=64e3;if(T.vertexArr.length<E)return[T];var f=[{vertexArr:[],normalArr:[],faceArr:[]}];T.colorArr&&(f.colorArr=[]);var g=[],S=[],O=0,D=T.faceArr;for(let _=0,A=D.length;_<A;_+=3){let j=f[O];for(let L=0;L<3;L++){var M=D[_+L];g[M]!==O&&(g[M]=O,S[M]=j.vertexArr.length,j.vertexArr.push(T.vertexArr[M]),T.normalArr&&T.normalArr[M]&&j.normalArr.push(T.normalArr[M]),T.colorArr&&T.colorArr[M]&&j.colorArr.push(T.colorArr[M])),j.faceArr.push(S[M])}j.vertexArr.length>=E&&(f.push({vertexArr:[],normalArr:[],faceArr:[]}),T.colorArr&&(f.colorArr=[]),O++)}return f}},"./src/GLViewer.ts"(e,t,n){n.r(t),n.d(t,{CONTEXTS_PER_VIEWPORT:()=>E,GLViewer:()=>g,createStereoViewer:()=>D,createViewer:()=>S,createViewerGrid:()=>O});var i=n("./node_modules/upng-js/UPNG.js"),o=n("./src/GLModel.ts"),l=n("./src/GLShape.ts"),h=n("./src/Gradient.ts"),d=n("./src/Label.ts"),m=n("./src/ProteinSurface4.ts"),b=n("./src/VolumeData.ts"),v=n("./src/VolumetricRender.ts"),w=n("./src/WebGL/index.ts"),C=n("./src/WebGL/math/index.ts"),R=n("./src/colors.ts"),T=n("./src/utilities.ts");const E=16;class f extends Array{constructor(_){super(..._)}getSymmetries(){if(this.length==0)return[];let _=this[0];return typeof _.symmetries>"u"&&this.setSymmetries([new C.Matrix4]),_.symmetries}setSymmetries(_){typeof _>"u"&&(_=[new C.Matrix4]);for(let A of this)A.symmetries=_,A.finished=!1}}class g{getWidth(){let _=this.container,A=_.offsetWidth;if(A==0&&_.style.display==="none"){let j=_.style.position,L=_.style.visibility;_.style.display="block",_.style.visibility="hidden",_.style.position="absolute",A=_.offsetWidth,_.style.display="none",_.style.visibility=L,_.style.position=j}return A}getHeight(){let _=this.container,A=_.offsetHeight;if(A==0&&_.style.display==="none"){let j=_.style.position,L=_.style.visibility;_.style.display="block",_.style.visibility="hidden",_.style.position="absolute",A=_.offsetHeight,_.style.display="none",_.style.visibility=L,_.style.position=j}return A}setupRenderer(){let _=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new w.Renderer(_),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new w.Scene,this.scene.fog=new w.Fog(this.bgColor,100,200),this.modelGroup=new w.Object3D,this.rotationGroup=new w.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new C.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var _=new w.Light(16777215);_.position=new C.Vector3(.2,.2,1).normalize(),_.intensity=1,this.scene.add(_)}_handleLostContext(_){const A=function(j){const L=j.getBoundingClientRect();return!(L.right<0||L.bottom<0||L.top>(window.innerHeight||document.documentElement.clientHeight)||L.left>(window.innerWidth||document.documentElement.clientWidth))};if(A(this.container)){let j=0;for(let L of document.getElementsByTagName("canvas"))if(A(L)&&L._3dmol_viewer!=null&&(L._3dmol_viewer.resize(),j+=1,j>=E))break}}initContainer(_){this.container=_,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var _=0;for(let j in this.surfaces)if(this.surfaces.hasOwnProperty(j)){var A=parseInt(j);isNaN(A)||A>_&&(_=A)}return _+1}setSlabAndFog(){let _=this.camera.position.z-this.rotationGroup.position.z;_<1&&(_=1),this.camera.near=_+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=_+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=_*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(_){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!_&&this.linkedViewers.length>0))for(var A=this._viewer.getView(),j=0;j<this.linkedViewers.length;j++){var L=this.linkedViewers[j];L.setView(A,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let _=0,A=this.models.length;_<A;_++){let j=this.models[_];if(j){let L=j.selectedAtoms({clickable:!0}),$=j.selectedAtoms({hoverable:!0}),F=j.selectedAtoms({contextMenuEnabled:!0});for(let W=0;W<$.length;W++)this.hoverables.push($[W]);for(let W=0;W<L.length;W++)this.clickables.push(L[W]);for(let W=0;W<F.length;W++)this.contextMenuEnabledObjects.push(F[W])}}for(let _=0,A=this.shapes.length;_<A;_++){let j=this.shapes[_];j&&j.clickable&&this.clickables.push(j),j&&j.hoverable&&this.hoverables.push(j),j&&j.contextMenuEnabled&&this.contextMenuEnabledObjects.push(j)}}handleClickSelection(_,A,j){let L=this.targetedObjects(_,A,this.clickables);if(L.length){var $=L[0].clickable;$.callback!==void 0&&(typeof $.callback!="function"&&($.callback=(0,T.makeFunction)($.callback)),typeof $.callback=="function"&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes($)&&this.userContextMenuHandler||$.callback($,this._viewer,j,this.container,L)))}}canvasOffset(){let _=this.glDOM,A=_.getBoundingClientRect(),j=_.ownerDocument,L=j.documentElement,$=j.defaultView;return{top:A.top+$.pageYOffset-L.clientTop,left:A.left+$.pageXOffset-L.clientLeft}}setHover(_,A,j){this.current_hover!=_&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,T.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,A,this.container,j)),this.current_hover=_,_&&_.hover_callback!==void 0&&(typeof _.hover_callback!="function"&&(_.hover_callback=(0,T.makeFunction)(_.hover_callback)),typeof _.hover_callback=="function"&&_.hover_callback(_,this._viewer,A,this.container,j)))}handleHoverSelection(_,A,j){if(this.hoverables.length==0)return;let L=this.targetedObjects(_,A,this.hoverables);if(L.length){var $=L[0].clickable;this.setHover($,j,L),this.current_hover=$}else this.setHover(null)}handleHoverContinue(_,A){let j=this.targetedObjects(_,A,this.hoverables);(j.length==0||j[0]===void 0)&&this.setHover(null),j[0]!==void 0&&j[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(_,{allowTolerance:A=_.targetTouches,tolerance:j=5}={}){const L=this.getX(_),$=this.getY(_);if(A){const F=Math.abs(L-this.mouseStartX),W=Math.abs($-this.mouseStartY);return F<=j&&W<=j}else return L===this.mouseStartX&&$===this.mouseStartY}calcTouchDistance(_){var A=_.targetTouches[0].pageX-_.targetTouches[1].pageX,j=_.targetTouches[0].pageY-_.targetTouches[1].pageY;return Math.hypot(A,j)}getX(_){var A=_.pageX;return A==null&&(A=_.pageX),_.targetTouches&&_.targetTouches[0]?A=_.targetTouches[0].pageX:_.changedTouches&&_.changedTouches[0]&&(A=_.changedTouches[0].pageX),A}getY(_){var A=_.pageY;return A==null&&(A=_.pageY),_.targetTouches&&_.targetTouches[0]?A=_.targetTouches[0].pageY:_.changedTouches&&_.changedTouches[0]&&(A=_.changedTouches[0].pageY),A}isInViewer(_,A){if(this.viewers!=null){var j=this.WIDTH/this.cols,L=this.HEIGHT/this.rows,$=this.canvasOffset(),F=_-$.left,W=A-$.top,U=this.rows-Math.floor(W/L)-1,q=Math.floor(F/j);if(U!=this.row||q!=this.col)return!1}return!0}adjustZoomToLimits(_){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let A=this.CAMERA_Z-this.config.lowerZoomLimit;_>A&&(_=A)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let A=this.CAMERA_Z-this.config.upperZoomLimit;_<A&&(_=A)}return _>this.CAMERA_Z-1&&(_=this.CAMERA_Z-1),_}static slerp(_,A,j){if(j==1)return A.clone();if(j==0)return _.clone();let L=_.x*A.x+_.y*A.y+_.z*A.z+_.w*A.w;if(L>.9995){let Y=new C.Quaternion(_.x+j*(A.x-_.x),_.y+j*(A.y-_.y),_.z+j*(A.z-_.z),_.w+j*(A.w-_.w));return Y.normalize(),Y}L<0&&(A=A.clone().multiplyScalar(-1),L=-L),L>1?L=1:L<-1&&(L=-1);var $=Math.acos(L),F=$*j,W=A.clone();W.sub(_.clone().multiplyScalar(L)),W.normalize();var U=Math.cos(F),q=Math.sin(F),H=new C.Quaternion(_.x*U+W.x*q,_.y*U+W.y*q,_.z*U+W.z*q,_.w*U+W.w*q);return H.normalize(),H}constructor(_,A={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new C.Quaternion(0,0,0,1),this.dq=new C.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=A,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=R.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=R.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=_,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new w.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new C.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new C.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new w.Raycaster(new C.Vector3(0,0,0),new C.Vector3(0,0,0)),this.projector=new w.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=R.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),typeof window.IntersectionObserver<"u"){let j=(L,$)=>{L.forEach(F=>{F.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(j),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(j){console.log("error with glviewer callback: "+j)}}targetedObjects(_,A,j){var L={x:_,y:A,z:-1};return Array.isArray(j)||(j=this.selectedAtoms(j)),j.length==0?[]:(this.raycaster.setFromCamera(L,this.camera),this.raycaster.intersectObjects(this.modelGroup,j))}modelToScreen(_){let A=!1;Array.isArray(_)||(_=[_],A=!0);let j=this.renderer.getXRatio(),L=this.renderer.getYRatio(),$=this.col,F=this.row,W=$*(this.WIDTH/j),U=(L-F-1)*(this.HEIGHT/L),q=[],H=this.canvasOffset();return _.forEach(Y=>{let Z=new C.Vector3(Y.x,Y.y,Y.z);Z.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(Z,this.camera);let X=this.WIDTH/j*(Z.x+1)/2+H.left+W,J=-(this.HEIGHT/L)*(Z.y-1)/2+H.top+U;q.push({x:X,y:J})}),A&&(q=q[0]),q}screenOffsetToModel(_,A,j){var L=_/this.WIDTH,$=A/this.HEIGHT,F=j===void 0?this.rotationGroup.position.z:j,W=this.rotationGroup.quaternion,U=new C.Vector3(0,0,F);return this.projector.projectVector(U,this.camera),U.x+=L*2,U.y-=$*2,this.projector.unprojectVector(U,this.camera),U.z=0,U.applyQuaternion(W),U}screenToModelDistance(_,A){let j=this.canvasOffset(),L=new C.Vector3(A.x,A.y,A.z);L.applyMatrix4(this.modelGroup.matrixWorld);let $=L.clone();this.projector.projectVector(L,this.camera);let F=new C.Vector3((_.x-j.left)*2/this.WIDTH-1,(_.y-j.top)*2/-this.HEIGHT+1,L.z);return this.projector.unprojectVector(F,this.camera),F.distanceTo($)}setViewChangeCallback(_){(typeof _=="function"||_==null)&&(this.viewChangeCallback=_)}setStateChangeCallback(_){(typeof _=="function"||_==null)&&(this.stateChangeCallback=_)}getConfig(){return this.config}setConfig(_){this.config=_,_.ambientOcclusion&&this.renderer.enableAmbientOcclusion(_.ambientOcclusion)}getInternalState(){var _={models:[],surfaces:[],shapes:[],labels:[]};for(let A=0;A<this.models.length;A++)this.models[A]&&(_.models[A]=this.models[A].getInternalState());return _}setInternalState(_){this.clear();var A=_.models;for(let j=0;j<A.length;j++)A[j]&&(this.models[j]=new o.GLModel(j,void 0,this),this.models[j].setInternalState(A[j]));this.render()}setZoomLimits(_,A){typeof _<"u"&&(this.config.lowerZoomLimit=_),A&&(this.config.upperZoomLimit=A),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(_){_.fov!==void 0&&(this.fov=_.fov,this.camera.fov=this.fov),_.z!==void 0&&(this.CAMERA_Z=_.z,this.camera.z=this.CAMERA_Z),_.orthographic!==void 0&&(this.camera.ortho=_.orthographic),this.setSlabAndFog()}_handleMouseDown(_){if(_.preventDefault(),!this.scene)return;var A=this.getX(_),j=this.getY(_);if(A===void 0)return;this.isDragging=!0,this.mouseButton=_.which,this.mouseStartX=A,this.mouseStartY=j,this.touchHold=!0,this.touchDistanceStart=0,_.targetTouches&&_.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(_)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let L=this;_.targetTouches&&_.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(L.touchHold==!0){L.glDOM=L.renderer.domElement;const $=_.targetTouches[0],F=new PointerEvent("contextmenu",Object.assign(Object.assign({},_),{pageX:$.pageX,pageY:$.pageY,screenX:$.screenX,screenY:$.screenY,clientX:$.clientX,clientY:$.clientY}));L.glDOM.dispatchEvent(F)}},this.longTouchDuration))}_handleMouseUp(_){if(this.touchHold=!1,this.isDragging&&this.scene){var A=this.getX(_),j=this.getY(_);if(this.closeEnoughForClick(_)&&this.isInViewer(A,j)){let L=this.mouseXY(A,j);this.handleClickSelection(L.x,L.y,_)}}this.isDragging=!1}_handleMouseScroll(_){if(_.preventDefault(),!!this.scene){var A=this.getX(_),j=this.getY(_);if(A!==void 0&&!(!this.control_all&&!this.isInViewer(A,j))){var L=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,$=1;if(_.ctrlKey&&($=-1),_.detail)this.rotationGroup.position.z+=$*L*_.detail/10;else if(_.wheelDelta){let F=_.wheelDelta*600/(_.wheelDelta+600);this.rotationGroup.position.z-=$*L*F/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(_){let A=this;return _=_||1,new Promise(function(j){let L=0,$=A.viewChangeCallback,F=[],W=[],U=Date.now();A.viewChangeCallback=function(){W.push(Date.now()-U),U=Date.now(),F.push(new Promise(q=>{A.getCanvas().toBlob(function(H){H.arrayBuffer().then(q)},"image/png")})),L+=1,L==_&&(A.viewChangeCallback=$,Promise.all(F).then(q=>{let H=[];for(let G=0;G<q.length;G++){let te=(0,i.decode)(q[G]);H.push((0,i.toRGBA8)(te)[0])}let Y=A.getCanvas().width,Z=A.getCanvas().height,X=(0,i.encode)(H,Y,Z,0,W),J=new Blob([X],{type:"image/png"}),Q=new FileReader;Q.onload=function(G){j(G.target.result)},Q.readAsDataURL(J)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(_){this.hoverDuration=_}mouseXY(_,A){let j=this.canvasOffset(),L=this.renderer.getXRatio(),$=this.renderer.getYRatio(),F=this.col,W=this.row,U=F*(this.WIDTH/L),q=($-W-1)*(this.HEIGHT/$),H=(_-j.left-U)/(this.WIDTH/L)*2-1,Y=-((A-j.top-q)/(this.HEIGHT/$))*2+1;return{x:H,y:Y}}_handleMouseMove(_){clearTimeout(this.hoverTimeout),_.preventDefault();let A=this.getX(_),j=this.getY(_);if(A===void 0)return;let L=this.renderer.getXRatio(),$=this.renderer.getYRatio(),F=this.mouseXY(A,j),W=this;this.current_hover!==null&&this.handleHoverContinue(F.x,F.y);var U=0;if(!(!this.control_all&&!this.isInViewer(A,j))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){W.handleHoverSelection(F.x,F.y,_)},this.hoverDuration)),!!this.isDragging)){_.targetTouches&&(_.targetTouches.length>1||_.targetTouches.length===1&&!this.closeEnoughForClick(_))&&clearTimeout(this.longTouchTimeout);var q=(A-this.mouseStartX)/this.WIDTH,H=(j-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&_.targetTouches&&_.targetTouches.length==2){var Y=this.calcTouchDistance(_);U=2,H=(Y-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else _.targetTouches&&_.targetTouches.length==3&&(U=1);q*=L,H*=$;var Z=Math.hypot(q,H),X;if(U==3||this.mouseButton==3&&_.ctrlKey)this.slabNear=this.cslabNear+q*100,this.slabFar=this.cslabFar-H*100;else if(U==2||this.mouseButton==3||_.shiftKey)X=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,X<80&&(X=80),this.rotationGroup.position.z=this.cz+H*X,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(U==1||this.mouseButton==2||_.ctrlKey){var J=this.screenOffsetToModel(L*(A-this.mouseStartX),$*(j-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,J)}else if((U===0||this.mouseButton==1)&&Z!==0){var Q=Math.sin(Z*Math.PI)/Z;this.dq.x=Math.cos(Z*Math.PI),this.dq.y=0,this.dq.z=Q*q,this.dq.w=-Q*H,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(_){if(_.preventDefault(),this.closeEnoughForClick(_)){var L=this.mouseStartX,$=this.mouseStartY,j=this.canvasOffset();let F=this.mouseXY(L,$),W=F.x,U=F.y,q=this.targetedObjects(W,U,this.contextMenuEnabledObjects);var A=null;q.length&&(A=q[0].clickable);var j=this.canvasOffset(),L=this.mouseStartX-j.left,$=this.mouseStartY-j.top;this.userContextMenuHandler&&(this.userContextMenuHandler(A,L,$,q,_),this.isDragging=!1)}}setContainer(_){let A=(0,T.getElement)(_)||this.container;return this.initContainer(A),this}setBackgroundColor(_,A){(typeof A>"u"||A<0||A>1)&&(A=1);var j=R.CC.color(_);return this.scene.fog.color=j,this.bgColor=j.getHex(),this.renderer.setClearColorHex(j.getHex(),A),this.show(),this}setProjection(_){this.camera.ortho=_==="orthographic",this.setSlabAndFog()}setViewStyle(_){if(_=_||{},_.style=_.style||"",_.style.includes("outline")?this.renderer.enableOutline(_):this.renderer.disableOutline(),_.style.includes("ambientOcclusion")){var A={};_.strength&&(A.strength=_.strength),_.radius&&(A.radius=_.radius),this.renderer.enableAmbientOcclusion(A)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(_){return this.WIDTH=_||this.WIDTH,this.updateSize(),this}setHeight(_){return this.HEIGHT=_||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let _=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let A=!1,j=this.container.querySelector("canvas");j&&j!=this.renderer.getCanvas()?this.config.canvas=j:(j.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,A=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),_=!0,A&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),_){let A=this.renderer.supportedExtensions();if(A.regen=!0,this.viewers)for(let j=0,L=this.viewers.length;j<L;j++)for(let $=0,F=this.viewers[j].length;$<F;$++)this.viewers[j][$].render(null,A);this._viewer.render(null,A)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(_){return _===void 0?this.models.length==0?null:this.models[this.models.length-1]:_ instanceof o.GLModel?_:_ in this.models?this.models[_]:this.models.length==0?null:this.models[this.models.length-1]}spin(_,A=1,j=!1){if(clearInterval(this.spinInterval),typeof _>"u"&&(_="y"),typeof _=="boolean")if(_)_="y";else return;Array.isArray(_)&&(_={x:_[0],y:_[1],z:_[2]});var L=this;this.spinInterval=setInterval(function(){!L.getCanvas().isConnected&&L.renderer.isLost()&&clearInterval(L.spinInterval),(!j||L.container.checkVisibility&&L.container.checkVisibility())&&L.rotate(1*A,_)},25)}animateMotion(_,A,j,L,$,F){var W=20,U=Math.ceil(_/W);U<1&&(U=1),this.incAnim();var q={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(A){let Z=new Array(U);for(let G=0;G<U;G++){let te=(G+1)/U,ue={mpos:q.mpos,rz:q.rz,rot:q.rot};ue.mpos=j.clone().sub(q.mpos).multiplyScalar(te).add(q.mpos),ue.rz=q.rz+te*(L-q.rz),ue.rot=g.slerp(q.rot,$,te),ue.cam=F.clone().sub(q.cam).multiplyScalar(te).add(q.cam),Z[G]=ue}let X=0,J=this,Q=function(){var G=Z[X];X+=1,J.modelGroup.position=G.mpos,J.rotationGroup.position.z=G.rz,J.rotationGroup.quaternion=G.rot,J.camera.lookAt(G.cam),X<Z.length?setTimeout(Q,W):J.decAnim(),J.show()};setTimeout(Q,W)}else{var H={};let Z=1/U;if(j&&(H.mpos=j.clone().sub(q.mpos).multiplyScalar(Z)),typeof L<"u"&&L!=null&&(H.rz=Z*(L-q.rz)),$){var Y=g.slerp(q.rot,$,Z);H.rot=q.rot.clone().inverse().multiply(Y)}F&&(H.cam=F.clone().sub(q.cam).multiplyScalar(Z));let X=0,J=this,Q=function(){X+=1,H.mpos&&J.modelGroup.position.add(H.mpos),H.rz&&(J.rotationGroup.position.z+=H.rz),H.rot&&J.rotationGroup.quaternion.multiply(H.rot),H.cam&&(J.lookingAt.add(H.cam),J.camera.lookAt(J.lookingAt)),X<U?setTimeout(Q,W):J.decAnim(),J.show()};setTimeout(Q,W)}}rotate(_,A="y",j=0,L=!1){if(A=="x"?A={x:1,y:0,z:0}:A=="y"?A={x:0,y:1,z:0}:A=="z"&&(A={x:0,y:0,z:1}),A=="vx"?A={vx:1,vy:0,vz:0}:A=="vy"?A={vx:0,vy:1,vz:0}:A=="vz"&&(A={vx:0,vy:0,vz:1}),typeof A.vx<"u"){var $=new C.Vector3(A.vx,A.vy,A.vz);$.applyQuaternion(this.rotationGroup.quaternion),A={x:$.x,y:$.y,z:$.z}}var F=function(H){var Y=Math.sin(H/2),Z=Math.cos(H/2),X=0,J=0,Q=0;return X=A.x*Y,J=A.y*Y,Q=A.z*Y,new C.Quaternion(X,J,Q,Z).normalize()},W=Math.PI*_/180,U=F(W);if(j){var q=new C.Quaternion().copy(this.rotationGroup.quaternion).multiply(U);this.animateMotion(j,L,this.modelGroup.position,this.rotationGroup.position.z,q,this.lookingAt)}else this.rotationGroup.quaternion.multiply(U),this.show();return this}surfacesFinished(){for(var _ in this.surfaces)if(!this.surfaces[_][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var _=this.modelGroup.position,A=this.rotationGroup.quaternion;return[_.x,_.y,_.z,this.rotationGroup.position.z,A.x,A.y,A.z,A.w]}setView(_,A){return _===void 0||!(_ instanceof Array||_.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=_[0],this.modelGroup.position.y=_[1],this.modelGroup.position.z=_[2],this.rotationGroup.position.z=_[3],this.rotationGroup.quaternion.x=_[4],this.rotationGroup.quaternion.y=_[5],this.rotationGroup.quaternion.z=_[6],this.rotationGroup.quaternion.w=_[7],typeof _[8]<"u"&&(this.rotationGroup.position.x=_[8],this.rotationGroup.position.y=_[9]),this.show(A),this)}render(_,A){this.renderer.setViewport(),this.updateClickables();var j=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var L,$;for(A||(A=this.renderer.supportedExtensions()),L=0;L<this.models.length;L++)this.models[L]&&this.models[L].globj(this.modelGroup,A);for(L=0;L<this.shapes.length;L++)this.shapes[L]&&(typeof this.shapes[L].frame>"u"||this.viewer_frame<0||this.shapes[L].frame<0||this.shapes[L].frame==this.viewer_frame?this.shapes[L].globj(this.modelGroup,A):this.shapes[L].removegl(this.modelGroup));for(L=0;L<this.labels.length;L++)A.regen&&(this.labels[L].dispose(),this.modelGroup.remove(this.labels[L].sprite),this.labels[L].setContext(),this.modelGroup.add(this.labels[L].sprite)),this.labels[L]&&typeof this.labels[L].frame<"u"&&this.labels[L].frame>=0&&(this.modelGroup.remove(this.labels[L].sprite),(this.viewer_frame<0||this.labels[L].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[L].sprite));for(L in this.surfaces)if(this.surfaces.hasOwnProperty(L)){var F=this.surfaces[L];for($=0;$<F.length;$++)if(F.hasOwnProperty($)){var W=F[$].geo;if(!F[$].finished||A.regen){W.verticesNeedUpdate=!0,W.elementsNeedUpdate=!0,W.normalsNeedUpdate=!0,W.colorsNeedUpdate=!0,W.buffersNeedUpdate=!0,F[$].mat.needsUpdate=!0,F[$].done&&(F[$].finished=!0),F[$].lastGL&&this.modelGroup.remove(F[$].lastGL);var U=null;if(F[$].mat instanceof w.LineBasicMaterial?U=new w.Line(W,F[$].mat):("wireframe"in F.style&&F.style.wireframe&&W.setUpWireframe(),U=new w.Mesh(W,F[$].mat)),F[$].mat.transparent&&F[$].mat.opacity==0?U.visible=!1:U.visible=!0,F[$].symmetries.length>1||F[$].symmetries.length==1&&!F[$].symmetries[0].isIdentity()){var q,H=new w.Object3D;for(q=0;q<F[$].symmetries.length;q++){var Y=U.clone();Y.matrix=F[$].symmetries[q],Y.matrixAutoUpdate=!1,H.add(Y)}F[$].lastGL=H,this.modelGroup.add(H)}else F[$].lastGL=U,this.modelGroup.add(U)}}}return this.setView(j),typeof _=="function"&&_(this),this}getModelList(_){let A=[];if(typeof _>"u"||typeof _.model>"u")for(let L=0;L<this.models.length;L++)this.models[L]&&A.push(this.models[L]);else{let L=_.model;Array.isArray(L)||(L=[L]);for(let $=0;$<L.length;$++)if(typeof L[$]=="number"){var j=L[$];j<0&&(j+=this.models.length),A.push(this.models[j])}else A.push(L[$])}return A}getAtomsFromSel(_){var A=[];typeof _>"u"&&(_={});var j=this.getModelList(_);for(let L=0;L<j.length;L++)A=A.concat(j[L].selectedAtoms(_));return A}atomIsSelected(_,A){typeof A>"u"&&(A={});for(var j=this.getModelList(A),L=0;L<j.length;L++)if(j[L].atomIsSelected(_,A))return!0;return!1}selectedAtoms(_){return this.getAtomsFromSel(_)}getUniqueValues(_,A){typeof A>"u"&&(A={});var j=this.getAtomsFromSel(A),L={};for(var $ in j)if(j[$].hasOwnProperty(_)){var F=j[$][_];L[F]=!0}return Object.keys(L)}pdbData(_){for(var A=this.getAtomsFromSel(_),j="",L=0,$=A.length;L<$;++L)j+=A[L].pdbline+`
`;return j}zoom(_=2,A=0,j=!1){var L=(this.CAMERA_Z-this.rotationGroup.position.z)/_,$=this.CAMERA_Z-L;return A>0?this.animateMotion(A,j,this.modelGroup.position,this.adjustZoomToLimits($),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits($),this.show()),this}translate(_,A,j=0,L=!1){var $=_/this.WIDTH,F=A/this.HEIGHT,W=new C.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(W,this.camera),W.x-=$,W.y-=F,this.projector.unprojectVector(W,this.camera),W.z=0;var U=this.lookingAt.clone().add(W);return j>0?this.animateMotion(j,L,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,U):(this.lookingAt=U,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(_,A,j=0,L=!1){var $=this.screenOffsetToModel(_,A),F=this.modelGroup.position.clone().add($);return j>0?this.animateMotion(j,L,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=F,this.show()),this}fitSlab(_){_=_||{};var A=this.getAtomsFromSel(_),j=(0,T.getExtent)(A),L=j[1][0]-j[0][0],$=j[1][1]-j[0][1],F=j[1][2]-j[0][2],W=Math.hypot(L,$,F);return W<5&&(W=5),this.slabNear=-W/1.9,this.slabFar=W/2,this}center(_={},A=0,j=!1){var L,$,F=this.getAtomsFromSel(_),W=(0,T.getExtent)(F);(0,T.isEmptyObject)(_)?(this.shapes.forEach(te=>{if(te&&te.boundingSphere&&te.boundingSphere.center){var ue=te.boundingSphere.center,de=te.boundingSphere.radius;de>0?(F.push(new C.Vector3(ue.x+de,ue.y,ue.z)),F.push(new C.Vector3(ue.x-de,ue.y,ue.z)),F.push(new C.Vector3(ue.x,ue.y+de,ue.z)),F.push(new C.Vector3(ue.x,ue.y-de,ue.z)),F.push(new C.Vector3(ue.x,ue.y,ue.z+de)),F.push(new C.Vector3(ue.x,ue.y,ue.z-de))):F.push(ue)}}),W=(0,T.getExtent)(F),L=F,$=W):(L=this.getAtomsFromSel({}),$=(0,T.getExtent)(L));var U=new C.Vector3(W[2][0],W[2][1],W[2][2]),q=$[1][0]-$[0][0],H=$[1][1]-$[0][1],Y=$[1][2]-$[0][2],Z=Math.hypot(q,H,Y);Z<5&&(Z=5),this.slabNear=-Z/1.9,this.slabFar=Z/2,q=W[1][0]-W[0][0],H=W[1][1]-W[0][1],Y=W[1][2]-W[0][2],Z=Math.hypot(q,H,Y),Z<5&&(Z=5);for(var X=25,J=0;J<F.length;J++)if(F[J]){var Q=U.distanceToSquared(F[J]);Q>X&&(X=Q)}Z=Math.sqrt(X)*2;var G=U.clone().multiplyScalar(-1);return A>0?this.animateMotion(A,j,G,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=G,this.show()),this}zoomTo(_={},A=0,j=!1){let L=this.getAtomsFromSel(_),$=(0,T.getExtent)(L),F=$;if((0,T.isEmptyObject)(_)){let ue=L&&L.length;if(this.shapes.forEach(de=>{if(de&&de.boundingSphere){if(de.boundingSphere.box){let Se=de.boundingSphere.box;L.push(new C.Vector3(Se.min.x,Se.min.y,Se.min.z)),L.push(new C.Vector3(Se.max.x,Se.max.y,Se.max.z))}else if(de.boundingSphere.center){var xe=de.boundingSphere.center,ve=de.boundingSphere.radius;ve>0?(L.push(new C.Vector3(xe.x+ve,xe.y,xe.z)),L.push(new C.Vector3(xe.x-ve,xe.y,xe.z)),L.push(new C.Vector3(xe.x,xe.y+ve,xe.z)),L.push(new C.Vector3(xe.x,xe.y-ve,xe.z)),L.push(new C.Vector3(xe.x,xe.y,xe.z+ve)),L.push(new C.Vector3(xe.x,xe.y,xe.z-ve))):L.push(xe)}}}),F=(0,T.getExtent)(L),!ue)for(let de=0;de<3;de++)$[2][de]=(F[0][de]+F[1][de])/2}else{let ue=this.getAtomsFromSel({});F=(0,T.getExtent)(ue)}var W=new C.Vector3($[2][0],$[2][1],$[2][2]),U=F[1][0]-F[0][0],q=F[1][1]-F[0][1],H=F[1][2]-F[0][2],Y=Math.hypot(U,q,H);Y<5&&(Y=5),this.slabNear=-Y/1.9,this.slabFar=Y/2,Object.keys(_).length===0&&(this.slabNear=Math.min(-Y*2,-50),this.slabFar=Math.max(Y*2,50));var Z=this.config.minimumZoomToDistance||5;U=$[1][0]-$[0][0],q=$[1][1]-$[0][1],H=$[1][2]-$[0][2],Y=Math.hypot(U,q,H),Y<Z&&(Y=Z);for(var X=Z*Z,J=0;J<L.length;J++)if(L[J]){var Q=W.distanceToSquared(L[J]);Q>X&&(X=Q)}Y=Math.sqrt(X)*2;var G=W.clone().multiplyScalar(-1),te=-(Y*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return te=this.adjustZoomToLimits(te),A>0?this.animateMotion(A,j,G,te,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=G,this.rotationGroup.position.z=te,this.show()),this}setSlab(_,A){this.slabNear=_,this.slabFar=A}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(_,A={},j,L=!1){if(j){var $=(0,T.getExtent)(this.getAtomsFromSel(j));A.position={x:$[2][0],y:$[2][1],z:$[2][2]}}var F=new d.Label(_,A);return F.setContext(),this.modelGroup.add(F.sprite),this.labels.push(F),L||this.show(),F}addResLabels(_,A,j=!1){let L=this.labels.length;return this.applyToModels("addResLabels",_,A,j),this.show(),this.labels.slice(L)}addPropertyLabels(_,A,j){return this.applyToModels("addPropertyLabels",_,A,j),this.show(),this}removeLabel(_){for(var A=0;A<this.labels.length;A++)if(this.labels[A]==_){this.labels.splice(A,1),_.dispose(),this.modelGroup.remove(_.sprite);break}return this.show(),this}removeAllLabels(){for(var _=0;_<this.labels.length;_++)this.labels[_]&&this.labels[_].sprite&&this.modelGroup.remove(this.labels[_].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var _=0;_<this.labels.length;_++)this.labels[_]&&this.labels[_].hide();return this.show(),this}showAllLabels(){for(var _=0;_<this.labels.length;_++)this.labels[_]&&this.labels[_].show();return this.show(),this}setLabelStyle(_,A){return this.modelGroup.remove(_.sprite),_.dispose(),_.stylespec=A,_.setContext(),this.modelGroup.add(_.sprite),this.show(),_}setLabelText(_,A){return this.modelGroup.remove(_.sprite),_.dispose(),_.text=A,_.setContext(),this.modelGroup.add(_.sprite),this.show(),_}addShape(_){_=_||{};var A=new l.GLShape(_);return A.shapePosition=this.shapes.length,this.shapes.push(A),A}removeShape(_){if(!_)return this;for(_.removegl(this.modelGroup),delete this.shapes[_.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var _=0;_<this.shapes.length;_++){var A=this.shapes[_];A&&A.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(_){if(_.hasOwnProperty("x")&&_.hasOwnProperty("y")&&_.hasOwnProperty("z"))return _;var A=this.getAtomsFromSel(_);if(A.length==0)return{x:0,y:0,z:0};var j=(0,T.getExtent)(A);return{x:j[0][0]+(j[1][0]-j[0][0])/2,y:j[0][1]+(j[1][1]-j[0][1])/2,z:j[0][2]+(j[1][2]-j[0][2])/2}}addSphere(_){_=_||{},_.center=this.getSelectionCenter(_.center);var A=new l.GLShape(_);return A.shapePosition=this.shapes.length,A.addSphere(_),this.shapes.push(A),A.finalize(),A}addBox(_={}){_.corner!=null&&(_.corner=this.getSelectionCenter(_.corner)),_.center!=null&&(_.center=this.getSelectionCenter(_.center));var A=new l.GLShape(_);return A.shapePosition=this.shapes.length,A.addBox(_),this.shapes.push(A),A.finalize(),A}addArrow(_={}){_.start=this.getSelectionCenter(_.start),_.end=this.getSelectionCenter(_.end);var A=new l.GLShape(_);return A.shapePosition=this.shapes.length,A.addArrow(_),this.shapes.push(A),A.finalize(),A}addCylinder(_={}){_.start=this.getSelectionCenter(_.start),_.end=this.getSelectionCenter(_.end);var A=new l.GLShape(_);return A.shapePosition=this.shapes.length,_.dashed?A.addDashedCylinder(_):A.addCylinder(_),this.shapes.push(A),A.finalize(),A}addCurve(_={}){var A=new l.GLShape(_);return A.shapePosition=this.shapes.length,A.addCurve(_),this.shapes.push(A),A.finalize(),A}addLine(_={}){_.start=this.getSelectionCenter(_.start),_.end=this.getSelectionCenter(_.end),_.wireframe=!0;var A=new l.GLShape(_);return A.shapePosition=this.shapes.length,_.dashed?A=this.addLineDashed(_,A):A.addLine(_),this.shapes.push(A),A.finalize(),A}addUnitCell(_,A){_=this.getModel(_),A=A||{alabel:"a",blabel:"b",clabel:"c"},A.box=A.box||{},A.astyle=A.astyle||{color:"red",radius:.1,midpos:-1},A.bstyle=A.bstyle||{color:"green",radius:.1,midpos:-1},A.cstyle=A.cstyle||{color:"blue",radius:.1,midpos:-1},A.alabelstyle=A.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},A.blabelstyle=A.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},A.clabelstyle=A.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},_.unitCellObjects&&this.removeUnitCell(_),_.unitCellObjects={shapes:[],labels:[]};var j=_.getCrystData(),L=null;if(j){if(j.matrix)L=j.matrix;else{var $=j.a,F=j.b,W=j.c,U=j.alpha,q=j.beta,H=j.gamma;U=U*Math.PI/180,q=q*Math.PI/180,H=H*Math.PI/180;var Y,Z,X;Y=Math.cos(q),Z=(Math.cos(U)-Math.cos(q)*Math.cos(H))/Math.sin(H),X=Math.sqrt(Math.max(0,1-Y*Y-Z*Z)),L=new C.Matrix3($,F*Math.cos(H),W*Y,0,F*Math.sin(H),W*Z,0,0,W*X)}var J=[new C.Vector3(0,0,0),new C.Vector3(1,0,0),new C.Vector3(0,1,0),new C.Vector3(0,0,1),new C.Vector3(1,1,0),new C.Vector3(0,1,1),new C.Vector3(1,0,1),new C.Vector3(1,1,1)];if(j.matrix4)for(let G=0;G<J.length;G++)j.size&&J[G].multiplyVectors(J[G],j.size),J[G]=J[G].applyMatrix4(j.matrix4);else for(let G=0;G<J.length;G++)J[G]=J[G].applyMatrix3(L);if(A.box&&!A.box.hidden){A.box.wireframe=!0;var Q=new l.GLShape(A.box);Q.shapePosition=this.shapes.length,Q.addLine({start:J[0],end:J[1]}),Q.addLine({start:J[0],end:J[2]}),Q.addLine({start:J[1],end:J[4]}),Q.addLine({start:J[2],end:J[4]}),Q.addLine({start:J[0],end:J[3]}),Q.addLine({start:J[3],end:J[5]}),Q.addLine({start:J[2],end:J[5]}),Q.addLine({start:J[1],end:J[6]}),Q.addLine({start:J[4],end:J[7]}),Q.addLine({start:J[6],end:J[7]}),Q.addLine({start:J[3],end:J[6]}),Q.addLine({start:J[5],end:J[7]}),this.shapes.push(Q),_.unitCellObjects.shapes.push(Q),Q.finalize()}if(!A.astyle.hidden){A.astyle.start=J[0],A.astyle.end=J[1];let G=this.addArrow(A.astyle);_.unitCellObjects.shapes.push(G)}if(!A.bstyle.hidden){A.bstyle.start=J[0],A.bstyle.end=J[2];let G=this.addArrow(A.bstyle);_.unitCellObjects.shapes.push(G)}if(!A.cstyle.hidden){A.cstyle.start=J[0],A.cstyle.end=J[3];let G=this.addArrow(A.cstyle);_.unitCellObjects.shapes.push(G)}if(A.alabel){A.alabelstyle.position=J[1];let G=this.addLabel(A.alabel,A.alabelstyle);_.unitCellObjects.labels.push(G)}if(A.blabel){A.blabelstyle.position=J[2];let G=this.addLabel(A.blabel,A.blabelstyle);_.unitCellObjects.labels.push(G)}if(A.clabel){A.clabelstyle.position=J[3];let G=this.addLabel(A.clabel,A.clabelstyle);_.unitCellObjects.labels.push(G)}}}removeUnitCell(_){if(_=this.getModel(_),_.unitCellObjects){let A=this;_.unitCellObjects.shapes.forEach(function(j){A.removeShape(j)}),_.unitCellObjects.labels.forEach(function(j){A.removeLabel(j)})}delete _.unitCellObjects}replicateUnitCell(_=3,A=_,j=A,L,$,F){L=this.getModel(L);let W=L.getCrystData();if(W){const U=L.selectedAtoms({}),q=W.matrix;let H=function(Z){return Z%2==0?-Z/2:Math.ceil(Z/2)};_<=1&&A<=1&&j<=1&&(F=!0,_=A=j=3);let Y=function(Z,X,J){return!1};if(F){const Z=new C.Matrix3().getInverse3(q);Y=function(X,J,Q){let G=new C.Vector3(X,J,Q).applyMatrix3(Z);return!(G.x>-1e-4&&G.x<1.0001&&G.y>-1e-4&&G.y<1.0001&&G.z>-1e-4&&G.z<1.0001)}}for(let Z=0;Z<_;Z++)for(let X=0;X<A;X++)for(let J=0;J<j;J++){if(Z==0&&X==0&&J==0)continue;let Q=new C.Vector3(H(Z),H(X),H(J));Q.applyMatrix3(q);let G=[];for(let te=0;te<U.length;te++){let ue=U[te].x+Q.x,de=U[te].y+Q.y,xe=U[te].z+Q.z;if(Y(ue,de,xe))continue;let ve={};for(let Se in U[te])ve[Se]=U[te][Se];ve.x=ue,ve.y=de,ve.z=xe,G.push(ve)}L.addAtoms(G)}$&&L.assignBonds()}}addLineDashed(_,A){_.dashLength=_.dashLength||.5,_.gapLength=_.gapLength||.5;var j;_.start?j=new C.Vector3(_.start.x||0,_.start.y||0,_.start.z||0):j=new C.Vector3(0,0,0);var L;_.end?L=new C.Vector3(_.end.x,_.end.y||0,_.end.z||0):L=new C.Vector3(0,0,0);var $=new C.Vector3,F=new C.Vector3,W=new C.Vector3,U,q,H,Y=j.clone(),Z=0;for($.subVectors(L,j),U=$.length(),$.normalize(),F=$.clone(),W=$.clone(),F.multiplyScalar(_.dashLength),W.multiplyScalar(_.gapLength),q=F.length(),H=W.length();Z<U;){if(Z+q>U){_.start=j,_.end=L,A.addLine(_);break}Y.addVectors(j,F),_.start=j,_.end=Y,A.addLine(_),j=Y.clone(),Z+=q,Y.addVectors(j,W),j=Y.clone(),Z+=H}return A.finalize(),A}addCustom(_){_=_||{};var A=new l.GLShape(_);return A.shapePosition=this.shapes.length,A.addCustom(_),this.shapes.push(A),A.finalize(),A}addVolumetricData(_,A,j={}){var L=new b.VolumeData(_,A);return j.hasOwnProperty("transferfn")?this.addVolumetricRender(L,j):this.addIsosurface(L,j)}addIsosurface(_,A={},j){var L=new l.GLShape(A);return L.shapePosition=this.shapes.length,L.addIsosurface(_,A,j,this),this.shapes.push(L),L}addVolumetricRender(_,A){A=A||{};var j=new v.GLVolumetricRender(_,A,this);return j.shapePosition=this.shapes.length,this.shapes.push(j),j}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(_){if(_){this.scene.fog=new w.Fog(this.bgColor,100,200),this.config.disableFog=!1;const A=_;A.fogStart==null?this.fogStart=.4:this.fogStart=A.fogStart,A.fogEnd==null?this.fogEnd=1:this.fogEnd=A.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(_){this.viewer_frame=_;let A=this;return new Promise(function(j){var L=A.models.map(function($){return $.setFrame(_)});Promise.all(L).then(function(){j()})})}getFrame(){return this.viewer_frame}getNumFrames(){var _=0;for(let A=0;A<this.models.length;A++)this.models[A].getNumFrames()>_&&(_=this.models[A].getNumFrames());for(let A=0;A<this.shapes.length;A++)this.shapes[A].frame&&this.shapes[A].frame>=_&&(_=this.shapes[A].frame+1);for(let A=0;A<this.labels.length;A++)this.labels[A].frame&&this.labels[A].frame>=_&&(_=this.labels[A].frame+1);return _}getNextModelId(){return this.models.length}animate(_){this.incAnim();var A=100,j="forward",L=1/0;_=_||{},_.interval&&(A=_.interval),_.loop&&(j=_.loop),_.reps&&(L=_.reps);var $=this.getNumFrames(),F=this,W=0;_.startFrame&&(W=_.startFrame%$);var U=1;_.step&&(U=_.step,L/=U);var q=0,H=$*L,Y=new Date,Z,X,J=function(Q){Y=new Date,Q=="forward"?F.setFrame(W).then(function(){W=(W+U)%$,Z()}):Q=="backward"?F.setFrame($-1-W).then(function(){W=(W+U)%$,Z()}):F.setFrame(W).then(function(){W+=U,U*=W%($-1)==0?-1:1,Z()})};return Z=function(){if(F.render(),!F.getCanvas().isConnected)F.stopAnimate();else if(++q>=H||!F.isAnimated())X.cancel(),F.animationTimers.delete(X),F.decAnim();else{var Q=A-(new Date().getTime()-Y.getTime());Q=Q>0?Q:0,X.cancel(),F.animationTimers.delete(X),X=new T.PausableTimer(J,Q,j),F.animationTimers.add(X)}},X=new T.PausableTimer(J,0,j),this.animationTimers.add(X),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(_){_.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(_){_.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(_){_.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(_){return _&&!_.defaultcolors?(_.defaultcolors=this.defaultcolors,_.cartoonQuality=_.cartoonQuality||this.config.cartoonQuality):typeof _>"u"&&(_={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),_}addModel(_,A="",j){j=this.getModelOpt(j);var L=new o.GLModel(this.models.length,j,this);return L.addMolData(_,A,j),this.models.push(L),L}addModels(_,A,j){j=this.getModelOpt(j),j.multimodel=!0,j.frames=!0;for(var L=o.GLModel.parseMolData(_,A,j),$=0;$<L.length;$++){var F=new o.GLModel(this.models.length,j,this);F.setAtomDefaults(L[$]),F.addFrame(L[$]),F.setFrame(0),L.modelData&&F.setModelData(L.modelData[$]),F.setDontDuplicateAtoms(!j.duplicateAssemblyAtoms),this.models.push(F)}return this.models}addModelsAsFrames(_,A,j){j=this.getModelOpt(j),j.multimodel=!0,j.frames=!0;var L=new o.GLModel(this.models.length,j,this);return L.addMolData(_,A,j),this.models.push(L),L}addAsOneMolecule(_,A,j){j=this.getModelOpt(j),j.multimodel=!0,j.onemol=!0;var L=new o.GLModel(this.models.length,j,this);return L.addMolData(_,A,j),this.models.push(L),L}removeModel(_){if(_=this.getModel(_),!!_){for(_.removegl(this.modelGroup),delete this.models[_.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var _=0;_<this.models.length;_++){var A=this.models[_];A&&A.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(_,A){var j={};return A===void 0?j.m=this.models.map(function(L){return L.toCDObject(_)}):j.m=[this.models[A].toCDObject()],JSON.stringify(j)}exportVRML(){var _=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new w.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var A=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=_,A}createModelFrom(_,A=!1){for(var j=new o.GLModel(this.models.length,this.defaultcolors,this),L=0;L<this.models.length;L++)if(this.models[L]){var $=this.models[L].selectedAtoms(_);j.addAtoms($),A&&this.models[L].removeAtoms($)}return this.models.push(j),j}applyToModels(_,A,j,L,$,F,W){for(var U=this.getModelList(A),q=0;q<U.length;q++)U[q][_](A,j,L,$,F,W)}setStyle(_,A){return typeof A>"u"&&(A=_,_={}),this.applyToModels("setStyle",_,A,!1),this}addStyle(_,A){return typeof A>"u"&&(A=_,_={}),this.applyToModels("setStyle",_,A,!0),this}setClickable(_,A,j){return this.applyToModels("setClickable",_,A,j),this}setHoverable(_,A,j,L){return this.applyToModels("setHoverable",_,A,j,L),this}enableContextMenu(_,A){return this.applyToModels("enableContextMenu",_,A),this}vibrate(_,A,j,L){return this.applyToModels("vibrate",_,A,j,L),this}setColorByProperty(_,A,j,L){return this.applyToModels("setColorByProperty",_,A,j,L),this}setColorByElement(_,A){return this.applyToModels("setColorByElement",_,A),this}static getAtomsWithin(_,A){var j=[];for(let $=0;$<_.length;$++){var L=_[$];typeof L>"u"||L.x<A[0][0]||L.x>A[1][0]||L.y<A[0][1]||L.y>A[1][1]||L.z<A[0][2]||L.z>A[1][2]||j.push(L)}return j}static volume(_){var A=_[1][0]-_[0][0],j=_[1][1]-_[0][1],L=_[1][2]-_[0][2];return A*j*L}carveUpExtent(_,A,j){let L=[],$={};for(let Y=0,Z=A.length;Y<Z;Y++)$[A[Y].index]=Y;let F=function(Y){let Z=[];for(let X=0,J=Y.length;X<J;X++)Y[X].index in $&&Z.push($[Y[X].index]);return Z},W=function(Y){let Z=[];return Z[0]=[Y[0][0],Y[0][1],Y[0][2]],Z[1]=[Y[1][0],Y[1][1],Y[1][2]],Z},U=function(Y){if(g.volume(Y)<g.maxVolume)return[Y];var Z=Y[1][0]-Y[0][0],X=Y[1][1]-Y[0][1],J=Y[1][2]-Y[0][2],Q;Z>X&&Z>J?Q=0:X>Z&&X>J?Q=1:Q=2;var G=W(Y),te=W(Y),ue=(Y[1][Q]-Y[0][Q])/2+Y[0][Q];G[1][Q]=ue,te[0][Q]=ue;var de=U(G),xe=U(te);return de.concat(xe)},q=U(_),H=6;for(let Y=0,Z=q.length;Y<Z;Y++){let X=W(q[Y]);X[0][0]-=H,X[0][1]-=H,X[0][2]-=H,X[1][0]+=H,X[1][1]+=H,X[1][2]+=H;let J=g.getAtomsWithin(A,X),Q=g.getAtomsWithin(j,q[Y]);L.push({extent:q[Y],atoms:F(J),toshow:F(Q)})}return L}static generateSurfaceMesh(_,A,j){var L=new w.Geometry(!0),$=L.updateGeoGroup(0),F=[];for(let me=0,Ie=_.length;me<Ie;me++){var W=_[me];W&&(typeof W.surfaceColor<"u"?F[me]=W.surfaceColor:W.color&&(F[me]=R.CC.color(W.color)))}var U=$.vertexArray,q=A.vertices;for(let me=0,Ie=q.length;me<Ie;me++){let Ve=$.vertices*3;U[Ve]=q[me].x,U[Ve+1]=q[me].y,U[Ve+2]=q[me].z,$.vertices++}var H=$.colorArray;let Y=$.atomArray;if(j.voldata&&j.volscheme){var Z=j.volscheme,X=j.voldata,J=Z.range()||[-1,1];for(let me=0,Ie=q.length;me<Ie;me++){let Ve=q[me].atomid,nt=X.getVal(q[me].x,q[me].y,q[me].z),it=R.CC.color(Z.valueToHex(nt,J)),ot=me*3;H[ot]=it.r,H[ot+1]=it.g,H[ot+2]=it.b,Y[me]=_[Ve]}}else if(F.length>0)for(let me=0,Ie=q.length;me<Ie;me++){let Ve=q[me].atomid,nt=me*3;H[nt]=F[Ve].r,H[nt+1]=F[Ve].g,H[nt+2]=F[Ve].b,Y[me]=_[Ve]}var Q=A.faces;$.faceidx=Q.length,L.initTypedArrays();var G=$.vertexArray,te=$.normalArray,ue,de,xe,ve;for(let me=0,Ie=Q.length;me<Ie;me+=3){var Se=Q[me],Ee=Q[me+1],he=Q[me+2],Re=Se*3,je=Ee*3,Ce=he*3;ue=new C.Vector3(G[Re],G[Re+1],G[Re+2]),de=new C.Vector3(G[je],G[je+1],G[je+2]),xe=new C.Vector3(G[Ce],G[Ce+1],G[Ce+2]),xe.subVectors(xe,de),ue.subVectors(ue,de),xe.cross(ue),ve=xe,ve.normalize(),te[Re]+=ve.x,te[je]+=ve.x,te[Ce]+=ve.x,te[Re+1]+=ve.y,te[je+1]+=ve.y,te[Ce+1]+=ve.y,te[Re+2]+=ve.z,te[je+2]+=ve.z,te[Ce+2]+=ve.z}$.faceArray=new Uint16Array(Q);var Le=new w.Mesh(L,j);return Le}static generateMeshSyncHelper(_,A,j,L,$,F){var W=new m.ProteinSurface;return W.initparm(A,_!==1,F),W.fillvoxels($,j),W.buildboundary(),(_==m.SurfaceType.SES||_==m.SurfaceType.MS)&&(W.fastdistancemap(),W.boundingatom(!1),W.fillvoxelswaals($,j)),W.marchingcube(_),W.getFacesAndVertices(L)}static getMatWithStyle(_){let A=null;_.onesided?A=new w.MeshLambertMaterial:A=new w.MeshDoubleLambertMaterial,A.vertexColors=w.Coloring.VertexColors;for(var j in _)j==="color"||j==="map"||_.hasOwnProperty(j)&&(A[j]=_[j]);return _.opacity!==void 0&&(_.opacity===1?A.transparent=!1:A.transparent=!0),_.wireframe!==void 0&&(A.wireframe=_.wireframe),A}addMesh(_){let A={geo:_.geometry,mat:_.material,done:!0,finished:!1};var j=this.nextSurfID();return this.surfaces[j]=new f([A]),j}static shallowCopy(_){var A=[];let j=_.length;for(let L=0;L<j;L++)A[L]=(0,T.extend)({},_[L]);return A}addSurface(_,A={},j={},L,$,F){let W=this.nextSurfID(),U=null,q=this,H=m.SurfaceType.VDW;typeof _=="string"?g.surfaceTypeMap[_.toUpperCase()]!==void 0?H=g.surfaceTypeMap[_]:console.log("Surface type : "+_+" is not recognized"):typeof _=="number"&&(H=_);var Y=null,Z=null,X=g.shallowCopy(this.getAtomsFromSel(j));L?Y=g.shallowCopy(this.getAtomsFromSel(L)):Y=X,(0,T.adjustVolumeStyle)(A);var J=!1,Q;for(Q=0;Q<this.models.length;Q++)if(this.models[Q]){var G=this.models[Q].getSymmetries();if(G.length>1||G.length==1&&!G[0].isIdentity()){J=!0;break}}var te=function(he,Re,je){$?Z=g.shallowCopy(q.getAtomsFromSel($)):Z=je;var Ce,Le=(0,T.getExtent)(je,!0);if(A.map&&A.map.prop){var me=A.map.prop;let ct=(0,h.getGradient)(A.map.scheme||A.map.gradient||new h.Gradient.RWB),pt=ct.range();pt||(pt=(0,T.getPropertyRange)(je,me)),A.colorscheme={prop:me,gradient:ct}}for(let ct=0,pt=Re.length;ct<pt;ct++)Ce=Re[ct],Ce.surfaceColor=(0,T.getColorFromStyle)(Ce,A);var Ie=g.volume(Le),Ve=q.carveUpExtent(Le,Re,je);if(Z&&Z.length&&Z.length>0){var nt=(0,T.getExtent)(Z,!0),it=function(ct,pt){var oe=function(Be,ke){var Ke=Be.extent,Ye=Ke[1][0]-Ke[0][0],ie=Ke[1][1]-Ke[0][1],Ae=Ke[1][2]-Ke[0][2],Ne=Ye-ke[2][0];Ne*=Ne;var Ze=ie-ke[2][1];Ze*=Ze;var _e=Ae-ke[2][2];return _e*=_e,Ne+Ze+_e},fe=oe(ct,nt),pe=oe(pt,nt);return fe-pe};Ve.sort(it)}var ot=[];for(let ct=0,pt=Re.length;ct<pt;ct++)Ce=Re[ct],ot[ct]={x:Ce.x,y:Ce.y,z:Ce.z,serial:ct,elem:Ce.elem};var at=!!m.syncSurface;if((typeof $3Dmol>"u"||typeof $3Dmol.SurfaceWorker>"u")&&(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),at=!0),at){var Je=function(pt){return new Promise(function(oe){for(var fe=g.generateMeshSyncHelper(H,Ve[pt].extent,Ve[pt].atoms,Ve[pt].toshow,ot,Ie),pe=(0,l.splitMesh)({vertexArr:fe.vertices,faceArr:fe.faces}),Be=0,ke=pe.length;Be<ke;Be++){fe={vertices:pe[Be].vertexArr,faces:pe[Be].faceArr};var Ke=g.generateSurfaceMesh(Re,fe,U);(0,T.mergeGeos)(he.geo,Ke)}q.render(),oe()})},rt=[];for(let ct=0;ct<Ve.length;ct++)rt.push(Je(ct));return Promise.all(rt).then(function(){return he.done=!0,q.render(),Promise.resolve(W)})}else{var et=[];H<0&&(H=0);for(let ct=0,pt=g.numWorkers;ct<pt;ct++){var Qe=new Worker($3Dmol.SurfaceWorker);et.push(Qe),Qe.postMessage({type:-1,atoms:ot,volume:Ie})}return new Promise(function(ct,pt){var oe=0,fe=function(){!et||!et.length||et.forEach(function(Ke){Ke&&Ke.terminate&&Ke.terminate()})},pe=function(Ke){for(var Ye=(0,l.splitMesh)({vertexArr:Ke.data.vertices,faceArr:Ke.data.faces}),ie=0,Ae=Ye.length;ie<Ae;ie++){var Ne={vertices:Ye[ie].vertexArr,faces:Ye[ie].faceArr},Ze=g.generateSurfaceMesh(Re,Ne,U);(0,T.mergeGeos)(he.geo,Ze)}q.render(),oe++,oe==Ve.length&&(he.done=!0,fe(),ct(W))},Be=function(Ke){fe(),console.log(Ke.message+" ("+Ke.filename+":"+Ke.lineno+")"),pt(Ke)};for(let Ke=0;Ke<Ve.length;Ke++){var ke=et[Ke%et.length];ke.onmessage=pe,ke.onerror=Be,ke.postMessage({type:H,expandedExtent:Ve[Ke].extent,extendedAtoms:Ve[Ke].atoms,atomsToShow:Ve[Ke].toshow})}})}};A=A||{},U=g.getMatWithStyle(A);let ue=new f([]);ue.style=A,ue.atomsel=j,ue.allsel=L,ue.focus=$;var de=null;if(J){var xe={},ve={};for(Q=0;Q<this.models.length;Q++)xe[Q]=[],ve[Q]=[];for(Q=0;Q<Y.length;Q++)xe[Y[Q].model].push(Y[Q]);for(Q=0;Q<X.length;Q++)ve[X[Q].model].push(X[Q]);var Se=[];for(Q=0;Q<this.models.length;Q++)ve[Q].length>0&&(ue.push({geo:new w.Geometry(!0),mat:U,done:!1,finished:!1,symmetries:this.models[Q].getSymmetries()}),Se.push(te(ue[ue.length-1],xe[Q],ve[Q])));de=Promise.all(Se)}else ue.push({geo:new w.Geometry(!0),mat:U,done:!1,finished:!1,symmetries:[new C.Matrix4]}),de=te(ue[ue.length-1],Y,X);return this.surfaces[W]=ue,de.surfid=W,F&&typeof F=="function"?(de.then(function(Ee){F(Ee)}),W):de}setSurfaceMaterialStyle(_,A){if((0,T.adjustVolumeStyle)(A),this.surfaces[_]){var j=this.surfaces[_];for(let $=0;$<j.length;$++){var L=j[$].mat=g.getMatWithStyle(A);if(j[$].mat.side=w.FrontSide,A.wireframe&&j[$].geo.setUpWireframe(),A.color){j[$].mat.color=R.CC.color(A.color),j[$].geo.colorsNeedUpdate=!0;const F=R.CC.color(A.color);j[$].geo.setColor(F)}else if(L.voldata&&L.volscheme){const F=L.volscheme,W=L.voldata,U=R.CC,q=F.range()||[-1,1];j[$].geo.setColors(function(H,Y,Z){let X=W.getVal(H,Y,Z);return U.color(F.valueToHex(X,q))})}else{j[$].geo.colorsNeedUpdate=!0;for(let F of j[$].geo.geometryGroups)for(let W=0;W<F.vertices;W++){let U=(0,T.getColorFromStyle)(F.atomArray[W],A),q=3*W;F.colorArray[q]=U.r,F.colorArray[q+1]=U.g,F.colorArray[q+2]=U.b}}j[$].finished=!1}}return this}getSurface(_){return this.surfaces[_]}removeSurface(_){for(var A=this.surfaces[_],j=0;j<A.length;j++)A[j]&&A[j].lastGL&&(A[j].geo!==void 0&&A[j].geo.dispose(),A[j].mat!==void 0&&A[j].mat.dispose(),this.modelGroup.remove(A[j].lastGL));return delete this.surfaces[_],this.show(),this}removeAllSurfaces(){for(var _ in this.surfaces)if(this.surfaces.hasOwnProperty(_)){for(var A=this.surfaces[_],j=0;j<A.length;j++)A[j]&&A[j].lastGL&&(A[j].geo!==void 0&&A[j].geo.dispose(),A[j].mat!==void 0&&A[j].mat.dispose(),this.modelGroup.remove(A[j].lastGL));delete this.surfaces[_]}return this.show(),this}jmolMoveTo(){var _=this.modelGroup.position,A="center { "+-_.x+" "+-_.y+" "+-_.z+" }; ",j=this.rotationGroup.quaternion;return A+="moveto .5 quaternion { "+j.x+" "+j.y+" "+j.z+" "+j.w+" };",A}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(_,A){A=A||{};var j=this.getAtomsFromSel(A);if(typeof _=="function")for(let F=0,W=j.length;F<W;F++){let U=j[F];_(U)}else for(let F=0,W=j.length;F<W;F++){var L=j[F];for(let U=0,q=_.length;U<q;U++){let H=_[U];if(H.props)for(var $ in H.props)H.props.hasOwnProperty($)&&this.atomIsSelected(L,H)&&(L.properties||(L.properties={}),L.properties[$]=H.props[$])}}return this}linkViewer(_){return this.linkedViewers.push(_),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(_){this.rotationGroup.position.z=this.CAMERA_Z-_}setAutoEyeSeparation(_,A){var j=this.getPerceivedDistance();return A||(A=5),_||this.camera.position.x>0?this.camera.position.x=j*Math.tan(Math.PI/180*A):this.camera.position.x=-j*Math.tan(Math.PI/180*A),this.camera.lookAt(new C.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(_){this.config.cartoonQuality=_}}g.numWorkers=4,g.maxVolume=64e3,g.surfaceTypeMap={VDW:m.SurfaceType.VDW,MS:m.SurfaceType.MS,SAS:m.SurfaceType.SAS,SES:m.SurfaceType.SES};function S(M,_){if(M=(0,T.getElement)(M),!!M){_=_||{};try{var A=new g(M,_);return A}catch(j){throw"error creating viewer: "+j}}}function O(M,_={},A={}){if(M=(0,T.getElement)(M),!!M){var j=[],L=document.createElement("canvas");A.rows=_.rows,A.cols=_.cols,A.control_all=_.control_all!=null?_.control_all:!1,M.appendChild(L);try{for(var $=0;$<_.rows;$++){for(var F=[],W=0;W<_.cols;W++){A.row=$,A.col=W,A.canvas=L,A.viewers=j,A.control_all=_.control_all;var U=S(M,(0,T.extend)({},A));F.push(U)}j.unshift(F)}}catch(q){throw"error creating viewer grid: "+q}return j}}function D(M){var _=this;if(M=(0,T.getElement)(M),!!M){var A=O(M,{rows:1,cols:2,control_all:!0});this.glviewer1=A[0][0],this.glviewer2=A[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var j=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function($){return typeof _.glviewer1[$]=="function"}),L=0;L<j.length;L++)this[j[L]]=(function($){return function(){var F=this.glviewer1[$].apply(this.glviewer1,arguments),W=this.glviewer2[$].apply(this.glviewer2,arguments);return[F,W]}})(j[L]);this.setCoordinates=function($,F,W){for(var U=0;U<$.length;U++)$[U].setCoordinates(F,W)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function($){this.glviewer1.render(),this.glviewer2.render(),$&&$(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}},"./src/Gradient.ts"(e,t,n){n.r(t),n.d(t,{CustomLinear:()=>v,Gradient:()=>C,GradientType:()=>o,ROYGB:()=>m,RWB:()=>d,Sinebow:()=>b,builtinGradients:()=>w,getGradient:()=>h,normalizeValue:()=>l});var i=n("./src/colors.ts");class o{}function l(R,T,E){return T>=R?(E<R&&(E=R),E>T&&(E=T),{lo:R,hi:T,val:E}):(E>R&&(E=R),E<T&&(E=T),E=R-E+T,{lo:T,hi:R,val:E})}function h(R){if(R instanceof o)return R;if(R.gradient!==void 0&&w[R.gradient]){let T=R.min===void 0?-1:R.min,E=R.max===void 0?1:R.max;return R.mid===void 0?R.colors===void 0?new w[R.gradient](T,E):new w[R.gradient](T,E,R.colors):new w[R.gradient](T,E,R.mid)}else if(typeof R.gradient=="string"&&R.gradient.startsWith("linear_")){let T=R.gradient.split("_");T.shift();let E=R.min===void 0?-1:R.min,f=R.max===void 0?1:R.max;return new v(E,f,T)}return R}class d extends o{constructor(T,E,f){super(),this.gradient="RWB",this.mult=1,this.mid=f,this.min=T,this.max=E,typeof E>"u"&&Array.isArray(T)&&T.length>=2?(this.max=T[1],this.min=T[0]):T&&E&&!Array.isArray(T)&&(this.min=T,this.max=E)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(T,E){var f,g;if(T=this.mult*T,E?(f=E[0],g=E[1]):(f=this.min,g=this.max),T===void 0)return 16777215;var S=l(f,g,T);f=S.lo,g=S.hi,T=S.val;var O=(g+f)/2;E&&typeof E[2]<"u"?O=E[2]:typeof this.mid<"u"?O=this.mid:O=(f+g)/2;var D,M;return T<O?(D=Math.floor(255*Math.sqrt((T-f)/(O-f))),M=16711680+256*D+D,M):T>O?(D=Math.floor(255*Math.sqrt(1-(T-O)/(g-O))),M=65536*D+256*D+255,M):16777215}}class m extends o{constructor(T,E){super(),this.gradient="ROYGB",this.mult=1,this.min=T,this.max=E,typeof E>"u"&&Array.isArray(T)&&T.length>=2?(this.max=T[1],this.min=T[0]):T&&E&&!Array.isArray(T)&&(this.min=T,this.max=E)}valueToHex(T,E){var f,g;if(T=this.mult*T,E?(f=E[0],g=E[1]):(f=this.min,g=this.max),typeof T>"u")return 16777215;var S=l(f,g,T);f=S.lo,g=S.hi,T=S.val;var O=(f+g)/2,D=(f+O)/2,M=(O+g)/2,_,A;return T<D?(_=Math.floor(255*Math.sqrt((T-f)/(D-f))),A=16711680+256*_+0,A):T<O?(_=Math.floor(255*Math.sqrt(1-(T-D)/(O-D))),A=65536*_+65280+0,A):T<M?(_=Math.floor(255*Math.sqrt((T-O)/(M-O))),A=65280+1*_,A):(_=Math.floor(255*Math.sqrt(1-(T-M)/(g-M))),A=0+256*_+255,A)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class b extends o{constructor(T,E){super(),this.gradient="Sinebow",this.mult=1,this.min=T,this.max=E,typeof E>"u"&&Array.isArray(T)&&T.length>=2&&(this.max=T[1],this.min=T[0]),E<T&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(T,E){var f,g;if(T=this.mult*T,E?(f=E[0],g=E[1]):(f=this.min,g=this.max),typeof T>"u")return 16777215;var S=C.normalizeValue(f,g,T);f=S.lo,g=S.hi,T=S.val;var O=(T-f)/(g-f),D=5*O/6+.5,M=Math.sin(Math.PI*D);M*=M*255;var _=Math.sin(Math.PI*(D+1/3));_*=_*255;var A=Math.sin(Math.PI*(D+2/3));return A*=A*255,65536*Math.floor(M)+256*Math.floor(A)+1*Math.floor(_)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class v extends o{constructor(T,E,f){super(),this.gradient="linear",this.colors=new Array;var g;if(Array.isArray(T)&&T.length>=2?(this.max=T[1],this.min=T[0],g=E):(this.min=T,this.max=E,g=f),g)for(let S of g)this.colors.push(i.CC.color(S));else this.colors.push(i.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(T,E){var f,g;if(E?(f=E[0],g=E[1]):(f=this.min,g=this.max),T===void 0)return 16777215;var S=l(f,g,T);f=S.lo,g=S.hi,T=S.val;let O=this.colors.length,D=(g-f)/O,M=Math.min(Math.floor((T-f)/D),O-1),_=Math.min(M+1,O-1),A=(T-f-M*D)/D,j=this.colors[M],L=this.colors[_];return new i.Color(j.r+A*(L.r-j.r),j.g+A*(L.g-j.g),j.b+A*(L.b-j.b)).getHex()}}const w={rwb:d,RWB:d,roygb:m,ROYGB:m,sinebow:b,linear:v};class C extends o{valueToHex(T,E){return 0}range(){return null}}C.RWB=d,C.ROYGB=m,C.Sinebow=b,C.CustomLinear=v,C.builtinGradients=w,C.normalizeValue=l,C.getGradient=h},"./src/Label.ts"(e,t,n){n.r(t),n.d(t,{Label:()=>b,LabelCount:()=>h});var i=n("./src/WebGL/index.ts"),o=n("./src/Gradient.ts"),l=n("./src/colors.ts");let h=0;function d(v,w,C,R,T,E,f){v.beginPath(),v.moveTo(w+E,C),v.lineTo(w+R-E,C),v.quadraticCurveTo(w+R,C,w+R,C+E),v.lineTo(w+R,C+T-E),v.quadraticCurveTo(w+R,C+T,w+R-E,C+T),v.lineTo(w+E,C+T),v.quadraticCurveTo(w,C+T,w,C+T-E),v.lineTo(w,C+E),v.quadraticCurveTo(w,C,w+E,C),v.closePath(),v.fill(),f&&v.stroke()}function m(v,w,C){var R=C;return typeof v<"u"&&(v instanceof l.Color?R=v.scaled():(R=l.CC.color(v),typeof R.scaled<"u"&&(R=R.scaled()))),typeof w<"u"&&(R.a=parseFloat(w)),R}class b{constructor(w,C){this.id=h++,this.stylespec=C||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new i.Sprite,this.text=w,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var w=this.stylespec,C=typeof w.useScreen>"u"?!1:w.useScreen,R=w.showBackground;(R==="0"||R==="false")&&(R=!1),typeof R>"u"&&(R=!0);var T=w.font?w.font:"sans-serif",E=parseInt(w.fontSize)?parseInt(w.fontSize):18,f=m(w.fontColor,w.fontOpacity,{r:255,g:255,b:255,a:1}),g=w.padding?w.padding:4,S=w.borderThickness?w.borderThickness:0,O=m(w.backgroundColor,w.backgroundOpacity,{r:0,g:0,b:0,a:1}),D=m(w.borderColor,w.borderOpacity,O),M=w.position?w.position:{x:-10,y:1,z:1},_=w.inFront!==void 0?w.inFront:!0;(_==="false"||_==="0")&&(_=!1);var A=w.alignment||i.SpriteAlignment.topLeft;typeof A=="string"&&A in i.SpriteAlignment&&(A=i.SpriteAlignment[A]);var j="";w.bold&&(j="bold "),this.context.font=j+E+"px  "+T;var L=this.context.measureText(this.text),$=L.width;R||(S=0);var F=$+2.5*S+2*g,W=E*1.25+2*S+2*g;if(w.backgroundImage){var U=w.backgroundImage,q=w.backgroundWidth?w.backgroundWidth:U.width,H=w.backgroundHeight?w.backgroundHeight:U.height;q>F&&(F=q),H>W&&(W=H)}if(this.canvas.width=F,this.canvas.height=W,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),j="",w.bold&&(j="bold "),this.context.font=j+E+"px  "+T,this.context.fillStyle="rgba("+O.r+","+O.g+","+O.b+","+O.a+")",this.context.strokeStyle="rgba("+D.r+","+D.g+","+D.b+","+D.a+")",w.backgroundGradient){let Z=this.context.createLinearGradient(0,W/2,F,W/2),X=o.Gradient.getGradient(w.backgroundGradient),J=X.range(),Q=-1,G=1;J&&(Q=J[0],G=J[1]);let te=G-Q;for(let ue=0;ue<1.01;ue+=.1){let de=m(X.valueToHex(Q+te*ue)),xe="rgba("+de.r+","+de.g+","+de.b+","+de.a+")";Z.addColorStop(ue,xe)}this.context.fillStyle=Z}this.context.lineWidth=S,R&&d(this.context,S,S,F-2*S,W-2*S,6,S>0),w.backgroundImage&&this.context.drawImage(U,0,0,F,W),this.context.fillStyle="rgba("+f.r+","+f.g+","+f.b+","+f.a+")",this.context.fillText(this.text,S+g,E+S+g,$);var Y=new i.Texture(this.canvas);Y.needsUpdate=!0,this.sprite.material=new i.SpriteMaterial({map:Y,useScreenCoordinates:C,alignment:A,depthTest:!_,screenOffset:w.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(M.x,M.y,M.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}},"./src/ProteinSurface4.ts"(e,t,n){n.r(t),n.d(t,{MarchingCube:()=>m,MarchingCubeInitializer:()=>d,PointGrid:()=>b,ProteinSurface:()=>v,SurfaceType:()=>o,setSyncSurface:()=>h,syncSurface:()=>l});var i=n("./src/WebGL/math/index.ts"),o;(function(w){w[w.VDW=1]="VDW",w[w.MS=2]="MS",w[w.SAS=3]="SAS",w[w.SES=4]="SES"})(o||(o={}));var l=!1;function h(w){l=w}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(l=!0);class d{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(C,R,T,E){let f=!!E.fulltable,g=E.hasOwnProperty("origin")&&E.origin.hasOwnProperty("x")?E.origin:{x:0,y:0,z:0},S=!!E.voxel,O=E.matrix,D=E.nX||0,M=E.nY||0,_=E.nZ||0,A=E.scale||1,j=null;E.unitCube?j=E.unitCube:j={x:A,y:A,z:A};let L=new Int32Array(D*M*_),$,F;for($=0,F=L.length;$<F;++$)L[$]=-1;let W=function(Y,Z,X,J,Q,G){let te={x:0,y:0,z:0},ue=!!(J&1<<Q),de=!!(J&1<<G),xe=Q;if(!ue&&de&&(xe=G),xe&1&&X++,xe&2&&Z++,xe&4&&Y++,O){let Se=new i.Vector3(Y,Z,X);Se=Se.applyMatrix4(O),te={x:Se.x,y:Se.y,z:Se.z}}else te.x=g.x+j.x*Y,te.y=g.y+j.y*Z,te.z=g.z+j.z*X;let ve=(M*Y+Z)*_+X;return S?(R.push(te),R.length-1):(L[ve]<0&&(L[ve]=R.length,R.push(te)),L[ve])},U=new Int32Array(12),q=f?this.edgeTable2:this.edgeTable,H=f?this.triTable2:this.triTable;for($=0;$<D-1;++$)for(let Y=0;Y<M-1;++Y)for(let Z=0;Z<_-1;++Z){let X=0;for(let G=0;G<8;++G){let te=(M*($+((G&4)>>2))+Y+((G&2)>>1))*_+Z+(G&1),ue=!!(C[te]&this.ISDONE);X|=ue<<G}if(X===0||X===255)continue;let J=q[X];if(J===0)continue;let Q=H[X];J&1&&(U[0]=W($,Y,Z,X,0,1)),J&2&&(U[1]=W($,Y,Z,X,1,3)),J&4&&(U[2]=W($,Y,Z,X,3,2)),J&8&&(U[3]=W($,Y,Z,X,2,0)),J&16&&(U[4]=W($,Y,Z,X,4,5)),J&32&&(U[5]=W($,Y,Z,X,5,7)),J&64&&(U[6]=W($,Y,Z,X,7,6)),J&128&&(U[7]=W($,Y,Z,X,6,4)),J&256&&(U[8]=W($,Y,Z,X,0,4)),J&512&&(U[9]=W($,Y,Z,X,1,5)),J&1024&&(U[10]=W($,Y,Z,X,3,7)),J&2048&&(U[11]=W($,Y,Z,X,2,6));for(let G=0;G<Q.length;G+=3){let te=U[Q[G]],ue=U[Q[G+1]],de=U[Q[G+2]];S&&G>=3&&(R.push(R[te]),te=R.length-1,R.push(R[ue]),ue=R.length-1,R.push(R[de]),de=R.length-1),T.push(te),T.push(ue),T.push(de)}}}laplacianSmooth(C,R,T){let E=new Array(R.length),f,g,S,O,D;for(f=0,g=R.length;f<g;f++)E[f]={x:0,y:0,z:0};let M=new Array(20),_;for(f=0;f<20;f++)M[f]=new Array(R.length);for(f=0,g=R.length;f<g;f++)M[0][f]=0;for(f=0,g=T.length/3;f<g;f++){let L=f*3,$=f*3+1,F=f*3+2;for(_=!0,S=0,O=M[0][T[L]];S<O;S++)if(T[$]==M[S+1][T[L]]){_=!1;break}for(_&&(M[0][T[L]]++,M[M[0][T[L]]][T[L]]=T[$]),_=!0,S=0,O=M[0][T[L]];S<O;S++)if(T[F]==M[S+1][T[L]]){_=!1;break}for(_&&(M[0][T[L]]++,M[M[0][T[L]]][T[L]]=T[F]),_=!0,S=0,O=M[0][T[$]];S<O;S++)if(T[L]==M[S+1][T[$]]){_=!1;break}for(_&&(M[0][T[$]]++,M[M[0][T[$]]][T[$]]=T[L]),_=!0,S=0,O=M[0][T[$]];S<O;S++)if(T[F]==M[S+1][T[$]]){_=!1;break}for(_&&(M[0][T[$]]++,M[M[0][T[$]]][T[$]]=T[F]),_=!0,S=0;S<M[0][T[F]];S++)if(T[L]==M[S+1][T[F]]){_=!1;break}for(_&&(M[0][T[F]]++,M[M[0][T[F]]][T[F]]=T[L]),_=!0,S=0,O=M[0][T[F]];S<O;S++)if(T[$]==M[S+1][T[F]]){_=!1;break}_&&(M[0][T[F]]++,M[M[0][T[F]]][T[F]]=T[$])}let A=1,j=.5;for(D=0;D<C;D++){for(f=0,g=R.length;f<g;f++)if(M[0][f]<3)E[f].x=R[f].x,E[f].y=R[f].y,E[f].z=R[f].z;else if(M[0][f]==3||M[0][f]==4){for(E[f].x=0,E[f].y=0,E[f].z=0,S=0,O=M[0][f];S<O;S++)E[f].x+=R[M[S+1][f]].x,E[f].y+=R[M[S+1][f]].y,E[f].z+=R[M[S+1][f]].z;E[f].x+=j*R[f].x,E[f].y+=j*R[f].y,E[f].z+=j*R[f].z,E[f].x/=j+M[0][f],E[f].y/=j+M[0][f],E[f].z/=j+M[0][f]}else{for(E[f].x=0,E[f].y=0,E[f].z=0,S=0,O=M[0][f];S<O;S++)E[f].x+=R[M[S+1][f]].x,E[f].y+=R[M[S+1][f]].y,E[f].z+=R[M[S+1][f]].z;E[f].x+=A*R[f].x,E[f].y+=A*R[f].y,E[f].z+=A*R[f].z,E[f].x/=A+M[0][f],E[f].y/=A+M[0][f],E[f].z/=A+M[0][f]}for(f=0,g=R.length;f<g;f++)R[f].x=E[f].x,R[f].y=E[f].y,R[f].z=E[f].z}}}let m=new d;class b{constructor(C,R,T){this.data=new Int32Array(C*R*T*3),this.width=R,this.height=T}set(C,R,T,E){let f=((C*this.width+R)*this.height+T)*3;this.data[f]=E.ix,this.data[f+1]=E.iy,this.data[f+2]=E.iz}get(C,R,T){let E=((C*this.width+R)*this.height+T)*3;return{ix:this.data[E],iy:this.data[E+1],iz:this.data[E+2]}}}class v{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],v.MarchingCube||(v.MarchingCube=new d)}getVDWIndex(C){return!C.elem||typeof this.vdwRadii[C.elem]>"u"?"X":C.elem}getFacesAndVertices(C){let R={};for(let f=0,g=C.length;f<g;f++)R[C[f]]=!0;let T=this.verts;for(let f=0,g=T.length;f<g;f++)T[f].x=T[f].x/this.scaleFactor-this.ptranx,T[f].y=T[f].y/this.scaleFactor-this.ptrany,T[f].z=T[f].z/this.scaleFactor-this.ptranz;let E=[];for(let f=0,g=this.faces.length;f<g;f+=3){let S=this.faces[f],O=this.faces[f+1],D=this.faces[f+2],M=T[S].atomid,_=T[O].atomid,A=T[D].atomid,j=M;_<j&&(j=_),A<j&&(j=A),R[j]&&S!==O&&O!==D&&S!==D&&(E.push(S),E.push(O),E.push(D))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:T,faces:E}}initparm(C,R,T){T>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let E=1/this.scaleFactor*5.5;this.pminx=C[0][0],this.pmaxx=C[1][0],this.pminy=C[0][1],this.pmaxy=C[1][1],this.pminz=C[0][2],this.pmaxz=C[1][2],R?(this.pminx-=this.probeRadius+E,this.pminy-=this.probeRadius+E,this.pminz-=this.probeRadius+E,this.pmaxx+=this.probeRadius+E,this.pmaxy+=this.probeRadius+E,this.pmaxz+=this.probeRadius+E):(this.pminx-=E,this.pminy-=E,this.pminz-=E,this.pmaxx+=E,this.pmaxy+=E,this.pmaxz+=E),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(R),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(C){let R={};for(const T in this.vdwRadii){let E=this.vdwRadii[T];C?R[T]=(E+this.probeRadius)*this.scaleFactor+.5:R[T]=E*this.scaleFactor+.5;let f=R[T]*R[T];this.widxz[T]=Math.floor(R[T])+1,this.depty[T]=new Int32Array(this.widxz[T]*this.widxz[T]);let g=0;for(let S=0;S<this.widxz[T];S++)for(let O=0;O<this.widxz[T];O++){let D=S*S+O*O;if(D>f)this.depty[T][g]=-1;else{let M=Math.sqrt(f-D);this.depty[T][g]=Math.floor(M)}g++}}}fillvoxels(C,R){for(let T=0,E=this.vpBits.length;T<E;T++)this.vpBits[T]=0,this.vpDistance[T]=-1,this.vpAtomID[T]=-1;for(let T in R){let E=C[R[T]];E!==void 0&&this.fillAtom(E,C)}for(let T=0,E=this.vpBits.length;T<E;T++)this.vpBits[T]&this.INOUT&&(this.vpBits[T]|=this.ISDONE)}fillAtom(C,R){let T=Math.floor(.5+this.scaleFactor*(C.x+this.ptranx)),E=Math.floor(.5+this.scaleFactor*(C.y+this.ptrany)),f=Math.floor(.5+this.scaleFactor*(C.z+this.ptranz)),g=this.getVDWIndex(C),S=0,O=this.pWidth*this.pHeight;for(let D=0,M=this.widxz[g];D<M;D++)for(let _=0;_<M;_++){if(this.depty[g][S]!=-1){for(let A=-1;A<2;A++)for(let j=-1;j<2;j++)for(let L=-1;L<2;L++)if(A!==0&&j!==0&&L!==0){let $=A*D,F=L*_;for(let W=0;W<=this.depty[g][S];W++){let U=W*j,q=T+$,H=E+U,Y=f+F;if(q<0||H<0||Y<0||q>=this.pLength||H>=this.pWidth||Y>=this.pHeight)continue;let Z=q*O+H*this.pHeight+Y;if(!(this.vpBits[Z]&this.INOUT))this.vpBits[Z]|=this.INOUT,this.vpAtomID[Z]=C.serial;else{let X=R[this.vpAtomID[Z]];if(X.serial!=C.serial){let J=T+$-Math.floor(.5+this.scaleFactor*(X.x+this.ptranx)),Q=E+U-Math.floor(.5+this.scaleFactor*(X.y+this.ptrany)),G=f+F-Math.floor(.5+this.scaleFactor*(X.z+this.ptranz));$*$+U*U+F*F<J*J+Q*Q+G*G&&(this.vpAtomID[Z]=C.serial)}}}}}S++}}fillvoxelswaals(C,R){for(let T=0,E=this.vpBits.length;T<E;T++)this.vpBits[T]&=~this.ISDONE;for(let T in R){let E=C[R[T]];E!==void 0&&this.fillAtomWaals(E,C)}}fillAtomWaals(C,R){let T=0,E=Math.floor(.5+this.scaleFactor*(C.x+this.ptranx)),f=Math.floor(.5+this.scaleFactor*(C.y+this.ptrany)),g=Math.floor(.5+this.scaleFactor*(C.z+this.ptranz)),S=this.getVDWIndex(C),O=this.pWidth*this.pHeight;for(let D=0,M=this.widxz[S];D<M;D++)for(let _=0;_<M;_++){if(this.depty[S][T]!=-1){for(let A=-1;A<2;A++)for(let j=-1;j<2;j++)for(let L=-1;L<2;L++)if(A!==0&&j!==0&&L!==0){let $=A*D,F=L*_;for(let W=0;W<=this.depty[S][T];W++){let U=W*j,q=E+$,H=f+U,Y=g+F;if(q<0||H<0||Y<0||q>=this.pLength||H>=this.pWidth||Y>=this.pHeight)continue;let Z=q*O+H*this.pHeight+Y;if(!(this.vpBits[Z]&this.ISDONE))this.vpBits[Z]|=this.ISDONE,this.vpAtomID[Z]=C.serial;else{let X=R[this.vpAtomID[Z]];if(X.serial!=C.serial){let J=E+$-Math.floor(.5+this.scaleFactor*(X.x+this.ptranx)),Q=f+U-Math.floor(.5+this.scaleFactor*(X.y+this.ptrany)),G=g+F-Math.floor(.5+this.scaleFactor*(X.z+this.ptranz));$*$+U*U+F*F<J*J+Q*Q+G*G&&(this.vpAtomID[Z]=C.serial)}}}}}T++}}buildboundary(){let C=this.pWidth*this.pHeight;for(let R=0;R<this.pLength;R++)for(let T=0;T<this.pHeight;T++)for(let E=0;E<this.pWidth;E++){let f=R*C+E*this.pHeight+T;if(this.vpBits[f]&this.INOUT){let g=0;for(;g<26;){let S=R+this.nb[g][0],O=T+this.nb[g][2],D=E+this.nb[g][1];if(S>-1&&S<this.pLength&&D>-1&&D<this.pWidth&&O>-1&&O<this.pHeight&&!(this.vpBits[S*C+D*this.pHeight+O]&this.INOUT)){this.vpBits[f]|=this.ISBOUND;break}else g++}}}}fastdistancemap(){let C=new b(this.pLength,this.pWidth,this.pHeight),R=this.pWidth*this.pHeight,T=this.cutRadius*this.cutRadius,E=[],f=[],g;for(let D=0;D<this.pLength;D++)for(let M=0;M<this.pWidth;M++)for(let _=0;_<this.pHeight;_++)if(g=D*R+M*this.pHeight+_,this.vpBits[g]&=~this.ISDONE,this.vpBits[g]&this.INOUT&&this.vpBits[g]&this.ISBOUND){let A={ix:D,iy:M,iz:_};C.set(D,M,_,A),E.push(A),this.vpDistance[g]=0,this.vpBits[g]|=this.ISDONE,this.vpBits[g]&=~this.ISBOUND}do{f=this.fastoneshell(E,C),E=[];for(let D=0,M=f.length;D<M;D++)g=R*f[D].ix+this.pHeight*f[D].iy+f[D].iz,this.vpBits[g]&=~this.ISBOUND,this.vpDistance[g]<=1.0404*T&&E.push({ix:f[D].ix,iy:f[D].iy,iz:f[D].iz})}while(E.length!==0);E=[],f=[],C=null;let S=this.scaleFactor-.5;S<0&&(S=0);let O=T-.5/(.1+S);for(let D=0;D<this.pLength;D++)for(let M=0;M<this.pWidth;M++)for(let _=0;_<this.pHeight;_++)g=D*R+M*this.pHeight+_,this.vpBits[g]&=~this.ISBOUND,this.vpBits[g]&this.INOUT&&(!(this.vpBits[g]&this.ISDONE)||this.vpBits[g]&this.ISDONE&&this.vpDistance[g]>=O)&&(this.vpBits[g]|=this.ISBOUND)}fastoneshell(C,R){let T,E,f,g,S,O,D,M,_,A=[];if(C.length===0)return A;let j={ix:-1,iy:-1,iz:-1},L=this.pWidth*this.pHeight;for(let $=0,F=C.length;$<F;$++){T=C[$].ix,E=C[$].iy,f=C[$].iz,M=R.get(T,E,f);for(let W=0;W<6;W++)j.ix=T+this.nb[W][0],j.iy=E+this.nb[W][1],j.iz=f+this.nb[W][2],j.ix<this.pLength&&j.ix>-1&&j.iy<this.pWidth&&j.iy>-1&&j.iz<this.pHeight&&j.iz>-1&&(_=j.ix*L+this.pHeight*j.iy+j.iz,this.vpBits[_]&this.INOUT&&!(this.vpBits[_]&this.ISDONE)?(R.set(j.ix,j.iy,f+this.nb[W][2],M),g=j.ix-M.ix,S=j.iy-M.iy,O=j.iz-M.iz,D=g*g+S*S+O*O,this.vpDistance[_]=D,this.vpBits[_]|=this.ISDONE,this.vpBits[_]|=this.ISBOUND,A.push({ix:j.ix,iy:j.iy,iz:j.iz})):this.vpBits[_]&this.INOUT&&this.vpBits[_]&this.ISDONE&&(g=j.ix-M.ix,S=j.iy-M.iy,O=j.iz-M.iz,D=g*g+S*S+O*O,D<this.vpDistance[_]&&(R.set(j.ix,j.iy,j.iz,M),this.vpDistance[_]=D,this.vpBits[_]&this.ISBOUND||(this.vpBits[_]|=this.ISBOUND,A.push({ix:j.ix,iy:j.iy,iz:j.iz})))))}for(let $=0,F=C.length;$<F;$++){T=C[$].ix,E=C[$].iy,f=C[$].iz,M=R.get(T,E,f);for(let W=6;W<18;W++)j.ix=T+this.nb[W][0],j.iy=E+this.nb[W][1],j.iz=f+this.nb[W][2],j.ix<this.pLength&&j.ix>-1&&j.iy<this.pWidth&&j.iy>-1&&j.iz<this.pHeight&&j.iz>-1&&(_=j.ix*L+this.pHeight*j.iy+j.iz,this.vpBits[_]&this.INOUT&&!(this.vpBits[_]&this.ISDONE)?(R.set(j.ix,j.iy,f+this.nb[W][2],M),g=j.ix-M.ix,S=j.iy-M.iy,O=j.iz-M.iz,D=g*g+S*S+O*O,this.vpDistance[_]=D,this.vpBits[_]|=this.ISDONE,this.vpBits[_]|=this.ISBOUND,A.push({ix:j.ix,iy:j.iy,iz:j.iz})):this.vpBits[_]&this.INOUT&&this.vpBits[_]&this.ISDONE&&(g=j.ix-M.ix,S=j.iy-M.iy,O=j.iz-M.iz,D=g*g+S*S+O*O,D<this.vpDistance[_]&&(R.set(j.ix,j.iy,j.iz,M),this.vpDistance[_]=D,this.vpBits[_]&this.ISBOUND||(this.vpBits[_]|=this.ISBOUND,A.push({ix:j.ix,iy:j.iy,iz:j.iz})))))}for(let $=0,F=C.length;$<F;$++){T=C[$].ix,E=C[$].iy,f=C[$].iz,M=R.get(T,E,f);for(let W=18;W<26;W++)j.ix=T+this.nb[W][0],j.iy=E+this.nb[W][1],j.iz=f+this.nb[W][2],j.ix<this.pLength&&j.ix>-1&&j.iy<this.pWidth&&j.iy>-1&&j.iz<this.pHeight&&j.iz>-1&&(_=j.ix*L+this.pHeight*j.iy+j.iz,this.vpBits[_]&this.INOUT&&!(this.vpBits[_]&this.ISDONE)?(R.set(j.ix,j.iy,f+this.nb[W][2],M),g=j.ix-M.ix,S=j.iy-M.iy,O=j.iz-M.iz,D=g*g+S*S+O*O,this.vpDistance[_]=D,this.vpBits[_]|=this.ISDONE,this.vpBits[_]|=this.ISBOUND,A.push({ix:j.ix,iy:j.iy,iz:j.iz})):this.vpBits[_]&this.INOUT&&this.vpBits[_]&this.ISDONE&&(g=j.ix-M.ix,S=j.iy-M.iy,O=j.iz-M.iz,D=g*g+S*S+O*O,D<this.vpDistance[_]&&(R.set(j.ix,j.iy,j.iz,M),this.vpDistance[_]=D,this.vpBits[_]&this.ISBOUND||(this.vpBits[_]|=this.ISBOUND,A.push({ix:j.ix,iy:j.iy,iz:j.iz})))))}return A}marchingcubeinit(C){for(let R=0,T=this.vpBits.length;R<T;R++)C==1?this.vpBits[R]&=~this.ISBOUND:C==4?(this.vpBits[R]&=~this.ISDONE,this.vpBits[R]&this.ISBOUND&&(this.vpBits[R]|=this.ISDONE),this.vpBits[R]&=~this.ISBOUND):C==2?this.vpBits[R]&this.ISBOUND&&this.vpBits[R]&this.ISDONE?this.vpBits[R]&=~this.ISBOUND:this.vpBits[R]&this.ISBOUND&&!(this.vpBits[R]&this.ISDONE)&&(this.vpBits[R]|=this.ISDONE):C==3&&(this.vpBits[R]&=~this.ISBOUND)}marchingcube(C){this.marchingcubeinit(C),this.verts=[],this.faces=[],v.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let R=this.pWidth*this.pHeight;for(let T=0,E=this.verts.length;T<E;T++)this.verts[T].atomid=this.vpAtomID[this.verts[T].x*R+this.pHeight*this.verts[T].y+this.verts[T].z];v.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}v.MarchingCube=new d},"./src/SurfaceWorker.js"(){$3Dmol.workerString=(function(){self.onmessage=function(e){var t=e.data,n=t.type;if(n<0)self.atomData=t.atoms,self.volume=t.volume,self.ps=new ProteinSurface;else{var i=self.ps;i.initparm(t.expandedExtent,n!=1,self.volume),i.fillvoxels(self.atomData,t.extendedAtoms),i.buildboundary(),(n===4||n===2)&&(i.fastdistancemap(),i.boundingatom(!1),i.fillvoxelswaals(self.atomData,t.extendedAtoms)),i.marchingcube(n);var o=i.getFacesAndVertices(t.atomsToShow);self.postMessage(o)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},"./src/VolumeData.ts"(e,t,n){n.r(t),n.d(t,{VolumeData:()=>m});var i=n("./src/utilities.ts"),o=n("./src/WebGL/math/index.ts"),l=n("./src/parsers/VASP.ts"),h=n("./src/parsers/CUBE.ts"),d=n("./node_modules/pako/dist/pako.esm.mjs");class m{constructor(v,w,C){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(g){var S=g/(this.size.y*this.size.z),O=g%(this.size.y*this.size.z),D=g%this.size.z;return S*=this.unit.x,O*=this.unit.y,D*=this.unit.z,S+=this.origin.x,O+=this.origin.y,D+=this.origin.z,{x:S,y:O,z:D}},this.vasp=function(g){var S=g.replace(/^\s+/,"").split(/[\n\r]/),O=(0,l.VASP)(g)[0],D=O.length;if(D==0){console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var M=1.889725992,_=.036749309,A=parseFloat(S[1]),j;j=S[2].replace(/^\s+/,"").split(/\s+/);var L=new o.Vector3(parseFloat(j[0]),parseFloat(j[1]),parseFloat(j[2])).multiplyScalar(A*M);j=S[3].replace(/^\s+/,"").split(/\s+/);var $=new o.Vector3(parseFloat(j[0]),parseFloat(j[1]),parseFloat(j[2])).multiplyScalar(A*M);j=S[4].replace(/^\s+/,"").split(/\s+/);var F=new o.Vector3(parseFloat(j[0]),parseFloat(j[1]),parseFloat(j[2])).multiplyScalar(A*M),W=L.x*($.y*F.z-F.y*$.z)-$.x*(L.y*F.z-F.y*L.z)+F.x*(L.y*$.z-$.y*L.z);W=Math.abs(W)/Math.pow(M,3);var U=1/W;S.splice(0,8+D+1);var q=S[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),H=Math.abs(parseFloat(q[0])),Y=Math.abs(parseFloat(q[1])),Z=Math.abs(parseFloat(q[2])),X=this.origin=new o.Vector3(0,0,0);this.size={x:H,y:Y,z:Z},this.unit=new o.Vector3(L.x,$.y,F.z),L=L.multiplyScalar(1/(M*H)),$=$.multiplyScalar(1/(M*Y)),F=F.multiplyScalar(1/(M*Z)),(L.y!=0||L.z!=0||$.x!=0||$.z!=0||F.x!=0||F.y!=0)&&(this.matrix=new o.Matrix4(L.x,$.x,F.x,0,L.y,$.y,F.y,0,L.z,$.z,F.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(X.x,X.y,X.z)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1)),S.splice(0,1);var J=S.join(" ");J=J.replace(/^\s+/,"");var Q=J.split(/[\s\r]+/);Q.splice(H*Y*Z+1);for(var G=Float32Array.from(Q,parseFloat),te=0;te<G.length;te++)G[te]=G[te]*U*_;this.data=G},this.dx=function(g){var S=g.split(/[\n\r]+/),O,D=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,M=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,_=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,A=/data follows/,j=0;for(j=0;j<S.length;j++){var L=S[j];if(O=D.exec(L)){var $=parseInt(O[1]),F=parseInt(O[2]),W=parseInt(O[3]);this.size={x:$,y:F,z:W}}else if(O=_.exec(L)){var U=parseFloat(O[1]);if((parseFloat(O[2])!=0||parseFloat(O[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),j+=1,L=S[j],O=_.exec(L),O==null){console.error("Parse error in dx delta matrix");return}var q=parseFloat(O[2]);if((parseFloat(O[1])!=0||parseFloat(O[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),j+=1,L=S[j],O=_.exec(L),O==null){console.error("Parse error in dx delta matrix");return}var H=parseFloat(O[3]);(parseFloat(O[1])!=0||parseFloat(O[2])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new o.Vector3(U,q,H)}else if(O=M.exec(L)){var Y=parseFloat(O[1]),Z=parseFloat(O[2]),X=parseFloat(O[3]);this.origin=new o.Vector3(Y,Z,X)}else if(O=A.exec(L))break}if(j+=1,!this.size||!this.origin||!this.unit||!this.size){console.error("Error parsing dx format");return}var J=S.splice(j).join(" "),Q=J.split(/[\s\r]+/);this.data=Float32Array.from(Q,parseFloat)},w=w.toLowerCase(),/\.gz$/.test(w)){w=w.replace(/\.gz$/,"");try{this[w]&&this.isbinary.has(w)?(typeof v=="string"&&(v=(0,i.base64ToArray)(v)),v=(0,d.inflate)(v)):v=new TextDecoder("utf-8").decode((0,d.inflate)(v))}catch(g){console.error(g)}}if(this[w]&&(this.isbinary.has(w)&&typeof v=="string"&&(v=(0,i.base64ToArray)(v)),this[w](v)),C){if(C.negate)for(let g=0,S=this.data.length;g<S;g++)this.data[g]=-this.data[g];if(C.normalize){var R=0;for(let g=0,S=this.data.length;g<S;g++)R+=this.data[g];var T=R/this.data.length;R=0;for(let g=0,S=this.data.length;g<S;g++){var E=this.data[g]-T;R+=E*E}var f=R/this.data.length;for(let g=0,S=this.data.length;g<S;g++)this.data[g]=(this.data[g]-T)/f}}}getIndex(v,w,C){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new o.Matrix4().getInverse(this.matrix));var R=new o.Vector3(v,w,C);R=R.applyMatrix4(this.inversematrix),v=R.x,w=R.y,C=R.z}else v-=this.origin.x,w-=this.origin.y,C-=this.origin.z,v/=this.unit.x,w/=this.unit.y,C/=this.unit.z;return v=Math.round(v),w=Math.round(w),C=Math.round(C),v<0||v>=this.size.x||w<0||w>=this.size.y||C<0||C>=this.size.z?-1:v*this.size.y*this.size.z+w*this.size.z+C}getVal(v,w,C){let R=this.getIndex(v,w,C);return R<0?0:this.data[R]}cube(v){var w=v.split(/\r?\n/);if(!(w.length<6)){var C=(0,h.CUBE)(v,{}).modelData[0].cryst,R=w[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),T=parseFloat(R[0]),E=Math.abs(T);this.origin=C.origin,this.size=C.size,this.unit=C.unit,this.matrix=C.matrix4;var f=6;T<0&&f++;var g=w.splice(E+f).join(" ");g=g.replace(/^\s+/,"");var S=g.split(/[\s\r]+/);this.data=Float32Array.from(S,parseFloat)}}ccp4(v){var w={};v=new Int8Array(v);var C=new Int32Array(v.buffer,0,56),R=new Float32Array(v.buffer,0,56),T=new DataView(v.buffer);if(w.MAP=String.fromCharCode(T.getUint8(208),T.getUint8(209),T.getUint8(210),T.getUint8(211)),w.MACHST=[T.getUint8(212),T.getUint8(213)],w.MACHST[0]===17&&w.MACHST[1]===17)for(var E=v.byteLength,f=0;f<E;f+=4)T.setFloat32(f,T.getFloat32(f),!0);w.NX=C[0],w.NY=C[1],w.NZ=C[2],w.MODE=C[3],w.NXSTART=C[4],w.NYSTART=C[5],w.NZSTART=C[6],w.MX=C[7],w.MY=C[8],w.MZ=C[9],w.xlen=R[10],w.ylen=R[11],w.zlen=R[12],w.alpha=R[13],w.beta=R[14],w.gamma=R[15],w.MAPC=C[16],w.MAPR=C[17],w.MAPS=C[18],w.DMIN=R[19],w.DMAX=R[20],w.DMEAN=R[21],w.ISPG=C[22],w.NSYMBT=C[23],w.LSKFLG=C[24],w.originX=R[49],w.originY=R[50],w.originZ=R[51],w.ARMS=R[54];var g=w,S=[g.xlen,0,0],O=[g.ylen*Math.cos(Math.PI/180*g.gamma),g.ylen*Math.sin(Math.PI/180*g.gamma),0],D=[g.zlen*Math.cos(Math.PI/180*g.beta),g.zlen*(Math.cos(Math.PI/180*g.alpha)-Math.cos(Math.PI/180*g.gamma)*Math.cos(Math.PI/180*g.beta))/Math.sin(Math.PI/180*g.gamma),0];D[2]=Math.sqrt(g.zlen*g.zlen*Math.sin(Math.PI/180*g.beta)*Math.sin(Math.PI/180*g.beta)-D[1]*D[1]);var M=[0,S,O,D],_=[0,g.MX,g.MY,g.MZ],A=[0,g.MAPC,g.MAPR,g.MAPS];this.matrix=new o.Matrix4,this.matrix.set(M[A[1]][0]/_[A[1]],M[A[2]][0]/_[A[2]],M[A[3]][0]/_[A[3]],0,M[A[1]][1]/_[A[1]],M[A[2]][1]/_[A[2]],M[A[3]][1]/_[A[3]],0,M[A[1]][2]/_[A[1]],M[A[2]][2]/_[A[2]],M[A[3]][2]/_[A[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(g.NXSTART+g.originX,g.NYSTART+g.originY,g.NZSTART+g.originZ)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1),this.size={x:w.NX,y:w.NY,z:w.NZ},this.dimensionorder=[w.MAPC,w.MAPR,w.MAPS];var j=new Float32Array(v.buffer,1024+w.NSYMBT),L=w.NX,$=w.NY,F=w.NZ;this.data=new Float32Array(L*$*F);for(let W=0;W<L;W++)for(let U=0;U<$;U++)for(let q=0;q<F;q++)this.data[(W*$+U)*F+q]=j[(q*$+U)*L+W]}}},"./src/VolumetricRender.ts"(e,t,n){n.r(t),n.d(t,{GLVolumetricRender:()=>m});var i=n("./src/WebGL/shapes/index.ts"),o=n("./src/WebGL/math/index.ts"),l=n("./src/WebGL/index.ts"),h=n("./src/colors.ts"),d=n("./src/GLShape.ts");class m{static interpolateArray(v,w){function C(D,M,_){return D+(M-D)*_}var R=[],T=(v.length-1)/(w-1);R[0]=v[0];for(var E=1;E<w-1;E++){var f=E*T,g=Math.floor(f),S=Math.ceil(f),O=f-g;R[E]=C(v[g],v[S],O)}return R[w-1]=v[v.length-1],R}constructor(v,w,C){this.hidden=!1,this.boundingSphere=new i.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,w=w||{};var R=Object.assign([],w.transferfn);this.subsamples=w.subsamples||5;let T=256;R.forEach(function($){$.value=parseFloat($.value)}),R.sort(function($,F){return $.value-F.value}),this.min=R[0].value,R.length==0&&R.push(R[0]),this.max=R[R.length-1].value;var E,f,g,S,O,D,M,_,A,j;for(let $=0;$<R.length-1;$++)if(g=h.CC.color(R[$].color),S=h.CC.color(R[$+1].color),A=R[$].opacity,j=R[$+1].opacity,E=Math.floor((R[$].value-this.min)*T/(this.max-this.min)),f=Math.floor((R[$+1].value-this.min)*T/(this.max-this.min)),E!=f){O=m.interpolateArray([g.r*255,S.r*255],f-E),D=m.interpolateArray([g.g*255,S.g*255],f-E),M=m.interpolateArray([g.b*255,S.b*255],f-E),_=m.interpolateArray([A*255,j*255],f-E);for(let F=0;F<O.length;F++)this.transferfunctionbuffer.push(O[F]),this.transferfunctionbuffer.push(D[F]),this.transferfunctionbuffer.push(M[F]),this.transferfunctionbuffer.push(_[F])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),v.matrix){let $=new o.Vector3(0,0,0),F=new o.Vector3(v.size.x,v.size.y,v.size.z),W=new o.Vector3(1,1,1);$.applyMatrix4(v.matrix),F.applyMatrix4(v.matrix),W.applyMatrix4(v.matrix).sub($),this.extent=[[$.x,$.y,$.z],[F.x,F.y,F.z]];for(let Y=1;Y<7;Y++)F.x=Y&1?v.size.x:0,F.y=Y&2?v.size.y:0,F.z=Y&4?v.size.z:0,F.applyMatrix4(v.matrix),this.extent[0][0]=Math.min(this.extent[0][0],F.x),this.extent[0][1]=Math.min(this.extent[0][1],F.y),this.extent[0][2]=Math.min(this.extent[0][2],F.z),this.extent[1][0]=Math.max(this.extent[1][0],F.x),this.extent[1][1]=Math.max(this.extent[1][1],F.y),this.extent[1][2]=Math.max(this.extent[1][2],F.z);let U=F.x-$.x,q=F.y-$.y,H=F.z-$.z;this.maxdepth=Math.sqrt(U*U+q*q+H*H),this.minunit=Math.min(Math.min(W.x,W.y),W.z),this.texmatrix=new o.Matrix4().identity().scale({x:v.size.x,y:v.size.y,z:v.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(v.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new o.Matrix4().identity();let $=v.unit.x*v.size.x,F=v.unit.y*v.size.y,W=v.unit.z*v.size.z;this.texmatrix.makeTranslation(-v.origin.x/$,-v.origin.y/F,-v.origin.z/W),this.texmatrix.scale({x:1/$,y:1/F,z:1/W}),this.minunit=Math.min(Math.min(v.unit.x,v.unit.y),v.unit.z),this.extent=[[v.origin.x,v.origin.y,v.origin.z],[v.origin.x+$,v.origin.y+F,v.origin.z+W]],this.maxdepth=Math.sqrt($*$+F*F+W*W)}var L=new d.GLShape({});if(L.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=L.finalize(),this.boundingSphere.center=new o.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,w.coords===void 0&&w.selection!==void 0&&(C?w.coords=C.selectedAtoms(w.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),w.coords!==void 0&&w.seldist!==void 0){let $=new Uint8Array(v.data.length),F=w.seldist,W=F*F;for(let U=0,q=w.coords.length;U<q;U++){let H=w.coords[U],Y=H.x-F,Z=H.y-F,X=H.z-F,J=H.x+F,Q=H.y+F,G=H.z+F;if(v.getIndex(Y,Z,X)>=0||v.getIndex(J,Q,G)>=0)for(let te=Y;te<J;te+=this.minunit)for(let ue=Z;ue<Q;ue+=this.minunit)for(let de=X;de<G;de+=this.minunit){let xe=v.getIndex(te,ue,de);xe>=0&&!$[xe]&&(te-H.x)*(te-H.x)+(ue-H.y)*(ue-H.y)+(de-H.z)*(de-H.z)<W&&($[xe]=1)}}for(let U=0,q=v.data.length;U<q;U++)$[U]==0&&(v.data[U]=1/0)}this.data=v}globj(v){if(this.renderedShapeObj&&(v.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new l.Object3D;var w=null,C=new l.Texture(this.data,!0),R=new l.Texture(this.transferfunctionbuffer,!1);C.needsUpdate=!0,R.needsUpdate=!0,R.flipY=!1,w=new l.VolumetricMaterial({transferfn:R,transfermin:this.min,transfermax:this.max,map:C,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var T=new l.Mesh(this.geo,w);this.shapeObj.add(T),this.renderedShapeObj=this.shapeObj.clone(),v.add(this.renderedShapeObj)}}removegl(v){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),v.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}},"./src/WebGL/Camera.ts"(e,t,n){n.r(t),n.d(t,{Camera:()=>l});var i=n("./src/WebGL/core/index.ts"),o=n("./src/WebGL/math/index.ts");class l extends i.Object3D{constructor(d=50,m=1,b=.1,v=2e3,w=!1){super(),this.projectionMatrix=new o.Matrix4,this.projectionMatrixInverse=new o.Matrix4,this.matrixWorldInverse=new o.Matrix4,this.fov=d,this.aspect=m,this.near=b,this.far=v;var C=this.position.z;this.right=C*Math.tan(Math.PI/180*d),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!w,this.updateProjectionMatrix()}lookAt(d){this.matrix.lookAt(this.position,d,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof o.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}},"./src/WebGL/Fog.ts"(e,t,n){n.r(t),n.d(t,{Fog:()=>o});var i=n("./src/colors.ts");class o{constructor(h,d=1,m=1e3){this.name="",this.color=new i.Color(h),this.near=d,this.far=m}clone(){return new o(this.color.getHex(),this.near,this.far)}}},"./src/WebGL/Renderer.ts"(e,t,n){n.r(t),n.d(t,{Renderer:()=>E});var i=n("./src/WebGL/Camera.ts"),o=n("./src/WebGL/constants/Sides.ts"),l=n("./src/WebGL/constants/TextureConstants.ts"),h=n("./src/WebGL/core/index.ts"),d=n("./src/colors.ts"),m=n("./src/WebGL/materials/index.ts"),b=n("./src/WebGL/math/index.ts"),v=n("./src/WebGL/objects/index.ts"),w=n("./src/WebGL/shaders/index.ts"),C=n("./src/WebGL/SpritePlugin.ts"),R=null,T=null;class E{constructor(g){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new b.Vector3,this._worldInverse=new b.Matrix4,this._projInverse=new b.Matrix4,this._textureMatrix=new b.Matrix4,this._fullProjModelMatrix=new b.Matrix4,this._fullProjModelMatrixInv=new b.Matrix4,this._direction=new b.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new C.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,g=g||{},this.row=g.row,this.col=g.col,this.rows=g.rows,this.cols=g.cols,this._canvas=g.canvas!==void 0?g.canvas:document.createElement("canvas"),this._precision=g.precision!==void 0?g.precision:"highp",this._alpha=g.alpha!==void 0?g.alpha:!0,this._premultipliedAlpha=g.premultipliedAlpha!==void 0?g.premultipliedAlpha:!0,this._antialias=g.antialias!==void 0?g.antialias:!1,this._upscale=g.upscale!==void 0?g.upscale:this._antialias,this._preserveDrawingBuffer=g.preserveDrawingBuffer!==void 0?g.preserveDrawingBuffer:!1,this._clearColor=g.clearColor!==void 0?new d.Color(g.clearColor):new d.Color(0),this._clearAlpha=g.clearAlpha!==void 0?g.clearAlpha:0,this._outlineMaterial=new m.MeshOutlineMaterial(g.outline),this._outlineSphereImposterMaterial=new m.SphereImposterOutlineMaterial(g.outline),this._outlineStickImposterMaterial=new m.StickImposterOutlineMaterial(g.outline),this._outlineEnabled=!!g.outline,this._AOEnabled=!!g.ambientOcclusion,g.ambientOcclusion&&typeof g.ambientOcclusion.strength<"u"&&(this._AOstrength=parseFloat(g.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),g.ambientOcclusion&&typeof g.ambientOcclusion.radius<"u"&&(this._AOradius=parseFloat(g.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=g.id,!(g.containerWidth==0||g.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(g,S){this._clearColor.setHex(g),this._clearAlpha=S,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(g){this._outlineMaterial=new m.MeshOutlineMaterial(g),this._outlineSphereImposterMaterial=new m.SphereImposterOutlineMaterial(g),this._outlineStickImposterMaterial=new m.StickImposterOutlineMaterial(g),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(g){g&&(g.strength&&(this._AOstrength=g.strength),g.scale&&(this._AOradius=g.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var g=this._gl.drawingBufferWidth/this.cols,S=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=g,this._viewportHeight=S,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(g*this.col,S*this.row,g,S),this._gl.viewport(g*this.col,S*this.row,g,S)}}setSize(g,S){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=g*this.devicePixelRatio,this._canvas.height=S*this.devicePixelRatio,this._canvas.style.width=g+"px",this._canvas.style.height=S+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(g,S,O){var D=0;(g===void 0||g)&&(D|=this._gl.COLOR_BUFFER_BIT),(S===void 0||S)&&(D|=this._gl.DEPTH_BUFFER_BIT),(O===void 0||O)&&(D|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(D)}setMaterialFaces(g,S){var O=g.side===o.DoubleSide,D=g.side===o.BackSide;g.imposter||(D=S?!D:D),this._oldDoubleSided!==O&&(O?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=O),this._oldFlipSided!==D&&(D?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=D),this._gl.cullFace(this._gl.BACK)}setDepthTest(g){this._oldDepthTest!==g&&(g?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=g)}setDepthWrite(g){this._oldDepthWrite!==g&&(this._gl.depthMask(g),this._oldDepthWrite=g)}setBlending(g){g?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(g,S,O,D){g.addEventListener("dispose",this.onMaterialDispose.bind(this));var M,_;if(_=g.shaderID,_){var A=w.ShaderLib[_];g.vertexShader=A.vertexShader,g.fragmentShader=A.fragmentShader,g.uniforms=w.ShaderUtils.clone(A.uniforms),g.shaded&&g.makeShaded(this.SHADE_TEXTURE)}M={wireframe:g.wireframe,fragdepth:g.imposter,volumetric:g.volumetric,shaded:g.shaded},g.program=this.buildProgram(g.fragmentShader,g.vertexShader,g.uniforms,M)}renderBuffer(g,S,O,D,M,_){if(D.visible){var A,j;if(A=this.setProgram(g,S,O,D,_,this),!!A){j=A.attributes;var L=!1,$=D.wireframe?1:0,F=M.id*16777215+A.id*2+$;F!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=F,L=!0),L&&(this.disableAttributes(),j.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,M.__webglVertexBuffer),this.enableAttribute(j.position),this._gl.vertexAttribPointer(j.position,3,this._gl.FLOAT,!1,0,0)),j.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,M.__webglColorBuffer),this.enableAttribute(j.color),this._gl.vertexAttribPointer(j.color,3,this._gl.FLOAT,!1,0,0)),j.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,M.__webglNormalBuffer),this.enableAttribute(j.normal),this._gl.vertexAttribPointer(j.normal,3,this._gl.FLOAT,!1,0,0)),j.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,M.__webglOffsetBuffer),this.enableAttribute(j.offset),this._gl.vertexAttribPointer(j.offset,3,this._gl.FLOAT,!1,0,0)),j.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,M.__webglRadiusBuffer),this.enableAttribute(j.radius),this._gl.vertexAttribPointer(j.radius,1,this._gl.FLOAT,!1,0,0)));var W,U;if(_ instanceof v.Mesh){if(D.shaderID==="instanced"){var q=D.sphere.geometryGroups[0];L&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,M.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,q.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,M.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,q.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,M.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,q.faceArray,this._gl.STATIC_DRAW)),W=q.faceidx,this._extInstanced.vertexAttribDivisorANGLE(j.offset,1),this._extInstanced.vertexAttribDivisorANGLE(j.radius,1),this._extInstanced.vertexAttribDivisorANGLE(j.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,W,this._gl.UNSIGNED_SHORT,0,M.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(j.offset,0),this._extInstanced.vertexAttribDivisorANGLE(j.radius,0),this._extInstanced.vertexAttribDivisorANGLE(j.color,0)}else D.wireframe?(U=M.lineidx,this.setLineWidth(D.wireframeLinewidth),L&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,M.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,U,this._gl.UNSIGNED_SHORT,0)):(W=M.faceidx,L&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,M.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,W,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=W,this.info.render.faces+=W/3}else _ instanceof v.Line&&(U=M.vertices,this.setLineWidth(D.linewidth),this._gl.drawArrays(this._gl.LINES,0,U),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(g,S,O){let D=g.__lights,M=g.fog,_=[];for(let L=0,$=g.__webglObjects.length;L<$;L++){let F=g.__webglObjects[L];F.render&&F[O]&&_.push(F)}if(_.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(g.__webglObjects,!0,O+"Depth",S,D,M,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let A=this._AOshader.uniforms;this._gl.uniform1f(A.total_strength,this._AOstrength),this._gl.uniform1f(A.radius,this._AOradius),this._fullProjModelMatrix=new b.Matrix4,this._fullProjModelMatrixInv=new b.Matrix4;let j=_[0].object;this._fullProjModelMatrix.multiplyMatrices(S.projectionMatrix,j._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(A.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(A.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(g,S){if(!(S instanceof i.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var O,D,M,_,A,j=g.__lights,L=g.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&g.updateMatrixWorld(),S.parent===void 0&&S.updateMatrixWorld(),S.matrixWorldInverse.getInverse(S.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(g),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),A=g.__webglObjects;let $=!1,F=this._AOEnabled;for(O=0,D=A.length;O<D;O++)M=A[O],_=M.object,M.render=!1,_.visible&&(this.setupMatrices(_,S),this.unrollBufferMaterial(M),M.render=!0,M.volumetric&&($=!0),M.hasAO&&(F=!0));if(this.setBlending(!1),F&&this.setShading(g,S,"opaque"),this.renderObjects(g.__webglObjects,!0,"opaque",S,j,L,!1),F&&this.clearShading(),this.renderSprites(g,S,!1),this.renderObjects(g.__webglObjects,!0,"transparentDepth",S,j,L,!0),this.renderObjects(g.__webglObjects,!1,"transparent",S,j,L,!0),$&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(g.__webglObjects,!1,"volumetric",S,j,L,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(g,S,!0),this._bitmap){const W=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(W),W.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let g=this._viewportWidth,S=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,g,S),this._gl.viewport(0,0,g,S),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,g,S,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,g,S,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,g,S,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,g,S,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let g=this._viewportWidth,S=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,g,S),this._gl.viewport(0,0,g,S),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var O=this._antialias?w.ShaderLib.screenaa:w.ShaderLib.screen;this._screenshader=this.buildProgram(O.fragmentShader,O.vertexShader,O.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var D=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(D),this._gl.STATIC_DRAW);let M=w.ShaderLib.ssao;this._AOshader=this.buildProgram(M.fragmentShader,M.vertexShader,M.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let _=w.ShaderLib.blur;this._blurshader=this.buildProgram(_.fragmentShader,_.vertexShader,_.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(g){if(g.__webglObjects||(g.__webglObjects=[],g.__webglObjectsImmediate=[],g.__webglSprites=[],g.__webglFlares=[]),g.__objectsAdded.length){for(;g.__objectsAdded.length;)this.addObject(g.__objectsAdded[0],g),g.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;g.__objectsRemoved.length;)this.removeObject(g.__objectsRemoved[0],g),g.__objectsRemoved.splice(0,1);for(var S=0,O=g.__webglObjects.length;S<O;S++)this.updateObject(g.__webglObjects[S].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(g,S){(g==null||S==null)&&(g=this._canvas.width,S=this._canvas.height);var O=g/S;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var D=g/this.cols,M=S/this.rows;O=D/M}return O}setTexture(g,S,O){if(g.needsUpdate){g.__webglInit||(g.__webglInit=!0,g.addEventListener("dispose",this.onTextureDispose.bind(this)),g.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+S);var D=O?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(D,g.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,g.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,g.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,g.unpackAlignment);var M=this.paramToGL(g.format),_=this.paramToGL(g.type);if(O)this.setTextureParameters(this._gl.TEXTURE_3D,g),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,g.image.size.z,g.image.size.y,g.image.size.x,0,this._gl.RED,this._gl.FLOAT,g.image.data);else{var A=g.image,j=A.width,L=A.height;typeof j>"u"&&(j=A.length,M==this._gl.RGBA&&(j/=4),L=1),this.setTextureParameters(this._gl.TEXTURE_2D,g),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,M,M,_,g.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,M,j,L,0,M,_,g.image)}g.needsUpdate=!1,g.onUpdate&&g.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+S),O?this._gl.bindTexture(this._gl.TEXTURE_3D,g.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,g.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(g){this._enabledAttributes[g]||(this._gl.enableVertexAttribArray(g),this._enabledAttributes[g]=!0)}disableAttributes(){for(let g in this._enabledAttributes)this._enabledAttributes[g]&&(this._gl.disableVertexAttribArray(g),this._enabledAttributes[g]=!1)}setPolygonOffset(g,S,O){this._oldPolygonOffset!==g&&(g?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(g){g!==this._oldLineWidth&&(this._gl.lineWidth(g),this._oldLineWidth=g)}deallocateGeometry(g){if(g.__webglInit=void 0,g.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(g.__webglVertexBuffer),g.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(g.__webglColorBuffer),g.geometryGroups!==void 0)for(var S=0,O=g.groups;S<O;S++){var D=g.geometryGroups[S];D.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(D.__webglVertexBuffer),D.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(D.__webglColorBuffer),D.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(D.__webglNormalBuffer),D.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(D.__webglFaceBuffer),D.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(D.__webglLineBuffer)}}deallocateMaterial(g){var S=g.program;if(S!==void 0){g.program=void 0;var O,D,M,_=!1;for(O=0,D=this._programs.length;O<D;O++)if(M=this._programs[O],M.program===S){M.usedTimes--,M.usedTimes===0&&(_=!0);break}if(_===!0){var A=[];for(O=0,D=this._programs.length;O<D;O++)M=this._programs[O],M.program!==S&&A.push(M);this._programs=A,this._gl.deleteProgram(S),this.info.memory.programs--}}}deallocateTexture(g){if(g.image&&g.image.__webglTextureCube)this._gl.deleteTexture(g.image.__webglTextureCube);else{if(!g.__webglInit)return;g.__webglInit=!1,this._gl.deleteTexture(g.__webglTexture)}}onGeometryDispose(g){var S=g.target;S.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(S),this.info.memory.geometries--}onTextureDispose(g){var S=g.target;S.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(S),this.info.memory.textures--}onMaterialDispose(g){var S=g.target;S.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(S)}getShader(g,S){var O;return!this.isWebGL1()&&!S.startsWith("#version")&&(S=S.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),g=="fragment"?S=S.replace(/varying/g,"in"):S=S.replace(/varying/g,"out"),S=S.replace(/attribute/g,"in"),S=S.replace(/texture2D/g,"texture"),S=S.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),S=S.replace(/gl_FragColor/g,"glFragColor"),S=`#version 300 es
`+S),g==="fragment"?O=this._gl.createShader(this._gl.FRAGMENT_SHADER):g==="vertex"&&(O=this._gl.createShader(this._gl.VERTEX_SHADER)),O==null?null:(this._gl.shaderSource(O,S),this._gl.compileShader(O),this._gl.getShaderParameter(O,this._gl.COMPILE_STATUS)?O:(console.error(this._gl.getShaderInfoLog(O)),console.error("could not initialize shader"),null))}buildProgram(g,S,O,D){var M,_,A,j,L=[];L.push(g),L.push(S);for(M in D)L.push(M),L.push(D[M]);for(j=L.join(),M=0,_=this._programs.length;M<_;M++){var $=this._programs[M];if($.code===j)return $.usedTimes++,$.program}if(this.isWebGL1()&&D.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if(A=this._gl.createProgram(),A==null)return null;var F=this._precision,W="precision "+F+" float;",U=[D.volumetric?"#version 300 es":"",W].join(`
`),q=[D.volumetric?"#version 300 es":"",D.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",D.shaded?"#define SHADED 1":"",D.wireframe?"#define WIREFRAME 1":"",W].join(`
`),H=this.getShader("fragment",q+g),Y=this.getShader("vertex",U+S);Y!=null&&this._gl.attachShader(A,Y),H!=null&&this._gl.attachShader(A,H),this._gl.linkProgram(A),this._gl.getProgramParameter(A,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),A.uniforms={},A.attributes={};var Z,X,J;Z=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"];for(X in O)Z.push(X);for(J=0;J<Z.length;J++){var Q=Z[J];A.uniforms[Q]=this._gl.getUniformLocation(A,Q)}for(Z=["position","normal","color","lineDistance","offset","radius"],J=0;J<Z.length;J++){var G=Z[J];A.attributes[G]=this._gl.getAttribLocation(A,G)}return A.id=this._programs_counter++,this._programs.push({program:A,code:j,usedTimes:1}),this.info.memory.programs=this._programs.length,A}setProgram(g,S,O,D,M,_){if(D.needsUpdate&&(D.program&&this.deallocateMaterial(D),this.initMaterial(D,S,O,M),D.needsUpdate=!1),D.program==null)return null;var A=!1,j=D.program,L=j.uniforms,$=D.uniforms;if(j!=this._currentProgram&&(this._gl.useProgram(j),this._currentProgram=j,A=!0),D.id!=this._currentMaterialId&&(this._currentMaterialId=D.id,A=!0),g!=this._currentCamera&&(this._currentCamera=g,A=!0),L.projectionMatrix&&this._gl.uniformMatrix4fv(L.projectionMatrix,!1,g.projectionMatrix.elements),L.modelViewMatrix&&this._gl.uniformMatrix4fv(L.modelViewMatrix,!1,M._modelViewMatrix.elements),L.normalMatrix&&this._gl.uniformMatrix3fv(L.normalMatrix,!1,M._normalMatrix.elements),L.projinv&&(this._projInverse.getInverse(g.projectionMatrix),this._gl.uniformMatrix4fv(L.projinv,!1,this._projInverse.elements)),L.viewMatrix&&this._gl.uniformMatrix4fv(L.viewMatrix,!1,g.matrixWorldInverse.elements),L.vWidth&&this._gl.uniform1f(L.vWidth,this._viewportWidth),L.vHeight&&this._gl.uniform1f(L.vHeight,this._viewportHeight),A){if($.fogColor.value=O.color,$.fogNear.value=O.near,$.fogFar.value=O.far,D.shaderID.startsWith("lambert")||D.shaderID==="instanced"||D.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(j,S),this._lightsNeedUpdate=!1),$.directionalLightColor.value=this._lights.directional.colors,$.directionalLightDirection.value=this._lights.directional.positions;else if(D.shaderID.endsWith("outline"))$.outlineColor.value=D.outlineColor,$.outlineWidth.value=D.outlineWidth,$.outlinePushback.value=D.outlinePushback,$.outlineMaxPixels.value=D.outlineMaxPixels*this.devicePixelRatio;else if(D.shaderID==="volumetric"){M._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(M._modelViewMatrix),this._projInverse.getInverse(g.projectionMatrix),this._textureMatrix.multiplyMatrices(M.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(L.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(L.projinv,!1,this._projInverse.elements);let F=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);$.step.value=M.material.unit*F,$.maxdepth.value=M.material.maxdepth*F,$.transfermax.value=M.material.transfermax,$.transfermin.value=M.material.transfermin,$.subsamples.value=M.material.subsamples,_.setTexture(M.material.transferfn,4,!1),_.setTexture(M.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}$.opacity.value=D.opacity,this.loadMaterialUniforms(L,$)}return $.shading&&($.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),j}loadMaterialUniforms(g,S){var O,D,M,_;for(O in S)g[O]&&(D=S[O].type,M=S[O].value,_=g[O],D==="f"?this._gl.uniform1f(_,M):D==="i"?this._gl.uniform1i(_,M):D==="fv"?this._gl.uniform3fv(_,M):D==="c"?this._gl.uniform3f(_,M.r,M.g,M.b):D==="f4"&&this._gl.uniform4f(_,M[0],M[1],M[2],M[3]))}addObject(g,S){var O,D,M,_;if(!g.__webglInit&&(g.__webglInit=!0,g._modelViewMatrix=new b.Matrix4,g._normalMatrix=new b.Matrix3,g.geometry!==void 0&&g.geometry.__webglInit===void 0&&(g.geometry.__webglInit=!0,g.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),g instanceof v.Mesh||g instanceof v.Line))for(M=g.geometry,O=0,D=M.geometryGroups.length;O<D;O++)_=M.geometryGroups[O],_.id=this._geometryGroupCounter++,_.__webglVertexBuffer||(g instanceof v.Mesh?(this.createMeshBuffers(_),M.elementsNeedUpdate=!0,M.normalsNeedUpdate=!0):g instanceof v.Line&&this.createLineBuffers(_),M.verticesNeedUpdate=!0,M.colorsNeedUpdate=!0);if(!g.__webglActive){if(g instanceof v.Mesh||g instanceof v.Line)for(M=g.geometry,O=0,D=M.geometryGroups.length;O<D;O++)_=M.geometryGroups[O],this.addBuffer(S.__webglObjects,_,g);else g instanceof v.Sprite&&S.__webglSprites.push(g);g.__webglActive=!0}}updateObject(g){var S=g.geometry,O;if(g instanceof v.Mesh||g instanceof v.Line){for(var D=0,M=S.geometryGroups.length;D<M;D++)O=S.geometryGroups[D],(S.verticesNeedUpdate||S.elementsNeedUpdate||S.colorsNeedUpdate||S.normalsNeedUpdate)&&this.setBuffers(O,this._gl.STATIC_DRAW);S.verticesNeedUpdate=!1,S.elementsNeedUpdate=!1,S.normalsNeedUpdate=!1,S.colorsNeedUpdate=!1,S.buffersNeedUpdate=!1}}removeObject(g,S){g instanceof v.Mesh||g instanceof v.Line?this.removeInstances(S.__webglObjects,g):g instanceof v.Sprite&&this.removeInstancesDirect(S.__webglSprites,g),g.__webglActive=!1}removeInstances(g,S){for(var O=g.length-1;O>=0;--O)g[O].object===S&&g.splice(O,1)}removeInstancesDirect(g,S){for(var O=g.length-1;O>=0;--O)g[O]===S&&g.splice(O,1)}unrollBufferMaterial(g){var S=g.object,O=S.material;if(O.volumetric)g.opaque=null,g.transparent=null,g.volumetric=O;else if(O.transparent){if(g.opaque=null,g.volumetric=null,g.transparent=O,!O.wireframe){let D=O.clone();D.opacity=0,g.transparentDepth=D}}else{if(g.opaque=O,g.transparent=null,g.volumetric=null,!O.wireframe){let D=O.clone();D.opacity=0,g.opaqueDepth=D}O.hasAO&&(g.hasAO=!0),(this._AOEnabled||g.hasAO)&&(g.opaqueShaded=O.clone(),g.opaqueShaded.shaded=!0)}}setBuffers(g,S){var O=g.vertexArray,D=g.colorArray;if(g.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,g.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,O,S)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,g.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,O,S)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,g.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,D,S),g.normalArray&&g.__webglNormalBuffer!==void 0){var M=g.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,g.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,M,S)}if(g.radiusArray&&g.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,g.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,g.radiusArray,S)),g.faceArray&&g.__webglFaceBuffer!==void 0){var _=g.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,g.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,_,S)}if(g.lineArray&&g.__webglLineBuffer!==void 0){var A=g.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,g.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,A,S)}}createMeshBuffers(g){g.radiusArray&&(g.__webglRadiusBuffer=this._gl.createBuffer()),g.useOffset&&(g.__webglOffsetBuffer=this._gl.createBuffer()),g.__webglVertexBuffer=this._gl.createBuffer(),g.__webglNormalBuffer=this._gl.createBuffer(),g.__webglColorBuffer=this._gl.createBuffer(),g.__webglFaceBuffer=this._gl.createBuffer(),g.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(g){g.__webglVertexBuffer=this._gl.createBuffer(),g.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(g,S,O){g.push({buffer:S,object:O,opaque:null,transparent:null})}setupMatrices(g,S){g._modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,g.matrixWorld),g._normalMatrix.getInverse(g._modelViewMatrix),g._normalMatrix.transpose()}filterFallback(g){return this._gl.LINEAR}setTextureParameters(g,S){g==this._gl.TEXTURE_2D?(this._gl.texParameteri(g,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(g,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(g,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(S.magFilter)),this._gl.texParameteri(g,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(S.minFilter))):(this._gl.texParameteri(g,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(g,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(g,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(g,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(g,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(g,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(g,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(g){return g===l.UnsignedByteType?this._gl.UNSIGNED_BYTE:g===l.RGBAFormat?this._gl.RGBA:g===l.NearestFilter?this._gl.NEAREST:0}setupLights(g,S){var O,D,M,_=0,A=0,j=0,L,$,F=this._lights,W=F.directional.colors,U=F.directional.positions,q=0,H=0;for(O=0,D=S.length;O<D;O++)if(M=S[O],L=M.color,$=M.intensity,M instanceof h.Light){if(this._direction.getPositionFromMatrix(M.matrixWorld),this._vector3.getPositionFromMatrix(M.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;U[H]=this._direction.x,U[H+1]=this._direction.y,U[H+2]=this._direction.z,W[H]=L.r*$,W[H+1]=L.g*$,W[H+2]=L.b*$,H+=3,q++}F.ambient[0]=_,F.ambient[1]=A,F.ambient[2]=j,F.directional.length=q}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))(T==null||T.isContextLost())&&(R=new OffscreenCanvas(this._canvas.width,this._canvas.height),T=R.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=R,this._gl=T,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});else if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var g=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(g[6])}catch(S){console.error(S)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(g,S,O,D,M,_,A){var j,L,$,F,W,U,q;S?(W=g.length-1,U=-1,q=-1):(W=0,U=g.length,q=1);for(var H=W;H!==U;H+=q)if(j=g[H],j.render){if(L=j.object,$=j.buffer,F=j[O],(j.hasAO||this._AOEnabled)&&j[O+"Shaded"]&&(F=j[O+"Shaded"]),!F)continue;this.setBlending(A),this.setDepthTest(F.depthTest),this.setDepthWrite(F.depthWrite),this.setPolygonOffset(F.polygonOffset,F.polygonOffsetFactor,F.polygonOffsetUnits);var Y=L._modelViewMatrix.isReflected();if(this.setMaterialFaces(F,Y),this.renderBuffer(D,M,_,F,$,L),(this._outlineEnabled||F.outline)&&!F.wireframe&&F.shaderID!=="basic"&&F.opacity!==0){let Z=this._outlineMaterial;F.shaderID=="sphereimposter"?Z=this._outlineSphereImposterMaterial:F.shaderID=="stickimposter"&&(Z=this._outlineStickImposterMaterial),this.renderBuffer(D,M,_,Z,$,L)}}}renderSprites(g,S,O){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(g,S,this._currentWidth,this._currentHeight,O),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},"./src/WebGL/SpritePlugin.ts"(e,t,n){n.r(t),n.d(t,{SpritePlugin:()=>o});var i=n("./src/WebGL/shaders/index.ts");class o{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(d){this.gl=d.context,this.renderer=d,this.precision=d.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var m=0;this.sprite.vertices[m++]=-1,this.sprite.vertices[m++]=-1,this.sprite.vertices[m++]=0,this.sprite.vertices[m++]=0,this.sprite.vertices[m++]=1,this.sprite.vertices[m++]=-1,this.sprite.vertices[m++]=1,this.sprite.vertices[m++]=0,this.sprite.vertices[m++]=1,this.sprite.vertices[m++]=1,this.sprite.vertices[m++]=1,this.sprite.vertices[m++]=1,this.sprite.vertices[m++]=-1,this.sprite.vertices[m++]=1,this.sprite.vertices[m++]=0,this.sprite.vertices[m++]=1,m=0,this.sprite.faces[m++]=0,this.sprite.faces[m++]=1,this.sprite.faces[m++]=2,this.sprite.faces[m++]=0,this.sprite.faces[m++]=2,this.sprite.faces[m++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(i.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const b={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),b.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),b.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),b.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),b.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),b.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),b.color=this.gl.getUniformLocation(this.sprite.program,"color"),b.map=this.gl.getUniformLocation(this.sprite.program,"map"),b.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),b.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),b.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),b.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),b.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),b.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),b.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),b.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),b.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=b}render(d,m,b,v,w){var C,R,T,E,f,g,S,O,D,M;if(!this.gl)throw new Error("WebGLRenderer not initialized");let _=[];(C=d?.__webglSprites)===null||C===void 0||C.forEach(Q=>{(w&&Q.material.depthTest==!1||!w&&Q.material.depthTest)&&_.push(Q)});let A=_.length;if(!A)return;const j=this.sprite.attributes,L=this.sprite.uniforms;if(!L)throw new Error("Uniforms not defined");var $=b*.5,F=v*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(j.position),this.gl.enableVertexAttribArray(j.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(j.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(j.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(L.projectionMatrix,!1,m.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(L.map,0);var W=d.fog;W?(this.gl.uniform3f(L.fogColor,W.color.r,W.color.g,W.color.b),this.gl.uniform1f(L.fogNear,W.near),this.gl.uniform1f(L.fogFar,W.far)):(this.gl.uniform1f(L.fogNear,0),this.gl.uniform1f(L.fogFar,0));var U;let q,H,Y,Z=[];for(U=0;U<A;U++)q=_[U],H=q.material,H&&(H.depthTest==!1&&!w||!q.visible||H.opacity===0||(H.useScreenCoordinates?q.z=-q.position.z:(q._modelViewMatrix.multiplyMatrices(m.matrixWorldInverse,q.matrixWorld),q.z=-q._modelViewMatrix.elements[14])));for(_.sort(l),U=0;U<A;U++)if(q=_[U],H=q.material,!!H&&!(!q.visible||H.opacity===0)&&H.map&&H.map.image&&H.map.image.width){this.gl.uniform1f(L?.alphaTest||null,H.alphaTest);var X=H.map.image.width,J=H.map.image.height;Z[0]=X*this.renderer.devicePixelRatio/b,Z[1]=J*this.renderer.devicePixelRatio/v,H.useScreenCoordinates===!0?(this.gl.uniform1i(L.useScreenCoordinates,1),this.gl.uniform3f(L.screenPosition,(q.position.x*this.renderer.devicePixelRatio-$)/$,(F-q.position.y*this.renderer.devicePixelRatio)/F,Math.max(0,Math.min(1,q.position.z)))):(this.gl.uniform1i(L.useScreenCoordinates,0),this.gl.uniformMatrix4fv(L.modelViewMatrix,!1,q._modelViewMatrix.elements)),Y=1/(H.scaleByViewport?v:1),Z[0]*=Y*q.scale.x,Z[1]*=Y*q.scale.y;let Q=(R=H?.alignment)===null||R===void 0?void 0:R.x,G=(T=H?.alignment)===null||T===void 0?void 0:T.y;H.screenOffset&&(Q=(Q||0)+2*H.screenOffset.x/X,G=(G||0)+2*H.screenOffset.y/J),this.gl.uniform2f(L.uvScale,((E=H?.uvScale)===null||E===void 0?void 0:E.x)||1,((f=H?.uvScale)===null||f===void 0?void 0:f.y)||1),this.gl.uniform2f(L.uvOffset,((g=H?.uvOffset)===null||g===void 0?void 0:g.x)||0,((S=H?.uvOffset)===null||S===void 0?void 0:S.y)||0),this.gl.uniform2f(L.alignment,Q||0,G||0),this.gl.uniform1f(L.opacity,H.opacity),this.gl.uniform3f(L.color,((O=H?.color)===null||O===void 0?void 0:O.r)||0,((D=H?.color)===null||D===void 0?void 0:D.g)||0,((M=H?.color)===null||M===void 0?void 0:M.b)||0),this.gl.uniform1f(L.rotation,q.rotation),this.gl.uniform2fv(L.scale,Z),this.renderer.setDepthTest(H.depthTest),this.renderer.setDepthWrite(H.depthWrite),this.renderer.setTexture(H.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(d,m){if(!this.gl)throw new Error("WebGL Rendering context not found");var b=this.gl.createProgram();if(!b)throw new Error("Error creating webgl program");var v=this.gl.createShader(this.gl.FRAGMENT_SHADER),w=this.gl.createShader(this.gl.VERTEX_SHADER);if(!v)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!w)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var C="precision "+m+` float;
`;if(this.gl.shaderSource(v,C+d.fragmentShader),this.gl.shaderSource(w,C+d.vertexShader),this.gl.compileShader(v),this.gl.compileShader(w),!this.gl.getShaderParameter(v,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(w,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(v)} 
      ${this.gl.getShaderInfoLog(w)}`);return this.gl.attachShader(b,v),this.gl.attachShader(b,w),this.gl.linkProgram(b),this.gl.getProgramParameter(b,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),b}}function l(h,d){return h.z!==d.z?d.z-h.z:d.id-h.id}},"./src/WebGL/constants/Coloring.ts"(e,t,n){n.r(t),n.d(t,{Coloring:()=>i});var i;(function(o){o[o.NoColors=0]="NoColors",o[o.FaceColors=1]="FaceColors",o[o.VertexColors=2]="VertexColors"})(i||(i={}))},"./src/WebGL/constants/Shading.ts"(e,t,n){n.r(t),n.d(t,{Shading:()=>i});var i;(function(o){o[o.NoShading=0]="NoShading",o[o.FlatShading=1]="FlatShading",o[o.SmoothShading=2]="SmoothShading"})(i||(i={}))},"./src/WebGL/constants/Sides.ts"(e,t,n){n.r(t),n.d(t,{BackSide:()=>o,DoubleSide:()=>l,FrontSide:()=>i});const i=0,o=1,l=2},"./src/WebGL/constants/SpriteAlignment.ts"(e,t,n){n.r(t),n.d(t,{SpriteAlignment:()=>o});var i=n("./src/WebGL/math/index.ts");const o={topLeft:new i.Vector2(1,-1),topCenter:new i.Vector2(0,-1),topRight:new i.Vector2(-1,-1),centerLeft:new i.Vector2(1,0),center:new i.Vector2(0,0),centerRight:new i.Vector2(-1,0),bottomLeft:new i.Vector2(1,1),bottomCenter:new i.Vector2(0,1),bottomRight:new i.Vector2(-1,1)}},"./src/WebGL/constants/TextureConstants.ts"(e,t,n){n.r(t),n.d(t,{ClampToEdgeWrapping:()=>i,FloatType:()=>m,LinearFilter:()=>o,LinearMipMapLinearFilter:()=>h,NearestFilter:()=>l,R32Format:()=>w,RFormat:()=>v,RGBAFormat:()=>b,UnsignedByteType:()=>d});const i=1001,o=1006,l=1007,h=1008,d=1009,m=1010,b=1021,v=1022,w=1023},"./src/WebGL/constants/TextureOperations.ts"(e,t,n){n.r(t),n.d(t,{TextureOperations:()=>i});var i;(function(o){o[o.MultiplyOperation=0]="MultiplyOperation",o[o.MixOperation=1]="MixOperation",o[o.AddOperation=2]="AddOperation"})(i||(i={}))},"./src/WebGL/constants/index.ts"(e,t,n){n.r(t),n.d(t,{BackSide:()=>o.BackSide,ClampToEdgeWrapping:()=>d.ClampToEdgeWrapping,Coloring:()=>i.Coloring,DoubleSide:()=>o.DoubleSide,FloatType:()=>d.FloatType,FrontSide:()=>o.FrontSide,LinearFilter:()=>d.LinearFilter,LinearMipMapLinearFilter:()=>d.LinearMipMapLinearFilter,NearestFilter:()=>d.NearestFilter,R32Format:()=>d.R32Format,RFormat:()=>d.RFormat,RGBAFormat:()=>d.RGBAFormat,Shading:()=>l.Shading,SpriteAlignment:()=>h.SpriteAlignment,TextureOperations:()=>m.TextureOperations,UnsignedByteType:()=>d.UnsignedByteType});var i=n("./src/WebGL/constants/Coloring.ts"),o=n("./src/WebGL/constants/Sides.ts"),l=n("./src/WebGL/constants/Shading.ts"),h=n("./src/WebGL/constants/SpriteAlignment.ts"),d=n("./src/WebGL/constants/TextureConstants.ts"),m=n("./src/WebGL/constants/TextureOperations.ts")},"./src/WebGL/core/EventDispatcher.ts"(e,t,n){n.r(t),n.d(t,{EventDispatcher:()=>i});class i{constructor(){this.listeners={}}dispatchEvent(l){var h=this.listeners[l.type];if(h!==void 0){l.target=this;for(var d=0,m=h.length;d<m;d++)h[d].call(this,l)}}removeEventListener(l,h){if(!h)this.listeners[l]=[];else{var d=this.listeners[l].indexOf(h);d!==-1&&this.listeners[l].splice(d,1)}}addEventListener(l,h){this.listeners[l]===void 0&&(this.listeners[l]=[]),this.listeners[l].indexOf(h)===-1&&this.listeners[l].push(h)}}},"./src/WebGL/core/Geometry.ts"(e,t,n){n.r(t),n.d(t,{Geometry:()=>b,GeometryGroup:()=>m,GeometryIDCount:()=>v});var i=n("./src/WebGL/materials/LineBasicMaterial.ts"),o=n("./src/WebGL/core/EventDispatcher.ts"),l=n("./src/WebGL/math/index.ts"),h=n("./src/colors.ts");const d=65535;class m{constructor(C=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=C}setColor(C){var R=this.vertexArray,T=this.colorArray;if(!R)throw new Error("vertex array not initialized");if(!T)throw new Error("color array not initialized");let E=h.CC.color(C);for(var f=0;f<R.length;f+=3)T[f]=E.r,T[f+1]=E.g,T[f+2]=E.b}setColors(C){var R=this.vertexArray,T=this.colorArray;if(!R)throw new Error("vertex array not initialized");if(!T)throw new Error("color array not initialized");if(R.length!=T.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var E=0;E<R.length;E+=3){var f=C(R[E],R[E+1],R[E+2]);f instanceof h.Color||(f=h.CC.color(f)),T[E]=f.r,T[E+1]=f.g,T[E+2]=f.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var C=new l.Vector3,R,T,E,f,g=0;g<this.vertices;++g)R=g*3,T=this.vertexArray[R],E=this.vertexArray[R+1],f=this.vertexArray[R+2],C.x+=T,C.y+=E,C.z+=f;return C.divideScalar(this.vertices),C}setNormals(){var C=this.faceArray,R=this.vertexArray,T=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!C)throw new Error("face array not initialized");if(!R)throw new Error("vertex array not initialized");if(!T)throw new Error("normal array not initialized");for(var E,f,g,S,O,D,M,_=0;_<C.length/3;++_)E=C[_*3]*3,f=C[_*3+1]*3,g=C[_*3+2]*3,S=new l.Vector3(R[E],R[E+1],R[E+2]),O=new l.Vector3(R[f],R[f+1],R[f+2]),D=new l.Vector3(R[g],R[g+1],R[g+2]),S.subVectors(S,O),D.subVectors(D,O),D.cross(S),M=D,M.normalize(),T[E]+=M.x,T[f]+=M.x,T[g]+=M.x,T[E+1]+=M.y,T[f+1]+=M.y,T[g+1]+=M.y,T[E+2]+=M.z,T[f+2]+=M.z,T[g+2]+=M.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var C=this.faceArray,R=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!C)throw new Error("face array not initialized");for(var T=0;T<this.faceidx/3;++T){var E=T*3,f=E*2,g=C[E],S=C[E+1],O=C[E+2];R[f]=g,R[f+1]=S,R[f+2]=g,R[f+3]=O,R[f+4]=S,R[f+5]=O}}}vrml(C,R){var T,E,f,g,S,O,D,M,_,A,j,L,$,F,W,U,q,H,Y="";if(Y+=C+`Shape {
`+C+` appearance Appearance {
`+C+`  material Material {
`+C+"   diffuseColor "+((T=R?.color)===null||T===void 0?void 0:T.r)+" "+((E=R?.color)===null||E===void 0?void 0:E.g)+" "+((f=R?.color)===null||f===void 0?void 0:f.b)+`
`,R.wireframe&&this.colorArray){let X=this.colorArray;Y+=C+"    emissiveColor "+X[0]+" "+X[1]+" "+X[2]+`
`}R?.transparent&&(Y+=C+"   transparency "+(1-R.opacity)+`
`),Y+=C+`  }
`,Y+=C+` }
`;var Z=C;if(C+=" ",R instanceof i.LineBasicMaterial||R.wireframe){Y+=C+`geometry IndexedLineSet {
`+C+` colorPerVertex TRUE
`+C+` coord Coordinate {
`+C+`  point [
`;let X,J,Q;for(let G=0;G<this.vertices;++G){let te=G*3;X=(g=this.vertexArray)===null||g===void 0?void 0:g[te],J=(S=this.vertexArray)===null||S===void 0?void 0:S[te+1],Q=(O=this.vertexArray)===null||O===void 0?void 0:O[te+2],Y+=C+"   "+X+" "+J+" "+Q+`,
`}if(Y+=C+`  ]
`,Y+=C+` }
`,this.colorArray&&!R.wireframe){Y+=C+` color Color {
`+C+`  color [
`;for(let G=0;G<this.vertices;++G){let te=G*3;X=this.colorArray[te],J=this.colorArray[te+1],Q=this.colorArray[te+2],Y+=C+"   "+X+" "+J+" "+Q+`,
`}Y+=C+`  ]
`,Y+=C+` }
`}if(Y+=C+` coordIndex [
`,R.wireframe&&this.faceArray)for(let G=0;G<this.faceidx;G+=3)X=(D=this.faceArray)===null||D===void 0?void 0:D[G],J=(M=this.faceArray)===null||M===void 0?void 0:M[G+1],Q=(_=this.faceArray)===null||_===void 0?void 0:_[G+2],Y+=C+"  "+X+", "+J+", "+Q+`, -1,
`;else for(let G=0;G<this.vertices-1;G+=2)Y+=C+"  "+G+", "+(G+1)+`, -1,
`;Y+=C+` ]
`,Y+=C+`}
`}else{Y+=C+`geometry IndexedFaceSet {
`+C+` colorPerVertex TRUE
`+C+` normalPerVertex TRUE
`+C+` solid FALSE
`,Y+=C+` coord Coordinate {
`+C+`  point [
`;let X,J,Q;for(let G=0;G<this.vertices;++G){let te=G*3;X=(A=this.vertexArray)===null||A===void 0?void 0:A[te],J=(j=this.vertexArray)===null||j===void 0?void 0:j[te+1],Q=(L=this.vertexArray)===null||L===void 0?void 0:L[te+2],Y+=C+"   "+X+" "+J+" "+Q+`,
`}Y+=C+`  ]
`,Y+=C+` }
`,Y+=C+` normal Normal {
`+C+`  vector [
`;for(let G=0;G<this.vertices;++G){let te=G*3;X=($=this.normalArray)===null||$===void 0?void 0:$[te],J=(F=this.normalArray)===null||F===void 0?void 0:F[te+1],Q=(W=this.normalArray)===null||W===void 0?void 0:W[te+2],Y+=C+"   "+X+" "+J+" "+Q+`,
`}if(Y+=C+`  ]
`,Y+=C+` }
`,this.colorArray){Y+=C+` color Color {
`+C+`  color [
`;for(let G=0;G<this.vertices;++G){let te=G*3;X=this.colorArray[te],J=this.colorArray[te+1],Q=this.colorArray[te+2],Y+=C+"   "+X+" "+J+" "+Q+`,
`}Y+=C+`  ]
`,Y+=C+` }
`}Y+=C+` coordIndex [
`;for(let G=0;G<this.faceidx;G+=3)X=(U=this.faceArray)===null||U===void 0?void 0:U[G],J=(q=this.faceArray)===null||q===void 0?void 0:q[G+1],Q=(H=this.faceArray)===null||H===void 0?void 0:H[G+2],Y+=C+"  "+X+", "+J+", "+Q+`, -1,
`;Y+=C+` ]
`,Y+=C+`}
`}return Y+=Z+"}",Y}truncateArrayBuffers(C=!0,R=!1){var T=this.vertexArray,E=this.colorArray,f=this.normalArray,g=this.faceArray,S=this.lineArray,O=this.radiusArray;this.vertexArray=T?.subarray(0,this.vertices*3)||null,this.colorArray=E?.subarray(0,this.vertices*3)||null,C?(this.normalArray=f?.subarray(0,this.vertices*3)||null,this.faceArray=g?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=S?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),O&&(this.radiusArray=O.subarray(0,this.vertices)),R&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class b extends o.EventDispatcher{constructor(C=!1,R=!1,T=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=v++,this.mesh=C,this.radii=R,this.offset=T}updateGeoGroup(C=0){var R,T=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!T||T.vertices+C>(((R=T?.vertexArray)===null||R===void 0?void 0:R.length)||0)/3)&&(T=this.addGeoGroup()),T}vrml(C,R){for(var T="",E=this.geometryGroups.length,f=0;f<E;f++){var g=this.geometryGroups[f];T+=g.vrml(C,R)+`,
`}return T}addGeoGroup(){var C=new m(this.geometryGroups.length);return this.geometryGroups.push(C),this.groups=this.geometryGroups.length,C.vertexArray=new Float32Array(d*3),C.colorArray=new Float32Array(d*3),this.mesh&&(C.normalArray=new Float32Array(d*3),C.faceArray=new Uint16Array(d*6),C.lineArray=new Uint16Array(d*6)),this.radii&&(C.radiusArray=new Float32Array(d)),C.useOffset=this.offset,C}setUpNormals(...C){for(var R=0;R<this.groups;R++){var T=this.geometryGroups[R];T.setNormals(...C)}}setColors(...C){for(var R=this.geometryGroups.length,T=0;T<R;T++){var E=this.geometryGroups[T];E.setColors(...C)}}setColor(...C){let R=this.geometryGroups.length;for(var T=0;T<R;T++){var E=this.geometryGroups[T];E.setColor(...C)}}setUpWireframe(...C){let R=this.geometryGroups.length;for(var T=0;T<R;T++){var E=this.geometryGroups[T];E.setLineIndices(...C)}}initTypedArrays(){for(var C=0;C<this.groups;C++){var R=this.geometryGroups[C];R.__inittedArrays!==!0&&R.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var C=0,R=0;R<this.groups;R++)C+=this.geometryGroups[R].vertices;return C}}let v=0},"./src/WebGL/core/Object3D.ts"(e,t,n){n.r(t),n.d(t,{Light:()=>m,Object3D:()=>h,Object3DIDCount:()=>l,Scene:()=>d});var i=n("./src/WebGL/math/index.ts"),o=n("./src/colors.ts");let l=0;class h{constructor(){this.id=l++,this.name="",this.children=[],this.position=new i.Vector3,this.rotation=new i.Vector3,this.matrix=new i.Matrix4,this.matrixWorld=new i.Matrix4,this.quaternion=new i.Quaternion,this.eulerOrder="XYZ",this.up=new i.Vector3(0,1,0),this.scale=new i.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(v){this.matrix.lookAt(v,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof i.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(v){if(v===this){console.error("Can't add $3Dmol.Object3D to itself");return}v.parent=this,this.children.push(v);for(var w=this;w.parent!==void 0;)w=w.parent;w!==void 0&&w instanceof d&&w.__addObject(v)}remove(v){var w=this.children.indexOf(v);if(w!==-1){v.parent=void 0,this.children.splice(w,1);for(var C=this;C.parent!==void 0;)C=C.parent;C!==void 0&&C instanceof d&&C.__removeObject(v)}}vrml(v){v||(v=" ");var w=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),C=0,R=0,T=0;if(w!=0){let g=Math.sin(w/2);C=this.quaternion.x/g,R=this.quaternion.y/g,T=this.quaternion.z/g}var E=v+`Transform {
`+v+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+v+" rotation "+C+" "+R+" "+T+" "+w+`
`+v+` children [
`;this.geometry&&(E+=this.geometry.vrml(v,this.material));for(var f=0;f<this.children.length;f++)E+=this.children[f].vrml(v+" ")+`,
`;return E+=` ]
`,E+="}",E}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof i.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(v){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||v===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var w=0;w<this.children.length;w++)this.children[w].updateMatrixWorld(!0)}clone(v){v===void 0&&(v=new h),v.name=this.name,v.up.copy(this.up),v.position.copy(this.position),v.rotation instanceof i.Vector3&&this.rotation instanceof i.Vector3?v.rotation.copy(this.rotation):v.rotation=this.rotation,v.eulerOrder=this.eulerOrder,v.scale.copy(this.scale),v.rotationAutoUpdate=this.rotationAutoUpdate,v.matrix.copy(this.matrix),v.matrixWorld.copy(this.matrixWorld),v.quaternion.copy(this.quaternion),v.matrixAutoUpdate=this.matrixAutoUpdate,v.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,v.useQuaternion=this.useQuaternion,v.visible=this.visible;for(var w=0;w<this.children.length;w++){var C=this.children[w];v.add(C.clone())}return v}setVisible(v){this.visible=v;for(var w=0;w<this.children.length;w++){var C=this.children[w];C.setVisible(v)}}}class d extends h{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(v){if(v instanceof m)this.__lights.indexOf(v)===-1&&this.__lights.push(v),v.target&&v.target.parent===void 0&&this.add(v.target);else if(this.__objects.indexOf(v)===-1){this.__objects.push(v),this.__objectsAdded.push(v);var w=this.__objectsRemoved.indexOf(v);w!==-1&&this.__objectsRemoved.splice(w,1)}for(var C=0;C<v.children.length;C++)this.__addObject(v.children[C])}__removeObject(v){var w;if(v instanceof m)w=this.__lights.indexOf(v),w!==-1&&this.__lights.splice(w,1);else if(w=this.__objects.indexOf(v),w!==-1){this.__objects.splice(w,1),this.__objectsRemoved.push(v);var C=this.__objectsAdded.indexOf(v);C!==-1&&this.__objectsAdded.splice(w,1)}for(var R=0;R<v.children.length;R++)this.__removeObject(v.children[R])}}class m extends h{constructor(v,w=1){super(),this.position=new i.Vector3(0,1,0),this.target=new h,this.castShadow=!1,this.onlyShadow=!1,this.color=new o.Color(v),this.intensity=w}}},"./src/WebGL/core/Projector.ts"(e,t,n){n.r(t),n.d(t,{Projector:()=>l});var i=n("./src/WebGL/math/index.ts");const o=new i.Matrix4;class l{static unprojectVector(d,m){return m.projectionMatrixInverse.getInverse(m.projectionMatrix),o.multiplyMatrices(m.matrixWorld,m.projectionMatrixInverse),d.applyProjection(o)}static projectVector(d,m){return m.matrixWorldInverse.getInverse(m.matrixWorld),o.multiplyMatrices(m.projectionMatrix,m.matrixWorldInverse),d.applyProjection(o)}projectVector(d,m){return l.projectVector(d,m)}unprojectVector(d,m){return l.unprojectVector(d,m)}}},"./src/WebGL/core/Raycaster.ts"(e,t,n){n.r(t),n.d(t,{Raycaster:()=>d,intersectObject:()=>g});var i=n("./src/WebGL/math/index.ts"),o=n("./src/WebGL/shapes/index.ts");const l=(S,O)=>S.distance-O.distance,h=new i.Matrix4;class d{constructor(O,D,M,_){this.precision=1e-4,this.linePrecision=.2,this.ray=new i.Ray(O,D),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=_||0,this.far=M||1/0}set(O,D){this.ray.set(O,D)}setFromCamera(O,D){D.ortho?(this.ray.origin.set(O.x,O.y,(D.near+D.far)/(D.near-D.far)).unproject(D),this.ray.direction.set(0,0,-1).transformDirection(D.matrixWorld)):(this.ray.origin.setFromMatrixPosition(D.matrixWorld),this.ray.direction.set(O.x,O.y,O.z),D.projectionMatrixInverse.getInverse(D.projectionMatrix),h.multiplyMatrices(D.matrixWorld,D.projectionMatrixInverse),this.ray.direction.applyProjection(h),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(O,D){for(var M=[],_=0,A=D.length;_<A;_++)g(O,D[_],this,M);return M.sort(l),M}}const m=S=>Math.min(Math.max(S,-1),1);var b=new o.Sphere,v=new o.Cylinder,w=new o.Triangle,C=new i.Vector3,R=new i.Vector3,T=new i.Vector3,E=new i.Vector3,f=new i.Vector3;function g(S,O,D,M){if(f.getPositionFromMatrix(S.matrixWorld),O.intersectionShape===void 0||O.hidden)return M;var _=O.intersectionShape,A=D.linePrecision;A*=S.matrixWorld.getMaxScaleOnAxis();var j=A*A;if(O.boundingSphere!==void 0&&O.boundingSphere instanceof o.Sphere&&(b.copy(O.boundingSphere),b.applyMatrix4(S.matrixWorld),!D.ray.isIntersectionSphere(b)))return M;var L,$,F,W,U,q,H,Y,Z,X,J,Q,G,te;for(L=0,$=_.triangle.length;L<$;L++)if(_.triangle[L]instanceof o.Triangle){if(w.copy(_.triangle[L]),w.applyMatrix4(S.matrixWorld),F=w.getNormal(),W=D.ray.direction.dot(F),W>=0||(C.subVectors(w.a,D.ray.origin),H=F.dot(C)/W,H<0))continue;R.copy(D.ray.direction).multiplyScalar(H).add(D.ray.origin),R.sub(w.a),T.copy(w.b).sub(w.a),E.copy(w.c).sub(w.a);var ue=T.dot(E),de=T.lengthSq(),xe=E.lengthSq();if(Q=(de*R.dot(E)-ue*R.dot(T))/(de*xe-ue*ue),Q<0||Q>1||(J=(R.dot(T)-Q*ue)/de,J<0||J>1||J+Q>1))continue;M.push({clickable:O,distance:H})}for(L=0,$=_.cylinder.length;L<$;L++)if(_.cylinder[L]instanceof o.Cylinder){if(v.copy(_.cylinder[L]),v.applyMatrix4(S.matrixWorld),C.subVectors(v.c1,D.ray.origin),U=C.dot(v.direction),q=C.dot(D.ray.direction),W=m(D.ray.direction.dot(v.direction)),Z=1-W*W,Z===0)continue;G=(W*q-U)/Z,te=(q-W*U)/Z,R.copy(v.direction).multiplyScalar(G).add(v.c1),T.copy(D.ray.direction).multiplyScalar(te).add(D.ray.origin),Y=E.subVectors(R,T).lengthSq();var ve=v.radius*v.radius;if(Y<=ve){if(X=(W*U-q)*(W*U-q)-Z*(C.lengthSq()-U*U-ve),X<=0?Q=H=Math.sqrt(Y):Q=H=(q-W*U-Math.sqrt(X))/Z,J=W*Q-U,J<0||J*J>v.lengthSq()||Q<0)continue;M.push({clickable:O,distance:H})}}for(L=0,$=_.line.length;L<$;L+=2){R.copy(_.line[L]),R.applyMatrix4(S.matrixWorld),T.copy(_.line[L+1]),T.applyMatrix4(S.matrixWorld),E.subVectors(T,R);var Se=E.lengthSq();E.normalize(),C.subVectors(R,D.ray.origin);var Ee=C.dot(E);q=C.dot(D.ray.direction),W=m(D.ray.direction.dot(E)),Z=1-W*W,Z!==0&&(G=(W*q-Ee)/Z,te=(q-W*Ee)/Z,R.add(E.multiplyScalar(G)),T.copy(D.ray.direction).multiplyScalar(te).add(D.ray.origin),Y=E.subVectors(T,R).lengthSq(),Y<j&&G*G<Se&&M.push({clickable:O,distance:te}))}for(L=0,$=_.sphere.length;L<$;L++)if(_.sphere[L]instanceof o.Sphere&&(b.copy(_.sphere[L]),b.applyMatrix4(S.matrixWorld),D.ray.isIntersectionSphere(b))){R.subVectors(b.center,D.ray.origin);var he=R.dot(D.ray.direction);if(X=he*he-(R.lengthSq()-b.radius*b.radius),he<0)return M;X<=0?H=he:H=he-Math.sqrt(X),M.push({clickable:O,distance:H})}return M}},"./src/WebGL/core/Texture.ts"(e,t,n){n.r(t),n.d(t,{Texture:()=>d,TextureIdCount:()=>m});var i=n("./src/WebGL/constants/TextureConstants.ts"),o=n("./src/WebGL/math/index.ts"),l=n("./src/WebGL/core/EventDispatcher.ts"),h=n("./src/WebGL/core/UVMapping.ts");class d extends l.EventDispatcher{constructor(v,w){super(),this.id=m++,this.name="",this.image=v,this.mapping=new h.UVMapping,this.wrapS=i.ClampToEdgeWrapping,this.wrapT=i.ClampToEdgeWrapping,this.anisotropy=1,w?(this.format=i.RFormat,this.type=i.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=i.NearestFilter,this.minFilter=i.NearestFilter):(this.format=i.RGBAFormat,this.type=i.UnsignedByteType,this.offset=new o.Vector2(0,0),this.repeat=new o.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=i.LinearFilter,this.minFilter=i.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(v=new d){return v.image=this.image,v.mapping=this.mapping,v.wrapS=this.wrapS,v.wrapT=this.wrapT,v.magFilter=this.magFilter,v.minFilter=this.minFilter,v.anisotropy=this.anisotropy,v.format=this.format,v.type=this.type,v.offset.copy(this.offset),v.repeat.copy(this.repeat),v.premultiplyAlpha=this.premultiplyAlpha,v.flipY=this.flipY,v.unpackAlignment=this.unpackAlignment,v}dispose(){this.dispatchEvent({type:"dispose"})}}let m=0},"./src/WebGL/core/UVMapping.ts"(e,t,n){n.r(t),n.d(t,{UVMapping:()=>i});class i{}},"./src/WebGL/core/index.ts"(e,t,n){n.r(t),n.d(t,{EventDispatcher:()=>i.EventDispatcher,Geometry:()=>o.Geometry,GeometryGroup:()=>o.GeometryGroup,GeometryIDCount:()=>o.GeometryIDCount,Light:()=>l.Light,Object3D:()=>l.Object3D,Object3DIDCount:()=>l.Object3DIDCount,Projector:()=>h.Projector,Raycaster:()=>d.Raycaster,Scene:()=>l.Scene,Texture:()=>m.Texture,TextureIdCount:()=>m.TextureIdCount,UVMapping:()=>b.UVMapping,intersectObject:()=>d.intersectObject});var i=n("./src/WebGL/core/EventDispatcher.ts"),o=n("./src/WebGL/core/Geometry.ts"),l=n("./src/WebGL/core/Object3D.ts"),h=n("./src/WebGL/core/Projector.ts"),d=n("./src/WebGL/core/Raycaster.ts"),m=n("./src/WebGL/core/Texture.ts"),b=n("./src/WebGL/core/UVMapping.ts")},"./src/WebGL/index.ts"(e,t,n){n.r(t),n.d(t,{BackSide:()=>i.BackSide,Camera:()=>v.Camera,ClampToEdgeWrapping:()=>i.ClampToEdgeWrapping,Coloring:()=>i.Coloring,Cylinder:()=>b.Cylinder,DoubleSide:()=>i.DoubleSide,EventDispatcher:()=>o.EventDispatcher,FloatType:()=>i.FloatType,Fog:()=>w.Fog,FrontSide:()=>i.FrontSide,Geometry:()=>o.Geometry,GeometryGroup:()=>o.GeometryGroup,GeometryIDCount:()=>o.GeometryIDCount,ImposterMaterial:()=>l.ImposterMaterial,InstancedMaterial:()=>l.InstancedMaterial,Light:()=>o.Light,Line:()=>d.Line,LineBasicMaterial:()=>l.LineBasicMaterial,LineStyle:()=>d.LineStyle,LinearFilter:()=>i.LinearFilter,LinearMipMapLinearFilter:()=>i.LinearMipMapLinearFilter,Material:()=>l.Material,MaterialIdCount:()=>l.MaterialIdCount,Matrix3:()=>h.Matrix3,Matrix4:()=>h.Matrix4,Mesh:()=>d.Mesh,MeshDoubleLambertMaterial:()=>l.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>l.MeshLambertMaterial,MeshOutlineMaterial:()=>l.MeshOutlineMaterial,NearestFilter:()=>i.NearestFilter,Object3D:()=>o.Object3D,Object3DIDCount:()=>o.Object3DIDCount,Projector:()=>o.Projector,Quaternion:()=>h.Quaternion,R32Format:()=>i.R32Format,RFormat:()=>i.RFormat,RGBAFormat:()=>i.RGBAFormat,Ray:()=>h.Ray,Raycaster:()=>o.Raycaster,Renderer:()=>C.Renderer,Scene:()=>o.Scene,ShaderLib:()=>m.ShaderLib,ShaderUtils:()=>m.ShaderUtils,Shading:()=>i.Shading,Sphere:()=>b.Sphere,SphereImposterMaterial:()=>l.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>l.SphereImposterOutlineMaterial,Sprite:()=>d.Sprite,SpriteAlignment:()=>i.SpriteAlignment,SpriteMaterial:()=>l.SpriteMaterial,SpritePlugin:()=>R.SpritePlugin,StickImposterMaterial:()=>l.StickImposterMaterial,StickImposterOutlineMaterial:()=>l.StickImposterOutlineMaterial,Texture:()=>o.Texture,TextureIdCount:()=>o.TextureIdCount,TextureOperations:()=>i.TextureOperations,Triangle:()=>b.Triangle,UVMapping:()=>o.UVMapping,UnsignedByteType:()=>i.UnsignedByteType,Vector2:()=>h.Vector2,Vector3:()=>h.Vector3,VolumetricMaterial:()=>l.VolumetricMaterial,basic:()=>m.basic,clamp:()=>h.clamp,clone:()=>m.clone,conversionMatrix3:()=>h.conversionMatrix3,degToRad:()=>h.degToRad,instanced:()=>m.instanced,intersectObject:()=>o.intersectObject,lambert:()=>m.lambert,lambertdouble:()=>m.lambertdouble,outline:()=>m.outline,screen:()=>m.screen,screenaa:()=>m.screenaa,sphereimposter:()=>m.sphereimposter,sphereimposteroutline:()=>m.sphereimposteroutline,sprite:()=>m.sprite,stickimposter:()=>m.stickimposter,stickimposteroutline:()=>m.stickimposteroutline,volumetric:()=>m.volumetric});var i=n("./src/WebGL/constants/index.ts"),o=n("./src/WebGL/core/index.ts"),l=n("./src/WebGL/materials/index.ts"),h=n("./src/WebGL/math/index.ts"),d=n("./src/WebGL/objects/index.ts"),m=n("./src/WebGL/shaders/index.ts"),b=n("./src/WebGL/shapes/index.ts"),v=n("./src/WebGL/Camera.ts"),w=n("./src/WebGL/Fog.ts"),C=n("./src/WebGL/Renderer.ts"),R=n("./src/WebGL/SpritePlugin.ts")},"./src/WebGL/materials/ImposterMaterial.ts"(e,t,n){n.r(t),n.d(t,{ImposterMaterial:()=>m});var i=n("./src/WebGL/constants/Coloring.ts"),o=n("./src/WebGL/constants/Shading.ts"),l=n("./src/colors.ts"),h=n("./src/WebGL/math/index.ts"),d=n("./src/WebGL/materials/Material.ts");class m extends d.Material{constructor(v){super(),this.color=new l.Color(16777215),this.ambient=new l.Color(1048575),this.emissive=new l.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new h.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=o.Shading.SmoothShading,this.shaderID=null,this.vertexColors=i.Coloring.NoColors,this.skinning=!1,this.setValues(v)}clone(v=new m){return super.clone.call(this,v),v.color.copy(this.color),v.ambient.copy(this.ambient),v.emissive.copy(this.emissive),v.wrapAround=this.wrapAround,v.wrapRGB.copy(this.wrapRGB),v.map=this.map,v.lightMap=this.lightMap,v.specularMap=this.specularMap,v.envMap=this.envMap,v.combine=this.combine,v.reflectivity=this.reflectivity,v.refractionRatio=this.refractionRatio,v.fog=this.fog,v.shading=this.shading,v.shaderID=this.shaderID,v.vertexColors=this.vertexColors,v.skinning=this.skinning,v.morphTargets=this.morphTargets,v.morphNormals=this.morphNormals,v}}},"./src/WebGL/materials/InstancedMaterial.ts"(e,t,n){n.r(t),n.d(t,{InstancedMaterial:()=>m});var i=n("./src/WebGL/constants/Coloring.ts"),o=n("./src/WebGL/constants/Shading.ts"),l=n("./src/colors.ts"),h=n("./src/WebGL/math/index.ts"),d=n("./src/WebGL/materials/Material.ts");class m extends d.Material{constructor(v){super(),this.color=new l.Color(16777215),this.ambient=new l.Color(1048575),this.emissive=new l.Color(0),this.wrapAround=!1,this.wrapRGB=new h.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=o.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=i.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(v)}clone(v=new m){return super.clone.call(this,v),v.color.copy(this.color),v.ambient.copy(this.ambient),v.emissive.copy(this.emissive),v.wrapAround=this.wrapAround,v.wrapRGB.copy(this.wrapRGB),v.map=this.map,v.lightMap=this.lightMap,v.specularMap=this.specularMap,v.envMap=this.envMap,v.combine=this.combine,v.reflectivity=this.reflectivity,v.refractionRatio=this.refractionRatio,v.fog=this.fog,v.shading=this.shading,v.shaderID=this.shaderID,v.vertexColors=this.vertexColors,v.skinning=this.skinning,v.morphTargets=this.morphTargets,v.morphNormals=this.morphNormals,v.sphere=this.sphere,v}}},"./src/WebGL/materials/LineBasicMaterial.ts"(e,t,n){n.r(t),n.d(t,{LineBasicMaterial:()=>l});var i=n("./src/colors.ts"),o=n("./src/WebGL/materials/Material.ts");class l extends o.Material{constructor(d){super(),this.color=new i.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(d)}clone(d=new l){return super.clone.call(this,d),d.color.copy(this.color),d}}},"./src/WebGL/materials/Material.ts"(e,t,n){n.r(t),n.d(t,{Material:()=>d,MaterialIdCount:()=>m});var i=n("./src/WebGL/constants/Sides.ts"),o=n("./src/WebGL/core/index.ts"),l=n("./src/WebGL/math/index.ts"),h=n("./src/colors.ts");class d extends o.EventDispatcher{constructor(){super(...arguments),this.id=m++,this.name="",this.side=i.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(v={}){if(v!==void 0)for(var w in v){var C=v[w];if(C===void 0){console.warn("$3Dmol.Material: '"+w+"' parameter is undefined.");continue}if(w in this){var R=this[w];R instanceof h.Color&&C instanceof h.Color?R.copy(C):R instanceof h.Color?R.set(C):R instanceof l.Vector3&&C instanceof l.Vector3?R.copy(C):this[w]=C}}}clone(v=new d){return v.name=this.name,v.side=this.side,v.opacity=this.opacity,v.transparent=this.transparent,v.depthTest=this.depthTest,v.depthWrite=this.depthWrite,v.polygonOffset=this.polygonOffset,v.polygonOffsetFactor=this.polygonOffsetFactor,v.polygonOffsetUnits=this.polygonOffsetUnits,v.alphaTest=this.alphaTest,v.overdraw=this.overdraw,v.visible=this.visible,v}makeShaded(v){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:v},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let m=0},"./src/WebGL/materials/MeshDoubleLambertMaterial.ts"(e,t,n){n.r(t),n.d(t,{MeshDoubleLambertMaterial:()=>l});var i=n("./src/WebGL/constants/Sides.ts"),o=n("./src/WebGL/materials/MeshLambertMaterial.ts");class l extends o.MeshLambertMaterial{constructor(d){super(d),this.shaderID="lambertdouble",this.side=i.DoubleSide,this.outline=!1}clone(d=new l){return super.clone.call(this,d),d}}},"./src/WebGL/materials/MeshLambertMaterial.ts"(e,t,n){n.r(t),n.d(t,{MeshLambertMaterial:()=>m});var i=n("./src/WebGL/constants/Coloring.ts"),o=n("./src/WebGL/constants/Shading.ts"),l=n("./src/WebGL/materials/Material.ts"),h=n("./src/colors.ts"),d=n("./src/WebGL/math/index.ts");class m extends l.Material{constructor(v){super(),this.color=new h.Color(16777215),this.ambient=new h.Color(1048575),this.emissive=new h.Color(0),this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=o.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=i.Coloring.NoColors,this.skinning=!1,this.setValues(v)}clone(v=new m){return super.clone.call(this,v),v.color.copy(this.color),v.ambient.copy(this.ambient),v.emissive.copy(this.emissive),v.wrapAround=this.wrapAround,v.wrapRGB.copy(this.wrapRGB),v.map=this.map,v.lightMap=this.lightMap,v.specularMap=this.specularMap,v.envMap=this.envMap,v.combine=this.combine,v.reflectivity=this.reflectivity,v.refractionRatio=this.refractionRatio,v.fog=this.fog,v.shading=this.shading,v.shaderID=this.shaderID,v.vertexColors=this.vertexColors,v.skinning=this.skinning,v.morphTargets=this.morphTargets,v.morphNormals=this.morphNormals,v}}},"./src/WebGL/materials/MeshOutlineMaterial.ts"(e,t,n){n.r(t),n.d(t,{MeshOutlineMaterial:()=>l});var i=n("./src/colors.ts"),o=n("./src/WebGL/materials/Material.ts");class l extends o.Material{constructor(d){super(),d=d||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=i.CC.color(d.color||new i.Color(0,0,0)),this.outlineWidth=d.width||.1,this.outlinePushback=d.pushback||1,this.outlineMaxPixels=d.maxpixels||0}clone(d=new l){return super.clone.call(this,d),d.fog=this.fog,d.shaderID=this.shaderID,d.wireframe=this.wireframe,d.outlineColor=this.outlineColor,d.outlineWidth=this.outlineWidth,d.outlinePushback=this.outlinePushback,d.outlineMaxPixels=this.outlineMaxPixels,d}}},"./src/WebGL/materials/SphereImposterMaterial.ts"(e,t,n){n.r(t),n.d(t,{SphereImposterMaterial:()=>o});var i=n("./src/WebGL/materials/ImposterMaterial.ts");class o extends i.ImposterMaterial{constructor(h){super(h),this.shaderID="sphereimposter",this.setValues(h)}clone(h=new o){return super.clone.call(this,h),h}}},"./src/WebGL/materials/SphereImposterOutlineMaterial.ts"(e,t,n){n.r(t),n.d(t,{SphereImposterOutlineMaterial:()=>l});var i=n("./src/colors.ts"),o=n("./src/WebGL/materials/ImposterMaterial.ts");class l extends o.ImposterMaterial{constructor(d){super(d),d=d||{},this.shaderID="sphereimposteroutline",this.outlineColor=i.CC.color(d.color||new i.Color(0,0,0)),this.outlineWidth=d.width||.1,this.outlinePushback=d.pushback||1,this.outlineMaxPixels=d.maxpixels||0,this.setValues(d)}clone(d=new l){return super.clone.call(this,d),d.outlineColor=this.outlineColor,d.outlineWidth=this.outlineWidth,d.outlinePushback=this.outlinePushback,d.outlineMaxPixels=this.outlineMaxPixels,d}}},"./src/WebGL/materials/SpriteMaterial.ts"(e,t,n){n.r(t),n.d(t,{SpriteMaterial:()=>m});var i=n("./src/WebGL/constants/SpriteAlignment.ts"),o=n("./src/WebGL/core/Texture.ts"),l=n("./src/colors.ts"),h=n("./src/WebGL/math/index.ts"),d=n("./src/WebGL/materials/Material.ts");class m extends d.Material{constructor(v){super(),this.color=new l.Color(16777215),this.map=new o.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new h.Vector2(0,0),this.uvScale=new h.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=i.SpriteAlignment.center.clone(),this.setValues(v),v=v||{},v.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),v.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),v.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(v=new m){return super.clone.call(this,v),v.color.copy(this.color),v.map=this.map,v.useScreenCoordinates=this.useScreenCoordinates,v.screenOffset=this.screenOffset,v.sizeAttenuation=this.sizeAttenuation,v.scaleByViewport=this.scaleByViewPort,v.alignment.copy(this.alignment),v.uvOffset.copy(this.uvOffset),v}}},"./src/WebGL/materials/StickImposterMaterial.ts"(e,t,n){n.r(t),n.d(t,{StickImposterMaterial:()=>o});var i=n("./src/WebGL/materials/ImposterMaterial.ts");class o extends i.ImposterMaterial{constructor(h){super(h),this.shaderID="stickimposter",this.setValues(h)}clone(h=new o){return super.clone.call(this,h),h}}},"./src/WebGL/materials/StickImposterOutlineMaterial.ts"(e,t,n){n.r(t),n.d(t,{StickImposterOutlineMaterial:()=>l});var i=n("./src/colors.ts"),o=n("./src/WebGL/materials/ImposterMaterial.ts");class l extends o.ImposterMaterial{constructor(d={}){super(d),this.shaderID="stickimposteroutline",this.outlineColor=new i.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,d.color&&(this.outlineColor=i.CC.color(d.color)),d.width&&(this.outlineWidth=d.width),d.pushback&&(this.outlinePushback=d.pushback),d.maxpixels&&(this.outlineMaxPixels=d.maxpixels),this.setValues(d)}clone(d=new l){return super.clone.call(this,d),d.outlineColor=this.outlineColor,d.outlineWidth=this.outlineWidth,d.outlinePushback=this.outlinePushback,d.outlineMaxPixels=this.outlineMaxPixels,d}}},"./src/WebGL/materials/VolumetricMaterial.ts"(e,t,n){n.r(t),n.d(t,{VolumetricMaterial:()=>h});var i=n("./src/WebGL/constants/Sides.ts"),o=n("./src/colors.ts"),l=n("./src/WebGL/materials/Material.ts");class h extends l.Material{constructor(m){super(),this.transparent=!1,this.volumetric=!0,this.color=new o.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=i.FrontSide,this.setValues(m)}clone(m=new h){return super.clone.call(this,m),m.transparent=this.transparent,m.volumetric=this.volumetric,m.color=this.color,m.transferfn=this.transferfn,m.map=this.map,m.extent=this.extent,m.maxdepth=this.maxdepth,m.unit=this.unit,m.texmatrix=this.texmatrix,m.transfermin=this.transfermin,m.transfermax=this.transfermax,m.subsamples=this.subsamples,m.shaderID=this.shaderID,m.side=this.side,m}}},"./src/WebGL/materials/index.ts"(e,t,n){n.r(t),n.d(t,{ImposterMaterial:()=>i.ImposterMaterial,InstancedMaterial:()=>o.InstancedMaterial,LineBasicMaterial:()=>l.LineBasicMaterial,Material:()=>h.Material,MaterialIdCount:()=>h.MaterialIdCount,MeshDoubleLambertMaterial:()=>d.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>m.MeshLambertMaterial,MeshOutlineMaterial:()=>b.MeshOutlineMaterial,SphereImposterMaterial:()=>v.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>w.SphereImposterOutlineMaterial,SpriteMaterial:()=>C.SpriteMaterial,StickImposterMaterial:()=>R.StickImposterMaterial,StickImposterOutlineMaterial:()=>T.StickImposterOutlineMaterial,VolumetricMaterial:()=>E.VolumetricMaterial});var i=n("./src/WebGL/materials/ImposterMaterial.ts"),o=n("./src/WebGL/materials/InstancedMaterial.ts"),l=n("./src/WebGL/materials/LineBasicMaterial.ts"),h=n("./src/WebGL/materials/Material.ts"),d=n("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),m=n("./src/WebGL/materials/MeshLambertMaterial.ts"),b=n("./src/WebGL/materials/MeshOutlineMaterial.ts"),v=n("./src/WebGL/materials/SphereImposterMaterial.ts"),w=n("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),C=n("./src/WebGL/materials/SpriteMaterial.ts"),R=n("./src/WebGL/materials/StickImposterMaterial.ts"),T=n("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),E=n("./src/WebGL/materials/VolumetricMaterial.ts")},"./src/WebGL/math/Quaternion.ts"(e,t,n){n.r(t),n.d(t,{Quaternion:()=>i});class i{constructor(l,h,d,m){this.x=l||0,this.y=h||0,this.z=d||0,this.w=m!==void 0?m:1}set(l,h,d,m){return this.x=l,this.y=h,this.z=d,this.w=m,this}copy(l){return this.x=l.x,this.y=l.y,this.z=l.z,this.w=l.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let l=this.length();return l===0?(this.x=0,this.y=0,this.z=0,this.w=1):(l=1/l,this.x*=l,this.y*=l,this.z*=l,this.w*=l),this}multiply(l){return this.multiplyQuaternions(this,l)}multiplyScalar(l){return this.x*=l,this.y*=l,this.z*=l,this.w*=l,this}multiplyQuaternions(l,h){const d=l.x,m=l.y,b=l.z,v=l.w,w=h.x,C=h.y,R=h.z,T=h.w;return this.x=d*T+v*w+m*R-b*C,this.y=m*T+v*C+b*w-d*R,this.z=b*T+v*R+d*C-m*w,this.w=v*T-d*w-m*C-b*R,this}sub(l){return this.x-=l.x,this.y-=l.y,this.z-=l.z,this.w-=l.w,this}clone(){return new i(this.x,this.y,this.z,this.w)}setFromEuler(l){const h=Math.cos(l.x/2),d=Math.cos(l.y/2),m=Math.cos(l.z/2),b=Math.sin(l.x/2),v=Math.sin(l.y/2),w=Math.sin(l.z/2);return this.x=b*d*m+h*v*w,this.y=h*v*m-b*d*w,this.z=h*d*w+b*v*m,this.w=h*d*m-b*v*w,this}}},"./src/WebGL/math/Vector2.ts"(e,t,n){n.r(t),n.d(t,{Vector2:()=>i});class i{constructor(l,h){this.x=l||0,this.y=h||0}set(l,h){return this.x=l,this.y=h,this}subVectors(l,h){return this.x=l.x-h.x,this.y=l.y-h.y,this}copy(l){return this.x=l.x,this.y=l.y,this}clone(){return new i(this.x,this.y)}}},"./src/WebGL/math/index.ts"(e,t,n){n.r(t),n.d(t,{Matrix3:()=>m.Matrix3,Matrix4:()=>m.Matrix4,Quaternion:()=>i.Quaternion,Ray:()=>m.Ray,Vector2:()=>o.Vector2,Vector3:()=>m.Vector3,clamp:()=>l.clamp,conversionMatrix3:()=>h.conversionMatrix3,degToRad:()=>d.degToRad});var i=n("./src/WebGL/math/Quaternion.ts"),o=n("./src/WebGL/math/Vector2.ts"),l=n("./src/WebGL/math/utils/clamp.ts"),h=n("./src/WebGL/math/utils/conversionMatrix3.ts"),d=n("./src/WebGL/math/utils/degToRad.ts"),m=n("./src/WebGL/math/math.ts")},"./src/WebGL/math/math.ts"(e,t,n){n.r(t),n.d(t,{Matrix3:()=>C,Matrix4:()=>v,Ray:()=>R,Vector3:()=>w});var i=n("./src/WebGL/math/utils/degToRad.ts"),o=n("./src/WebGL/math/utils/clamp.ts"),l,h,d,m,b;class v{constructor(E=1,f=0,g=0,S=0,O=0,D=1,M=0,_=0,A=0,j=0,L=1,$=0,F=0,W=0,U=0,q=1){typeof E<"u"&&typeof E!="number"?this.elements=new Float32Array(E):(this.elements=new Float32Array(16),this.elements[0]=E,this.elements[4]=f,this.elements[8]=g,this.elements[12]=S,this.elements[1]=O,this.elements[5]=D,this.elements[9]=M,this.elements[13]=_,this.elements[2]=A,this.elements[6]=j,this.elements[10]=L,this.elements[14]=$,this.elements[3]=F,this.elements[7]=W,this.elements[11]=U,this.elements[15]=q)}makeScale(E,f,g){throw new Error("Method not implemented.")}set(E,f,g,S,O,D,M,_,A,j,L,$,F,W,U,q){const H=this.elements;return H[0]=E,H[4]=f,H[8]=g,H[12]=S,H[1]=O,H[5]=D,H[9]=M,H[13]=_,H[2]=A,H[6]=j,H[10]=L,H[14]=$,H[3]=F,H[7]=W,H[11]=U,H[15]=q,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(E){const f=E.elements;return this.set(f[0],f[4],f[8],f[12],f[1],f[5],f[9],f[13],f[2],f[6],f[10],f[14],f[3],f[7],f[11],f[15]),this}matrix3FromTopLeft(){const E=this.elements;return new C(E[0],E[4],E[8],E[1],E[5],E[9],E[2],E[6],E[10])}setRotationFromEuler(E,f){const g=this.elements,{x:S,y:O,z:D}=E,M=Math.cos(S),_=Math.sin(S),A=Math.cos(O),j=Math.sin(O),L=Math.cos(D),$=Math.sin(D);if(f===void 0||f==="XYZ"){const F=M*L,W=M*$,U=_*L,q=_*$;g[0]=A*L,g[4]=-A*$,g[8]=j,g[1]=W+U*j,g[5]=F-q*j,g[9]=-_*A,g[2]=q-F*j,g[6]=U+W*j,g[10]=M*A}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${f}`);return this}setRotationFromQuaternion(E){const f=this.elements,{x:g,y:S,z:O,w:D}=E,M=g+g,_=S+S,A=O+O,j=g*M,L=g*_,$=g*A,F=S*_,W=S*A,U=O*A,q=D*M,H=D*_,Y=D*A;return f[0]=1-(F+U),f[4]=L-Y,f[8]=$+H,f[1]=L+Y,f[5]=1-(j+U),f[9]=W-q,f[2]=$-H,f[6]=W+q,f[10]=1-(j+F),this}multiplyMatrices(E,f){const g=E.elements,S=f.elements,O=this.elements,D=g[0],M=g[4],_=g[8],A=g[12],j=g[1],L=g[5],$=g[9],F=g[13],W=g[2],U=g[6],q=g[10],H=g[14],Y=g[3],Z=g[7],X=g[11],J=g[15],Q=S[0],G=S[4],te=S[8],ue=S[12],de=S[1],xe=S[5],ve=S[9],Se=S[13],Ee=S[2],he=S[6],Re=S[10],je=S[14],Ce=S[3],Le=S[7],me=S[11],Ie=S[15];return O[0]=D*Q+M*de+_*Ee+A*Ce,O[4]=D*G+M*xe+_*he+A*Le,O[8]=D*te+M*ve+_*Re+A*me,O[12]=D*ue+M*Se+_*je+A*Ie,O[1]=j*Q+L*de+$*Ee+F*Ce,O[5]=j*G+L*xe+$*he+F*Le,O[9]=j*te+L*ve+$*Re+F*me,O[13]=j*ue+L*Se+$*je+F*Ie,O[2]=W*Q+U*de+q*Ee+H*Ce,O[6]=W*G+U*xe+q*he+H*Le,O[10]=W*te+U*ve+q*Re+H*me,O[14]=W*ue+U*Se+q*je+H*Ie,O[3]=Y*Q+Z*de+X*Ee+J*Ce,O[7]=Y*G+Z*xe+X*he+J*Le,O[11]=Y*te+Z*ve+X*Re+J*me,O[15]=Y*ue+Z*Se+X*je+J*Ie,this}multiplyScalar(E){const f=this.elements;return f[0]*=E,f[4]*=E,f[8]*=E,f[12]*=E,f[1]*=E,f[5]*=E,f[9]*=E,f[13]*=E,f[2]*=E,f[6]*=E,f[10]*=E,f[14]*=E,f[3]*=E,f[7]*=E,f[11]*=E,f[15]*=E,this}makeTranslation(E,f,g){return this.set(1,0,0,E,0,1,0,f,0,0,1,g,0,0,0,1),this}snap(E){const f=Math.pow(10,4),g=this.elements;for(let S=0;S<16;S++){const O=Math.round(g[S]);O===Math.round(g[S]*f)/f&&(g[S]=O)}return this}transpose(){const E=this.elements;let f;return f=E[1],E[1]=E[4],E[4]=f,f=E[2],E[2]=E[8],E[8]=f,f=E[6],E[6]=E[9],E[9]=f,f=E[3],E[3]=E[12],E[12]=f,f=E[7],E[7]=E[13],E[13]=f,f=E[11],E[11]=E[14],E[14]=f,this}setPosition(E){const f=this.elements;return f[12]=E.x,f[13]=E.y,f[14]=E.z,this}translate(E){const f=this.elements;return f[12]+=E.x,f[13]+=E.y,f[14]+=E.z,this}getInverse(E,f){const g=this.elements,S=E.elements,O=S[0],D=S[4],M=S[8],_=S[12],A=S[1],j=S[5],L=S[9],$=S[13],F=S[2],W=S[6],U=S[10],q=S[14],H=S[3],Y=S[7],Z=S[11],X=S[15];g[0]=L*q*Y-$*U*Y+$*W*Z-j*q*Z-L*W*X+j*U*X,g[4]=_*U*Y-M*q*Y-_*W*Z+D*q*Z+M*W*X-D*U*X,g[8]=M*$*Y-_*L*Y+_*j*Z-D*$*Z-M*j*X+D*L*X,g[12]=_*L*W-M*$*W-_*j*U+D*$*U+M*j*q-D*L*q,g[1]=$*U*H-L*q*H-$*F*Z+A*q*Z+L*F*X-A*U*X,g[5]=M*q*H-_*U*H+_*F*Z-O*q*Z-M*F*X+O*U*X,g[9]=_*L*H-M*$*H-_*A*Z+O*$*Z+M*A*X-O*L*X,g[13]=M*$*F-_*L*F+_*A*U-O*$*U-M*A*q+O*L*q,g[2]=j*q*H-$*W*H+$*F*Y-A*q*Y-j*F*X+A*W*X,g[6]=_*W*H-D*q*H-_*F*Y+O*q*Y+D*F*X-O*W*X,g[10]=D*$*H-_*j*H+_*A*Y-O*$*Y-D*A*X+O*j*X,g[14]=_*j*F-D*$*F-_*A*W+O*$*W+D*A*q-O*j*q,g[3]=L*W*H-j*U*H-L*F*Y+A*U*Y+j*F*Z-A*W*Z,g[7]=D*U*H-M*W*H+M*F*Y-O*U*Y-D*F*Z+O*W*Z,g[11]=M*j*H-D*L*H-M*A*Y+O*L*Y+D*A*Z-O*j*Z,g[15]=D*L*F-M*j*F+M*A*W-O*L*W-D*A*U+O*j*U;const J=O*g[0]+A*g[4]+F*g[8]+H*g[12];if(J===0){const Q="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(f)throw new Error(Q);return console.warn(Q),this.identity(),this}return this.multiplyScalar(1/J),this}isReflected(){const E=this.elements,f=E[0],g=E[4],S=E[8],O=E[1],D=E[5],M=E[9],_=E[2],A=E[6],j=E[10];return f*D*j+O*A*S+_*g*M-_*D*S-O*g*j-f*A*M<0}scale(E){const f=this.elements,{x:g}=E,{y:S}=E,{z:O}=E;return f[0]*=g,f[4]*=S,f[8]*=O,f[1]*=g,f[5]*=S,f[9]*=O,f[2]*=g,f[6]*=S,f[10]*=O,f[3]*=g,f[7]*=S,f[11]*=O,this}getMaxScaleOnAxis(){const E=this.elements,f=E[0]*E[0]+E[1]*E[1]+E[2]*E[2],g=E[4]*E[4]+E[5]*E[5]+E[6]*E[6],S=E[8]*E[8]+E[9]*E[9]+E[10]*E[10];return Math.sqrt(Math.max(f,Math.max(g,S)))}makeFrustum(E,f,g,S,O,D){const M=this.elements,_=2*O/(f-E),A=2*O/(S-g),j=(f+E)/(f-E),L=(S+g)/(S-g),$=-(D+O)/(D-O),F=-2*D*O/(D-O);return M[0]=_,M[4]=0,M[8]=j,M[12]=0,M[1]=0,M[5]=A,M[9]=L,M[13]=0,M[2]=0,M[6]=0,M[10]=$,M[14]=F,M[3]=0,M[7]=0,M[11]=-1,M[15]=0,this}makePerspective(E,f,g,S){const O=g*Math.tan((0,i.degToRad)(E*.5)),D=-O,M=D*f,_=O*f;return this.makeFrustum(M,_,D,O,g,S)}makeOrthographic(E,f,g,S,O,D){const M=this.elements,_=1/(f-E),A=1/(g-S),j=1/(D-O),L=(f+E)*_,$=(g+S)*A,F=(D+O)*j;return M[0]=2*_,M[4]=0,M[8]=0,M[12]=-L,M[1]=0,M[5]=2*A,M[9]=0,M[13]=-$,M[2]=0,M[6]=0,M[10]=-2*j,M[14]=-F,M[3]=0,M[7]=0,M[11]=0,M[15]=1,this}isEqual(E){const f=E.elements,g=this.elements;return g[0]===f[0]&&g[4]===f[4]&&g[8]===f[8]&&g[12]===f[12]&&g[1]===f[1]&&g[5]===f[5]&&g[9]===f[9]&&g[13]===f[13]&&g[2]===f[2]&&g[6]===f[6]&&g[10]===f[10]&&g[14]===f[14]&&g[3]===f[3]&&g[7]===f[7]&&g[11]===f[11]&&g[15]===f[15]}clone(){const E=this.elements;return new v(E[0],E[4],E[8],E[12],E[1],E[5],E[9],E[13],E[2],E[6],E[10],E[14],E[3],E[7],E[11],E[15])}isIdentity(){const E=this.elements;return E[0]===1&&E[4]===0&&E[8]===0&&E[12]===0&&E[1]===0&&E[5]===1&&E[9]===0&&E[13]===0&&E[2]===0&&E[6]===0&&E[10]===1&&E[14]===0&&E[3]===0&&E[7]===0&&E[11]===0&&E[15]===1}isNearlyIdentity(E){return this.clone().snap(E).isIdentity()}getScale(E){const f=this.elements;return E=E||new w,d.set(f[0],f[1],f[2]),m.set(f[4],f[5],f[6]),b.set(f[8],f[9],f[10]),E.x=d.length(),E.y=m.length(),E.z=b.length(),E}lookAt(E,f,g){const S=this.elements;return b.subVectors(E,f).normalize(),b.length()===0&&(b.z=1),d.crossVectors(g,b).normalize(),d.length()===0&&(b.x+=1e-4,d.crossVectors(g,b).normalize()),m.crossVectors(b,d),S[0]=d.x,S[4]=m.x,S[8]=b.x,S[1]=d.y,S[5]=m.y,S[9]=b.y,S[2]=d.z,S[6]=m.z,S[10]=b.z,this}compose(E,f,g){const S=this.elements;return l.identity(),l.setRotationFromQuaternion(f),h.makeScale(g.x,g.y,g.z),this.multiplyMatrices(l,h),S[12]=E.x,S[13]=E.y,S[14]=E.z,this}}l=new v,h=new v;class w{constructor(E,f,g){this.x=E||0,this.y=f||0,this.z=g||0,this.atomid=void 0}set(E,f,g){return this.x=E,this.y=f,this.z=g,this}copy(E){return this.x=E.x,this.y=E.y,this.z=E.z,this}add(E){return this.x+=E.x,this.y+=E.y,this.z+=E.z,this}addVectors(E,f){return this.x=E.x+f.x,this.y=E.y+f.y,this.z=E.z+f.z,this}multiplyVectors(E,f){return this.x=E.x*f.x,this.y=E.y*f.y,this.z=E.z*f.z,this}sub(E){return this.x-=E.x,this.y-=E.y,this.z-=E.z,this}subVectors(E,f){return this.x=E.x-f.x,this.y=E.y-f.y,this.z=E.z-f.z,this}multiplyScalar(E){return this.x*=E,this.y*=E,this.z*=E,this}divideScalar(E){return E!==0?(this.x/=E,this.y/=E,this.z/=E):(this.x=0,this.y=0,this.z=0),this}max(E){return this.x=Math.max(this.x,E.x),this.y=Math.max(this.y,E.y),this.z=Math.max(this.z,E.z),this}min(E){return this.x=Math.min(this.x,E.x),this.y=Math.min(this.y,E.y),this.z=Math.min(this.z,E.z),this}distanceTo(E){return Math.sqrt(this.distanceToSquared(E))}distanceToSquared(E){const f=this.x-E.x,g=this.y-E.y,S=this.z-E.z;return f*f+g*g+S*S}applyMatrix3(E){const{x:f}=this,{y:g}=this,{z:S}=this,O=E.elements;return this.x=O[0]*f+O[3]*g+O[6]*S,this.y=O[1]*f+O[4]*g+O[7]*S,this.z=O[2]*f+O[5]*g+O[8]*S,this}applyMatrix4(E){const{x:f}=this,{y:g}=this,{z:S}=this,O=E.elements;return this.x=O[0]*f+O[4]*g+O[8]*S+O[12],this.y=O[1]*f+O[5]*g+O[9]*S+O[13],this.z=O[2]*f+O[6]*g+O[10]*S+O[14],this}applyProjection(E){const{x:f}=this,{y:g}=this,{z:S}=this,O=E.elements,D=O[3]*f+O[7]*g+O[11]*S+O[15];return this.x=(O[0]*f+O[4]*g+O[8]*S+O[12])/D,this.y=(O[1]*f+O[5]*g+O[9]*S+O[13])/D,this.z=(O[2]*f+O[6]*g+O[10]*S+O[14])/D,this}applyQuaternion(E){const{x:f}=this,{y:g}=this,{z:S}=this,O=E.x,D=E.y,M=E.z,_=E.w,A={};A.x=2*(g*M-S*D),A.y=2*(S*O-f*M),A.z=2*(f*D-g*O);const j={};return j.x=A.y*M-A.z*D,j.y=A.z*O-A.x*M,j.z=A.x*D-A.y*O,this.x=f+_*A.x+j.x,this.y=g+_*A.y+j.y,this.z=S+_*A.z+j.z,this}negate(){return this.multiplyScalar(-1)}dot(E){return this.x*E.x+this.y*E.y+this.z*E.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(E){const{x:f}=this,{y:g}=this,{z:S}=this;return this.x=g*E.z-S*E.y,this.y=S*E.x-f*E.z,this.z=f*E.y-g*E.x,this}crossVectors(E,f){return this.x=E.y*f.z-E.z*f.y,this.y=E.z*f.x-E.x*f.z,this.z=E.x*f.y-E.y*f.x,this}equals(E){return this.x==E.x&&this.y==E.y&&this.z==E.z}getPositionFromMatrix(E){return this.x=E.elements[12],this.y=E.elements[13],this.z=E.elements[14],this}setEulerFromRotationMatrix(E,f){const g=E.elements,S=g[0],O=g[4],D=g[8],M=g[5],_=g[9],A=g[6],j=g[10];return f===void 0||f==="XYZ"?(this.y=Math.asin((0,o.clamp)(D,-1,1)),Math.abs(D)<.99999?(this.x=Math.atan2(-_,j),this.z=Math.atan2(-O,S)):(this.x=Math.atan2(A,M),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${f}`),this}rotateAboutVector(E,f){E.normalize();const g=Math.cos(f),S=Math.sin(f),O=this.clone().multiplyScalar(g),D=E.clone().cross(this).multiplyScalar(S),M=E.clone().multiplyScalar(E.clone().dot(this)).multiplyScalar(1-g),_=O.add(D).add(M);return this.x=_.x,this.y=_.y,this.z=_.z,this}setFromMatrixPosition(E){const f=E.elements;return this.x=f[12],this.y=f[13],this.z=f[14],this}transformDirection(E){const{x:f}=this,{y:g}=this,{z:S}=this,O=E.elements;return this.x=O[0]*f+O[4]*g+O[8]*S,this.y=O[1]*f+O[5]*g+O[9]*S,this.z=O[2]*f+O[6]*g+O[10]*S,this.normalize()}clone(){return new w(this.x,this.y,this.z)}unproject(E){const f=l;return f.multiplyMatrices(E.matrixWorld,f.getInverse(E.projectionMatrix)),this.applyMatrix4(f)}}d=new w,m=new w,b=new w;class C{constructor(E=1,f=0,g=0,S=0,O=1,D=0,M=0,_=0,A=1){this.elements=new Float32Array(9),this.set(E,f,g,S,O,D,M,_,A)}set(E,f,g,S,O,D,M,_,A){const j=this.elements;return j[0]=E,j[3]=f,j[6]=g,j[1]=S,j[4]=O,j[7]=D,j[2]=M,j[5]=_,j[8]=A,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(E){const f=E.elements;this.set(f[0],f[3],f[6],f[1],f[4],f[7],f[2],f[5],f[8])}multiplyScalar(E){const f=this.elements;return f[0]*=E,f[3]*=E,f[6]*=E,f[1]*=E,f[4]*=E,f[7]*=E,f[2]*=E,f[5]*=E,f[8]*=E,this}getInverse3(E){const f=E.elements,g=this.elements;g[0]=f[4]*f[8]-f[5]*f[7],g[3]=f[6]*f[5]-f[3]*f[8],g[6]=f[3]*f[7]-f[6]*f[4],g[1]=f[7]*f[2]-f[1]*f[8],g[4]=f[0]*f[8]-f[6]*f[2],g[7]=f[1]*f[6]-f[0]*f[7],g[2]=f[1]*f[5]-f[2]*f[4],g[5]=f[2]*f[3]-f[0]*f[5],g[8]=f[0]*f[4]-f[1]*f[3];const S=f[0]*g[0]+f[3]*g[1]+f[6]*g[2];return this.multiplyScalar(1/S),this}getInverse(E,f){const g=E.elements,S=this.elements;S[0]=g[10]*g[5]-g[6]*g[9],S[1]=-g[10]*g[1]+g[2]*g[9],S[2]=g[6]*g[1]-g[2]*g[5],S[3]=-g[10]*g[4]+g[6]*g[8],S[4]=g[10]*g[0]-g[2]*g[8],S[5]=-g[6]*g[0]+g[2]*g[4],S[6]=g[9]*g[4]-g[5]*g[8],S[7]=-g[9]*g[0]+g[1]*g[8],S[8]=g[5]*g[0]-g[1]*g[4];const O=g[0]*S[0]+g[1]*S[3]+g[2]*S[6];if(O===0){const D="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(f)throw new Error(D);return console.warn(D),this.identity(),this}return this.multiplyScalar(1/O),this}getDeterminant(){const E=this.elements;return E[0]*E[4]*E[8]+E[1]*E[5]*E[6]+E[2]*E[3]*E[7]-E[2]*E[4]*E[6]-E[1]*E[3]*E[8]-E[0]*E[5]*E[7]}transpose(){let E;const f=this.elements;return E=f[1],f[1]=f[3],f[3]=E,E=f[2],f[2]=f[6],f[6]=E,E=f[5],f[5]=f[7],f[7]=E,this}clone(){const E=this.elements;return new C(E[0],E[3],E[6],E[1],E[4],E[7],E[2],E[5],E[8])}getMatrix4(){const E=this.elements;return new v(E[0],E[3],E[6],0,E[1],E[4],E[7],0,E[2],E[5],E[8],0)}}class R{constructor(E,f){this.origin=E!==void 0?E:new w,this.direction=f!==void 0?f:new w}set(E,f){return this.origin.copy(E),this.direction.copy(f),this}copy(E){return this.origin.copy(E.origin),this.direction.copy(E.direction),this}at(E,f){return(f||new w).copy(this.direction).multiplyScalar(E).add(this.origin)}recast(E){const f=d;return this.origin.copy(this.at(E,f)),this}closestPointToPoint(E,f){const g=f||new w;g.subVectors(E,this.origin);const S=g.dot(this.direction);return g.copy(this.direction).multiplyScalar(S).add(this.origin)}distanceToPoint(E){const f=d,g=f.subVectors(E,this.origin).dot(this.direction);return f.copy(this.direction).multiplyScalar(g).add(this.origin),f.distanceTo(E)}isIntersectionCylinder(){}isIntersectionSphere(E){return this.distanceToPoint(E.center)<=E.radius}isIntersectionPlane(E){return E.normal.dot(this.direction)!==0||E.distanceToPoint(this.origin)===0}distanceToPlane(E){const f=E.normal.dot(this.direction);return f===0?E.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(E.normal)+E.constant)/f}intersectPlane(E,f){const g=this.distanceToPlane(E);if(g!==void 0)return this.at(g,f)}applyMatrix4(E){return this.direction.add(this.origin).applyMatrix4(E),this.origin.applyMatrix4(E),this.direction.sub(this.origin),this}clone(){return new R().copy(this)}}},"./src/WebGL/math/utils/clamp.ts"(e,t,n){n.r(t),n.d(t,{clamp:()=>i});function i(o,l,h){return Math.min(Math.max(o,l),h)}},"./src/WebGL/math/utils/conversionMatrix3.ts"(e,t,n){n.r(t),n.d(t,{conversionMatrix3:()=>o});var i=n("./src/WebGL/math/math.ts");function o(l,h,d,m,b,v){m=m*Math.PI/180,b=b*Math.PI/180,v=v*Math.PI/180;const w=g=>g*g,C=Math.cos(m),R=Math.cos(b),T=Math.cos(v),E=Math.sin(v);return new i.Matrix3(l,h*T,d*R,0,h*E,d*(C-R*T)/E,0,0,d*Math.sqrt(1-w(C)-w(R)-w(T)+2*C*R*T)/E)}},"./src/WebGL/math/utils/degToRad.ts"(e,t,n){n.r(t),n.d(t,{degToRad:()=>o});const i=Math.PI/180;function o(l){return l*i}},"./src/WebGL/objects/Line.ts"(e,t,n){n.r(t),n.d(t,{Line:()=>h,LineStyle:()=>l});var i=n("./src/WebGL/materials/index.ts"),o=n("./src/WebGL/core/index.ts"),l;(function(d){d[d.LineStrip=0]="LineStrip",d[d.LinePieces=1]="LinePieces"})(l||(l={}));class h extends o.Object3D{constructor(m,b=new i.LineBasicMaterial({color:Math.random()*16777215}),v=l.LineStrip){super(),this.geometry=m,this.material=b,this.type=v}clone(m=new h(this.geometry,this.material,this.type)){return super.clone.call(this,m),m}}},"./src/WebGL/objects/Mesh.ts"(e,t,n){n.r(t),n.d(t,{Mesh:()=>o});var i=n("./src/WebGL/core/index.ts");class o extends i.Object3D{constructor(h,d){super(),this.geometry=h,this.material=d}clone(h){return h===void 0&&(h=new o(this.geometry,this.material)),super.clone.call(this,h),h}}},"./src/WebGL/objects/Sprite.ts"(e,t,n){n.r(t),n.d(t,{Sprite:()=>l});var i=n("./src/WebGL/materials/index.ts"),o=n("./src/WebGL/core/index.ts");class l extends o.Object3D{constructor(d=new i.SpriteMaterial){super(),this.material=d,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(d=new l(this.material)){return o.Object3D.prototype.clone.call(this,d),d}}},"./src/WebGL/objects/index.ts"(e,t,n){n.r(t),n.d(t,{Line:()=>i.Line,LineStyle:()=>i.LineStyle,Mesh:()=>o.Mesh,Sprite:()=>l.Sprite});var i=n("./src/WebGL/objects/Line.ts"),o=n("./src/WebGL/objects/Mesh.ts"),l=n("./src/WebGL/objects/Sprite.ts")},"./src/WebGL/shaders/ShaderType.ts"(e,t,n){n.r(t)},"./src/WebGL/shaders/index.ts"(e,t,n){n.r(t),n.d(t,{ShaderLib:()=>i.ShaderLib,ShaderUtils:()=>o.ShaderUtils,basic:()=>i.basic,clone:()=>o.clone,instanced:()=>i.instanced,lambert:()=>i.lambert,lambertdouble:()=>i.lambertdouble,outline:()=>i.outline,screen:()=>i.screen,screenaa:()=>i.screenaa,sphereimposter:()=>i.sphereimposter,sphereimposteroutline:()=>i.sphereimposteroutline,sprite:()=>i.sprite,stickimposter:()=>i.stickimposter,stickimposteroutline:()=>i.stickimposteroutline,volumetric:()=>i.volumetric});var i=n("./src/WebGL/shaders/lib/index.ts"),o=n("./src/WebGL/shaders/utils/index.ts");n("./src/WebGL/shaders/ShaderType.ts")},"./src/WebGL/shaders/lib/basic/basic.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`},"./src/WebGL/shaders/lib/basic/basic.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`},"./src/WebGL/shaders/lib/basic/index.ts"(e,t,n){n.r(t),n.d(t,{basic:()=>h});var i=n("./src/WebGL/shaders/lib/basic/uniforms.ts"),o=n("./src/WebGL/shaders/lib/basic/basic.frag"),l=n("./src/WebGL/shaders/lib/basic/basic.vert");const h={vertexShader:l.default.replace("#define GLSLIFY 1",""),fragmentShader:o.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/basic/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},"./src/WebGL/shaders/lib/blur/blur.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`},"./src/WebGL/shaders/lib/blur/blur.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/blur/index.ts"(e,t,n){n.r(t),n.d(t,{blur:()=>h});var i=n("./src/WebGL/shaders/lib/blur/uniforms.ts"),o=n("./src/WebGL/shaders/lib/blur/blur.frag"),l=n("./src/WebGL/shaders/lib/blur/blur.vert");const h={fragmentShader:o.default,vertexShader:l.default,uniforms:i.uniforms}},"./src/WebGL/shaders/lib/blur/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>i});const i={}},"./src/WebGL/shaders/lib/index.ts"(e,t,n){n.r(t),n.d(t,{ShaderLib:()=>S,basic:()=>i.basic,instanced:()=>o.instanced,lambert:()=>l.lambert,lambertdouble:()=>h.lambertdouble,outline:()=>d.outline,screen:()=>m.screen,screenaa:()=>b.screenaa,sphereimposter:()=>v.sphereimposter,sphereimposteroutline:()=>w.sphereimposteroutline,sprite:()=>C.sprite,stickimposter:()=>R.stickimposter,stickimposteroutline:()=>T.stickimposteroutline,volumetric:()=>E.volumetric});var i=n("./src/WebGL/shaders/lib/basic/index.ts"),o=n("./src/WebGL/shaders/lib/instanced/index.ts"),l=n("./src/WebGL/shaders/lib/lambert/index.ts"),h=n("./src/WebGL/shaders/lib/lambertdouble/index.ts"),d=n("./src/WebGL/shaders/lib/outline/index.ts"),m=n("./src/WebGL/shaders/lib/screen/index.ts"),b=n("./src/WebGL/shaders/lib/screenaa/index.ts"),v=n("./src/WebGL/shaders/lib/sphereimposter/index.ts"),w=n("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),C=n("./src/WebGL/shaders/lib/sprite/index.ts"),R=n("./src/WebGL/shaders/lib/stickimposter/index.ts"),T=n("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),E=n("./src/WebGL/shaders/lib/volumetric/index.ts"),f=n("./src/WebGL/shaders/lib/ssao/index.ts"),g=n("./src/WebGL/shaders/lib/blur/index.ts");const S={basic:i.basic,blur:g.blur,instanced:o.instanced,lambert:l.lambert,lambertdouble:h.lambertdouble,outline:d.outline,screen:m.screen,screenaa:b.screenaa,ssao:f.ssao,sphereimposter:v.sphereimposter,sphereimposteroutline:w.sphereimposteroutline,sprite:C.sprite,stickimposter:R.stickimposter,stickimposteroutline:T.stickimposteroutline,volumetric:E.volumetric}},"./src/WebGL/shaders/lib/instanced/index.ts"(e,t,n){n.r(t),n.d(t,{instanced:()=>h});var i=n("./src/WebGL/shaders/lib/instanced/uniforms.ts"),o=n("./src/WebGL/shaders/lib/instanced/instanced.frag"),l=n("./src/WebGL/shaders/lib/instanced/instanced.vert");const h={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:l.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/instanced/instanced.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/instanced/instanced.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/instanced/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambert/index.ts"(e,t,n){n.r(t),n.d(t,{lambert:()=>h});var i=n("./src/WebGL/shaders/lib/lambert/uniforms.ts"),o=n("./src/WebGL/shaders/lib/lambert/lambert.frag"),l=n("./src/WebGL/shaders/lib/lambert/lambert.vert");const h={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:l.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/lambert/lambert.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`},"./src/WebGL/shaders/lib/lambert/lambert.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`},"./src/WebGL/shaders/lib/lambert/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambertdouble/index.ts"(e,t,n){n.r(t),n.d(t,{lambertdouble:()=>h});var i=n("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),o=n("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),l=n("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const h={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:l.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/outline/index.ts"(e,t,n){n.r(t),n.d(t,{outline:()=>h});var i=n("./src/WebGL/shaders/lib/outline/uniforms.ts"),o=n("./src/WebGL/shaders/lib/outline/outline.frag"),l=n("./src/WebGL/shaders/lib/outline/outline.vert");const h={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:l.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/outline/outline.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`},"./src/WebGL/shaders/lib/outline/outline.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`},"./src/WebGL/shaders/lib/outline/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new i.Color(0,0,0)},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/screen/index.ts"(e,t,n){n.r(t),n.d(t,{screen:()=>h});var i=n("./src/WebGL/shaders/lib/screen/uniforms.ts"),o=n("./src/WebGL/shaders/lib/screen/screen.frag"),l=n("./src/WebGL/shaders/lib/screen/screen.vert");const h={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:l.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/screen/screen.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `},"./src/WebGL/shaders/lib/screen/screen.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/screen/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>i});const i={}},"./src/WebGL/shaders/lib/screenaa/index.ts"(e,t,n){n.r(t),n.d(t,{screenaa:()=>h});var i=n("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),o=n("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),l=n("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const h={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:l.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/screenaa/screenaa.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`},"./src/WebGL/shaders/lib/screenaa/screenaa.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/screenaa/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>i});const i={}},"./src/WebGL/shaders/lib/sphereimposter/index.ts"(e,t,n){n.r(t),n.d(t,{sphereimposter:()=>h});var i=n("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),o=n("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),l=n("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const h={vertexShader:l.default.replace("#define GLSLIFY 1",""),fragmentShader:o.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`},"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"(e,t,n){n.r(t),n.d(t,{sphereimposteroutline:()=>h});var i=n("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),o=n("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),l=n("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const h={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:l.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`},"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new i.Color(0,0,0)},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/sprite/index.ts"(e,t,n){n.r(t),n.d(t,{sprite:()=>h});var i=n("./src/WebGL/shaders/lib/sprite/uniforms.ts"),o=n("./src/WebGL/shaders/lib/sprite/sprite.frag"),l=n("./src/WebGL/shaders/lib/sprite/sprite.vert");const h={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:l.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/sprite/sprite.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`},"./src/WebGL/shaders/lib/sprite/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>i});const i={}},"./src/WebGL/shaders/lib/ssao/index.ts"(e,t,n){n.r(t),n.d(t,{ssao:()=>h});var i=n("./src/WebGL/shaders/lib/ssao/uniforms.ts"),o=n("./src/WebGL/shaders/lib/ssao/ssao.frag"),l=n("./src/WebGL/shaders/lib/ssao/ssao.vert");const h={fragmentShader:o.default,vertexShader:l.default,uniforms:i.uniforms}},"./src/WebGL/shaders/lib/ssao/ssao.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`},"./src/WebGL/shaders/lib/ssao/ssao.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/ssao/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>i});const i={total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/stickimposter/index.ts"(e,t,n){n.r(t),n.d(t,{stickimposter:()=>m});var i=n("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),o=n("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),l=n("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),h=n("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const m={fragmentShader:[o.default,l.default].join(`
`),vertexShader:h.default,uniforms:i.uniforms}},"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`},"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`},"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`},"./src/WebGL/shaders/lib/stickimposter/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/stickimposteroutline/index.ts"(e,t,n){n.r(t),n.d(t,{stickimposteroutline:()=>m});var i=n("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),o=n("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),l=n("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag"),h=n("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const m={fragmentShader:o.default+l.default,vertexShader:h.default,uniforms:i.uniforms}},"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`},"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`},"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new i.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/volumetric/index.ts"(e,t,n){n.r(t),n.d(t,{volumetric:()=>h});var i=n("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),o=n("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),l=n("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const h={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:l.default.replace("#define GLSLIFY 1",""),uniforms:i.uniforms}},"./src/WebGL/shaders/lib/volumetric/uniforms.ts"(e,t,n){n.r(t),n.d(t,{uniforms:()=>o});var i=n("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new i.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},"./src/WebGL/shaders/lib/volumetric/volumetric.frag"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `},"./src/WebGL/shaders/lib/volumetric/volumetric.vert"(e,t,n){n.r(t),n.d(t,{default:()=>i});const i=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`},"./src/WebGL/shaders/utils/clone.ts"(e,t,n){n.r(t),n.d(t,{clone:()=>o});var i=n("./src/colors.ts");function o(l){let h={};for(const m in l){h[m]={},h[m].type=l[m].type;var d=l[m].value;d instanceof i.Color?h[m].value=d.clone():typeof d=="number"?h[m].value=d:d instanceof Array?h[m].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return h}},"./src/WebGL/shaders/utils/index.ts"(e,t,n){n.r(t),n.d(t,{ShaderUtils:()=>o,clone:()=>i.clone});var i=n("./src/WebGL/shaders/utils/clone.ts");const o={clone:i.clone}},"./src/WebGL/shapes/Cylinder.ts"(e,t,n){n.r(t),n.d(t,{Cylinder:()=>l});var i=n("./src/WebGL/math/index.ts");let o=new i.Vector3;class l{constructor(d=new i.Vector3,m=new i.Vector3,b=0){this.c1=d,this.c2=m,this.radius=b,this.direction=new i.Vector3().subVectors(this.c2,this.c1).normalize()}copy(d){return this.c1.copy(d.c1),this.c2.copy(d.c2),this.direction.copy(d.direction),this.radius=d.radius,this}lengthSq(){return o.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(d){return this.direction.add(this.c1).applyMatrix4(d),this.c1.applyMatrix4(d),this.c2.applyMatrix4(d),this.direction.sub(this.c1).normalize(),this.radius=this.radius*d.getMaxScaleOnAxis(),this}}},"./src/WebGL/shapes/Sphere.ts"(e,t,n){n.r(t),n.d(t,{Sphere:()=>o});var i=n("./src/WebGL/math/index.ts");class o{constructor(h={x:0,y:0,z:0},d=0){this.center=new i.Vector3(h.x,h.y,h.z),this.radius=d}set(h,d){return this.center.copy(h),this.radius=d,this}copy(h){return this.center.copy(h.center),this.radius=h.radius,this}applyMatrix4(h){return this.center.applyMatrix4(h),this.radius=this.radius*h.getMaxScaleOnAxis(),this}translate(h){return this.center.add(h),this}equals(h){return h.center.equals(this.center)&&h.radius===this.radius}clone(){return new o().copy(this)}}},"./src/WebGL/shapes/Triangle.ts"(e,t,n){n.r(t),n.d(t,{Triangle:()=>l});var i=n("./src/WebGL/math/index.ts");const o=new i.Vector3;class l{constructor(d=new i.Vector3,m=new i.Vector3,b=new i.Vector3){this.a=d,this.b=m,this.c=b}copy(d){return this.a.copy(d.a),this.b.copy(d.b),this.c.copy(d.c),this}applyMatrix4(d){return this.a.applyMatrix4(d),this.b.applyMatrix4(d),this.c.applyMatrix4(d),this}getNormal(){var d=this.a.clone();return d.sub(this.b),o.subVectors(this.c,this.b),d.cross(o),d.normalize(),d}}},"./src/WebGL/shapes/index.ts"(e,t,n){n.r(t),n.d(t,{Cylinder:()=>o.Cylinder,Sphere:()=>i.Sphere,Triangle:()=>l.Triangle});var i=n("./src/WebGL/shapes/Sphere.ts"),o=n("./src/WebGL/shapes/Cylinder.ts"),l=n("./src/WebGL/shapes/Triangle.ts")},"./src/autoload.ts"(e,t,n){n.r(t),n.d(t,{autoinit:()=>d,autoload:()=>v,processing_autoinit:()=>m,viewers:()=>b});var i=n("./src/GLViewer.ts"),o=n("./src/ProteinSurface4.ts"),l=n("./src/utilities.ts"),h=n("./src/colors.ts"),d=!1,m=!1,b={};function v(w,C){var R,T,E;if(document.querySelector(".viewer_3Dmoljs")!=null&&(d=!0),d){m=!0,w=w??null;var f=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(g=>{var S=[],O=[],D="";g.style.position=="static"&&(g.style.position="relative");var M=null;if(E=null,g.dataset.pdb)S.push("https://files.rcsb.org/view/"+g.dataset.pdb+".pdb"),O.push("pdb");else if(g.dataset.cid)O.push("sdf"),S.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+g.dataset.cid+"/SDF?record_type=3d");else if(g.dataset.href||g.dataset.url){if(g.dataset.href?D=g.dataset.href:D=g.dataset.url,S.push(D),E=D.substring(D.lastIndexOf(".")+1),E=="gz"){let Le=D.substring(0,D.lastIndexOf(".")).lastIndexOf(".");E=D.substring(Le+1)}O.push(E);var _=D.substring(D.lastIndexOf("/")+1,D.lastIndexOf("."));_=="/"&&(_=D.substring(D.lastIndexOf("/")+1)),g.dataset[O[O.length-1]]=_}let A=g.dataset;for(R in A)R.substring(0,3)==="pdb"&&R!=="pdb"?(S.push("https://files.rcsb.org/view/"+A[R]+".pdb"),O.push("pdb")):R.substring(0,4)==="href"&&R!=="href"?(D=A[R],S.push(D),O.push(D.substring(D.lastIndexOf(".")+1))):R.substring(0,3)==="cid"&&R!=="cid"&&(S.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+A[R]+"/SDF?record_type=3d"),O.push("sdf"));var j={};g.dataset.options&&(j=(0,l.specStringToObject)(g.dataset.options));var L=h.CC.color(g.dataset.backgroundcolor),$=g.dataset.backgroundalpha;$=$==null?1:parseFloat($);var F={line:{}};g.dataset.style&&(F=(0,l.specStringToObject)(g.dataset.style));var W={};g.dataset.select&&(W=(0,l.specStringToObject)(g.dataset.select));var U=[],q=[],H=[],Y={},Z=null,X=g.dataset,J=/style(.+)/,Q=/surface(.*)/,G=/labelres(.*)/,te=[];for(T in X)Object.prototype.hasOwnProperty.call(X,T)&&te.push(T);for(te.sort(),R=0;R<te.length;R++){T=te[R];var ue=J.exec(T),de,xe,ve;ue&&(de="select"+ue[1],xe=(0,l.specStringToObject)(X[de]),ve=(0,l.specStringToObject)(X[T]),U.push([xe,ve])),ue=Q.exec(T),ue&&(de="select"+ue[1],xe=(0,l.specStringToObject)(X[de]),ve=(0,l.specStringToObject)(X[T]),q.push([xe,ve])),ue=G.exec(T),ue&&(de="select"+ue[1],xe=(0,l.specStringToObject)(X[de]),ve=(0,l.specStringToObject)(X[T]),H.push([xe,ve])),T=="zoomto"&&(Y=(0,l.specStringToObject)(X[T])),T=="spin"&&(Z=(0,l.specStringToObject)(X[T]))}var Se=function(Le){for(Le.setStyle(W,F),M&&M.createSelectionAndStyle(W,F),R=0;R<U.length;R++){let me=U[R][0]||{},Ie=U[R][1]||{line:{}};Le.setStyle(me,Ie),M&&M.createSelectionAndStyle(W,F)}for(R=0;R<q.length;R++){let me=q[R][0]||{},Ie=q[R][1]||{};M?Le.addSurface(o.SurfaceType.VDW,Ie,me,me).then(nt=>{M.loadSurface("VDW",me,Ie,nt)}):Le.addSurface(o.SurfaceType.VDW,Ie,me,me)}for(R=0;R<H.length;R++){let me=H[R][0]||{},Ie=H[R][1]||{};Le.addResLabels(me,Ie)}Le.render(),Le.zoomTo(Y),Z&&Le.spin(Z.axis,Z.speed)};let Ee=w;try{var he=(0,l.specStringToObject)(g.dataset.config)||{};he.backgroundColor===void 0&&(he.backgroundColor=L),he.backgroundAlpha===void 0&&(he.backgroundAlpha=$),Ee==null?Ee=b[g.id||f++]=(0,i.createViewer)(g,he):(Ee.setBackgroundColor(L,$),Ee.setConfig(he),M&&M.initiateUI()),g.dataset.ui&&$3Dmol.StateManager&&(M=new $3Dmol.StateManager(Ee))}catch(Le){console.log(Le),g.textContent="WebGL appears to be disabled."}if(S.length!=0){let Le=0,me=((Ie,Ve)=>function(nt){D=S[Le];var it=Ie.dataset.type||Ie.dataset.datatype||O[Le];if(Ve.addModel(nt,it,j),M){var ot=Ie.dataset[O[Le]];M.setModelTitle(ot)}Le+=1,Le<S.length?(0,l.get)(S[Le]).then(me):(Se(Ve),Ie.dataset.callback&&(0,l.makeFunction)(Ie.dataset.callback)(Ve),m=!1,C&&C(Ve))})(g,Ee);E&&E.endsWith("gz")?(0,l.getbin)(S[0]).then(me):(0,l.get)(S[0]).then(me)}else{if(g.dataset.element){var Re="#"+g.dataset.element,je=document.querySelector(Re),Ce=je?je.textContent:"";E=g.dataset.type||g.dataset.datatype,Ee.addModel(Ce,E,j)}Se(Ee),g.dataset.callback&&(0,l.makeFunction)(g.dataset.callback)(Ee),m=!1,C&&C(Ee)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&v()}},"./src/colors.ts"(e,t,n){n.r(t),n.d(t,{CC:()=>o,Color:()=>i,builtinColorSchemes:()=>w,chains:()=>v,elementColors:()=>m,htmlColors:()=>l,residues:()=>b,ssColors:()=>h});class i{constructor(R,T,E){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof R=="number"?(this.r=R||0,this.g=T||0,this.b=E||0,this):this.set(R||0)}set(R){return R instanceof i?R.clone():(typeof R=="number"?this.setHex(R):typeof R=="object"&&(this.r=R?.r||0,this.g=R?.g||0,this.b=R?.b||0),this)}setHex(R){return R=Math.floor(R),this.r=(R>>16&255)/255,this.g=(R>>8&255)/255,this.b=(R&255)/255,this}getHex(){var R=Math.round(this.r*255),T=Math.round(this.g*255),E=Math.round(this.b*255);return R<<16|T<<8|E}clone(){return new i(this.r,this.g,this.b)}copy(R){return this.r=R.r,this.g=R.g,this.b=R.b,this}scaled(){var R={};return R.r=Math.round(this.r*255),R.g=Math.round(this.g*255),R.b=Math.round(this.b*255),R.a=1,R}}class o{static color(R){if(!R)return o.cache[0];if(R instanceof i)return R;if(typeof R=="number"&&typeof o.cache[R]<"u")return o.cache[R];if(R&&Array.isArray(R))return R.map(o.color);let T=o.getHex(R),E=new i(T);return o.cache[T]=E,E}static getHex(R){if(Array.isArray(R))return R.map(o.getHex);if(typeof R=="string"){let T=R;if(!isNaN(parseInt(T)))return parseInt(T);if(T=T.trim(),T.length==4&&T[0]=="#"&&(T="#"+T[1]+T[1]+T[2]+T[2]+T[3]+T[3]),T.length==7&&T[0]=="#")return parseInt(T.substring(1),16);let E=o.rgbRegEx.exec(T);if(E){E[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let g=0;for(let S=2;S<5;S++){g*=256;let O=E[S].endsWith("%")?255*parseFloat(E[S])/100:parseFloat(E[S]);g+=Math.round(O)}return g}let f=l[T.toLowerCase()];return f!==void 0?f:(console.error("color not found",R.toLowerCase(),l),0)}return R}}o.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,o.cache={0:new i(0)};const l={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},h={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},d={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},m={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:d,defaultColors:Object.assign({},d),greenCarbon:Object.assign(Object.assign({},d),{C:65280}),cyanCarbon:Object.assign(Object.assign({},d),{C:65535}),magentaCarbon:Object.assign(Object.assign({},d),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},d),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},d),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},d),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},d),{C:8388736}),blueCarbon:Object.assign(Object.assign({},d),{C:255})},b={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},v={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},w={ssPyMol:{prop:"ss",map:h.pyMol},ssJmol:{prop:"ss",map:h.Jmol},Jmol:{prop:"elem",map:m.Jmol},amino:{prop:"resn",map:b.amino},shapely:{prop:"resn",map:b.shapely},nucleic:{prop:"resn",map:b.nucleic},chain:{prop:"chain",map:v.atom},rasmol:{prop:"elem",map:m.rasmol},default:{prop:"elem",map:m.defaultColors},greenCarbon:{prop:"elem",map:m.greenCarbon},chainHetatm:{prop:"chain",map:v.hetatm},cyanCarbon:{prop:"elem",map:m.cyanCarbon},magentaCarbon:{prop:"elem",map:m.magentaCarbon},purpleCarbon:{prop:"elem",map:m.purpleCarbon},whiteCarbon:{prop:"elem",map:m.whiteCarbon},orangeCarbon:{prop:"elem",map:m.orangeCarbon},yellowCarbon:{prop:"elem",map:m.yellowCarbon},blueCarbon:{prop:"elem",map:m.blueCarbon}}},"./src/exporter.js"(e){typeof e.exports=="object"&&(e.exports=window.$3Dmol)},"./src/glcartoon.ts"(e,t,n){n.r(t),n.d(t,{drawCartoon:()=>W,subdivide_spline:()=>v});var i=n("./src/WebGL/math/index.ts"),o=n("./src/WebGL/shapes/index.ts"),l=n("./src/WebGL/index.ts"),h=n("./src/Gradient.ts"),d=n("./src/colors.ts"),m=n("./src/GLDraw.ts"),b=n("./src/utilities.ts");function v(U,q){var H=[],Y=U;Y=[],Y.push(U[0]);var Z,X,J,Q,G,te,ue,de,xe;for(Z=1,X=U.length-1;Z<X;Z++)if(G=U[Z],te=U[Z+1],G.smoothen){var ve=new i.Vector3((G.x+te.x)/2,(G.y+te.y)/2,(G.z+te.z)/2);ve.atom=G.atom,Y.push(ve)}else Y.push(G);for(Y.push(U[U.length-1]),Z=-1,J=Y.length;Z<=J-3;Z++)if(Q=Y[Z===-1?0:Z],G=Y[Z+1],te=Y[Z+2],ue=Y[Z===J-3?J-1:Z+3],de=new i.Vector3().subVectors(te,Q).multiplyScalar(.5),xe=new i.Vector3().subVectors(ue,G).multiplyScalar(.5),!te.skip)for(var Se=0;Se<q;Se++){var Ee=1/q*Se,he=G.x+Ee*de.x+Ee*Ee*(-3*G.x+3*te.x-2*de.x-xe.x)+Ee*Ee*Ee*(2*G.x-2*te.x+de.x+xe.x),Re=G.y+Ee*de.y+Ee*Ee*(-3*G.y+3*te.y-2*de.y-xe.y)+Ee*Ee*Ee*(2*G.y-2*te.y+de.y+xe.y),je=G.z+Ee*de.z+Ee*Ee*(-3*G.z+3*te.z-2*de.z-xe.z)+Ee*Ee*Ee*(2*G.z-2*te.z+de.z+xe.z),Ce=new i.Vector3(he,Re,je);Se<q/2?Ce.atom=G.atom:Ce.atom=te.atom,H.push(Ce)}return H.push(Y[Y.length-1]),H}const w=.5,C=1.3,R=.8,T=.4,E=.4;function f(U,q,H,Y){for(var Z,X,J,Q,G=0,te=q.length;G<te;G++){Q=Math.round(G*(Y.length-1)/te),J=d.CC.color(Y[Q]);var ue=U.updateGeoGroup(2),de=ue.vertexArray,xe=ue.colorArray,ve=ue.faceArray;Z=ue.vertices,X=Z*3,de[X]=q[G].x,de[X+1]=q[G].y,de[X+2]=q[G].z,de[X+3]=H[G].x,de[X+4]=H[G].y,de[X+5]=H[G].z;for(var Se=0;Se<6;++Se)xe[X+3*Se]=J.r,xe[X+1+3*Se]=J.g,xe[X+2+3*Se]=J.b;if(G>0){var Ee=[Z,Z+1,Z-1,Z-2],he=ue.faceidx;ve[he]=Ee[0],ve[he+1]=Ee[1],ve[he+2]=Ee[3],ve[he+3]=Ee[1],ve[he+4]=Ee[2],ve[he+5]=Ee[3],ue.faceidx+=6}ue.vertices+=2}}function g(U,q,H,Y,Z,X,J){var Q,G,te,ue;if(te=q.length,te<2||q[0].length<2)return;for(Q=0;Q<te;Q++)q[Q]=v(q[Q],Y);if(ue=q[0].length,!Z)return f(U,q[0],q[te-1],H);var de,xe,ve,Se,Ee,he,Re=[],je=[],Ce=[];for(G=0;G<te;G++)Re.push(.25+1.5*Math.sqrt((te-1)*G-Math.pow(G,2))/(te-1)),je.push(.5),Ce.push(2*(Math.pow(G/te,2)-G/te)+.6);var Le=[];for(G=0;G<te*2-1;G++)Le[G]=[G,G+1,G+1-2*te,G-2*te];Le[te*2-1]=[G,G+1-2*te,G+1-4*te,G-2*te];var me,Ie,Ve,nt,it,ot,at,Je,rt,et;let Qe=U.updateGeoGroup();for(Q=0;Q<ue;Q++){let fe=U.groups,pe=!1;Qe=U.updateGeoGroup(2*te),fe!=U.groups&&Q>0&&(Q=Q-1,pe=!0),ot=Math.round(Q*(H.length-1)/ue),it=d.CC.color(H[ot]),Ee=ve,he=Se,ve=[],Se=[],de=[],q[0][Q].atom!==void 0&&(nt=q[0][Q].atom,J==="oval"?xe=Re:J==="rectangle"?xe=je:J==="parabola"&&(xe=Ce)),xe||(xe=je);var ct,pt;for(G=0;G<te;G++)Q<ue-1?ct=q[G][Q+1].clone().sub(q[G][Q]):ct=q[G][Q-1].clone().sub(q[G][Q]).negate(),G<te-1?pt=q[G+1][Q].clone().sub(q[G][Q]):pt=q[G-1][Q].clone().sub(q[G][Q]).negate(),de[G]=pt.cross(ct).normalize().multiplyScalar(Z*xe[G]);for(G=0;G<te;G++)ve[G]=q[G][Q].clone().add(de[G].clone().negate());for(G=0;G<te;G++)Se[G]=q[G][Q].clone().add(de[G]);for(at=Qe.vertexArray,Je=Qe.colorArray,rt=Qe.faceArray,me=Qe.vertices,Ie=me*3,G=0;G<te;G++)at[Ie+3*G+0]=ve[G].x,at[Ie+3*G+1]=ve[G].y,at[Ie+3*G+2]=ve[G].z;for(G=0;G<te;G++)at[Ie+3*G+0+3*te]=Se[te-1-G].x,at[Ie+3*G+1+3*te]=Se[te-1-G].y,at[Ie+3*G+2+3*te]=Se[te-1-G].z;for(G=0;G<2*te;++G)Je[Ie+3*G+0]=it.r,Je[Ie+3*G+1]=it.g,Je[Ie+3*G+2]=it.b;if(Q>0&&!pe){for(G=0;G<te*2;G++)et=[me+Le[G][0],me+Le[G][1],me+Le[G][2],me+Le[G][3]],Ve=Qe.faceidx,rt[Ve]=et[0],rt[Ve+1]=et[1],rt[Ve+2]=et[3],rt[Ve+3]=et[1],rt[Ve+4]=et[2],rt[Ve+5]=et[3],Qe.faceidx+=6;if(nt.clickable||nt.hoverable){var oe=[];oe.push(new o.Triangle(Ee[0],ve[0],ve[te-1])),oe.push(new o.Triangle(Ee[0],ve[te-1],Ee[te-1])),oe.push(new o.Triangle(Ee[te-1],ve[te-1],Se[te-1])),oe.push(new o.Triangle(Ee[te-1],Se[te-1],he[te-1])),oe.push(new o.Triangle(Se[0],he[0],he[te-1])),oe.push(new o.Triangle(Se[te-1],Se[0],he[te-1])),oe.push(new o.Triangle(ve[0],Ee[0],he[0])),oe.push(new o.Triangle(Se[0],ve[0],he[0]));for(G in oe)nt.intersectionShape.triangle.push(oe[G])}}Qe.vertices+=2*te}for(at=Qe.vertexArray,Je=Qe.colorArray,rt=Qe.faceArray,me=Qe.vertices,Ie=me*3,Ve=Qe.faceidx,Q=0;Q<te-1;Q++)et=[Q,Q+1,2*te-2-Q,2*te-1-Q],Ve=Qe.faceidx,rt[Ve]=et[0],rt[Ve+1]=et[1],rt[Ve+2]=et[3],rt[Ve+3]=et[1],rt[Ve+4]=et[2],rt[Ve+5]=et[3],Qe.faceidx+=6;for(Q=0;Q<te-1;Q++)et=[me-1-Q,me-2-Q,me-2*te+Q+1,me-2*te+Q],Ve=Qe.faceidx,rt[Ve]=et[0],rt[Ve+1]=et[1],rt[Ve+2]=et[3],rt[Ve+3]=et[1],rt[Ve+4]=et[2],rt[Ve+5]=et[3],Qe.faceidx+=6}function S(U,q,H,Y,Z,X){if(!(q.length<2)){var J,Q;if(J=q[0],Q=q[q.length-1],J=v(J,Y),Q=v(Q,Y),!Z)return f(U,J,Q,H);var G=[],te,ue,de,xe,ve,Se=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],Ee,he,Re,je,Ce,Le,me,Ie,Ve,nt,it,ot,at,Je,rt,et,Qe;for(Ie=0,Ve=J.length;Ie<Ve;Ie++){if(Ce=Math.round(Ie*(H.length-1)/Ve),je=d.CC.color(H[Ce]),G.push(ue=J[Ie]),G.push(ue),G.push(de=Q[Ie]),G.push(de),Ie<Ve-1){var ct=J[Ie+1].clone().sub(J[Ie]),pt=Q[Ie].clone().sub(J[Ie]);te=pt.cross(ct).normalize().multiplyScalar(Z)}for(G.push(xe=J[Ie].clone().add(te)),G.push(xe),G.push(ve=Q[Ie].clone().add(te)),G.push(ve),ue.atom!==void 0&&(Le=ue.atom),Je=U.updateGeoGroup(8),rt=Je.vertexArray,et=Je.colorArray,Qe=Je.faceArray,Ee=Je.vertices,he=Ee*3,rt[he]=ue.x,rt[he+1]=ue.y,rt[he+2]=ue.z,rt[he+3]=ue.x,rt[he+4]=ue.y,rt[he+5]=ue.z,rt[he+6]=de.x,rt[he+7]=de.y,rt[he+8]=de.z,rt[he+9]=de.x,rt[he+10]=de.y,rt[he+11]=de.z,rt[he+12]=xe.x,rt[he+13]=xe.y,rt[he+14]=xe.z,rt[he+15]=xe.x,rt[he+16]=xe.y,rt[he+17]=xe.z,rt[he+18]=ve.x,rt[he+19]=ve.y,rt[he+20]=ve.z,rt[he+21]=ve.x,rt[he+22]=ve.y,rt[he+23]=ve.z,nt=0;nt<8;++nt)et[he+3*nt]=je.r,et[he+1+3*nt]=je.g,et[he+2+3*nt]=je.b;if(Ie>0){var oe=me!==void 0&&Le!==void 0&&me.serial!==Le.serial;for(nt=0;nt<4;nt++){var fe=[Ee+Se[nt][0],Ee+Se[nt][1],Ee+Se[nt][2],Ee+Se[nt][3]];if(Re=Je.faceidx,Qe[Re]=fe[0],Qe[Re+1]=fe[1],Qe[Re+2]=fe[3],Qe[Re+3]=fe[1],Qe[Re+4]=fe[2],Qe[Re+5]=fe[3],Je.faceidx+=6,Le.clickable||me.clickable||Le.hoverable||me.hoverable){var pe=G[fe[3]].clone(),Be=G[fe[0]].clone(),ke=G[fe[2]].clone(),Ke=G[fe[1]].clone();if(pe.atom=G[fe[3]].atom||null,ke.atom=G[fe[2]].atom||null,Be.atom=G[fe[0]].atom||null,Ke.atom=G[fe[1]].atom||null,oe){var Ye=pe.clone().add(Be).multiplyScalar(.5),ie=ke.clone().add(Ke).multiplyScalar(.5),Ae=pe.clone().add(Ke).multiplyScalar(.5);nt%2===0?((me.clickable||me.hoverable)&&(it=new o.Triangle(Ye,Ae,pe),ot=new o.Triangle(ie,ke,Ae),at=new o.Triangle(Ae,ke,pe),me.intersectionShape.triangle.push(it),me.intersectionShape.triangle.push(ot),me.intersectionShape.triangle.push(at)),(Le.clickable||Le.hoverable)&&(it=new o.Triangle(Be,Ke,Ae),ot=new o.Triangle(Ke,ie,Ae),at=new o.Triangle(Be,Ae,Ye),Le.intersectionShape.triangle.push(it),Le.intersectionShape.triangle.push(ot),Le.intersectionShape.triangle.push(at))):((Le.clickable||Le.hoverable)&&(it=new o.Triangle(Ye,Ae,pe),ot=new o.Triangle(ie,ke,Ae),at=new o.Triangle(Ae,ke,pe),Le.intersectionShape.triangle.push(it),Le.intersectionShape.triangle.push(ot),Le.intersectionShape.triangle.push(at)),(me.clickable||me.hoverable)&&(it=new o.Triangle(Be,Ke,Ae),ot=new o.Triangle(Ke,ie,Ae),at=new o.Triangle(Be,Ae,Ye),me.intersectionShape.triangle.push(it),me.intersectionShape.triangle.push(ot),me.intersectionShape.triangle.push(at)))}else(Le.clickable||Le.hoverable)&&(it=new o.Triangle(Be,Ke,pe),ot=new o.Triangle(Ke,ke,pe),Le.intersectionShape.triangle.push(it),Le.intersectionShape.triangle.push(ot))}}}Je.vertices+=8,me=Le}var Ne=G.length-8;for(Je=U.updateGeoGroup(8),rt=Je.vertexArray,et=Je.colorArray,Qe=Je.faceArray,Ee=Je.vertices,he=Ee*3,Re=Je.faceidx,Ie=0;Ie<4;Ie++){G.push(G[Ie*2]),G.push(G[Ne+Ie*2]);var Ze=G[Ie*2],_e=G[Ne+Ie*2];rt[he+6*Ie]=Ze.x,rt[he+1+6*Ie]=Ze.y,rt[he+2+6*Ie]=Ze.z,rt[he+3+6*Ie]=_e.x,rt[he+4+6*Ie]=_e.y,rt[he+5+6*Ie]=_e.z,et[he+6*Ie]=je.r,et[he+1+6*Ie]=je.g,et[he+2+6*Ie]=je.b,et[he+3+6*Ie]=je.r,et[he+4+6*Ie]=je.g,et[he+5+6*Ie]=je.b}Ne+=8,it=[Ee,Ee+2,Ee+6,Ee+4],ot=[Ee+1,Ee+5,Ee+7,Ee+3],Qe[Re]=it[0],Qe[Re+1]=it[1],Qe[Re+2]=it[3],Qe[Re+3]=it[1],Qe[Re+4]=it[2],Qe[Re+5]=it[3],Qe[Re+6]=ot[0],Qe[Re+7]=ot[1],Qe[Re+8]=ot[3],Qe[Re+9]=ot[1],Qe[Re+10]=ot[2],Qe[Re+11]=ot[3],Je.faceidx+=12,Je.vertices+=8}}function O(U,q,H,Y,Z,X,J){(!J||J==="default")&&(J="rectangle"),J==="edged"?S(U,q,H,Y,Z):(J==="rectangle"||J==="oval"||J==="parabola")&&g(U,q,H,Y,Z,X,J)}function D(U){return U&&U.elem==="C"&&U.atom==="CA"}function M(U,q){if(U&&q&&U.chain===q.chain){if(!U.hetflag&&!q.hetflag&&U.reschain===q.reschain&&(U.resi===q.resi||U.resi===q.resi-1))return!0;if(U.resi<q.resi){var H=U.x-q.x,Y=U.y-q.y,Z=U.z-q.z,X=H*H+Y*Y+Z*Z;if(U.atom=="CA"&&q.atom=="CA"&&X<16)return!0;if((U.atom=="P"||q.atom=="P")&&X<64)return!0}}return!1}function _(U,q,H,Y,Z){if(!(q==null||q.vertices==0)){Z&&(q.initTypedArrays(),q.setUpNormals());var X=new l.MeshDoubleLambertMaterial;X.vertexColors=l.Coloring.FaceColors,typeof H=="number"&&H>=0&&H<1&&(X.transparent=!0,X.opacity=H),X.outline=Y;var J=new l.Mesh(q,X);U.add(J)}}function A(U,q,H,Y,Z,X,J,Q,G){var te,ue,de,xe,ve,Se;if(!(!Y||!Z||!J)){var Ee=Z.sub(Y);Ee.normalize();var he=Q[G];for(ue=G+1;ue<Q.length&&(he=Q[ue],he.atom!=J.atom);ue++);if(he=he?new i.Vector3(he.x,he.y,he.z):new i.Vector3(0,0,0),he.sub(Y),J.ss==="arrow start"){var Re=he.clone().multiplyScalar(.3).cross(Z);Y.add(Re);var je=he.clone().cross(Ee).normalize();Ee.rotateAboutVector(je,.43)}for(J.style.cartoon.ribbon?te=J.style.cartoon.thickness||T:J.style.cartoon.width?te=J.style.cartoon.width:J.ss==="c"?J.atom==="P"?te=R:te=w:J.ss==="arrow start"?(te=C,ve=!0):J.ss==="arrow end"||J.ss==="h"&&J.style.cartoon.tubes||J.ss==="tube start"?te=w:te=C,X!=null&&Ee.dot(X)<0&&Ee.negate(),Ee.multiplyScalar(te),ue=0;ue<q;ue++)de=-1+ue*2/(q-1),xe=new i.Vector3(Y.x+de*Ee.x,Y.y+de*Ee.y,Y.z+de*Ee.z),xe.atom=J,J.ss==="s"&&(xe.smoothen=!0),U[ue].push(xe);if(ve)for(Ee.multiplyScalar(2),ue=0;ue<q;ue++)de=-1+ue*2/(q-1),xe=new i.Vector3(Y.x+de*Ee.x,Y.y+de*Ee.y,Y.z+de*Ee.z),xe.atom=J,xe.smoothen=!1,xe.skip=!0,U[ue].push(xe);return Se=J.style.cartoon.style||"default",U.style?U.style!=Se&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),U.style="default"):U.style=Se,(J.ss==="arrow start"||J.ss==="arrow end")&&(J.ss="s"),ve}}const j={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},L={DA:!0,DG:!0,A:!0,G:!0},$={DT:!0,DC:!0,U:!0,C:!0,T:!0},F={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function W(U,q,H,Y=10){let Z=Y,X=Y;var J,Q,G,te,ue,de,xe,ve,Se,Ee,he,Re,je,Ce,Le,me,Ie,Ve,nt=new l.Geometry(!0),it=new l.Geometry(!0),ot=[],at=[],Je=1,rt=!1,et={};for(var Qe in h.Gradient.builtinGradients)h.Gradient.builtinGradients.hasOwnProperty(Qe)&&(et[Qe]=new h.Gradient.builtinGradients[Qe](H[1],H[0]));var ct=function(tt,K){return H&&K.color==="spectrum"?K.colorscheme in et?et[K.colorscheme].valueToHex(tt.resi):et.sinebow.valueToHex(tt.resi):(0,b.getColorFromStyle)(tt,K).getHex()};for(ve=0;ve<Z;ve++)at[ve]=[];var pt=!1,oe=!1,fe=[];for(ve in q){if(te=q[ve],te.elem==="C"&&te.atom==="CA"){var pe=M(G,te);pe&&te.ss==="s"?pt=!0:pt&&(G&&Q&&G.style.cartoon.arrows&&Q.style.cartoon.arrows&&(G.ss="arrow end",Q.ss="arrow start"),pt=!1),pe&&(G.ss==="h"||G.ss=="tube start")&&G.style.cartoon.tubes?!oe&&G.ss!="tube start"&&te.style.cartoon.tubes&&(te.ss="tube start",oe=!0):oe&&(G.ss==="tube start"?G.ss="tube end":Q&&Q.style.cartoon.tubes&&(Q.ss="tube end"),oe=!1),Q=G,G=te}te&&te.atom in j&&fe.push(te)}oe&&G.style.cartoon.tubes&&(G.ss="tube end",oe=!1);var Be=function(tt){at[0].length>0&&O(it,at,ot,X,xe,Je,at.style);var K=[],Me=null;if(tt){for(ve=0;ve<Z;ve++)K[ve]=at[ve][at[ve].length-1];Me=ot[ot.length-1]}for(at=[],ve=0;ve<Z;ve++)at[ve]=[];if(ot=[],tt){for(ve=0;ve<Z;ve++)at[ve].push(K[ve]);ot.push(Me)}_(U,it,Je,rt,!0),_(U,nt,Je,rt,!1),it=new l.Geometry(!0),nt=new l.Geometry(!0)};G=void 0;let ke=[];for(var Ke=0;Ke<fe.length;Ke++){te=fe[Ke];var Ye=te.resn.trim(),ie=Ye in F;if(Je=1,J=te.style.cartoon,G&&G.style.cartoon&&(Je=G.style.cartoon.opacity),G&&G.style.cartoon&&G.style.cartoon.outline&&(rt=G.style.cartoon.outline),G&&G.style.cartoon&&(!te.style.cartoon||G.style.cartoon.opacity!=te.style.cartoon.opacity)&&Be(G.chain==te.chain),G&&te&&!M(G,te)&&G.chain&&G.chain==te.chain&&!G.hetflag&&!te.hetflag&&G.reschain+1==te.reschain&&ke.push([G,te]),J.style==="trace"){if(!te.hetflag){if(te.elem==="C"&&te.atom==="CA"||ie&&te.atom==="P"||te.atom==="BB"){if(de=ct(te,J),(0,b.isNumeric)(J.thickness)?xe=J.thickness:xe=T,M(G,te))if(de==ue){var Ae=d.CC.color(de);m.GLDraw.drawCylinder(nt,G,te,xe,Ae,2,2)}else{var Ne=new i.Vector3().addVectors(G,te).multiplyScalar(.5),Ze=d.CC.color(ue),_e=d.CC.color(de);m.GLDraw.drawCylinder(nt,G,Ne,xe,Ze,2,0),m.GLDraw.drawCylinder(nt,Ne,te,xe,_e,0,2)}if((te.clickable===!0||te.hoverable)&&te.intersectionShape!==void 0){var Ge=new i.Vector3(te.x,te.y,te.z);te.intersectionShape.sphere.push(new o.Sphere(Ge,xe))}G=te,ue=de}}}else{if(D(te)||ie&&(te.atom==="P"||te.atom.indexOf("O5")==0)){if(Ve)if(te.ss==="tube end")Ve=!1,Ie=new i.Vector3(te.x,te.y,te.z),m.GLDraw.drawCylinder(nt,me,Ie,2,d.CC.color(ue),1,1),te.ss="h";else if(G.chain!=te.chain||G.ss==="tube end")Ve=!1,G.ss="h",Ie=new i.Vector3(G.x,G.y,G.z),m.GLDraw.drawCylinder(nt,me,Ie,2,d.CC.color(ue),1,1);else continue;if(G&&(!M(G,te)||G.ss==="tube start")){for(G.ss==="tube start"&&(Ve=!0,me=new i.Vector3(G.x,G.y,G.z),G.ss="h"),Le&&(Re?Ce=new i.Vector3().addVectors(G,Re).multiplyScalar(.5):Ce=new i.Vector3(G.x,G.y,G.z),m.GLDraw.drawCylinder(nt,Ce,Le,E,d.CC.color(Le.color),0,2),A(at,Z,!0,Re,je,he,G,fe,Ke),ot.push(de),Ce=null,Le=null),at[0].length>0&&O(it,at,ot,X,xe,Je,at.style),at=[],ve=0;ve<Z;ve++)at[ve]=[];ot=[]}if(G===void 0||G.rescode!=te.rescode||G.resi!=te.resi){if(Le&&G!=null){Ce=new i.Vector3().addVectors(G,te).multiplyScalar(.5);var ae=Ce.clone().sub(Le).multiplyScalar(.02);Ce.add(ae),m.GLDraw.drawCylinder(nt,Ce,Le,E,d.CC.color(Le.color),0,2),Ce=null,Le=null}de=ct(te,J),ot.push(de),(0,b.isNumeric)(J.thickness)?xe=J.thickness:xe=T,G=te,Se=new i.Vector3(G.x,G.y,G.z),Se.resi=G.resi,ue=de}(te.clickable===!0||te.hoverable===!0)&&(te.intersectionShape===void 0||te.intersectionShape.triangle===void 0)&&(te.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else G!=null&&(D(G)&&te.atom==="O"||ie&&G.atom==="P"&&(te.atom==="OP2"||te.atom==="O2P")||ie&&G.atom.indexOf("O5")==0&&te.atom.indexOf("C5")==0)?(Ee=new i.Vector3(te.x,te.y,te.z),Ee.resi=te.resi,(te.atom==="OP2"||te.atom==="O2P")&&(je=new i.Vector3(te.x,te.y,te.z))):ie&&te.atom.indexOf("O3")==0?Re=new i.Vector3(te.x,te.y,te.z):(te.atom==="N1"&&Ye in L||te.atom==="N3"&&Ye in $)&&(Le=new i.Vector3(te.x,te.y,te.z),Le.color=(0,b.getColorFromStyle)(te,J).getHex());Ee&&Se&&Ee.resi===Se.resi&&(A(at,Z,!0,Se,Ee,he,G,fe,Ke),he=Ee,Se=null,Ee=null,ot.push(de))}}Le&&(Re?Ce=new i.Vector3().addVectors(G,Re).multiplyScalar(.5):Ce=new i.Vector3(G.x,G.y,G.z),m.GLDraw.drawCylinder(nt,Ce,Le,E,d.CC.color(Le.color),0,2),A(at,Z,!0,Re,je,he,G,fe,Ke),ot.push(de)),Be(!1);var He=function(tt,K){if(tt.style.cartoon.gapcutoff&&tt.style.cartoon.gapcutoff==K.style.cartoon.gapcutoff){let Te=tt.style.cartoon.gapcutoff,le=K.resi-tt.resi;if(le>0&&le<Te){let we=.25,Fe=K.x-tt.x,yt=K.y-tt.y,mt=K.z-tt.z,ft=Math.sqrt(Fe*Fe+yt*yt+mt*mt),Ot=ft/(2*le),nr=new i.Vector3(tt.x,tt.y,tt.z),Pt=ft/Ot,At=new i.Vector3((K.x-tt.x)/Pt,(K.y-tt.y)/Pt,(K.z-tt.z)/Pt);nr.add({x:At.x/2,y:At.y/2,z:At.z/2});let Ct=nr.clone().add(At);At.multiplyScalar(2);let Ut=(0,b.extend)({},tt);for(var Me=0;Me<le;Me++){Ut.resi+=1;let Ft=ct(Ut,Ut.style.cartoon);m.GLDraw.drawCylinder(nt,nr,Ct,we,d.CC.color(Ft),m.CAP.FLAT,m.CAP.FLAT),nr.add(At),Ct.add(At)}Be(!1)}}};for(let tt of ke)He(tt[0],tt[1])}},"./src/index.ts"(e,t,n){n.r(t),n.d(t,{CAP:()=>i.CAP,CC:()=>i.CC,CONTEXTS_PER_VIEWPORT:()=>i.CONTEXTS_PER_VIEWPORT,Color:()=>i.Color,CustomLinear:()=>i.CustomLinear,Cylinder:()=>i.Cylinder,GLDraw:()=>i.GLDraw,GLModel:()=>i.GLModel,GLShape:()=>i.GLShape,GLViewer:()=>i.GLViewer,GLVolumetricRender:()=>i.GLVolumetricRender,Gradient:()=>i.Gradient,GradientType:()=>i.GradientType,Label:()=>i.Label,LabelCount:()=>i.LabelCount,MarchingCube:()=>i.MarchingCube,MarchingCubeInitializer:()=>i.MarchingCubeInitializer,Matrix3:()=>i.Matrix3,Matrix4:()=>i.Matrix4,Parsers:()=>i.Parsers,PausableTimer:()=>i.PausableTimer,PointGrid:()=>i.PointGrid,ProteinSurface:()=>i.ProteinSurface,Quaternion:()=>i.Quaternion,ROYGB:()=>i.ROYGB,RWB:()=>i.RWB,Ray:()=>i.Ray,Sinebow:()=>i.Sinebow,Sphere:()=>i.Sphere,SurfaceType:()=>i.SurfaceType,Triangle:()=>i.Triangle,Vector2:()=>i.Vector2,Vector3:()=>i.Vector3,VolumeData:()=>i.VolumeData,adjustVolumeStyle:()=>i.adjustVolumeStyle,applyPartialCharges:()=>i.applyPartialCharges,autoinit:()=>i.autoinit,autoload:()=>i.autoload,base64ToArray:()=>i.base64ToArray,bondLength:()=>i.bondLength,builtinColorSchemes:()=>i.builtinColorSchemes,builtinGradients:()=>i.builtinGradients,chains:()=>i.chains,clamp:()=>i.clamp,conversionMatrix3:()=>i.conversionMatrix3,createStereoViewer:()=>i.createStereoViewer,createViewer:()=>i.createViewer,createViewerGrid:()=>i.createViewerGrid,deepCopy:()=>i.deepCopy,degToRad:()=>i.degToRad,download:()=>i.download,drawCartoon:()=>i.drawCartoon,elementColors:()=>i.elementColors,extend:()=>i.extend,get:()=>i.get,getAtomProperty:()=>i.getAtomProperty,getColorFromStyle:()=>i.getColorFromStyle,getElement:()=>i.getElement,getExtent:()=>i.getExtent,getGradient:()=>i.getGradient,getPropertyRange:()=>i.getPropertyRange,getbin:()=>i.getbin,htmlColors:()=>i.htmlColors,inflateString:()=>i.inflateString,isEmptyObject:()=>i.isEmptyObject,isNumeric:()=>i.isNumeric,makeFunction:()=>i.makeFunction,mergeGeos:()=>i.mergeGeos,normalizeValue:()=>i.normalizeValue,partialCharges:()=>i.partialCharges,processing_autoinit:()=>i.processing_autoinit,residues:()=>i.residues,setBondLength:()=>i.setBondLength,setSyncSurface:()=>i.setSyncSurface,specStringToObject:()=>i.specStringToObject,splitMesh:()=>i.splitMesh,ssColors:()=>i.ssColors,subdivide_spline:()=>i.subdivide_spline,syncSurface:()=>i.syncSurface,viewers:()=>i.viewers});var i=n("./src/3Dmol.ts");window&&(window.$3Dmol=t)},"./src/parsers/BCIF.ts"(e,t,n){n.r(t),n.d(t,{BCIF:()=>T});var i=n("./src/utilities.ts"),o=n("./src/parsers/utils/computeSecondaryStructure.ts"),l=n("./src/parsers/utils/processSymmetries.ts"),h=n("./src/parsers/cifutils/category.ts"),d=n("./src/parsers/utils/assignPDBBonds.ts"),m=n("./src/WebGL/index.ts"),b=n("./src/parsers/utils/isEmpty.ts"),v=n("./src/vendor/mmtf.js");class w{constructor(f){if(this.C={},f){let g=f.getField("comp_id"),S=f.getField("atom_id_1"),O=f.getField("atom_id_2"),D=f.getField("value_order");for(let M=0;M<g.length;M++){let _=g[M],A=S[M],j=O[M],L=D[M],$=1;L=="doub"?$=2:L=="trip"&&($=3),this.C[_]==null&&(this.C[_]={}),this.C[_][A]==null&&(this.C[_][A]={}),this.C[_][j]==null&&(this.C[_][j]={}),this.C[_][A][j]=$,this.C[_][j][A]=$}}}order(f,g,S){return this.C[f]!==void 0&&this.C[f][g]!==void 0&&this.C[f][g][S]!==void 0?this.C[f][g][S]:0}}class C{constructor(f){if(this.C=[],f){let g=f.getField("conn_type_id"),S=f.getField("ptnr1_label_asym_id"),O=f.getField("ptnr1_label_seq_id"),D=f.getField("ptnr1_label_comp_id"),M=f.getField("ptnr1_label_atom_id"),_=f.getField("ptnr2_label_asym_id"),A=f.getField("ptnr2_label_seq_id"),j=f.getField("ptnr2_label_comp_id"),L=f.getField("ptnr2_label_atom_id"),$=f.getField("pdbx_value_order");for(let F=0;F<g.length;F++)if(g[F]=="disulf"||g[F]=="covale"){let W=$?$[F]==""?1:parseInt($[F]):1;this.C.push([[S[F],O[F],D[F],M[F]],[_[F],A[F],j[F],L[F]],W])}}}}class R{constructor(){this.R={}}add(f){this.R[f.lchain]==null&&(this.R[f.lchain]={}),this.R[f.lchain][f.lresi]==null&&(this.R[f.lchain][f.lresi]={}),this.R[f.lchain][f.lresi][f.lresn]==null&&(this.R[f.lchain][f.lresi][f.lresn]=[]),this.R[f.lchain][f.lresi][f.lresn].push(f),this.R[f.lchain][f.lresi][f.lresn][f.atom]=f}geta([f,g,S,O]){if(this.R[f]!==void 0&&this.R[f][g]!==void 0&&this.R[f][g][S]!==void 0)return this.R[f][g][S][O]}setBonds(f,g){for(let S in this.R)for(let O in this.R[S])for(let D in this.R[S][O]){let M=this.R[S][O][D];for(let _=0;_<M.length;_++)for(let A=_+1;A<M.length;A++){let j=M[_],L=M[A],$=f.order(D,j.atom,L.atom);j.altLoc!=L.altLoc&&j.altLoc!=""&&L.altLoc!=""&&($=0),$>0&&(j.bonds.push(L.index),L.bonds.push(j.index),j.bondOrder.push($),L.bondOrder.push($))}}for(let S of g.C){let O=S[0],D=S[1],M=S[2],_=this.geta(O),A=this.geta(D);_!=null&&A!=null&&(_.bonds.push(A.index),A.bonds.push(_.index),_.bondOrder.push(M),A.bondOrder.push(M))}}}function T(E,f){var g=!f.keepH,S=f.altLoc?f.altLoc:"A",O=!f.noComputeSecondaryStructure;const D=!f.doAssembly,M=f.assignBonds===void 0?!0:f.assignBonds;if(typeof E=="string")try{E=(0,i.base64ToArray)(E)}catch{E=new TextEncoder().encode(E)}else E=new Uint8Array(E);var _=v.decodeMsgpack(E);_==31&&(E=(0,i.inflateString)(E,!1),_=v.decodeMsgpack(E));var A=[],j=A.modelData=[],L=_.dataBlocks.length;if(L==0)return A;f.multimodel||(L=1);for(let $=0;$<L;$++){let F=A.length;const W=[];j.push({symmetries:[]}),A.push([]);const U=_.dataBlocks[$],q=Object.create(null);for(const et of U.categories)q[et.name.substr(1)]=(0,h.Category)(et);let H={},Y=q.struct_conf;if(Y){let et=Y.getField("conf_type_id"),Qe=Y.getField("beg_label_asym_id"),ct=Y.getField("beg_label_seq_id"),pt=Y.getField("end_label_seq_id");for(let oe=0;oe<et.length;oe++)if(et[oe].startsWith("H")){let fe=Qe[oe],pe=ct[oe],Be=pt[oe];fe in H||(H[fe]={}),H[fe][pe]="h1";for(let ke=pe+1;ke<Be;ke++)H[fe][ke]="h";H[fe][Be]="h2"}}let Z=q.struct_sheet_range;if(Z){let et=Z.getField("id"),Qe=Z.getField("beg_label_asym_id"),ct=Z.getField("beg_label_seq_id"),pt=Z.getField("end_label_seq_id");for(let oe=0;oe<et.length;oe++){let fe=Qe[oe],pe=ct[oe],Be=pt[oe];fe in H||(H[fe]={}),H[fe][pe]="s1";for(let ke=pe+1;ke<Be;ke++)H[fe][ke]="s";H[fe][Be]="s2"}}let X=q.pdbx_struct_oper_list,J=X.getField("id");if(J&&!D){let et=X.getField("matrix[1][1]"),Qe=X.getField("matrix[1][2]"),ct=X.getField("matrix[1][3]"),pt=X.getField("matrix[2][1]"),oe=X.getField("matrix[2][2]"),fe=X.getField("matrix[2][3]"),pe=X.getField("matrix[3][1]"),Be=X.getField("matrix[3][2]"),ke=X.getField("matrix[3][3]"),Ke=X.getField("vector[1]"),Ye=X.getField("vector[2]"),ie=X.getField("vector[3]");for(let Ae=0;Ae<J.length;Ae++){const Ne=new m.Matrix4(et[Ae],Qe[Ae],ct[Ae],Ke[Ae],pt[Ae],oe[Ae],fe[Ae],Ye[Ae],pe[Ae],Be[Ae],ke[Ae],ie[Ae]);j[j.length-1].symmetries.push(Ne)}}let Q=new w(q.chem_comp_bond),G=new R,te=new C(q.struct_conn),ue=q.atom_site,de=ue.rowCount,xe=ue.getField("group_PDB"),ve=ue.getField("Cartn_x"),Se=ue.getField("Cartn_y"),Ee=ue.getField("Cartn_z"),he=ue.getField("auth_asym_id"),Re=ue.getField("label_asym_id"),je=ue.getField("auth_seq_id"),Ce=ue.getField("label_seq_id"),Le=ue.getField("auth_comp_id"),me=ue.getField("label_comp_id"),Ie=ue.getField("auth_atom_id"),Ve=ue.getField("label_atom_id"),nt=ue.getField("type_symbol"),it=ue.getField("B_iso_or_equiv"),ot=ue.getField("id"),at=ue.getField("label_alt_id"),Je=ue.getField("pdbx_PDB_model_num"),rt=Je?Je[0]:0;for(let et=0;et<de;et++){if(xe!==void 0&&xe[et]==="TER")continue;if(Je&&Je[et]!=rt)if(rt=Je[et],f.multimodel)f.onemol||(A.push([]),j.push(j[j.length-1]),rt=Je[et],G.setBonds(Q,te),G=new R);else break;const Qe={};Qe.x=ve[et],Qe.y=Se[et],Qe.z=Ee[et],Qe.chain=he?he[et]:Re?Re[et]:void 0,Qe.lchain=Re?Re[et]:void 0,Qe.resi=je?je[et]:Ce?Ce[et]:void 0,Qe.lresi=Ce?Ce[et]:void 0,Qe.resn=Le?Le[et].trim():me?me[et].trim():void 0,Qe.lresn=me?me[et].trim():void 0,Qe.atom=Ie?Ie[et].replace(/"/gm,""):Ve?Ve[et].replace(/"/gm,""):void 0,Qe.icode=at?at[et]:void 0,Qe.altLoc=Qe.icode,Qe.hetflag=!xe||xe[et]==="HETA"||xe[et]==="HETATM";let ct="X";nt&&(ct=nt[et].replace(/\(?\+?\d+.*/,"")),Qe.elem=ct[0].toUpperCase()+ct.substring(1,2).toLowerCase(),it&&(Qe.b=it[et]),!(g&&Qe.elem=="H")&&(Qe.altLoc!=""&&Qe.altLoc!=S&&S!="*"||(Qe.bonds=[],Qe.ss="c",Qe.serial=ot[et],Qe.model=rt,Qe.bondOrder=[],Qe.properties={},Qe.index=A[A.length-1].length,W[Qe.serial]=[A.length,Qe.index],A[A.length-1].push(Qe),G.add(Qe)))}if(G.setBonds(Q,te),!(0,b.isEmpty)(H))for(let et=F;et<A.length;et++){let Qe=A[et];for(let ct=0;ct<Qe.length;ct++){const pt=Qe[ct];if(pt!==void 0&&pt.lchain in H&&pt.lresi in H[pt.lchain]){const oe=H[pt.lchain][pt.lresi];pt.ss=oe[0],oe.length>1&&(oe[1]=="1"?pt.ssbegin=!0:oe[1]=="2"&&(pt.ssend=!0))}}}f.multimodel&&$<L-1&&(f.onemol||(A.push([]),j.push({symmetries:[]})))}for(let $=0;$<A.length;$++)M&&!(f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms)&&(0,d.assignPDBBonds)(A[$],f),O&&(0,o.computeSecondaryStructure)(A[$],f.hbondCutoff),(0,l.processSymmetries)(j[$].symmetries,A[$],f,j[$].cryst),f.duplicateAssemblyAtoms&&!f.dontConnectDuplicatedAtoms&&M&&(0,d.assignPDBBonds)(A[$],f);return A}},"./src/parsers/CDJSON.ts"(e,t,n){n.r(t),n.d(t,{CDJSON:()=>i});function i(o,l){var h=[[]];typeof o=="string"&&(o=JSON.parse(o));for(var d=o.m,m=d[0].a,b=d[0].b,v=d[0].s,w=l!==void 0&&l.parseStyle!==void 0?l.parseStyle:v!==void 0,C=h[h.length-1].length,R=0;R<m.length;R++){var T=m[R],E={};E.id=T.i,E.x=T.x,E.y=T.y,E.z=T.z||0,E.bonds=[],E.bondOrder=[];var f=T.l||"C";E.elem=f[0].toUpperCase()+f.substring(1).toLowerCase(),E.serial=h[h.length-1].length,w&&(E.style=v[T.s||0]),h[h.length-1].push(E)}for(let g=0;g<b.length;g++){let S=b[g],O=S.b+C,D=S.e+C,M=S.o||1,_=h[h.length-1][O],A=h[h.length-1][D];_.bonds.push(D),_.bondOrder.push(M),A.bonds.push(O),A.bondOrder.push(M)}return h}},"./src/parsers/CIF.ts"(e,t,n){n.r(t),n.d(t,{CIF:()=>m});var i=n("./src/parsers/utils/computeSecondaryStructure.ts"),o=n("./src/parsers/utils/processSymmetries.ts"),l=n("./src/WebGL/index.ts"),h=n("./src/parsers/utils/assignPDBBonds.ts");const d=function(b,v,w,C){return new l.Vector3(v,w,C).applyMatrix3(b)};function m(b,v={}){const w=[],C=!v.doAssembly,R=w.modelData=[],T=v.assignBonds===void 0?!0:v.assignBonds;function E(M,_){const A=[];let j=0,L=0;for(;L<M.length;){for(;M.substring(L,L+_.length)!==_&&L<M.length;)if(M[L]==="'"){for(L++;L<M.length&&M[L]!=="'";)L++;for(;M.substring(L,L+_.length)!==_&&L<M.length;)L++}else if(M[L]==='"'){for(L++;L<M.length&&M[L]!=='"';)L++;L++}else L++;A.push(M.substring(j,L)),j=L=L+_.length}return A}const f=b.split(/\r?\n|\r/),g=[];let S=!1;for(let M=0;M<f.length;M++){var O=f[M].split("#")[0];if(S?O[0]===";"&&(S=!1):O[0]===";"&&(S=!0),S||O!==""){if(!S&&(O=O.trim(),O[0]==="_")){const _=O.split(/\s/)[0].indexOf(".");if(_>-1){let A=O.split("");A[_]="_",O=A.join(""),O=O.substring(0,_)+"_"+O.substring(_+1)}}g.push(O)}}let D=0;for(;D<g.length;){for(;!g[D].startsWith("data_")||g[D]==="data_global";)D++;D++;const M={};for(;D<g.length&&!g[D].startsWith("data_");)if(g[D][0]===void 0)D++;else if(g[D][0]==="_"){const L=g[D].split(/\s/)[0].toLowerCase(),$=M[L]=M[L]||[],F=g[D].substring(g[D].indexOf(L)+L.length);if(F==="")if(D++,g[D][0]===";"){let W=g[D].substring(1);for(D++;g[D]!==";";)W=W+`
`+g[D],D++;$.push(W)}else $.push(g[D]);else $.push(F.trim());D++}else if(g[D].substring(0,5)==="loop_"){D++;const L=[];for(;g[D]===""||g[D][0]==="_";){if(g[D]!==""){let F=g[D].split(/\s/)[0].toLowerCase(),W=M[F]=M[F]||[];L.push(W)}D++}let $=0;for(;D<g.length&&g[D][0]!=="_"&&!g[D].startsWith("loop_")&&!g[D].startsWith("data_");){let F=E(g[D]," ");for(let W=0;W<F.length;W++)F[W]!==""&&(L[$].push(F[W]),$=($+1)%L.length);D++}}else D++;R.push({symmetries:[]}),w.push([]);const _=M._atom_site_id!==void 0?M._atom_site_id.length:M._atom_site_label.length;let A;if(M._cell_length_a!==void 0){const L=parseFloat(M._cell_length_a),$=parseFloat(M._cell_length_b),F=parseFloat(M._cell_length_c),W=parseFloat(M._cell_angle_alpha)||90,U=parseFloat(M._cell_angle_beta)||90,q=parseFloat(M._cell_angle_gamma)||90;A=(0,l.conversionMatrix3)(L,$,F,W,U,q),R[R.length-1].cryst={a:L,b:$,c:F,alpha:W,beta:U,gamma:q}}for(let L=0;L<_;L++){if(M._atom_site_group_pdb!==void 0&&M._atom_site_group_pdb[L]==="TER")continue;const $={};if(M._atom_site_cartn_x!==void 0)$.x=parseFloat(M._atom_site_cartn_x[L]),$.y=parseFloat(M._atom_site_cartn_y[L]),$.z=parseFloat(M._atom_site_cartn_z[L]);else{const W=d(A,parseFloat(M._atom_site_fract_x[L]),parseFloat(M._atom_site_fract_y[L]),parseFloat(M._atom_site_fract_z[L]));$.x=W.x,$.y=W.y,$.z=W.z}$.chain=M._atom_site_auth_asym_id?M._atom_site_auth_asym_id[L]:M._atom_site_label_asym_id?M._atom_site_label_asym_id[L]:void 0,$.lchain=M._atom_site_label_asym_id?M._atom_site_label_asym_id[L]:void 0,$.resi=M._atom_site_auth_seq_id?parseInt(M._atom_site_auth_seq_id[L]):M._atom_site_label_seq_id?M._atom_site_label_seq_id[L]:void 0,$.resn=M._atom_site_auth_comp_id?M._atom_site_auth_comp_id[L].trim():M._atom_site_label_comp_id?M._atom_site_label_comp_id[L].trim():void 0,$.atom=M._atom_site_auth_atom_id?M._atom_site_auth_atom_id[L].replace(/"/gm,""):M._atom_site_label_atom_id?M._atom_site_label_atom_id[L].replace(/"/gm,""):void 0,$.hetflag=!M._atom_site_group_pdb||M._atom_site_group_pdb[L]==="HETA"||M._atom_site_group_pdb[L]==="HETATM",M._atom_site_b_iso_or_equiv&&($.b=parseFloat(M._atom_site_b_iso_or_equiv[L]));let F="X";M._atom_site_type_symbol?F=M._atom_site_type_symbol[L].replace(/\(?\+?\d+.*/,""):M._atom_site_label&&(F=M._atom_site_label[L].split("_")[0].replace(/\(?\d+.*/,"")),$.elem=F[0].toUpperCase()+F.substring(1,2).toLowerCase(),$.bonds=[],$.ss="c",$.serial=L,$.bondOrder=[],$.properties={},w[w.length-1].push($)}if(M._pdbx_struct_oper_list_id!==void 0&&!C)for(let L=0;L<M._pdbx_struct_oper_list_id.length;L++){const $=parseFloat(M["_pdbx_struct_oper_list_matrix[1][1]"][L]),F=parseFloat(M["_pdbx_struct_oper_list_matrix[1][2]"][L]),W=parseFloat(M["_pdbx_struct_oper_list_matrix[1][3]"][L]),U=parseFloat(M["_pdbx_struct_oper_list_vector[1]"][L]),q=parseFloat(M["_pdbx_struct_oper_list_matrix[2][1]"][L]),H=parseFloat(M["_pdbx_struct_oper_list_matrix[2][2]"][L]),Y=parseFloat(M["_pdbx_struct_oper_list_matrix[2][3]"][L]),Z=parseFloat(M["_pdbx_struct_oper_list_vector[2]"][L]),X=parseFloat(M["_pdbx_struct_oper_list_matrix[3][1]"][L]),J=parseFloat(M["_pdbx_struct_oper_list_matrix[3][2]"][L]),Q=parseFloat(M["_pdbx_struct_oper_list_matrix[3][3]"][L]),G=parseFloat(M["_pdbx_struct_oper_list_vector[3]"][L]),te=new l.Matrix4($,F,W,U,q,H,Y,Z,X,J,Q,G);R[R.length-1].symmetries.push(te)}const j=function(L){const $=L.match("-");L=L.replace(/[-xyz]/g,"");const F=L.split("/");let W,U;return F[1]===void 0?U=1:U=parseInt(F[1]),F[0]===""?W=1:W=parseInt(F[0]),W/U*($?-1:1)};if(M._symmetry_equiv_pos_as_xyz!==void 0&&!C)for(let L=0;L<M._symmetry_equiv_pos_as_xyz.length;L++){const F=M._symmetry_equiv_pos_as_xyz[L].replace(/["' ]/g,"").split(",").map(function(H){return H.replace(/-/g,"+-")});let W=new l.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let H=0;H<3;H++){const Y=F[H].split("+");for(let Z=0;Z<Y.length;Z++){const X=Y[Z];if(X==="")continue;const J=j(X);X.match("x")?W.elements[H+0]=J:X.match("y")?W.elements[H+4]=J:X.match("z")?W.elements[H+8]=J:W.elements[H+12]=J}}const U=A.getMatrix4(),q=new l.Matrix4().getInverse(U,!0);W=new l.Matrix4().multiplyMatrices(W,q),W=new l.Matrix4().multiplyMatrices(U,W),R[R.length-1].symmetries.push(W)}}for(let M=0;M<w.length;M++)T&&!(v.duplicateAssemblyAtoms&&!v.dontConnectDuplicatedAtoms)&&(0,h.assignPDBBonds)(w[M],v),(0,i.computeSecondaryStructure)(w[M],v.hbondCutoff),(0,o.processSymmetries)(R[M].symmetries,w[M],v,R[M].cryst),v.duplicateAssemblyAtoms&&!v.dontConnectDuplicatedAtoms&&T&&(0,h.assignPDBBonds)(w[M],v);return w}},"./src/parsers/CUBE.ts"(e,t,n){n.r(t),n.d(t,{CUBE:()=>h});var i=n("./src/WebGL/index.ts"),o=n("./src/parsers/utils/assignBonds.ts"),l=n("./src/parsers/utils/anumToSymbol.ts");function h(d,m){m=m||{};const b=[[]];let v=d.split(/\r?\n/);const w=m.assignBonds===void 0?!0:m.assignBonds;if(v.length<6)return b;let C=v[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const R=Math.abs(parseFloat(C[0]));let T={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const E=T.origin=new i.Vector3(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3]));C=v[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),C=v[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const f=C[0]>0?.529177:1;E.multiplyScalar(f);const g=Math.abs(C[0]),S=new i.Vector3(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])).multiplyScalar(f);C=v[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const O=Math.abs(C[0]),D=new i.Vector3(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])).multiplyScalar(f);C=v[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const M=Math.abs(C[0]),_=new i.Vector3(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])).multiplyScalar(f);if(T.size={x:g,y:O,z:M},T.unit=new i.Vector3(S.x,D.y,_.z),S.y!=0||S.z!=0||D.x!=0||D.z!=0||_.x!=0||_.y!=0){T.matrix4=new i.Matrix4(S.x,D.x,_.x,0,S.y,D.y,_.y,0,S.z,D.z,_.z,0,0,0,0,1);let U=new i.Matrix4().makeTranslation(E.x,E.y,E.z);T.matrix4=T.matrix4.multiplyMatrices(U,T.matrix4),T.matrix=T.matrix4.matrix3FromTopLeft(),T.origin=new i.Vector3(0,0,0),T.unit=new i.Vector3(1,1,1)}b.modelData=[{cryst:T}],v=v.splice(6,R);for(var A=b[b.length-1].length,j=A+v.length,L=A;L<j;++L){var $={};$.serial=L;var F=v[L-A],W=F.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");$.elem=l.anumToSymbol[W[0]],$.x=parseFloat(W[2])*f,$.y=parseFloat(W[3])*f,$.z=parseFloat(W[4])*f,$.hetflag=!0,$.bonds=[],$.bondOrder=[],$.properties={},b[b.length-1].push($)}if(w)for(let U=0;U<b.length;U++)(0,o.assignBonds)(b[U],m);return b}},"./src/parsers/GRO.ts"(e,t,n){n.r(t),n.d(t,{GRO:()=>l});var i=n("./src/parsers/utils/assignPDBBonds.ts"),o=n("./src/parsers/utils/atomNameToElem.ts");function l(h,d){const m=[],b=h.split(/\r?\n|\r/);for(;b.length>0;){const v=parseInt(b[1]);if(b.length<3||isNaN(v)||v<=0||b.length<v+3)break;const C=[];m.push(C);let R=2;const T=C.length,E=T+v;for(let f=T;f<E;f++){const g=b[R++],S={};S.serial=f,S.atom=g.slice(10,15).trim(),S.elem=(0,o.atomNameToElem)(S.atom,!0),S.x=10*parseFloat(g.slice(20,28)),S.y=10*parseFloat(g.slice(28,36)),S.z=10*parseFloat(g.slice(36,44)),S.resi=parseInt(g.slice(0,5)),S.resn=g.slice(5,10).trim(),S.bonds=[],S.bondOrder=[],S.properties={},g.length>44&&(S.dx=10*parseFloat(g.slice(44,52)),S.dy=10*parseFloat(g.slice(52,60)),S.dz=10*parseFloat(g.slice(60,68))),C[f]=S}if(b.length<=R+3){const g=b[R++].trim().split(/\s+/);if(g.length===3){for(let S=0;S<3;S++)g[S]=(parseFloat(g[S])*10).toString();m.box=g}}b.splice(0,++R)}for(let v=0;v<m.length;v++)(0,i.assignPDBBonds)(m[v],d);return m}},"./src/parsers/LAMMPSTRJ.ts"(e,t,n){n.r(t),n.d(t,{LAMMPSTRJ:()=>l});var i=n("./src/parsers/utils/assignBonds.ts");const o={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function l(h,d){const m=[],b=h.split(/\r?\n|\r/);let v=0,w=0,C=0;for(;C<b.length-9;){for(var R=C;R<b.length;R++)if(b[R].match(/ITEM: NUMBER OF ATOMS/)&&(w=parseInt(b[R+1])),b[R].match(/ITEM: ATOMS/)){v=R+1;break}const T=b[v-1].replace("ITEM: ATOMS ","").split(" ");m.push([]);for(let E=v;E<v+w;E++){const f={},g={},S=b[E].split(" ");for(let O=0;O<S.length;O++){const D=o[T[O]];D!==void 0&&(D==="serial"?f[D]=parseInt(S[O]):D==="x"||D==="y"||D==="z"?f[D]=parseFloat(S[O]):D==="charge"||D==="radius"?g[D]=parseFloat(S[O]):f[D]=S[O]),f.properties=g,f.bonds=[],f.bondOrder=[]}m[m.length-1][E-v]=f}C=v+w-1}if(d.assignBonds)for(let T=0;T<m.length;T++)(0,i.assignBonds)(m[T],d);return m}},"./src/parsers/MMTF.ts"(e,t,n){n.r(t),n.d(t,{MMTFparser:()=>w});var i=n("./src/utilities.ts"),o=n("./src/WebGL/index.ts"),l=n("./src/parsers/utils/computeSecondaryStructure.ts"),h=n("./src/parsers/utils/processSymmetries.ts"),d=n("./src/vendor/mmtf.js"),m=function(C){return String.fromCharCode.apply(null,C).replace(/\0/g,"")},b=function(C){return C==0||C==2||C==4?"h":C==3?"s":"c"};let v=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function w(C,R){var T=!R.keepH,E=R.altLoc?R.altLoc:"A",f=!!R.noSecondaryStructure,g=!R.noComputeSecondaryStructure,S=!R.doAssembly,O=R.assemblyIndex?R.assemblyIndex:0;typeof C=="string"?C=(0,i.base64ToArray)(C):C=new Uint8Array(C);var D=d.decode(C),M=[[]],_=M.modelData=[],A=0,j=0,L=0,$=D.secStructList,F=D.bFactorList,W=D.altLocList,U=D.occupancyList,q=D.bondAtomList,H=D.bondOrderList,Y=D.numModels;if(Y==0)return M;R.multimodel||(Y=1);var Z,X,J,Q,G,te,ue=[];if(!S&&D.bioAssemblyList&&D.bioAssemblyList.length>0){var de=D.bioAssemblyList[O].transformList;for(Z=0,te=de.length;Z<te;Z++){var xe=new o.Matrix4(de[Z].matrix);xe.transpose(),ue.push(xe)}}var ve=null;if(D.unitCell){var Se=D.unitCell;ve={a:Se[0],b:Se[1],c:Se[2],alpha:Se[3],beta:Se[4],gamma:Se[5]}}let Ee=[];D.entityList.forEach(Te=>{Te.chainIndexList.forEach(le=>{Ee[le]=Te.type=="polymer"})});var he=0;for(G=0;G<Y;G++){var Re=D.chainsPerModel[G],je=M[M.length-1],Ce=[];for(_.push({symmetries:ue,cryst:ve}),Z=0;Z<Re;++Z){var Le=D.groupsPerChain[A],me=m(D.chainIdList.subarray(A*4,A*4+4));D.chainNameList&&(me=m(D.chainNameList.subarray(A*4,A*4+4)));var Ie=j,Ve="";for(X=0;X<Le;++X){var nt=D.groupList[D.groupTypeList[j]],it=nt.atomNameList.length,ot=0,at=!1,Je=!1;if($){ot=$[j];var rt=b(ot);(j==0||rt!=Ve)&&(at=!0),Ve=rt;var et=j+1;(et>=$.length||b($[et]!=rt))&&(Je=!0)}var Qe=D.groupIdList[j],ct=nt.groupName;let Te=nt.chemCompType;var pt=L;let le=v.has(Te)||!Ee[A];for(J=0;J<it;++J){var oe=nt.elementList[J];if(T&&oe=="H"){L+=1;continue}var fe="";F&&(fe=F[L]);var pe="";W&&W[L]&&(pe=String.fromCharCode(W[L]));var Be="";if(U&&(Be=U[L]),pe!=""&&pe!=E&&E!="*"){L+=1;continue}var ke=D.atomIdList[L],Ke=nt.atomNameList[J],Ye=0;nt.atomChargeList&&(Ye=nt.atomChargeList[J]);var ie=D.xCoordList[L],Ae=D.yCoordList[L],Ne=D.zCoordList[L];Ce[L]=je.length,je.push({resn:ct,x:ie,y:Ae,z:Ne,elem:oe,hetflag:le,chain:me,resi:Qe,icode:pe,rescode:Qe+(pe!=" "?"^"+pe:""),serial:ke,altLoc:pe,index:L,atom:Ke,bonds:[],ss:b(ot),ssbegin:at,ssend:Je,bondOrder:[],properties:{charge:Ye,occupancy:Be},b:fe}),L+=1}var Ze=nt.bondAtomList;for(J=0,Q=nt.bondOrderList.length;J<Q;++J){var _e=pt+Ze[J*2],Ge=pt+Ze[J*2+1],ae=nt.bondOrderList[J],He=Ce[_e],tt=Ce[Ge],K=je[He],Me=je[tt];K&&Me&&(K.bonds.push(tt),K.bondOrder.push(ae),Me.bonds.push(He),Me.bondOrder.push(ae))}j+=1}for(j=Ie,X=0;X<Le;++X)j+=1;A+=1}if(q)for(let Te=he,le=q.length;Te<le;Te+=2){let we=q[Te],Fe=q[Te+1],yt=H?H[Te/2]:1;if(we>=L){he=Te;break}let mt=Ce[we],ft=Ce[Fe],Ot=je[mt],nr=je[ft];Ot&&nr&&(Ot.bonds.push(ft),Ot.bondOrder.push(yt),nr.bonds.push(mt),nr.bondOrder.push(yt))}R.multimodel&&(R.onemol||M.push([]))}if(!S)for(let Te=0;Te<M.length;Te++)(0,h.processSymmetries)(_[Te].symmetries,M[Te],R,_[Te].cryst);return g&&!f&&(0,l.computeSecondaryStructure)(M,R.hbondCutoff),M}},"./src/parsers/MOL2.ts"(e,t,n){n.r(t),n.d(t,{MOL2:()=>o});let i={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function o(l,h){var d=[[]],m=!1;typeof h.keepH<"u"&&(m=!h.keepH);var b=l.search(/@<TRIPOS>MOLECULE/),v=l.search(/@<TRIPOS>ATOM/);if(b==-1||v==-1)return d;for(var w=l.substring(b).split(/\r?\n|\r/);w.length>0;){var C=[],R=w[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),T=parseInt(R[0]),E=0;R.length>1&&(E=parseInt(R[1]));var f=4,g;for(g=3;g<w.length;g++)if(w[g]=="@<TRIPOS>ATOM"){f=g+1;break}var S=d[d.length-1].length,O=S+T,D;for(g=S;g<O;g++){D=w[f++],R=D.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var M={},_=R[5];if(i[_]!==void 0?_=i[_]:(_=_.split(".")[0],_=_[0].toUpperCase()+_.substring(1).toLowerCase()),M.atom=R[1],M.elem=_,!(M.elem=="H"&&m)){var A=d[d.length-1].length,j=parseInt(R[0]);M.serial=j,M.x=parseFloat(R[2]),M.y=parseFloat(R[3]),M.z=parseFloat(R[4]),M.atom=R[5];var L=parseFloat(R[8]);M.index=A,M.bonds=[],M.bondOrder=[],M.properties={charge:L,partialCharge:L},C[j]=A,d[d.length-1].push(M)}}for(var $=!1;f<w.length;)if(w[f++]=="@<TRIPOS>BOND"){$=!0;break}if($&&E)for(g=0;g<E;g++){D=w[f++],R=D.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var F=parseInt(R[1]),W=d[d.length-1][C[F]],U=parseInt(R[2]),q=d[d.length-1][C[U]],H=parseInt(R[3]);isNaN(H)&&(H=1),W!==void 0&&q!==void 0&&(W.bonds.push(C[U]),W.bondOrder.push(H),q.bonds.push(C[F]),q.bondOrder.push(H))}if(h.multimodel){h.onemol||d.push([]),w.splice(0,f),l=w.join(`
`);continue}else break}return d}},"./src/parsers/PDB.ts"(e,t,n){n.r(t),n.d(t,{PDB:()=>o});var i=n("./src/parsers/utils/getSinglePDB.ts");function o(l,h){h=h||{};var d=[],m={};d.modelData=[];for(var b=l.split(/\r?\n|\r/);b.length>0;){var v=(0,i.getSinglePDB)(b,h,m),w=v[0],C=v[1];if(b=v[2],w.length!=0){if(h.multimodel&&h.onemol&&d.length>0)for(var R=d[0].length,T=0;T<w.length;T++){var E=w[T];E.index=T;for(var f=0;f<E.bonds.length;f++)E.bonds[f]+=R;d[0].push(E)}else d.modelData.push(C),d.push(w);if(!h.multimodel)break}}return d}},"./src/parsers/PQR.ts"(e,t,n){n.r(t),n.d(t,{PQR:()=>l});var i=n("./src/parsers/utils/assignPDBBonds.ts"),o=n("./src/parsers/utils/computeSecondaryStructure.ts");function l(h,d){var m=[[]],b=!d.noSecondaryStructure;m.modelData=[{symmetries:[]}];var v=[],w=h.split(/\r?\n|\r/),C;for(let $=0;$<w.length;$++){C=w[$].replace(/^\s*/,"");var R=C.substring(0,6);if(R.indexOf("END")==0)if(d.multimodel){d.onemol||m.push([]);continue}else break;else if(R=="ATOM  "||R=="HETATM"){var T;let F=parseInt(C.substring(6,11)),W=C.substring(12,16).replace(/ /g,""),U=C.substring(17,20).trim(),q=C.substring(21,22),H=parseInt(C.substring(22,26));var E=C.substring(30).trim().split(/\s+/),f=parseFloat(E[0]),g=parseFloat(E[1]),S=parseFloat(E[2]),O=parseFloat(E[3]),D=parseFloat(E[4]),M=W[0];W.length>1&&W[1].toUpperCase()!=W[1]&&(M=W.substring(0,2)),C[0]=="H"?T=!0:T=!1,v[F]=m[m.length-1].length,m[m.length-1].push({resn:U,x:f,y:g,z:S,elem:M,hetflag:T,chain:q,resi:H,serial:F,atom:W,bonds:[],ss:"c",bondOrder:[],properties:{charge:O,partialCharge:O,radius:D},pdbline:C})}else if(R=="CONECT"){var _=parseInt(C.substring(6,11)),A=m[m.length-1][v[_]];for(let F=0;F<4;F++){var j=parseInt(C.substring([11,16,21,26][F],[11,16,21,26][F]+5)),L=m[m.length-1][v[j]];A!==void 0&&L!==void 0&&(A.bonds.push(v[j]),A.bondOrder.push(1))}}}for(let $=0;$<m.length;$++)(0,i.assignPDBBonds)(m[$],d),b&&(0,o.computeSecondaryStructure)(m[$],d.hbondCutoff);return m}},"./src/parsers/PRMTOP.ts"(e,t,n){n.r(t),n.d(t,{PRMTOP:()=>i});function i(o){var l=[],h,d=0,m=o.split(/\r?\n|\r/);if(m.length>0&&m[0].includes("VERSION")){var b=m.filter(function(S){return S.includes("POINTERS")||S.includes("ATOM_NAME")||S.includes("CHARGE")||S.includes("RADII")||S.includes("BONDS_INC_HYDROGEN")||S.includes("BONDS_WITHOUT_HYDROGEN")||S.includes("RESIDUE_LABEL")||S.includes("RESIDUE_POINTER")}),v=E("POINTERS");if(v==-1)return[];var w=f(v),C=parseInt(m[v+1].slice(0,w[1]));let g=parseInt(m[v+2].slice(w[1],w[0]+w[1]));if(isNaN(C)||C<=0)return[];if(v=E("ATOM_NAME"),v==-1)return[];w=f(v);var R=w[0];for(let S=0;S<C/w[0];S++){S==parseInt(C/w[0])&&(R=C%w[0]);for(let O=0;O<R;O++){let D={},M={charge:"",radii:""};D.serial=d,D.x=0,D.y=0,D.z=0,D.atom=m[v+1].slice(w[1]*O,w[1]*(O+1)).trim(),D.elem=m[v+1].slice(w[1]*O,w[1]*O+1).trim(),D.properties=M,D.bonds=[],D.bondOrder=[],D.index=l.length,l.push(D),d++}v++}if(v=E("CHARGE"),v!=-1){w=f(v),d=0,R=w[0];for(let S=0;S<C/w[0];S++){S==parseInt(C/w[0])&&(R=C%w[0]);for(let O=0;O<R;O++)l[d].properties.charge=parseFloat(m[v+1].slice(w[1]*O,w[1]*(O+1))),d++;v++}}v=E("RESIDUE_POINTER");var T=[];if(v!=-1){w=f(v),R=w[0],v+=1;for(let S=0;S<g/w[0];S++){S==parseInt(g/w[0])&&(R=g%w[0]);for(let O=0;O<R;O++)T.push(parseInt(m[v].slice(w[1]*O,w[1]*(O+1))));v++}if(v=E("RESIDUE_LABEL"),v!=-1){let S=[];w=f(v),R=w[0],v+=1;for(let _=0;_<g/w[0];_++){_==parseInt(g/w[0])&&(R=g%w[0]);for(let A=0;A<R;A++)S.push(m[v].slice(w[1]*A,w[1]*(A+1)).trim());v++}let O=0,D=0,M="";T.push(l.length+1);for(let _=0;_<l.length;_++)_+1>=T[O]&&(M=S[O],O+=1,D+=1),l[_].resi=D,l[_].resn=M}}if(v=E("RADII"),v!=-1){w=f(v),d=0,R=w[0];for(let S=0;S<C/w[0];S++){S==parseInt(C/w[0])&&(R=C%w[0]);for(let O=0;O<R;O++)l[d].properties.radii=parseFloat(m[v+1].slice(w[1]*O,w[1]*(O+1))),d++;v++}}if(v=E("BONDS_WITHOUT_HYDROGEN"),v!=-1)for(w=f(v),d=0,R=w[0],v=v+1;!m[v].match(/^%FLAG/);){m[v+1].match(/^%FLAG/)&&(R=C%w[0]);for(let S=0;S<R;S++)d%3==0?h=parseInt(m[v].slice(w[1]*S,w[1]*(S+1))/3):d%3==1&&(l[h].bonds.push(parseInt(m[v].slice(w[1]*S,w[1]*(S+1))/3)),l[h].bondOrder.push(1)),d++;v++}if(v=E("BONDS_INC_HYDROGEN"),v!=-1)for(w=f(v),d=0,R=w[0],v=v+1;!m[v].match(/^%FLAG/);){m[v+1].match(/^%FLAG/)&&(R=C%w[0]);for(let S=0;S<R;S++)d%3==0?h=parseInt(m[v].slice(w[1]*S,w[1]*(S+1))/3):d%3==1&&(l[h].bonds.push(parseInt(m[v].slice(w[1]*S,w[1]*(S+1))/3)),l[h].bonds.push(1)),d++;v++}}else return[];function E(g){var S=m.indexOf(b.filter(function(O){return O.includes(g)})[0]);if(Number.isInteger(S)&&S>0){for(;!m[S].includes("FORMAT");)S++;return S}else return-1}function f(g){var S=m[g].match(/\((\d*)\S*/),O=m[g].match(/[a-zA-Z](\d*)\)\s*/);return O==null&&(O=m[g].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(S[1]),parseInt(O[1])]}return[l]}},"./src/parsers/SDF.ts"(e,t,n){n.r(t),n.d(t,{SDF:()=>l});var i=function(h,d){var m=[[]],b=!1;for(typeof d.keepH<"u"&&(b=!d.keepH);h.length>0&&!(h.length<4);){var v=parseInt(h[3].substring(0,3));if(isNaN(v)||v<=0)break;var w=parseInt(h[3].substring(3,6)),C=4;if(h.length<4+v+w)break;var R=[],T=m[m.length-1].length,E=T+v,f,g;for(f=T;f<E;f++,C++){g=h[C];var S={},O=g.substring(31,34).replace(/ /g,"");S.atom=S.elem=O[0].toUpperCase()+O.substring(1).toLowerCase(),(S.elem!=="H"||!b)&&(S.serial=f,R[f]=m[m.length-1].length,S.x=parseFloat(g.substring(0,10)),S.y=parseFloat(g.substring(10,20)),S.z=parseFloat(g.substring(20,30)),S.hetflag=!0,S.bonds=[],S.bondOrder=[],S.properties={},S.index=m[m.length-1].length,m[m.length-1].push(S))}for(f=0;f<w;f++,C++){g=h[C];var D=R[parseInt(g.substring(0,3))-1+T],M=R[parseInt(g.substring(3,6))-1+T],_=parseFloat(g.substring(6));typeof D<"u"&&typeof M<"u"&&(m[m.length-1][D].bonds.push(M),m[m.length-1][D].bondOrder.push(_),m[m.length-1][M].bonds.push(D),m[m.length-1][M].bondOrder.push(_))}if(d.multimodel){for(d.onemol||m.push([]);h[C]!=="$$$$"&&C<h.length;)C++;h.splice(0,++C)}else break}return m},o=function(h,d){var m=[[]],b=!1;for(typeof d.keepH<"u"&&(b=!d.keepH);h.length>0&&!(h.length<8||!h[4].startsWith("M  V30 BEGIN CTAB")||!h[5].startsWith("M  V30 COUNTS")||h[5].length<14);){var v=h[5].substring(13).match(/\S+/g);if(v.length<2)break;var w=parseInt(v[0]);if(isNaN(w)||w<=0)break;var C=parseInt(v[1]),R=7;if(h.length<8+w+C)break;var T=[],E=m[m.length-1].length,f=E+w,g,S;for(g=E;g<f;g++,R++){S=h[R];var O=S.substring(6).match(/\S+/g);if(O.length>4){var D={},M=O[1].replace(/ /g,"");D.atom=D.elem=M[0].toUpperCase()+M.substring(1).toLowerCase(),(D.elem!=="H"||!b)&&(D.serial=g,T[g]=m[m.length-1].length,D.x=parseFloat(O[2]),D.y=parseFloat(O[3]),D.z=parseFloat(O[4]),D.hetflag=!0,D.bonds=[],D.bondOrder=[],D.properties={},D.index=m[m.length-1].length,m[m.length-1].push(D))}}if(h[R]==="M  V30 END ATOM")R++;else break;if(C!==0&&h[R]==="M  V30 BEGIN BOND")R++;else break;for(g=0;g<C;g++,R++){S=h[R];var _=S.substring(6).match(/\S+/g);if(_.length>3){var A=T[parseInt(_[2])-1+E],j=T[parseInt(_[3])-1+E],L=parseFloat(_[1]);typeof A<"u"&&typeof j<"u"&&(m[m.length-1][A].bonds.push(j),m[m.length-1][A].bondOrder.push(L),m[m.length-1][j].bonds.push(A),m[m.length-1][j].bondOrder.push(L))}}if(d.multimodel){for(d.onemol||m.push([]);h[R]!=="$$$$"&&R<h.length;)R++;h.splice(0,++R)}else break}return m};function l(h,d){var m="V2000",b=h.split(/\r?\n|\r/);return b.length>3&&b[3].length>38&&(m=b[3].substring(34,39)),m==="V2000"?i(b,d):m==="V3000"?o(b,d):[[""]]}},"./src/parsers/VASP.ts"(e,t,n){n.r(t),n.d(t,{VASP:()=>l});var i=n("./src/WebGL/index.ts"),o=n("./src/parsers/utils/assignBonds.ts");function l(h,d={}){var m=[[]],b={};const v=d.assignBonds===void 0?!0:d.assignBonds;var w=h.replace(/^\s+/,"").split(/\r?\n/);if(w.length<3)return m;if(w[1].match(/\d+/))b.length=parseFloat(w[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),m;if(b.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),m;b.xVec=new Float32Array(w[2].replace(/^\s+/,"").split(/\s+/)),b.yVec=new Float32Array(w[3].replace(/^\s+/,"").split(/\s+/)),b.zVec=new Float32Array(w[4].replace(/^\s+/,"").split(/\s+/));var C=new i.Matrix3(b.xVec[0],b.xVec[1],b.xVec[2],b.yVec[0],b.yVec[1],b.yVec[2],b.zVec[0],b.zVec[1],b.zVec[2]);C.multiplyScalar(b.length),m.modelData=[{symmetries:[],cryst:{matrix:C}}];var R=w[5].trim().split(/\s+/),T=new Int16Array(w[6].trim().split(/\s+/)),E=w[7].trim(),f=!1;if(E.match(/S/)&&(f=!0,E=w[8].trim()),E.toLowerCase()[0]=="c")E="cartesian";else if(E.toLowerCase()[0]=="d")E="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),m;if(R.length!=T.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(R),console.log(T),m;f?w.splice(0,9):w.splice(0,8);for(var g=0,S=0,O=R.length;S<O;S++){for(var D=R[S],M=0,_=T[S];M<_;M++){var A=new Float32Array(w[g+M].trim().split(/\s+/)),j={};j.elem=D,E=="cartesian"?(j.x=b.length*A[0],j.y=b.length*A[1],j.z=b.length*A[2]):(j.x=b.length*(A[0]*b.xVec[0]+A[1]*b.yVec[0]+A[2]*b.zVec[0]),j.y=b.length*(A[0]*b.xVec[1]+A[1]*b.yVec[1]+A[2]*b.zVec[1]),j.z=b.length*(A[0]*b.xVec[2]+A[1]*b.yVec[2]+A[2]*b.zVec[2])),j.bonds=[],j.bondOrder=[],m[0].push(j)}g+=T[S]}if(v)for(let L=0;L<m.length;L++)(0,o.assignBonds)(m[L],d);return m}},"./src/parsers/XYZ.ts"(e,t,n){n.r(t),n.d(t,{XYZ:()=>l});var i=n("./src/WebGL/index.ts"),o=n("./src/parsers/utils/assignBonds.ts");function l(h,d){d=d||{};for(var m=[[]],b=d.assignBonds===void 0?!0:d.assignBonds,v=h.trimStart().split(/\r?\n|\r/);v.length>0&&!(v.length<3);){var w=parseInt(v[0]);if(isNaN(w)||w<=0||v.length<w+2)break;var C=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,R=C.exec(v[1]);if(R!=null&&R.length>1){var T=new Float32Array(R[1].split(/\s+/)),E=new i.Matrix3(T[0],T[3],T[6],T[1],T[4],T[7],T[2],T[5],T[8]);m.modelData=[{cryst:{matrix:E}}]}for(var f=2,g=m[m.length-1].length,S=g+w,O=g;O<S;O++){var D=v[f++],M=D.trim().split(/\s+/),_={};_.serial=O;var A=M[0];_.atom=_.elem=A[0].toUpperCase()+A.substring(1,2).toLowerCase(),_.x=parseFloat(M[1]),_.y=parseFloat(M[2]),_.z=parseFloat(M[3]),_.hetflag=!0,_.bonds=[],_.bondOrder=[],_.properties={},m[m.length-1][O]=_,M.length>=7&&(_.dx=parseFloat(M[4]),_.dy=parseFloat(M[5]),_.dz=parseFloat(M[6]))}if(d.multimodel)m.push([]),v.splice(0,f);else break}if(b)for(let L=0;L<m.length;L++)(0,o.assignBonds)(m[L],d);if(d.onemol){var j=m;m=[],m.push(j[0]);for(let L=1;L<j.length;L++){let $=m[0].length;for(let F=0;F<j[L].length;F++){let W=j[L][F];for(let U=0;U<W.bonds.length;U++)W.bonds[U]=W.bonds[U]+$;W.index=m[0].length,W.serial=m[0].length,m[0].push(W)}}}return m}},"./src/parsers/cifutils/category.ts"(e,t,n){n.r(t),n.d(t,{Category:()=>o});var i=n("./src/parsers/cifutils/decoder.ts");function o(l){const h=Object.create(null),d=Object.create(null);for(const m of l.columns)h[m.name]=m;return{rowCount:l.rowCount,name:l.name.substring(1),fieldNames:l.columns.map(m=>m.name),getField(m){const b=h[m];if(b)return d[m]||(d[m]=(0,i.decode)(b.data)),d[m]}}}},"./src/parsers/cifutils/decoder.ts"(e,t,n){n.r(t),n.d(t,{decode:()=>h});var i=n("./src/parsers/cifutils/encoding.ts");const o=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function l($,F){const W=new ArrayBuffer($.length),U=new Uint8Array(W);for(let q=0,H=$.length;q<H;q+=F)for(let Y=0;Y<F;Y++)U[q+F-Y-1]=$[q+Y];return W}function h($){let F=$.data;for(let W=$.encoding.length-1;W>=0;W--)F=d(F,$.encoding[W]);return F}function d($,F){switch(F.kind){case"ByteArray":switch(F.type){case i.Encoding.IntDataType.Uint8:return $;case i.Encoding.IntDataType.Int8:return v($);case i.Encoding.IntDataType.Int16:return C($);case i.Encoding.IntDataType.Uint16:return R($);case i.Encoding.IntDataType.Int32:return T($);case i.Encoding.IntDataType.Uint32:return E($);case i.Encoding.FloatDataType.Float32:return f($);case i.Encoding.FloatDataType.Float64:return g($);default:throw new Error("unreachable")}case"FixedPoint":return S($,F);case"IntervalQuantization":return O($,F);case"RunLength":return D($,F);case"Delta":return M($,F);case"IntegerPacking":return j($,F);case"StringArray":return L($,F)}}function m($,F){switch($){case i.Encoding.IntDataType.Int8:return new Int8Array(F);case i.Encoding.IntDataType.Int16:return new Int16Array(F);case i.Encoding.IntDataType.Int32:return new Int32Array(F);case i.Encoding.IntDataType.Uint8:return new Uint8Array(F);case i.Encoding.IntDataType.Uint16:return new Uint16Array(F);case i.Encoding.IntDataType.Uint32:return new Uint32Array(F);default:return new Int32Array(F)}}function b($,F){switch($){case i.Encoding.FloatDataType.Float32:return new Float32Array(F);case i.Encoding.FloatDataType.Float64:return new Float64Array(F);default:return new Float64Array(F)}}function v($){return new Int8Array($.buffer,$.byteOffset)}function w($,F,W){return($.byteOffset!=0||$.byteLength!=$.buffer.byteLength)&&($=new Uint8Array($)),o?new W($.buffer):new W(l($,F))}function C($){return w($,2,Int16Array)}function R($){return w($,2,Uint16Array)}function T($){return w($,4,Int32Array)}function E($){return w($,4,Uint32Array)}function f($){return w($,4,Float32Array)}function g($){return w($,8,Float64Array)}function S($,F){const W=$.length,U=b(F.srcType,W),q=1/F.factor;for(let H=0;H<W;H++)U[H]=q*$[H];return U}function O($,F){const W=$.length,U=b(F.srcType,W),q=(F.max-F.min)/(F.numSteps-1),H=F.min;for(let Y=0;Y<W;Y++)U[Y]=H+q*$[Y];return U}function D($,F){const W=m(F.srcType,F.srcSize);let U=0;for(let q=0,H=$.length;q<H;q+=2){const Y=$[q],Z=$[q+1];for(let X=0;X<Z;++X)W[U++]=Y}return W}function M($,F){const W=$.length,U=m(F.srcType,W);if(!W)return $;U[0]=$[0]+(F.origin|0);for(let q=1;q<W;++q)U[q]=$[q]+U[q-1];return U}function _($,F){const W=F.byteCount===1?127:32767,U=-W-1,q=$.length,H=new Int32Array(F.srcSize);let Y=0,Z=0;for(;Y<q;){let X=0,J=$[Y];for(;J===W||J===U;)X+=J,Y++,J=$[Y];X+=J,H[Z]=X,Y++,Z++}return H}function A($,F){const W=F.byteCount===1?255:65535,U=$.length,q=new Int32Array(F.srcSize);let H=0,Y=0;for(;H<U;){let Z=0,X=$[H];for(;X===W;)Z+=X,H++,X=$[H];Z+=X,q[Y]=Z,H++,Y++}return q}function j($,F){return $.length===F.srcSize?$:F.isUnsigned?A($,F):_($,F)}function L($,F){const W=h({encoding:F.offsetEncoding,data:F.offsets}),U=h({encoding:F.dataEncoding,data:$}),q=F.stringData,H=new Array(W.length);H[0]="";for(let X=1,J=W.length;X<J;X++)H[X]=q.substring(W[X-1],W[X]);let Y=0;const Z=new Array(U.length);for(let X=0,J=U.length;X<J;X++)Z[Y++]=H[U[X]+1];return Z}},"./src/parsers/cifutils/encoding.ts"(e,t,n){n.r(t),n.d(t,{Encoding:()=>o,VERSION:()=>i});const i="0.3.0";var o;(function(l){(function(m){m[m.Int8=1]="Int8",m[m.Int16=2]="Int16",m[m.Int32=3]="Int32",m[m.Uint8=4]="Uint8",m[m.Uint16=5]="Uint16",m[m.Uint32=6]="Uint32"})(l.IntDataType||(l.IntDataType={})),(function(m){m[m.Float32=32]="Float32",m[m.Float64=33]="Float64"})(l.FloatDataType||(l.FloatDataType={}));function h(m){let b;return m instanceof Int8Array?b=l.IntDataType.Int8:m instanceof Int16Array?b=l.IntDataType.Int16:m instanceof Int32Array?b=l.IntDataType.Int32:m instanceof Uint8Array?b=l.IntDataType.Uint8:m instanceof Uint16Array?b=l.IntDataType.Uint16:m instanceof Uint32Array?b=l.IntDataType.Uint32:m instanceof Float32Array?b=l.FloatDataType.Float32:m instanceof Float64Array?b=l.FloatDataType.Float64:b=l.IntDataType.Int32,b}l.getDataType=h;function d(m){if(m instanceof Int8Array||m instanceof Int16Array||m instanceof Int32Array)return!0;for(let b=0,v=m.length;b<v;b++)if(b<0)return!1;return!0}l.isSignedIntegerDataType=d})(o||(o={}))},"./src/parsers/index.ts"(e,t,n){n.r(t),n.d(t,{Parsers:()=>S,bondLength:()=>g.bondLength,setBondLength:()=>g.setBondLength});var i=n("./src/parsers/VASP.ts"),o=n("./src/parsers/CUBE.ts"),l=n("./src/parsers/XYZ.ts"),h=n("./src/parsers/SDF.ts"),d=n("./src/parsers/CDJSON.ts"),m=n("./src/parsers/CIF.ts"),b=n("./src/parsers/MOL2.ts"),v=n("./src/parsers/PDB.ts"),w=n("./src/parsers/PQR.ts"),C=n("./src/parsers/MMTF.ts"),R=n("./src/parsers/PRMTOP.ts"),T=n("./src/parsers/GRO.ts"),E=n("./src/parsers/LAMMPSTRJ.ts"),f=n("./src/parsers/BCIF.ts"),g=n("./src/parsers/utils/bondLength.ts");const S={vasp:i.VASP,VASP:i.VASP,cube:o.CUBE,CUBE:o.CUBE,xyz:l.XYZ,XYZ:l.XYZ,sdf:h.SDF,SDF:h.SDF,json:d.CDJSON,cdjson:d.CDJSON,CDJSON:d.CDJSON,mcif:m.CIF,cif:m.CIF,CIF:m.CIF,mol2:b.MOL2,MOL2:b.MOL2,pdb:v.PDB,PDB:v.PDB,pdbqt:v.PDB,PDBQT:v.PDB,pqr:w.PQR,PQR:w.PQR,mmtf:C.MMTFparser,MMTF:C.MMTFparser,prmtop:R.PRMTOP,PRMTOP:R.PRMTOP,gro:T.GRO,GRO:T.GRO,lammpstrj:E.LAMMPSTRJ,LAMMPSTRJ:E.LAMMPSTRJ,bcif:f.BCIF,BCIF:f.BCIF}},"./src/parsers/utils/anumToSymbol.ts"(e,t,n){n.r(t),n.d(t,{anumToSymbol:()=>i});const i={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}},"./src/parsers/utils/areConnected.ts"(e,t,n){n.r(t),n.d(t,{areConnected:()=>l});var i=n("./src/parsers/utils/bondLength.ts");const o=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function l(h,d,m){if(m&&m.unboundCations&&(o.has(h.elem)||o.has(d.elem)))return!1;let b=(0,i.bondLength)(h.elem)+(0,i.bondLength)(d.elem);b+=.25,b*=b;let v=h.x-d.x;if(v*=v,v>b)return!1;let w=h.y-d.y;if(w*=w,w>b)return!1;let C=h.z-d.z;if(C*=C,C>b)return!1;const R=v+w+C;return!(isNaN(R)||R<.5||R>b||h.altLoc!==d.altLoc&&h.altLoc.trim()!==""&&d.altLoc.trim()!=="")}},"./src/parsers/utils/assignBackboneHBonds.ts"(e,t,n){n.r(t),n.d(t,{assignBackboneHBonds:()=>i});function i(o,l){const h=l||3.2,d=h*h,m=[];for(let b=0,v=o.length;b<v;b++){o[b].index=b;const w=o[b];!w.hetflag&&(w.atom==="N"||w.atom==="O")&&(m.push(w),w.hbondOther=null,w.hbondDistanceSq=Number.POSITIVE_INFINITY)}m.sort(function(b,v){return b.z-v.z});for(let b=0,v=m.length;b<v;b++){const w=m[b];for(let C=b+1;C<v;C++){const R=m[C],T=R.z-w.z;if(T>h)break;if(R.atom==w.atom)continue;const E=Math.abs(R.y-w.y);if(E>h)continue;const f=Math.abs(R.x-w.x);if(f>h)continue;const g=f*f+E*E+T*T;g>d||R.chain==w.chain&&Math.abs(R.resi-w.resi)<4||(g<w.hbondDistanceSq&&(w.hbondOther=R,w.hbondDistanceSq=g),g<R.hbondDistanceSq&&(R.hbondOther=w,R.hbondDistanceSq=g))}}}},"./src/parsers/utils/assignBonds.ts"(e,t,n){n.r(t),n.d(t,{assignBonds:()=>h});var i=n("./src/parsers/utils/areConnected.ts");const o=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],l=4.95;function h(d,m){for(let w=0,C=d.length;w<C;w++)d[w].index||(d[w].index=w);const b={x:{y:{z:[]}}};for(let w=0;w<d.length;w++){const C=d[w],R=Math.floor(C.x/l),T=Math.floor(C.y/l),E=Math.floor(C.z/l);b[R]||(b[R]={}),b[R][T]||(b[R][T]={}),b[R][T][E]||(b[R][T][E]=[]),b[R][T][E].push(C)}function v(w,C){for(let R=0;R<w.length;R++){const T=w[R];for(let E=0;E<C.length;E++){const f=C[E];if((0,i.areConnected)(T,f,m)){const g=T.bonds.indexOf(f.index),S=f.bonds.indexOf(T.index);g===-1&&S===-1?(T.bonds.push(f.index),T.bondOrder.push(1),f.bonds.push(T.index),f.bondOrder.push(1)):g===-1?(T.bonds.push(f.index),T.bondOrder.push(f.bondOrder[S])):S===-1&&(f.bonds.push(T.index),f.bondOrder.push(T.bondOrder[g]))}}}}for(let w in b){const C=parseInt(w);for(let R in b[C]){const T=parseInt(R);for(let E in b[C][T]){const f=parseInt(E),g=b[C][T][f];for(let S=0;S<g.length;S++){const O=g[S];for(let D=S+1;D<g.length;D++){const M=g[D];(0,i.areConnected)(O,M,m)&&O.bonds.indexOf(M.index)==-1&&(O.bonds.push(M.index),O.bondOrder.push(1),M.bonds.push(O.index),M.bondOrder.push(1))}}for(let S=0;S<o.length;S++){const O=o[S];if(!b[C+O.x]||!b[C+O.x][T+O.y]||!b[C+O.x][T+O.y][f+O.z])continue;const D=b[C+O.x][T+O.y][f+O.z];v(g,D)}}}}}},"./src/parsers/utils/assignPDBBonds.ts"(e,t,n){n.r(t),n.d(t,{assignPDBBonds:()=>h});var i=n("./src/parsers/utils/areConnected.ts"),o=n("./src/parsers/utils/assignBonds.ts"),l=n("./src/parsers/utils/standardResidues.ts");function h(d,m){const b=[],v=[];for(let T=0,E=d.length;T<E;T++){const f=d[T];f.index=T,f.hetflag||!l.standardResidues.has(f.resn)?v.push(f):b.push(f)}(0,o.assignBonds)(v,m),b.sort(function(T,E){return T.chain!==E.chain?T.chain<E.chain?-1:1:T.resi-E.resi});let w=-1,C=-1,R;for(let T=0,E=b.length;T<E;T++){const f=b[T];f.resi!==w&&(w=f.resi,R||C++,R=!1),f.reschain=C;for(let g=T+1;g<b.length;g++){const S=b[g];if(S.chain!==f.chain||S.resi-f.resi>1)break;(0,i.areConnected)(f,S,m)&&(f.bonds.indexOf(S.index)===-1&&(f.bonds.push(S.index),f.bondOrder.push(1),S.bonds.push(f.index),S.bondOrder.push(1)),f.resi!==S.resi&&(R=!0))}}}},"./src/parsers/utils/atomNameToElem.ts"(e,t,n){n.r(t),n.d(t,{atomNameToElem:()=>o});var i=n("./src/parsers/utils/bondLength.ts");function o(l,h){let d=l.replace(/ /g,"");return d.length>0&&d[0]==="H"&&d!=="Hg"&&d!=="He"&&d!=="Hf"&&d!=="Hs"&&d!=="Ho"&&(d="H"),d.length>1&&(d=d[0].toUpperCase()+d.substring(1).toLowerCase(),i.bondTable[d]===void 0?d=d[0]:h&&(d==="Ca"||d==="Cd")&&(d="C")),d}},"./src/parsers/utils/bondLength.ts"(e,t,n){n.r(t),n.d(t,{bondLength:()=>o,bondTable:()=>i,setBondLength:()=>l});let i={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function o(h){return i[h]||1.6}function l(h,d){d<0&&(d=0),i[h]=d}},"./src/parsers/utils/computeSecondaryStructure.ts"(e,t,n){n.r(t),n.d(t,{computeSecondaryStructure:()=>o});var i=n("./src/parsers/utils/assignBackboneHBonds.ts");function o(l,h){(0,i.assignBackboneHBonds)(l,h);const d={};let m,b,v,w,C,R;for(m=0,b=l.length;m<b;m++)if(C=l[m],d[C.chain]===void 0&&(d[C.chain]=[]),isFinite(C.hbondDistanceSq)){const T=C.hbondOther;d[T.chain]===void 0&&(d[T.chain]=[]),Math.abs(T.resi-C.resi)===4&&(d[C.chain][C.resi]="h")}for(v in d)for(w=1;w<d[v].length-1;w++){const T=d[v][w-1],E=d[v][w+1];R=d[v][w],T=="h"&&T==E&&R!=T&&(d[v][w]=T)}for(m=0,b=l.length;m<b;m++)C=l[m],isFinite(C.hbondDistanceSq)&&d[C.chain][C.resi]!="h"&&C.ss!=="h"&&(d[C.chain][C.resi]="maybesheet");for(let T=0,E=l.length;T<E;T++)if(C=l[T],isFinite(C.hbondDistanceSq)&&d[C.chain][C.resi]=="maybesheet"){let f=C.hbondOther,g=d[f.chain][f.resi];(g=="maybesheet"||g=="s")&&(d[C.chain][C.resi]="s",d[f.chain][f.resi]="s")}for(let T in d){for(let E=1;E<d[T].length-1;E++){const f=d[T][E-1],g=d[T][E+1];R=d[T][E],f=="s"&&f==g&&R!=f&&(d[T][E]=f)}for(let E=0;E<d[T].length;E++){const f=d[T][E];(f=="h"||f=="s")&&d[T][E-1]!=f&&d[T][E+1]!=f&&delete d[T][E]}}for(m=0,b=l.length;m<b;m++)C=l[m],R=d[C.chain][C.resi],delete C.hbondOther,delete C.hbondDistanceSq,!(R===void 0||R==="maybesheet")&&(C.ss=R,d[C.chain][C.resi-1]!=R&&(C.ssbegin=!0),d[C.chain][C.resi+1]!=R&&(C.ssend=!0))}},"./src/parsers/utils/getSinglePDB.ts"(e,t,n){n.r(t),n.d(t,{getSinglePDB:()=>w});var i=n("./src/WebGL/index.ts"),o=n("./src/parsers/utils/atomNameToElem.ts"),l=n("./src/parsers/utils/bondLength.ts"),h=n("./src/parsers/utils/computeSecondaryStructure.ts"),d=n("./src/parsers/utils/isEmpty.ts"),m=n("./src/parsers/utils/processSymmetries.ts"),b=n("./src/parsers/utils/assignPDBBonds.ts"),v=n("./src/parsers/utils/validateBonds.ts");function w(C,R,T){const E=[],f=R.assignBonds===void 0?!0:R.assignBonds,g=!R.keepH,S=!!R.noSecondaryStructure,O=!R.noComputeSecondaryStructure,D=!R.doAssembly,M=R.altLoc?R.altLoc:"A",_={symmetries:[],cryst:void 0};let A,j=[];const L=[];let $;const F={};for(let W=0;W<C.length;W++){$=C[W].replace(/^\s*/,"");const U=$.substring(0,6);let q,H,Y;if(U.indexOf("END")===0){if(j=C.slice(W+1),U==="END")for(const Z in T)T.hasOwnProperty(Z)&&delete T[Z];break}else if(U==="ATOM  "||U==="HETATM"){let Z,X,J,Q,G,te,ue,de,xe,ve,Se,Ee;if(Se=$.substring(16,17),Se!==" "&&Se!==M&&M!=="*"||(ve=parseInt($.substring(6,11)),A=$.substring(12,16).replace(/ /g,""),Z=$.substring(17,20).replace(/ /g,""),X=$.substring(21,22),J=parseInt($.substring(22,26)),Q=$.substring(26,27),G=parseFloat($.substring(30,38)),te=parseFloat($.substring(38,46)),ue=parseFloat($.substring(46,54)),Ee=parseFloat($.substring(60,68)),xe=$.substring(76,78).replace(/ /g,""),xe===""||l.bondTable[xe]===void 0?xe=(0,o.atomNameToElem)($.substring(12,14),$[0]=="A"):xe=xe[0].toUpperCase()+xe.substring(1).toLowerCase(),xe==="H"&&g))continue;U[0]=="H"?de=!0:de=!1,L[ve]=E.length,E.push({resn:Z,x:G,y:te,z:ue,elem:xe,hetflag:de,altLoc:Se,chain:X,resi:J,icode:Q,rescode:J+(Q!==" "?"^"+Q:""),serial:ve,atom:A,bonds:[],ss:"c",bondOrder:[],properties:{},b:Ee,pdbline:$})}else if(U==="SHEET "){q=$.substring(21,22),H=parseInt($.substring(22,26)),Y=parseInt($.substring(33,37)),q in T||(T[q]={}),T[q][H]="s1";for(let Z=H+1;Z<Y;Z++)T[q][Z]="s";T[q][Y]="s2"}else if(U==="CONECT"){const Z=parseInt($.substring(6,11)),X=L[Z],J=E[X],Q=[11,16,21,26];for(let G=0;G<4;G++){const te=parseInt($.substring(Q[G],Q[G]+5)),ue=L[te];let de=X+":"+ue;const xe=E[ue];if(J!==void 0&&xe!==void 0)if(!F[de])F[de]=1,(J.bonds.length==0||J.bonds[J.bonds.length-1]!==ue)&&(J.bonds.push(ue),J.bondOrder.push(1));else{F[de]+=1;for(let ve=0;ve<J.bonds.length;ve++)if(J.bonds[ve]==ue){const Se=F[de];Se>=4?J.bondOrder[ve]=1:J.bondOrder[ve]=Se}}}}else if(U==="HELIX "){q=$.substring(19,20),H=parseInt($.substring(21,25)),Y=parseInt($.substring(33,37)),q in T||(T[q]={}),T[q][H]="h1";for(let Z=H+1;Z<Y;Z++)T[q][Z]="h";T[q][Y]="h2"}else if(!D&&U==="REMARK"&&$.substring(13,18)==="BIOMT"){let Z,X=new i.Matrix4;for(Z=1;Z<=3;Z++)if($=C[W].replace(/^\s*/,""),parseInt($.substring(18,19))==Z)X.elements[Z-1]=parseFloat($.substring(23,33)),X.elements[Z-1+4]=parseFloat($.substring(33,43)),X.elements[Z-1+8]=parseFloat($.substring(43,53)),X.elements[Z-1+12]=parseFloat($.substring(53)),W++;else for(;$.substring(13,18)==="BIOMT";)W++,$=C[W].replace(/^\s*/,"");X.elements[3]=0,X.elements[7]=0,X.elements[11]=0,X.elements[15]=1,_.symmetries.push(X),W--}else if(U==="CRYST1"){let Z,X,J,Q,G,te;Z=parseFloat($.substring(7,15)),X=parseFloat($.substring(16,24)),J=parseFloat($.substring(25,33)),Q=parseFloat($.substring(34,40)),G=parseFloat($.substring(41,47)),te=parseFloat($.substring(48,54)),_.cryst={a:Z,b:X,c:J,alpha:Q,beta:G,gamma:te}}else if(U==="ANISOU"){const Z=parseInt($.substring(6,11)),X=L[Z],J=E[X];if(J){const Q=$.substring(30).trim().split(/\s+/),G={u11:parseInt(Q[0]),u22:parseInt(Q[1]),u33:parseInt(Q[2]),u12:parseInt(Q[3]),u13:parseInt(Q[4]),u23:parseInt(Q[5])};J.uMat=G}}}if((0,v.validateBonds)(E,L),f&&(0,b.assignPDBBonds)(E,R),D||(0,m.processSymmetries)(_.symmetries,E,R,_.cryst),O&&!S&&(0,h.computeSecondaryStructure)(E,R.hbondCutoff),!(0,d.isEmpty)(T))for(let W=0;W<E.length;W++){const U=E[W];if(U!==void 0&&U.chain in T&&U.resi in T[U.chain]){const q=T[U.chain][U.resi];U.ss=q[0],q.length>1&&(q[1]=="1"?U.ssbegin=!0:q[1]=="2"&&(U.ssend=!0))}}return[E,_,j]}},"./src/parsers/utils/isEmpty.ts"(e,t,n){n.r(t),n.d(t,{isEmpty:()=>i});function i(o){for(const l in o)return!1;return!0}},"./src/parsers/utils/processSymmetries.ts"(e,t,n){n.r(t),n.d(t,{processSymmetries:()=>o});var i=n("./src/WebGL/index.ts");function o(l,h,d,m){const b=!d.duplicateAssemblyAtoms,v=h.length;let w=v,C=-1,R=null,T=null;(d.normalizeAssembly||d.wrapAtoms)&&m&&(R=(0,i.conversionMatrix3)(m.a,m.b,m.c,m.alpha,m.beta,m.gamma),T=new i.Matrix3,T.getInverse3(R));let E=function(S){let O=S.clone().applyMatrix3(T);const D=[O.x,O.y,O.z],M=[0,0,0];for(let A=0;A<3;A++){for(;D[A]<-.001;)D[A]+=1,M[A]+=1;for(;D[A]>1.001;)D[A]-=1,M[A]-=1}const _=new i.Vector3(M[0],M[1],M[2]);return _.applyMatrix3(R),_};if(d.normalizeAssembly&&m)for(let S=0;S<l.length;S++){const O=new i.Vector3(0,0,0);for(let M=0;M<v;M++){const _=new i.Vector3(h[M].x,h[M].y,h[M].z);_.applyMatrix4(l[S]),O.add(_)}O.divideScalar(v);const D=E(O);l[S].isNearlyIdentity()&&D.lengthSq()>.001&&(C=S),l[S].translate(D)}if(b){if(l.length>1)for(let S=0;S<h.length;S++){var f=[];for(let O=0;O<l.length;O++)if(!l[O].isNearlyIdentity()){var g=new i.Vector3;g.set(h[S].x,h[S].y,h[S].z),g.applyMatrix4(l[O]),f.push(g)}h[S].symmetries=f}}else{for(let S=0;S<v;S++)h[S].sym=-1;for(let S=0;S<l.length;S++)if(!l[S].isNearlyIdentity()&&C!=S){let O=new i.Vector3;for(let D=0;D<v;D++){const M=[];for(let A=0;A<h[D].bonds.length;A++)M.push(h[D].bonds[A]+w);if(O.set(h[D].x,h[D].y,h[D].z),O.applyMatrix4(l[S]),d.wrapAtoms&&m){let A=E(O);O.add(A)}const _={};for(const A in h[D])_[A]=h[D][A];_.x=O.x,_.y=O.y,_.z=O.z,_.bonds=M,_.sym=S,_.index=h.length,h.push(_)}w=h.length}else for(let O=0;O<v;O++)h[O].sym=S;if(d.wrapAtoms&&m){let S=new i.Vector3;for(let O=0;O<v;O++){S.set(h[O].x,h[O].y,h[O].z);let D=E(S);S.add(D),h[O].x=S.x,h[O].y=S.y,h[O].z=S.z}}if(C>=0){const S=new i.Vector3;for(let O=0;O<v;O++)S.set(h[O].x,h[O].y,h[O].z),S.applyMatrix4(l[C]),h[O].x=S.x,h[O].y=S.y,h[O].z=S.z}l.length=0}}},"./src/parsers/utils/standardResidues.ts"(e,t,n){n.r(t),n.d(t,{standardResidues:()=>i});const i=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])},"./src/parsers/utils/validateBonds.ts"(e,t,n){n.r(t),n.d(t,{validateBonds:()=>i});function i(o,l){for(let h=0,d=o.length;h<d;h++){const m=o[h];for(let b=0;b<m.bonds.length;b++){const v=m.bonds[b],w=o[v],C=l[m.serial];w&&C&&w.bonds.indexOf(C)<0&&(w.bonds.push(C),w.bondOrder.push(m.bondOrder[b]))}}}},"./src/partialCharges.ts"(e,t,n){n.r(t),n.d(t,{applyPartialCharges:()=>o,partialCharges:()=>i});const i={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function o(l,h){if((!h||typeof l.partialCharge>"u")&&l.resn&&l.atom){var d=l.resn+":"+l.atom;l.properties.partialCharge=i[d]}}},"./src/specs.ts"(e,t,n){n.r(t)},"./src/utilities.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts"),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/pako/dist/pako.esm.mjs");function extend(e,t){for(var n in t)t.hasOwnProperty(n)&&t[n]!==void 0&&(e[n]=t[n]);return e}function deepCopy(e){let t,n,i;if(e==null)return{};if(typeof e!="object"||e===null)return e;t=Array.isArray(e)?[]:{};for(i in e)n=e[i],t[i]=deepCopy(n);return t}function isNumeric(e){var t=typeof e;return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))}function isEmptyObject(e){return Object.keys(e).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(e){e&&(e.volformat&&!(e.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(e.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(e.voldata,e.volformat)),e.volscheme&&(e.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(e.volscheme)))}function getExtent(e,t){var n,i,o,l,h,d,m,b,v,w,C=!t;if(n=i=o=9999,l=h=d=-9999,m=b=v=w=0,e.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var R=0;R<e.length;R++){var T=e[R];if(!(typeof T>"u"||!isFinite(T.x)||!isFinite(T.y)||!isFinite(T.z))&&(w++,m+=T.x,b+=T.y,v+=T.z,n=n<T.x?n:T.x,i=i<T.y?i:T.y,o=o<T.z?o:T.z,l=l>T.x?l:T.x,h=h>T.y?h:T.y,d=d>T.z?d:T.z,T.symmetries&&C))for(var E=0;E<T.symmetries.length;E++)w++,m+=T.symmetries[E].x,b+=T.symmetries[E].y,v+=T.symmetries[E].z,n=n<T.symmetries[E].x?n:T.symmetries[E].x,i=i<T.symmetries[E].y?i:T.symmetries[E].y,o=o<T.symmetries[E].z?o:T.symmetries[E].z,l=l>T.symmetries[E].x?l:T.symmetries[E].x,h=h>T.symmetries[E].y?h:T.symmetries[E].y,d=d>T.symmetries[E].z?d:T.symmetries[E].z}return[[n,i,o],[l,h,d],[m/w,b/w,v/w]]}function getPropertyRange(e,t){for(var n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=0,l=e.length;o<l;o++){var h=e[o],d=getAtomProperty(h,t);d!=null&&(d<n&&(n=d),d>i&&(i=d))}return!isFinite(n)&&!isFinite(i)?n=i=0:isFinite(n)?isFinite(i)||(i=n):n=i,[n,i]}class PausableTimer{constructor(t,n,i){this.total_time_run=0,this.fn=t,this.arg=i,this.countdown=n,this.start_time=new Date().getTime(),this.ident=setTimeout(t,n,i)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=t.charCodeAt(o);return i}function getAtomProperty(e,t){var n=null;return e.properties&&typeof e.properties[t]<"u"?n=e.properties[t]:typeof e[t]<"u"&&(n=e[t]),n}function mergeGeos(e,t){var n=t.geometry;n!==void 0&&e.geometryGroups.push(n.geometryGroups[0])}function specStringToObject(e){if(typeof e=="object")return e;if(typeof e>"u"||e==null)return e;try{return JSON.parse(e)}catch{}e=e.replace(/%7E/g,"~");var t=function(C){return isNumeric(C)?Math.floor(parseFloat(C))==parseInt(C)||C.indexOf(".")>=0?parseFloat(C):parseInt(C):C==="true"?!0:C==="false"?!1:C},n={};if(e==="all")return n;for(var i=e.split(";"),o=0;o<i.length;o++){var l=i[o].split(":"),h=l[0],d={},m=l[1];if(m)if(m=m.replace(/~/g,"="),m.indexOf("=")!==-1)for(var b=m.split(","),v=0;v<b.length;v++){var w=b[v].split("=",2);d[w[0]]=t(w[1])}else m.indexOf(",")!==-1?d=m.split(","):d=t(m);n[h]=d}return n}function checkStatus(e){if(!e.ok)throw new Error(`HTTP ${e.status} - ${e.statusText}`);return e}function get(e,t){var n=fetch(e).then(checkStatus).then(i=>i.text());return t?n.then(t):n}function getbin(e,t,n,i){var o;return n=="POST"?o=fetch(e,{method:"POST",body:i}).then(l=>checkStatus(l)).then(l=>l.arrayBuffer()):o=fetch(e).then(l=>checkStatus(l)).then(l=>l.arrayBuffer()),t?o.then(t):o}function download(e,t,n,i){var o="",l="",h="",d=null,m=t.addModel();if(e.indexOf(":")<0&&(e.length==4?e="pdb:"+e:isNaN(e)?e="url:"+e:e="cid:"+e),e.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),e="bcif:"+e.slice(5)),e.substring(0,5)==="bcif:")e=e.substring(5).toUpperCase(),h="https://models.rcsb.org/"+e+".bcif.gz",n&&typeof n.noComputeSecondaryStructure>"u"&&(n.noComputeSecondaryStructure=!0),d=new Promise(function(v){getbin(h).then(function(w){m.addMolData(w,"bcif.gz",n),t.zoomTo(),t.render(),v(m)},function(){console.error("fetch of "+h+" failed.")})});else{if(e.substring(0,4)==="pdb:"){if(o="bcif",n&&n.format&&(o=n.format),n&&typeof n.noComputeSecondaryStructure>"u"&&(n.noComputeSecondaryStructure=!0),e=e.substring(4).toUpperCase(),!e.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}o=="bcif"?h="https://models.rcsb.org/"+e.toUpperCase()+".bcif.gz":(l=n&&n.pdbUri?n.pdbUri:"https://files.rcsb.org/view/",h=l+e+"."+o)}else if(e.substring(0,4)=="cid:"){if(o="sdf",e=e.substring(4),!e.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}h="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+e+"/SDF?record_type=3d"}else e.substring(0,4)=="url:"&&(h=e.substring(4),o=h);var b=function(v){m.addMolData(v,o,n),t.zoomTo(),t.render()};d=new Promise(function(v){o=="bcif"?getbin(h).then(function(w){b(w),v(m)}).catch(function(){l=n&&n.pdbUri?n.pdbUri:"https://files.rcsb.org/view/",h=l+e+".pdb",o="pdb",console.warn("falling back to pdb format"),get(h).then(function(w){b(w),v(m)}).catch(function(w){b(""),v(m),console.error("fetch of "+h+" failed: "+w.statusText)})}):get(h).then(function(w){b(w),v(m)}).catch(function(w){b(""),v(m),console.error("fetch of "+h+" failed: "+w.statusText)})})}return i?(d.then(function(v){i(v)}),m):d}function getColorFromStyle(e,t){let n=t.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[n]<"u")n=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[n];else if(typeof n=="string"&&n.endsWith("Carbon")){let h=n.substring(0,n.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[h]<"u"){let d=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);d.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[h],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[n]={prop:"elem",map:d},n=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[n]}}let i=e.color;if(typeof t.color<"u"&&t.color!="spectrum"&&(i=t.color),typeof n<"u"){let h,d;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[n]<"u")n=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[n],typeof n[e[n.prop]]<"u"&&(i=n.map[e[n.prop]]);else if(typeof n[e[n.prop]]<"u")i=n.map[e[n.prop]];else if(typeof n.prop<"u"&&typeof n.gradient<"u"){h=n.prop;var o=n.gradient;o instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(o=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(n));let m=o.range()||[-1,1];d=getAtomProperty(e,h),d!=null&&(i=o.valueToHex(d,m))}else typeof n.prop<"u"&&typeof n.map<"u"?(h=n.prop,d=getAtomProperty(e,h),typeof n.map[d]<"u"&&(i=n.map[d])):typeof t.colorscheme[e.elem]<"u"?i=t.colorscheme[e.elem]:console.warn("Could not interpret colorscheme "+n)}else typeof t.colorfunc<"u"&&(i=t.colorfunc(e));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(i)}function getElement(e){let t=e;return typeof e=="string"?t=document.querySelector("#"+e):typeof e=="object"&&e.get&&(t=e.get(0)),t}function inflateString(e,t=!0){let n;return typeof e=="string"?n=new TextEncoder().encode(e):n=new Uint8Array(e),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(n,{to:t?"string":null})}},"./src/vendor/mmtf.js"(e,t){(function(n,i){i(t)})(this,function(n){function i(oe,fe,pe){for(var Be=(oe.byteLength,0),ke=pe.length;ke>Be;Be++){var Ke=pe.charCodeAt(Be);if(128>Ke)oe.setUint8(fe++,Ke>>>0&127|0);else if(2048>Ke)oe.setUint8(fe++,Ke>>>6&31|192),oe.setUint8(fe++,Ke>>>0&63|128);else if(65536>Ke)oe.setUint8(fe++,Ke>>>12&15|224),oe.setUint8(fe++,Ke>>>6&63|128),oe.setUint8(fe++,Ke>>>0&63|128);else{if(!(1114112>Ke))throw new Error("bad codepoint "+Ke);oe.setUint8(fe++,Ke>>>18&7|240),oe.setUint8(fe++,Ke>>>12&63|128),oe.setUint8(fe++,Ke>>>6&63|128),oe.setUint8(fe++,Ke>>>0&63|128)}}}function o(oe){for(var fe=0,pe=0,Be=oe.length;Be>pe;pe++){var ke=oe.charCodeAt(pe);if(128>ke)fe+=1;else if(2048>ke)fe+=2;else if(65536>ke)fe+=3;else{if(!(1114112>ke))throw new Error("bad codepoint "+ke);fe+=4}}return fe}function l(oe,fe,pe){var Be=typeof oe;if(Be==="string"){var ke=o(oe);if(32>ke)return fe.setUint8(pe,160|ke),i(fe,pe+1,oe),1+ke;if(256>ke)return fe.setUint8(pe,217),fe.setUint8(pe+1,ke),i(fe,pe+2,oe),2+ke;if(65536>ke)return fe.setUint8(pe,218),fe.setUint16(pe+1,ke),i(fe,pe+3,oe),3+ke;if(4294967296>ke)return fe.setUint8(pe,219),fe.setUint32(pe+1,ke),i(fe,pe+5,oe),5+ke}if(oe instanceof Uint8Array){var ke=oe.byteLength,Ke=new Uint8Array(fe.buffer);if(256>ke)return fe.setUint8(pe,196),fe.setUint8(pe+1,ke),Ke.set(oe,pe+2),2+ke;if(65536>ke)return fe.setUint8(pe,197),fe.setUint16(pe+1,ke),Ke.set(oe,pe+3),3+ke;if(4294967296>ke)return fe.setUint8(pe,198),fe.setUint32(pe+1,ke),Ke.set(oe,pe+5),5+ke}if(Be==="number"){if(!isFinite(oe))throw new Error("Number not finite: "+oe);if(Math.floor(oe)!==oe)return fe.setUint8(pe,203),fe.setFloat64(pe+1,oe),9;if(oe>=0){if(128>oe)return fe.setUint8(pe,oe),1;if(256>oe)return fe.setUint8(pe,204),fe.setUint8(pe+1,oe),2;if(65536>oe)return fe.setUint8(pe,205),fe.setUint16(pe+1,oe),3;if(4294967296>oe)return fe.setUint8(pe,206),fe.setUint32(pe+1,oe),5;throw new Error("Number too big 0x"+oe.toString(16))}if(oe>=-32)return fe.setInt8(pe,oe),1;if(oe>=-128)return fe.setUint8(pe,208),fe.setInt8(pe+1,oe),2;if(oe>=-32768)return fe.setUint8(pe,209),fe.setInt16(pe+1,oe),3;if(oe>=-2147483648)return fe.setUint8(pe,210),fe.setInt32(pe+1,oe),5;throw new Error("Number too small -0x"+(-oe).toString(16).substr(1))}if(oe===null)return fe.setUint8(pe,192),1;if(Be==="boolean")return fe.setUint8(pe,oe?195:194),1;if(Be==="object"){var ke,Ae=0,Ye=Array.isArray(oe);if(Ye)ke=oe.length;else{var ie=Object.keys(oe);ke=ie.length}var Ae;if(16>ke?(fe.setUint8(pe,ke|(Ye?144:128)),Ae=1):65536>ke?(fe.setUint8(pe,Ye?220:222),fe.setUint16(pe+1,ke),Ae=3):4294967296>ke&&(fe.setUint8(pe,Ye?221:223),fe.setUint32(pe+1,ke),Ae=5),Ye)for(var Ne=0;ke>Ne;Ne++)Ae+=l(oe[Ne],fe,pe+Ae);else for(var Ne=0;ke>Ne;Ne++){var Ze=ie[Ne];Ae+=l(Ze,fe,pe+Ae),Ae+=l(oe[Ze],fe,pe+Ae)}return Ae}throw new Error("Unknown type "+Be)}function h(oe){var fe=typeof oe;if(fe==="string"){var pe=o(oe);if(32>pe)return 1+pe;if(256>pe)return 2+pe;if(65536>pe)return 3+pe;if(4294967296>pe)return 5+pe}if(oe instanceof Uint8Array){var pe=oe.byteLength;if(256>pe)return 2+pe;if(65536>pe)return 3+pe;if(4294967296>pe)return 5+pe}if(fe==="number"){if(Math.floor(oe)!==oe)return 9;if(oe>=0){if(128>oe)return 1;if(256>oe)return 2;if(65536>oe)return 3;if(4294967296>oe)return 5;throw new Error("Number too big 0x"+oe.toString(16))}if(oe>=-32)return 1;if(oe>=-128)return 2;if(oe>=-32768)return 3;if(oe>=-2147483648)return 5;throw new Error("Number too small -0x"+oe.toString(16).substr(1))}if(fe==="boolean"||oe===null)return 1;if(fe==="object"){var pe,Be=0;if(Array.isArray(oe)){pe=oe.length;for(var ke=0;pe>ke;ke++)Be+=h(oe[ke])}else{var Ke=Object.keys(oe);pe=Ke.length;for(var ke=0;pe>ke;ke++){var Ye=Ke[ke];Be+=h(Ye)+h(oe[Ye])}}if(16>pe)return 1+Be;if(65536>pe)return 3+Be;if(4294967296>pe)return 5+Be;throw new Error("Array or object too long 0x"+pe.toString(16))}throw new Error("Unknown type "+fe)}function d(oe){var fe=new ArrayBuffer(h(oe)),pe=new DataView(fe);return l(oe,pe,0),new Uint8Array(fe)}function m(oe,fe,pe){return fe?new oe(fe.buffer,fe.byteOffset,fe.byteLength/(pe||1)):void 0}function b(oe){return m(DataView,oe)}function v(oe){return m(Uint8Array,oe)}function w(oe){return m(Int8Array,oe)}function C(oe){return m(Int32Array,oe,4)}function R(oe){return m(Float32Array,oe,4)}function T(oe,fe){var pe=oe.length/2;fe||(fe=new Int16Array(pe));for(var Be=0,ke=0;pe>Be;++Be,ke+=2)fe[Be]=oe[ke]<<8^oe[ke+1]<<0;return fe}function E(oe,fe){var pe=oe.length;fe||(fe=new Uint8Array(2*pe));for(var Be=b(fe),ke=0;pe>ke;++ke)Be.setInt16(2*ke,oe[ke]);return v(fe)}function f(oe,fe){var pe=oe.length/4;fe||(fe=new Int32Array(pe));for(var Be=0,ke=0;pe>Be;++Be,ke+=4)fe[Be]=oe[ke]<<24^oe[ke+1]<<16^oe[ke+2]<<8^oe[ke+3]<<0;return fe}function g(oe,fe){var pe=oe.length;fe||(fe=new Uint8Array(4*pe));for(var Be=b(fe),ke=0;pe>ke;++ke)Be.setInt32(4*ke,oe[ke]);return v(fe)}function S(oe,fe){var pe=oe.length;fe||(fe=new Float32Array(pe/4));for(var Be=b(fe),ke=b(oe),Ke=0,Ye=0,ie=pe/4;ie>Ke;++Ke,Ye+=4)Be.setFloat32(Ye,ke.getFloat32(Ye),!0);return fe}function O(oe,fe,pe){var Be=oe.length,ke=1/fe;pe||(pe=new Float32Array(Be));for(var Ke=0;Be>Ke;++Ke)pe[Ke]=oe[Ke]*ke;return pe}function D(oe,fe,pe){var Be=oe.length;pe||(pe=new Int32Array(Be));for(var ke=0;Be>ke;++ke)pe[ke]=Math.round(oe[ke]*fe);return pe}function M(oe,fe){var pe,Be;if(!fe){var ke=0;for(pe=0,Be=oe.length;Be>pe;pe+=2)ke+=oe[pe+1];fe=new oe.constructor(ke)}var Ke=0;for(pe=0,Be=oe.length;Be>pe;pe+=2)for(var Ye=oe[pe],ie=oe[pe+1],Ae=0;ie>Ae;++Ae)fe[Ke]=Ye,++Ke;return fe}function _(oe){if(oe.length===0)return new Int32Array;var fe,pe,Be=2;for(fe=1,pe=oe.length;pe>fe;++fe)oe[fe-1]!==oe[fe]&&(Be+=2);var ke=new Int32Array(Be),Ke=0,Ye=1;for(fe=1,pe=oe.length;pe>fe;++fe)oe[fe-1]!==oe[fe]?(ke[Ke]=oe[fe-1],ke[Ke+1]=Ye,Ye=1,Ke+=2):++Ye;return ke[Ke]=oe[oe.length-1],ke[Ke+1]=Ye,ke}function A(oe,fe){var pe=oe.length;fe||(fe=new oe.constructor(pe)),pe&&(fe[0]=oe[0]);for(var Be=1;pe>Be;++Be)fe[Be]=oe[Be]+fe[Be-1];return fe}function j(oe,fe){var pe=oe.length;fe||(fe=new oe.constructor(pe)),fe[0]=oe[0];for(var Be=1;pe>Be;++Be)fe[Be]=oe[Be]-oe[Be-1];return fe}function L(oe,fe){var pe,Be,ke=oe instanceof Int8Array?127:32767,Ke=-ke-1,Ye=oe.length;if(!fe){var ie=0;for(pe=0;Ye>pe;++pe)oe[pe]<ke&&oe[pe]>Ke&&++ie;fe=new Int32Array(ie)}for(pe=0,Be=0;Ye>pe;){for(var Ae=0;oe[pe]===ke||oe[pe]===Ke;)Ae+=oe[pe],++pe;Ae+=oe[pe],++pe,fe[Be]=Ae,++Be}return fe}function $(oe,fe){var pe,Be=32767,ke=-Be-1,Ke=oe.length,Ye=0;for(pe=0;Ke>pe;++pe){var ie=oe[pe];ie===0?++Ye:ie>0?(Ye+=Math.ceil(ie/Be),ie%Be===0&&(Ye+=1)):(Ye+=Math.ceil(ie/ke),ie%ke===0&&(Ye+=1))}var Ae=new Int16Array(Ye),Ne=0;for(pe=0;Ke>pe;++pe){var ie=oe[pe];if(ie>=0)for(;ie>=Be;)Ae[Ne]=Be,++Ne,ie-=Be;else for(;ke>=ie;)Ae[Ne]=ke,++Ne,ie-=ke;Ae[Ne]=ie,++Ne}return Ae}function F(oe,fe){return A(M(oe),fe)}function W(oe){return _(j(oe))}function U(oe,fe,pe){return O(M(oe,C(pe)),fe,pe)}function q(oe,fe){return _(D(oe,fe))}function H(oe,fe,pe){return O(A(oe,C(pe)),fe,pe)}function Y(oe,fe,pe){return j(D(oe,fe),pe)}function Z(oe,fe,pe){return O(L(oe,C(pe)),fe,pe)}function X(oe,fe,pe){var Be=L(oe,C(pe));return H(Be,fe,R(Be))}function J(oe,fe,pe){return $(Y(oe,fe))}function Q(Ke){var fe=b(Ke),pe=fe.getInt32(0),Be=fe.getInt32(4),ke=Ke.subarray(8,12),Ke=Ke.subarray(12);return[pe,Ke,Be,ke]}function G(oe,fe,pe,Be){var ke=new ArrayBuffer(12+Be.byteLength),Ke=new Uint8Array(ke),Ye=new DataView(ke);return Ye.setInt32(0,oe),Ye.setInt32(4,fe),pe&&Ke.set(pe,8),Ke.set(Be,12),Ke}function te(oe){var fe=oe.length,pe=v(oe);return G(2,fe,void 0,pe)}function ue(oe){var fe=oe.length,pe=g(oe);return G(4,fe,void 0,pe)}function de(oe,fe){var pe=oe.length/fe,Be=g([fe]),ke=v(oe);return G(5,pe,Be,ke)}function xe(oe){var fe=oe.length,pe=g(_(oe));return G(6,fe,void 0,pe)}function ve(oe){var fe=oe.length,pe=g(W(oe));return G(8,fe,void 0,pe)}function Se(oe,fe){var pe=oe.length,Be=g([fe]),ke=g(q(oe,fe));return G(9,pe,Be,ke)}function Ee(oe,fe){var pe=oe.length,Be=g([fe]),ke=E(J(oe,fe));return G(10,pe,Be,ke)}function he(oe){var fe={};return at.forEach(function(pe){oe[pe]!==void 0&&(fe[pe]=oe[pe])}),oe.bondAtomList&&(fe.bondAtomList=ue(oe.bondAtomList)),oe.bondOrderList&&(fe.bondOrderList=te(oe.bondOrderList)),fe.xCoordList=Ee(oe.xCoordList,1e3),fe.yCoordList=Ee(oe.yCoordList,1e3),fe.zCoordList=Ee(oe.zCoordList,1e3),oe.bFactorList&&(fe.bFactorList=Ee(oe.bFactorList,100)),oe.atomIdList&&(fe.atomIdList=ve(oe.atomIdList)),oe.altLocList&&(fe.altLocList=xe(oe.altLocList)),oe.occupancyList&&(fe.occupancyList=Se(oe.occupancyList,100)),fe.groupIdList=ve(oe.groupIdList),fe.groupTypeList=ue(oe.groupTypeList),oe.secStructList&&(fe.secStructList=te(oe.secStructList)),oe.insCodeList&&(fe.insCodeList=xe(oe.insCodeList)),oe.sequenceIndexList&&(fe.sequenceIndexList=ve(oe.sequenceIndexList)),fe.chainIdList=de(oe.chainIdList,4),oe.chainNameList&&(fe.chainNameList=de(oe.chainNameList,4)),fe}function Re(oe){function fe(Ae){for(var Ne={},Ze=0;Ae>Ze;Ze++){var _e=Ke();Ne[_e]=Ke()}return Ne}function pe(Ae){var Ne=oe.subarray(Ye,Ye+Ae);return Ye+=Ae,Ne}function Be(Ae){var Ne=oe.subarray(Ye,Ye+Ae);Ye+=Ae;var Ze=65535;if(Ae>Ze){for(var _e=[],Ge=0;Ge<Ne.length;Ge+=Ze)_e.push(String.fromCharCode.apply(null,Ne.subarray(Ge,Ge+Ze)));return _e.join("")}return String.fromCharCode.apply(null,Ne)}function ke(Ae){for(var Ne=new Array(Ae),Ze=0;Ae>Ze;Ze++)Ne[Ze]=Ke();return Ne}function Ke(){var Ae,Ne,Ze=oe[Ye];if((128&Ze)===0)return Ye++,Ze;if((240&Ze)===128)return Ne=15&Ze,Ye++,fe(Ne);if((240&Ze)===144)return Ne=15&Ze,Ye++,ke(Ne);if((224&Ze)===160)return Ne=31&Ze,Ye++,Be(Ne);if((224&Ze)===224)return Ae=ie.getInt8(Ye),Ye++,Ae;switch(Ze){case 192:return Ye++,null;case 194:return Ye++,!1;case 195:return Ye++,!0;case 196:return Ne=ie.getUint8(Ye+1),Ye+=2,pe(Ne);case 197:return Ne=ie.getUint16(Ye+1),Ye+=3,pe(Ne);case 198:return Ne=ie.getUint32(Ye+1),Ye+=5,pe(Ne);case 202:return Ae=ie.getFloat32(Ye+1),Ye+=5,Ae;case 203:return Ae=ie.getFloat64(Ye+1),Ye+=9,Ae;case 204:return Ae=oe[Ye+1],Ye+=2,Ae;case 205:return Ae=ie.getUint16(Ye+1),Ye+=3,Ae;case 206:return Ae=ie.getUint32(Ye+1),Ye+=5,Ae;case 208:return Ae=ie.getInt8(Ye+1),Ye+=2,Ae;case 209:return Ae=ie.getInt16(Ye+1),Ye+=3,Ae;case 210:return Ae=ie.getInt32(Ye+1),Ye+=5,Ae;case 217:return Ne=ie.getUint8(Ye+1),Ye+=2,Be(Ne);case 218:return Ne=ie.getUint16(Ye+1),Ye+=3,Be(Ne);case 219:return Ne=ie.getUint32(Ye+1),Ye+=5,Be(Ne);case 220:return Ne=ie.getUint16(Ye+1),Ye+=3,ke(Ne);case 221:return Ne=ie.getUint32(Ye+1),Ye+=5,ke(Ne);case 222:return Ne=ie.getUint16(Ye+1),Ye+=3,fe(Ne);case 223:return Ne=ie.getUint32(Ye+1),Ye+=5,fe(Ne)}throw new Error("Unknown type 0x"+Ze.toString(16))}var Ye=0,ie=new DataView(oe.buffer);return Ke()}function je(oe,fe,pe,Be){switch(oe){case 1:return S(fe);case 2:return w(fe);case 3:return T(fe);case 4:return f(fe);case 5:return v(fe);case 6:return M(f(fe),new Uint8Array(pe));case 7:return M(f(fe));case 8:return F(f(fe));case 9:return U(f(fe),f(Be)[0]);case 10:return X(T(fe),f(Be)[0]);case 11:return O(T(fe),f(Be)[0]);case 12:return Z(T(fe),f(Be)[0]);case 13:return Z(w(fe),f(Be)[0]);case 14:return L(T(fe));case 15:return L(w(fe))}}function Ce(oe,fe){fe=fe||{};var pe=fe.ignoreFields,Be={};return rt.forEach(function(ke){var Ke=pe?pe.indexOf(ke)!==-1:!1,Ye=oe[ke];Ke||Ye===void 0||(Ye instanceof Uint8Array?Be[ke]=je.apply(null,Q(Ye)):Be[ke]=Ye)}),Be}function Le(oe){return String.fromCharCode.apply(null,oe).replace(/\0/g,"")}function me(oe,fe,pe){pe=pe||{};var Be,ke,Ke,Ye,ie,Ae,Ne=pe.firstModelOnly,Ze=fe.onModel,_e=fe.onChain,Ge=fe.onGroup,ae=fe.onAtom,He=fe.onBond,tt=0,K=0,Me=0,Te=0,le=0,we=-1,Fe=oe.chainNameList,yt=oe.secStructList,mt=oe.insCodeList,ft=oe.sequenceIndexList,Ot=oe.atomIdList,nr=oe.bFactorList,Pt=oe.altLocList,At=oe.occupancyList,Ct=oe.bondAtomList,Ut=oe.bondOrderList;for(Be=0,ke=oe.chainsPerModel.length;ke>Be&&!(Ne&&tt>0);++Be){var Ft=oe.chainsPerModel[tt];for(Ze&&Ze({chainCount:Ft,modelIndex:tt}),Ke=0;Ft>Ke;++Ke){var fr=oe.groupsPerChain[K];if(_e){var Qt=Le(oe.chainIdList.subarray(4*K,4*K+4)),Dt=null;Fe&&(Dt=Le(Fe.subarray(4*K,4*K+4))),_e({groupCount:fr,chainIndex:K,modelIndex:tt,chainId:Qt,chainName:Dt})}for(Ye=0;fr>Ye;++Ye){var Lt=oe.groupList[oe.groupTypeList[Me]],It=Lt.atomNameList.length;if(Ge){var Jt=null;yt&&(Jt=yt[Me]);var rr=null;oe.insCodeList&&(rr=String.fromCharCode(mt[Me]));var cr=null;ft&&(cr=ft[Me]),Ge({atomCount:It,groupIndex:Me,chainIndex:K,modelIndex:tt,groupId:oe.groupIdList[Me],groupType:oe.groupTypeList[Me],groupName:Lt.groupName,singleLetterCode:Lt.singleLetterCode,chemCompType:Lt.chemCompType,secStruct:Jt,insCode:rr,sequenceIndex:cr})}for(ie=0;It>ie;++ie){if(ae){var vr=null;Ot&&(vr=Ot[Te]);var xr=null;nr&&(xr=nr[Te]);var en=null;Pt&&(en=String.fromCharCode(Pt[Te]));var ti=null;At&&(ti=At[Te]),ae({atomIndex:Te,groupIndex:Me,chainIndex:K,modelIndex:tt,atomId:vr,element:Lt.elementList[ie],atomName:Lt.atomNameList[ie],formalCharge:Lt.formalChargeList[ie],xCoord:oe.xCoordList[Te],yCoord:oe.yCoordList[Te],zCoord:oe.zCoordList[Te],bFactor:xr,altLoc:en,occupancy:ti})}Te+=1}if(He){var lr=Lt.bondAtomList;for(ie=0,Ae=Lt.bondOrderList.length;Ae>ie;++ie)He({atomIndex1:Te-It+lr[2*ie],atomIndex2:Te-It+lr[2*ie+1],bondOrder:Lt.bondOrderList[ie]})}Me+=1}K+=1}if(le=we+1,we=Te-1,He&&Ct)for(ie=0,Ae=Ct.length;Ae>ie;ie+=2){var sa=Ct[ie],ri=Ct[ie+1];(sa>=le&&we>=sa||ri>=le&&we>=ri)&&He({atomIndex1:sa,atomIndex2:ri,bondOrder:Ut?Ut[ie/2]:null})}tt+=1}}function Ie(oe){return d(he(oe))}function Ve(oe,fe){oe instanceof ArrayBuffer&&(oe=new Uint8Array(oe));var pe;return pe=oe instanceof Uint8Array?Re(oe):oe,Ce(pe,fe)}function nt(oe,fe,pe,Be){function ke(){try{var Ye=Ve(Ke.response);pe(Ye)}catch(ie){Be(ie)}}var Ke=new XMLHttpRequest;Ke.addEventListener("load",ke,!0),Ke.addEventListener("error",Be,!0),Ke.responseType="arraybuffer",Ke.open("GET",fe+oe.toUpperCase()),Ke.send()}function it(oe,fe,pe){nt(oe,ct,fe,pe)}function ot(oe,fe,pe){nt(oe,pt,fe,pe)}var at=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],Je=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],rt=at.concat(Je),et="v1.0.1",Qe="//mmtf.rcsb.org/v1.0/",ct=Qe+"full/",pt=Qe+"reduced/";n.encode=Ie,n.decode=Ve,n.traverse=me,n.fetch=it,n.fetchReduced=ot,n.version=et,n.fetchUrl=ct,n.fetchReducedUrl=pt,n.encodeMsgpack=d,n.encodeMmtf=he,n.decodeMsgpack=Re,n.decodeMmtf=Ce})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;if(__webpack_modules__[e]===void 0){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())})(_3Dmol$1)),_3Dmol$1.exports}var _3DmolExports=require_3Dmol();const MoleculeViewer=({compound:e})=>{const t=reactExports.useRef(null),[n,i]=reactExports.useState(!0),[o,l]=reactExports.useState(null),[h,d]=reactExports.useState(null);reactExports.useEffect(()=>{if(!t.current)return;h&&h.clear(),i(!0),l(null);const R=_3DmolExports.createViewer(t.current,{backgroundColor:"white"});return d(R),(async()=>{try{if(e.pubchem_cid){const E=await fetch(`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/${e.pubchem_cid}/SDF?record_type=3d`);if(E.ok){const f=await E.text();R.addModel(f,"sdf")}else{const f=await fetch(`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/${e.pubchem_cid}/SDF`);if(!f.ok)throw new Error("Could not fetch molecular structure");const g=await f.text();R.addModel(g,"sdf")}}else if(e.canonical_smiles){const E=await fetch(`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/smiles/${encodeURIComponent(e.canonical_smiles)}/SDF?record_type=3d`);if(!E.ok)throw new Error("Could not fetch molecular structure from SMILES");const f=await E.text();R.addModel(f,"sdf")}else throw new Error("No PubChem CID or SMILES available for 3D visualization");R.setStyle({},{stick:{radius:.15},sphere:{scale:.25}}),R.zoomTo(),R.render(),i(!1)}catch(E){console.error("Error loading molecule:",E),l(E instanceof Error?E.message:"Failed to load 3D structure"),i(!1)}})(),()=>{R&&R.clear()}},[e.pubchem_cid,e.canonical_smiles]);const m=()=>{h&&(h.setStyle({},{stick:{radius:.15}}),h.render())},b=()=>{h&&(h.setStyle({},{stick:{radius:.15},sphere:{scale:.25}}),h.render())},v=()=>{h&&(h.setStyle({},{sphere:{scale:.5}}),h.render())},w=()=>{h&&(h.setStyle({},{stick:{colorscheme:"Jmol",radius:.15},sphere:{colorscheme:"Jmol",scale:.25}}),h.render())},C=()=>{h&&(h.zoomTo(),h.render())};return jsxRuntimeExports.jsxs(Card,{className:"animate-slide-up",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"3D Molecular Structure"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.ingredient_name,e.pubchem_cid&&` (CID: ${e.pubchem_cid})`]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:b,className:"px-3 py-1.5 text-sm bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 rounded-lg hover:bg-primary-200 dark:hover:bg-primary-800 transition-colors",children:"Ball & Stick"}),jsxRuntimeExports.jsx("button",{onClick:m,className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Stick"}),jsxRuntimeExports.jsx("button",{onClick:v,className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Sphere"}),jsxRuntimeExports.jsx("button",{onClick:w,className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Color by Element"}),jsxRuntimeExports.jsx("button",{onClick:C,className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors ml-auto",children:"Reset View"})]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full h-96 bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[n&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-gray-900/80 z-10",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(LoadingSpinner$1,{size:"lg"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Loading 3D structure..."})]})}),o&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-10",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-red-500 dark:text-red-400",children:[jsxRuntimeExports.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:o})]})}),jsxRuntimeExports.jsx("div",{ref:t,className:"w-full h-full",style:{position:"relative"}})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Controls:"})," Drag to rotate - Scroll to zoom - Shift+drag to pan"]})}),e.inchikey&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"InChIKey"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 break-all",children:e.inchikey})]})]})};function getSideEffectsFromTargets(e,t){const n=[],i=new Set,o=d=>{i.has(d.name)||(n.push(d),i.add(d.name))};for(const d of e){const m=d.target_name.toLowerCase();(m.includes("cyclooxygenase")||m.includes("prostaglandin")||d.target_id==="P23219"||d.target_id==="P35354")&&(o({name:"Gastrointestinal Irritation",description:"Stomach discomfort, heartburn, or nausea due to reduced protective prostaglandins in the stomach lining.",severity:"moderate",frequency:"common",bodySystem:"Digestive",mechanismBasis:"COX-1 inhibition reduces gastric mucosal protection",managementTips:["Take with food or milk","Use lowest effective dose","Consider enteric-coated formulations","Avoid alcohol consumption"],whenToSeekHelp:"Black or bloody stools, severe stomach pain, vomiting blood"}),o({name:"Increased Bleeding Risk",description:"Reduced ability for blood to clot due to effects on platelet function.",severity:"moderate",frequency:"uncommon",bodySystem:"Cardiovascular",mechanismBasis:"COX-1 inhibition reduces thromboxane A2 production in platelets",managementTips:["Inform healthcare providers before surgery","Avoid combining with other blood thinners","Watch for unusual bruising"],whenToSeekHelp:"Unusual bleeding, prolonged bleeding from cuts, severe bruising"}),o({name:"Kidney Function Changes",description:"May affect kidney blood flow, especially in those with existing kidney conditions.",severity:"moderate",frequency:"uncommon",bodySystem:"Urinary",mechanismBasis:"Prostaglandins help maintain renal blood flow",managementTips:["Stay well hydrated","Avoid prolonged use","Regular monitoring if using long-term"],whenToSeekHelp:"Decreased urination, swelling in legs/feet, unusual fatigue"}),o({name:"Cardiovascular Risk",description:"Long-term use may slightly increase risk of heart problems in susceptible individuals.",severity:"serious",frequency:"rare",bodySystem:"Cardiovascular",mechanismBasis:"COX-2 selective inhibition may affect vascular prostacyclin balance",managementTips:["Use lowest dose for shortest time","Discuss cardiovascular history with doctor","Consider alternatives if high risk"],whenToSeekHelp:"Chest pain, shortness of breath, sudden weakness on one side"})),(m.includes("lipoxygenase")||d.target_id==="P09917")&&o({name:"Altered Immune Response",description:"Changes in leukotriene production may affect inflammatory and immune responses.",severity:"mild",frequency:"uncommon",bodySystem:"Immune",mechanismBasis:"Leukotrienes are important immune signaling molecules",managementTips:["Monitor for signs of infection","Report unusual symptoms"]}),(m.includes("cytochrome")||m.includes("cyp"))&&o({name:"Drug Metabolism Changes",description:"May alter how the liver processes other medications, affecting their effectiveness or safety.",severity:"moderate",frequency:"common",bodySystem:"Hepatic",mechanismBasis:"CYP450 enzymes metabolize many medications",managementTips:["Inform all healthcare providers about all medications","Watch for increased or decreased effects of other drugs","Consider drug interaction checking"],whenToSeekHelp:"Unexpected medication side effects, signs of medication toxicity"}),m.includes("kinase")&&o({name:"Cell Signaling Alterations",description:"May affect cellular growth and signaling pathways.",severity:"mild",frequency:"uncommon",bodySystem:"Cellular",mechanismBasis:"Kinases regulate many cellular processes",managementTips:["Monitor for unusual symptoms","Follow recommended dosing"]}),(m.includes("channel")||m.includes("receptor"))&&o({name:"Nervous System Effects",description:"May cause mild drowsiness, dizziness, or changes in mood in some individuals.",severity:"mild",frequency:"uncommon",bodySystem:"Nervous",mechanismBasis:"Ion channels and receptors mediate neural signaling",managementTips:["Avoid driving if drowsy","Avoid alcohol","Start with lower doses"]})}for(const d of t){const m=d.pathway_name.toLowerCase();(m.includes("platelet")||m.includes("coagulation"))&&o({name:"Bleeding Tendency",description:"Affects blood clotting mechanisms, may increase bleeding risk.",severity:"moderate",frequency:"uncommon",bodySystem:"Hematologic",mechanismBasis:"Pathway involvement in coagulation cascade",managementTips:["Avoid with anticoagulants unless advised","Inform surgeons and dentists","Watch for unusual bleeding"],whenToSeekHelp:"Prolonged bleeding, blood in urine or stool"}),(m.includes("histamine")||m.includes("allergic"))&&o({name:"Allergic Reactions",description:"Some individuals may experience allergic responses.",severity:"moderate",frequency:"rare",bodySystem:"Immune",mechanismBasis:"Individual sensitivity and immune pathway involvement",managementTips:["Start with small dose to test tolerance","Have antihistamines available","Know signs of allergic reaction"],whenToSeekHelp:"Difficulty breathing, swelling of face/throat, severe rash"})}const l={serious:0,moderate:1,mild:2},h={common:0,uncommon:1,rare:2};return n.sort((d,m)=>{const b=l[d.severity]-l[m.severity];return b!==0?b:h[d.frequency]-h[m.frequency]})}const SeverityBadge=({severity:e})=>{const n={mild:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",label:"Mild"},moderate:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-300",label:"Moderate"},serious:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300",label:"Serious"}}[e];return jsxRuntimeExports.jsx("span",{className:clsx("px-2 py-0.5 rounded-full text-xs font-medium",n.bg,n.text),children:n.label})},FrequencyBadge=({frequency:e})=>{const n={common:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",label:"Common"},uncommon:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300",label:"Uncommon"},rare:{bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-600 dark:text-gray-300",label:"Rare"}}[e];return jsxRuntimeExports.jsx("span",{className:clsx("px-2 py-0.5 rounded-full text-xs font-medium",n.bg,n.text),children:n.label})},SideEffectsTab=({targets:e,pathways:t,compoundName:n})=>{const[i,o]=reactExports.useState(null),[l,h]=reactExports.useState("all"),d=getSideEffectsFromTargets(e,t),m=l==="all"?d:d.filter(v=>v.severity===l),b={serious:d.filter(v=>v.severity==="serious").length,moderate:d.filter(v=>v.severity==="moderate").length,mild:d.filter(v=>v.severity==="mild").length};return jsxRuntimeExports.jsxs(Card,{className:"animate-slide-up",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Potential Side Effects"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Based on ",n,"'s mechanism of action"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[b.serious>0&&jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:b.serious}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 block",children:"Serious"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:b.moderate}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 block",children:"Moderate"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:b.mild}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 block",children:"Mild"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-6",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>h("all"),className:clsx("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",l==="all"?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:["All (",d.length,")"]}),jsxRuntimeExports.jsx("button",{onClick:()=>h("serious"),className:clsx("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",l==="serious"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Serious"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("moderate"),className:clsx("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",l==="moderate"?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Moderate"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("mild"),className:clsx("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",l==="mild"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Mild"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[m.map((v,w)=>{const C=i===w;return jsxRuntimeExports.jsxs("div",{className:clsx("border rounded-xl overflow-hidden transition-all duration-200",v.severity==="serious"&&"border-red-200 dark:border-red-800",v.severity==="moderate"&&"border-amber-200 dark:border-amber-800",v.severity==="mild"&&"border-gray-200 dark:border-gray-700",C&&"shadow-lg"),children:[jsxRuntimeExports.jsx("div",{onClick:()=>o(C?null:w),className:clsx("p-4 cursor-pointer transition-colors",v.severity==="serious"&&"hover:bg-red-50 dark:hover:bg-red-900/10",v.severity==="moderate"&&"hover:bg-amber-50 dark:hover:bg-amber-900/10",v.severity==="mild"&&"hover:bg-gray-50 dark:hover:bg-gray-800/50"),children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:v.name}),jsxRuntimeExports.jsx(SeverityBadge,{severity:v.severity}),jsxRuntimeExports.jsx(FrequencyBadge,{frequency:v.frequency})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:v.description})]}),jsxRuntimeExports.jsx("button",{className:clsx("p-1 transition-transform duration-200",C&&"rotate-180"),children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),C&&jsxRuntimeExports.jsxs("div",{className:"px-4 pb-4 border-t border-gray-100 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3",children:[jsxRuntimeExports.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"BODY SYSTEM"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:v.bodySystem}),jsxRuntimeExports.jsx("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mt-3 mb-2",children:"MECHANISM BASIS"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:v.mechanismBasis})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[jsxRuntimeExports.jsx("h5",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-2",children:"MANAGEMENT TIPS"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:v.managementTips.map((R,T)=>jsxRuntimeExports.jsxs("li",{className:"text-sm text-blue-800 dark:text-blue-200 flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-blue-500 mt-1",children:""}),R]},T))})]})]}),v.whenToSeekHelp&&jsxRuntimeExports.jsxs("div",{className:"mt-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:[jsxRuntimeExports.jsxs("h5",{className:"text-xs font-semibold text-red-700 dark:text-red-300 mb-1 flex items-center gap-1",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"WHEN TO SEEK MEDICAL HELP"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:v.whenToSeekHelp})]})]})]},w)}),m.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No side effects found for the selected filter."})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("strong",{children:"Disclaimer:"})," This information is derived from the compound's mechanism of action and is for educational purposes only. Individual responses may vary. Always consult a healthcare professional for medical advice. Not all possible side effects are listed."]})})]})};function getDrugInteractions(e,t){const n=[],i=new Set,o=h=>{i.has(h.drugClass)||(n.push(h),i.add(h.drugClass))};for(const h of e){const d=h.target_name.toLowerCase();(d.includes("cyclooxygenase")||d.includes("prostaglandin")||h.target_id==="P23219"||h.target_id==="P35354")&&(o({drugClass:"Anticoagulants (Blood Thinners)",examples:["Warfarin (Coumadin)","Heparin","Enoxaparin (Lovenox)"],interactionType:"Pharmacodynamic",severity:"major",mechanism:"Both COX inhibitors and anticoagulants affect hemostasis through different mechanisms. COX inhibition reduces platelet aggregation while anticoagulants prevent clot formation.",clinicalEffect:"Significantly increased risk of bleeding, including gastrointestinal bleeding and hemorrhagic stroke.",recommendation:"Avoid combination if possible. If necessary, use lowest effective doses and monitor closely for signs of bleeding. Consider gastroprotective agents.",evidenceLevel:"established",references:["Lanas A, et al. Am J Gastroenterol. 2006;101(4):701-10","Garca Rodrguez LA, et al. Circulation. 2011;123(21):2226-35","FDA Drug Safety Communication: NSAIDs and Anticoagulants"]}),o({drugClass:"Other NSAIDs",examples:["Aspirin","Naproxen (Aleve)","Diclofenac","Celecoxib"],interactionType:"Pharmacodynamic",severity:"major",mechanism:"Additive inhibition of cyclooxygenase enzymes throughout the body.",clinicalEffect:"Increased risk of gastrointestinal ulceration, bleeding, and cardiovascular events without additional therapeutic benefit.",recommendation:"Avoid concurrent use of multiple NSAIDs. Choose one NSAID at the lowest effective dose.",evidenceLevel:"established",references:["Antman EM, et al. Circulation. 2007;115(12):1634-42","FDA Label: NSAIDs Class Warning"]}),o({drugClass:"ACE Inhibitors & ARBs",examples:["Lisinopril","Enalapril","Losartan","Valsartan"],interactionType:"Pharmacodynamic",severity:"moderate",mechanism:"NSAIDs reduce prostaglandin-mediated vasodilation and sodium excretion, counteracting the antihypertensive effects of ACE inhibitors and ARBs.",clinicalEffect:"Reduced blood pressure control, potential worsening of heart failure, and increased risk of acute kidney injury (especially with dehydration).",recommendation:"Monitor blood pressure and renal function. Ensure adequate hydration. Consider alternative pain relief if blood pressure becomes difficult to control.",evidenceLevel:"established",references:["Fournier JP, et al. BMJ. 2012;344:e458","White WB. Clin Pharmacol Ther. 2007;82(6):676-90"]}),o({drugClass:"Diuretics",examples:["Furosemide (Lasix)","Hydrochlorothiazide","Spironolactone"],interactionType:"Pharmacodynamic",severity:"moderate",mechanism:"NSAIDs promote sodium and water retention by inhibiting renal prostaglandins, opposing the natriuretic effect of diuretics.",clinicalEffect:"Reduced diuretic efficacy, fluid retention, potential edema, and worsening of hypertension or heart failure.",recommendation:"Monitor weight, blood pressure, and signs of fluid retention. May need to adjust diuretic dosing.",evidenceLevel:"established",references:["Brater DC. Clin Pharmacol Ther. 1999;66(6):557-62"]}),o({drugClass:"SSRIs & SNRIs (Antidepressants)",examples:["Sertraline (Zoloft)","Fluoxetine (Prozac)","Venlafaxine (Effexor)"],interactionType:"Pharmacodynamic",severity:"moderate",mechanism:"SSRIs deplete platelet serotonin, impairing platelet aggregation. Combined with NSAID-induced COX inhibition, bleeding risk increases.",clinicalEffect:"Approximately 2-3 fold increased risk of upper gastrointestinal bleeding.",recommendation:"Consider gastroprotective therapy (PPI) if combination is necessary. Monitor for signs of bleeding.",evidenceLevel:"established",references:["Loke YK, et al. Aliment Pharmacol Ther. 2008;27(1):31-40","de Abajo FJ, et al. BMJ. 1999;319(7217):1106-9"]}),o({drugClass:"Lithium",examples:["Lithium carbonate (Lithobid)","Lithium citrate"],interactionType:"Pharmacokinetic",severity:"major",mechanism:"NSAIDs reduce renal lithium clearance by inhibiting prostaglandin-mediated renal blood flow and sodium excretion.",clinicalEffect:"Increased lithium serum levels by 15-30%, potentially causing lithium toxicity (tremor, confusion, cardiac effects).",recommendation:"Avoid if possible. If necessary, reduce lithium dose by 25-50% and monitor lithium levels closely. Watch for signs of toxicity.",evidenceLevel:"established",references:["Phelan KM, et al. Ann Pharmacother. 2003;37(3):346-51","Ragheb M. J Clin Psychiatry. 1990;51(5):197-200"]}),o({drugClass:"Methotrexate",examples:["Methotrexate (Trexall, Rheumatrex)"],interactionType:"Pharmacokinetic",severity:"major",mechanism:"NSAIDs reduce renal clearance of methotrexate and may displace it from protein binding sites.",clinicalEffect:"Elevated methotrexate levels leading to bone marrow suppression, hepatotoxicity, and mucositis.",recommendation:"Avoid with high-dose methotrexate. With low-dose methotrexate (rheumatoid arthritis), use caution and monitor blood counts.",evidenceLevel:"established",references:["Skeith KJ, et al. Clin Pharmacol Ther. 1997;62(5):516-26","Frenia ML, Long KS. Pharmacotherapy. 1992;12(4):305-9"]}),o({drugClass:"Corticosteroids",examples:["Prednisone","Dexamethasone","Hydrocortisone"],interactionType:"Pharmacodynamic",severity:"moderate",mechanism:"Both drug classes can damage the gastrointestinal mucosa, and corticosteroids may mask symptoms of GI complications.",clinicalEffect:"Increased risk of GI ulceration and bleeding. Corticosteroids may delay wound healing.",recommendation:"Use gastroprotective therapy (PPI or misoprostol) if combination is needed. Limit duration of concurrent use.",evidenceLevel:"established",references:["Piper JM, et al. Ann Intern Med. 1991;114(9):735-40"]})),(d.includes("cytochrome")||d.includes("cyp"))&&o({drugClass:"CYP450-Metabolized Drugs",examples:["Phenytoin","Warfarin","Theophylline","Certain statins"],interactionType:"Pharmacokinetic",severity:"moderate",mechanism:"Inhibition or induction of cytochrome P450 enzymes alters the metabolism of drugs processed by the same pathway.",clinicalEffect:"May increase or decrease blood levels of affected medications, altering their efficacy or causing toxicity.",recommendation:"Review all medications for potential CYP450 interactions. Monitor drug levels where applicable.",evidenceLevel:"established",references:["Flockhart DA. Drug Interactions: Cytochrome P450 Drug Interaction Table. Indiana University School of Medicine","Zanger UM, Schwab M. Pharmacol Rev. 2013;65(4):1199-1214"]}),d.includes("kinase")&&o({drugClass:"Tyrosine Kinase Inhibitors",examples:["Imatinib (Gleevec)","Gefitinib","Erlotinib"],interactionType:"Pharmacodynamic",severity:"moderate",mechanism:"Potential additive effects on kinase inhibition pathways.",clinicalEffect:"May enhance or interfere with kinase inhibitor therapy effects.",recommendation:"Consult oncologist. Monitor for enhanced side effects.",evidenceLevel:"theoretical",references:["Drug interaction databases (Lexicomp, Micromedex)"]})}for(const h of t){const d=h.pathway_name.toLowerCase();(d.includes("platelet")||d.includes("coagulation"))&&o({drugClass:"Antiplatelet Agents",examples:["Clopidogrel (Plavix)","Prasugrel","Ticagrelor"],interactionType:"Pharmacodynamic",severity:"major",mechanism:"Additive inhibition of platelet function through different mechanisms.",clinicalEffect:"Significantly increased bleeding risk, particularly gastrointestinal bleeding.",recommendation:"Use combination only when clearly indicated (e.g., post-cardiac stent). Add gastroprotection.",evidenceLevel:"established",references:["Bhatt DL, et al. JAMA. 2008;300(22):2620-2","Abraham NS, et al. Circulation. 2010;122(12):1183-9"]}),(d.includes("serotonin")||d.includes("dopamine"))&&o({drugClass:"Serotonergic Drugs",examples:["Tramadol","Triptans","MAOIs","St. John's Wort"],interactionType:"Pharmacodynamic",severity:"moderate",mechanism:"Additive effects on serotonin pathways.",clinicalEffect:"Potential for serotonin syndrome (agitation, hyperthermia, tremor, hyperreflexia).",recommendation:"Avoid combining multiple serotonergic agents. Monitor for signs of serotonin syndrome.",evidenceLevel:"case-reports",references:["Boyer EW, Shannon M. N Engl J Med. 2005;352(11):1112-20"]})}const l={major:0,moderate:1,minor:2};return n.sort((h,d)=>l[h.severity]-l[d.severity])}const SeverityIcon=({severity:e})=>{const n={major:{color:"text-red-500",bg:"bg-red-100 dark:bg-red-900/30"},moderate:{color:"text-amber-500",bg:"bg-amber-100 dark:bg-amber-900/30"},minor:{color:"text-blue-500",bg:"bg-blue-100 dark:bg-blue-900/30"}}[e];return jsxRuntimeExports.jsx("div",{className:clsx("p-2 rounded-full",n.bg),children:jsxRuntimeExports.jsxs("svg",{className:clsx("w-5 h-5",n.color),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e==="major"&&jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}),e==="moderate"&&jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e==="minor"&&jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})})},EvidenceBadge=({level:e})=>{const n={established:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",label:"Established"},"case-reports":{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-300",label:"Case Reports"},theoretical:{bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-600 dark:text-gray-300",label:"Theoretical"}}[e];return jsxRuntimeExports.jsxs("span",{className:clsx("px-2 py-0.5 rounded text-xs font-medium",n.bg,n.text),children:[n.label," Evidence"]})},DrugInteractionsTab=({targets:e,pathways:t,compoundName:n})=>{const[i,o]=reactExports.useState(new Set),[l,h]=reactExports.useState("all"),d=getDrugInteractions(e,t),m=l==="all"?d:d.filter(R=>R.severity===l),b=R=>{const T=new Set(i);T.has(R)?T.delete(R):T.add(R),o(T)},v=()=>{o(new Set(m.map((R,T)=>T)))},w=()=>{o(new Set)},C={major:d.filter(R=>R.severity==="major").length,moderate:d.filter(R=>R.severity==="moderate").length,minor:d.filter(R=>R.severity==="minor").length};return jsxRuntimeExports.jsxs(Card,{className:"animate-slide-up",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Drug Interactions"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Potential interactions with ",n]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:C.major}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 block",children:"Major"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:C.moderate}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 block",children:"Moderate"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:C.minor}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 block",children:"Minor"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>h("all"),className:clsx("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",l==="all"?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:["All (",d.length,")"]}),jsxRuntimeExports.jsx("button",{onClick:()=>h("major"),className:clsx("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",l==="major"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Major"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("moderate"),className:clsx("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",l==="moderate"?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Moderate"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:v,className:"px-3 py-1.5 text-sm text-primary-600 dark:text-primary-400 hover:underline",children:"Expand All"}),jsxRuntimeExports.jsx("button",{onClick:w,className:"px-3 py-1.5 text-sm text-gray-500 dark:text-gray-400 hover:underline",children:"Collapse All"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[m.map((R,T)=>{const E=i.has(T);return jsxRuntimeExports.jsxs("div",{className:clsx("border rounded-xl overflow-hidden transition-all duration-200",R.severity==="major"&&"border-red-200 dark:border-red-800",R.severity==="moderate"&&"border-amber-200 dark:border-amber-800",R.severity==="minor"&&"border-blue-200 dark:border-blue-800",E&&"shadow-lg"),children:[jsxRuntimeExports.jsx("div",{onClick:()=>b(T),className:clsx("p-4 cursor-pointer transition-colors","hover:bg-gray-50 dark:hover:bg-gray-800/50"),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx(SeverityIcon,{severity:R.severity}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:R.drugClass}),jsxRuntimeExports.jsx(EvidenceBadge,{level:R.evidenceLevel})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:["Examples: ",R.examples.join(", ")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:clsx("px-2 py-1 rounded text-xs font-semibold uppercase",R.severity==="major"&&"bg-red-500 text-white",R.severity==="moderate"&&"bg-amber-500 text-white",R.severity==="minor"&&"bg-blue-500 text-white"),children:R.severity}),jsxRuntimeExports.jsx("button",{className:clsx("p-1 transition-transform duration-200",E&&"rotate-180"),children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),E&&jsxRuntimeExports.jsx("div",{className:"px-4 pb-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/30",children:jsxRuntimeExports.jsxs("div",{className:"pt-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h5",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:"AFFECTED DRUGS"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:R.examples.map((f,g)=>jsxRuntimeExports.jsx("span",{className:"px-2.5 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-full text-sm text-gray-700 dark:text-gray-300",children:f},g))})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-100 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h5",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"MECHANISM"]})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:R.mechanism}),jsxRuntimeExports.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded text-xs text-gray-500 dark:text-gray-400",children:R.interactionType})]}),jsxRuntimeExports.jsxs("div",{className:clsx("rounded-lg p-3 border",R.severity==="major"&&"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",R.severity==="moderate"&&"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",R.severity==="minor"&&"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"),children:[jsxRuntimeExports.jsx("h5",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"CLINICAL EFFECT"]})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:R.clinicalEffect})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-800",children:[jsxRuntimeExports.jsx("h5",{className:"text-xs font-semibold text-green-700 dark:text-green-300 mb-2",children:jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"RECOMMENDATION"]})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:R.recommendation})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h5",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"REFERENCES"]})}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:R.references.map((f,g)=>jsxRuntimeExports.jsx("li",{className:"text-xs text-gray-500 dark:text-gray-400 pl-3 border-l-2 border-gray-200 dark:border-gray-600",children:f},g))})]})]})})]},T)}),m.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No drug interactions found for the selected filter."})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("strong",{children:"Important:"})," This list is not exhaustive. Drug interactions depend on individual patient factors, dosages, and duration of use. Always consult a pharmacist or healthcare provider for personalized drug interaction checking. Clinical references are provided for educational purposes."]})})]})},LoadingOverlay=({compoundName:e})=>jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in",children:jsxRuntimeExports.jsxs(Card,{className:"p-8 text-center max-w-md mx-4",children:[jsxRuntimeExports.jsx(LoadingSpinner$1,{size:"lg",className:"mx-auto mb-4"}),jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Analyzing ",e||"compound","..."]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"This may take around 1 minute"}),jsxRuntimeExports.jsxs("div",{className:"mt-6 space-y-2 text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full mr-2 animate-pulse"}),"Resolving compound structure..."]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full mr-2 animate-pulse",style:{animationDelay:"0.2s"}}),"Finding targets in ChEMBL..."]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full mr-2 animate-pulse",style:{animationDelay:"0.4s"}}),"Mapping biological pathways..."]})]})]})}),LicensesModal=({isOpen:e,onClose:t})=>{if(!e)return null;const n=[{name:"PubChem",description:"Chemical compound data and structures",license:"Public Domain",url:"https://pubchem.ncbi.nlm.nih.gov/"},{name:"ChEMBL",description:"Bioactivity database of drug-like molecules",license:"CC BY-SA 3.0",url:"https://www.ebi.ac.uk/chembl/"},{name:"Reactome",description:"Pathway and reaction database",license:"CC BY 4.0",url:"https://reactome.org/"},{name:"Open Targets",description:"Drug target validation and pathway data",license:"Apache 2.0",url:"https://platform.opentargets.org/"},{name:"UniProt",description:"Protein sequence and functional information",license:"CC BY 4.0",url:"https://www.uniprot.org/"},{name:"RDKit",description:"Open-source cheminformatics toolkit",license:"BSD 3-Clause",url:"https://www.rdkit.org/"},{name:"3Dmol.js",description:"3D molecular visualization",license:"BSD 3-Clause",url:"https://3dmol.org/"}];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:jsxRuntimeExports.jsx("div",{onClick:i=>i.stopPropagation(),children:jsxRuntimeExports.jsxs(Card,{className:"max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Licenses & Attributions"}),jsxRuntimeExports.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"BioPath integrates data from multiple scientific databases and uses open-source tools. We gratefully acknowledge the following resources:"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:n.map(i=>jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:i.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.description})]}),jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded",children:i.license})]}),jsxRuntimeExports.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary-500 hover:text-primary-600 dark:hover:text-primary-400 mt-2 inline-block",children:i.url})]},i.name))}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"BioPath Application"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created by Dharsan Kesavan. This application is provided for educational and research purposes only. The information displayed is derived from public scientific databases and should not be used for medical diagnosis or treatment decisions."})]})]})]})})})},useAnalysisSync=()=>useMutation({mutationFn:analysisAPI.analyzeSync,onSuccess:e=>{const t=JSON.parse(localStorage.getItem("biopath_history")||"[]");t.unshift({ingredient_name:e.ingredient_name,timestamp:e.analysis_timestamp,pathways_count:e.pathways.length,targets_count:e.known_targets.length}),localStorage.setItem("biopath_history",JSON.stringify(t.slice(0,10)))}});function App(){const[e,t]=reactExports.useState("compound"),[n,i]=reactExports.useState(null),[o,l]=reactExports.useState(null),[h,d]=reactExports.useState(""),[m,b]=reactExports.useState("overview"),[v,w]=reactExports.useState(!1),[C,R]=reactExports.useState(!1),{theme:T,toggleTheme:E}=useTheme(),{mutate:f,isPending:g}=useAnalysisSync(),S=j=>{d(j.ingredient_name),i(null),b("overview"),f(j,{onSuccess:L=>{i(L)},onError:L=>{console.error("Analysis error:",L),alert(`Error: ${L.message}`)}})},O=()=>{i(null),l(null),d(""),b("overview")},D=j=>{l(j)},M=j=>{alert(`Error: ${j}`)},_=j=>{t(j),i(null),l(null),d("")},A=[{id:"overview",label:"Overview",icon:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"3d-structure",label:"3D Structure",icon:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})})},{id:"targets",label:"Targets",icon:jsxRuntimeExports.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]})},{id:"pathways",label:"Pathways",icon:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},{id:"side-effects",label:"Side Effects",icon:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})},{id:"drug-interactions",label:"Drug Interactions",icon:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen gradient-bg transition-colors duration-200",children:[(g||C)&&jsxRuntimeExports.jsx(LoadingOverlay,{compoundName:h||"plant"}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[jsxRuntimeExports.jsxs("header",{className:"mb-12 text-center relative",children:[jsxRuntimeExports.jsx("button",{onClick:E,className:"absolute right-0 top-0 p-2 rounded-lg bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm hover:bg-white dark:hover:bg-gray-700 transition-all shadow-lg glow-card","aria-label":`Switch to ${T==="light"?"dark":"light"} mode`,children:T==="light"?jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white float-animation",children:"BioPath"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-lg text-gray-600 dark:text-gray-400",children:"Chemical-Target-Pathway Analysis Platform"})]}),!n&&!o&&jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-8",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex rounded-lg bg-gray-100 dark:bg-gray-800 p-1",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>_("compound"),className:clsx("px-6 py-2 rounded-lg text-sm font-medium transition-all",e==="compound"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:""}),"Compound Search"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>_("plant"),className:clsx("px-6 py-2 rounded-lg text-sm font-medium transition-all",e==="plant"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:""}),"Plant Photo"]})]})}),jsxRuntimeExports.jsx("main",{children:o?jsxRuntimeExports.jsx(PlantAnalysisResults,{result:o,onNewAnalysis:O}):n?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(SummaryCard,{report:n}),jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsx("nav",{className:"flex space-x-4 overflow-x-auto","aria-label":"Tabs",children:A.map(j=>jsxRuntimeExports.jsxs("button",{onClick:()=>b(j.id),className:clsx("flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors",m===j.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"),children:[j.icon,j.label,j.id==="targets"&&n.known_targets.length>0&&jsxRuntimeExports.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full",children:n.known_targets.length}),j.id==="pathways"&&n.pathways.length>0&&jsxRuntimeExports.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full",children:n.pathways.length})]},j.id))})}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[m==="overview"&&jsxRuntimeExports.jsx(CompoundInfo,{compound:n.compound_identity}),m==="3d-structure"&&jsxRuntimeExports.jsx(MoleculeViewer,{compound:n.compound_identity}),m==="targets"&&(n.known_targets.length>0?jsxRuntimeExports.jsx(TargetsList,{targets:n.known_targets}):jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsx("p",{children:"No known targets found for this compound."})]})),m==="pathways"&&(n.pathways.length>0?jsxRuntimeExports.jsx(PathwaysList,{pathways:n.pathways}):jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsx("p",{children:"No pathways found for this compound."})]})),m==="side-effects"&&jsxRuntimeExports.jsx(SideEffectsTab,{targets:n.known_targets,pathways:n.pathways,compoundName:n.ingredient_name}),m==="drug-interactions"&&jsxRuntimeExports.jsx(DrugInteractionsTab,{targets:n.known_targets,pathways:n.pathways,compoundName:n.ingredient_name})]}),jsxRuntimeExports.jsx("div",{className:"text-center pt-4",children:jsxRuntimeExports.jsx("button",{onClick:O,className:"px-6 py-3 bg-primary-500 text-white font-medium rounded-lg hover:bg-primary-600 transition-colors duration-200",children:"New Analysis"})}),n.final_summary.disclaimer&&jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 text-sm text-gray-700 dark:text-gray-300",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-yellow-900 dark:text-yellow-400 mb-1",children:"Disclaimer"}),jsxRuntimeExports.jsx("p",{children:n.final_summary.disclaimer})]})]}):e==="compound"?jsxRuntimeExports.jsx(AnalysisForm,{onSubmit:S,isLoading:g}):jsxRuntimeExports.jsx(PlantIdentification,{onAnalysisComplete:D,onError:M,isLoading:C,setIsLoading:R})}),jsxRuntimeExports.jsxs("footer",{className:"mt-16 text-center text-sm text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("p",{children:["Created by ",jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Dharsan Kesavan"})]}),jsxRuntimeExports.jsx("p",{className:"mt-1",children:"Powered by PubChem, ChEMBL, Reactome, Open Targets, and PlantNet"}),jsxRuntimeExports.jsx("p",{className:"mt-1",children:"For research purposes only - Not medical advice"}),jsxRuntimeExports.jsx("p",{className:"mt-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>w(!0),className:"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400 underline",children:"Licenses & Attributions"})})]})]}),jsxRuntimeExports.jsx(LicensesModal,{isOpen:v,onClose:()=>w(!1)})]})}const queryClient=new QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}});ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(App,{})})})}));export{apiClient as a};
